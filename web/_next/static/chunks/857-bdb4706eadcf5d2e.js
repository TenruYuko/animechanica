"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[857],{1949:(e,t,n)=>{n.d(t,{$m:()=>S,As:()=>m,nD:()=>c,ub:()=>g});var r=n(95155),a=n(19749),l=n(10083),o=n(21335),i=n(12115),s=n(91360);let d=(0,s.u)({root:(0,o.F)(["UI-Accordion__root"]),header:(0,o.F)(["UI-Accordion__header","flex text-lg"]),trigger:(0,o.F)(["UI-Accordion__trigger","flex flex-1 items-center justify-between px-4 py-2 font-medium transition-all hover:bg-[--subtle] [&[data-state=open]>svg]:rotate-180"]),triggerIcon:(0,o.F)(["UI-Accordion__triggerIcon","h-4 w-4 shrink-0 transition-transform duration-200"]),item:(0,o.F)(["UI-Accordion__item",""]),contentContainer:(0,o.F)(["UI-Accordion__contentContainer","overflow-hidden transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down"]),content:(0,o.F)(["UI-Accordion__content","p-4"])}),u=i.createContext({}),c=i.forwardRef((e,t)=>{let n,o,i,c,m,S,g,b,v,p,y,f,h=(0,a.c)(25);return h[0]!==e?({className:n,headerClass:c,triggerClass:g,triggerIconClass:b,contentContainerClass:i,contentClass:o,itemClass:m,...S}=e,h[0]=e,h[1]=n,h[2]=o,h[3]=i,h[4]=c,h[5]=m,h[6]=S,h[7]=g,h[8]=b):(n=h[1],o=h[2],i=h[3],c=h[4],m=h[5],S=h[6],g=h[7],b=h[8]),h[9]!==o||h[10]!==i||h[11]!==c||h[12]!==m||h[13]!==g||h[14]!==b?(v={itemClass:m,headerClass:c,triggerClass:g,triggerIconClass:b,contentContainerClass:i,contentClass:o},h[9]=o,h[10]=i,h[11]=c,h[12]=m,h[13]=g,h[14]=b,h[15]=v):v=h[15],h[16]!==n?(p=(0,s.cn)(d.root(),n),h[16]=n,h[17]=p):p=h[17],h[18]!==t||h[19]!==S||h[20]!==p?(y=(0,r.jsx)(l.bL,{ref:t,className:p,...S}),h[18]=t,h[19]=S,h[20]=p,h[21]=y):y=h[21],h[22]!==v||h[23]!==y?(f=(0,r.jsx)(u.Provider,{value:v,children:y}),h[22]=v,h[23]=y,h[24]=f):f=h[24],f});c.displayName="Accordion";let m=i.forwardRef((e,t)=>{let n,o,c,m,S=(0,a.c)(10);S[0]!==e?({className:n,...o}=e,S[0]=e,S[1]=n,S[2]=o):(n=S[1],o=S[2]);let{itemClass:g}=i.useContext(u);return S[3]!==n||S[4]!==g?(c=(0,s.cn)(d.item(),g,n),S[3]=n,S[4]=g,S[5]=c):c=S[5],S[6]!==t||S[7]!==o||S[8]!==c?(m=(0,r.jsx)(l.q7,{ref:t,className:c,...o}),S[6]=t,S[7]=o,S[8]=c,S[9]=m):m=S[9],m});m.displayName="AccordionItem";let S=i.forwardRef((e,t)=>{let n,o,c,m,S,g,b,v,p,y,f,h,E=(0,a.c)(27);E[0]!==e?({className:o,headerClass:c,triggerIconClass:S,children:n,...m}=e,E[0]=e,E[1]=n,E[2]=o,E[3]=c,E[4]=m,E[5]=S):(n=E[1],o=E[2],c=E[3],m=E[4],S=E[5]);let{headerClass:D,triggerClass:C,triggerIconClass:T}=i.useContext(u);return E[6]!==D||E[7]!==c?(g=(0,s.cn)(d.header(),D,c),E[6]=D,E[7]=c,E[8]=g):g=E[8],E[9]!==C||E[10]!==o?(b=(0,s.cn)(d.trigger(),C,o),E[9]=C,E[10]=o,E[11]=b):b=E[11],E[12]!==T||E[13]!==S?(v=(0,s.cn)(d.triggerIcon(),T,S),E[12]=T,E[13]=S,E[14]=v):v=E[14],E[15]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"}),E[15]=p):p=E[15],E[16]!==v?(y=(0,r.jsx)("svg",{className:v,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p}),E[16]=v,E[17]=y):y=E[17],E[18]!==n||E[19]!==t||E[20]!==m||E[21]!==b||E[22]!==y?(f=(0,r.jsxs)(l.l9,{ref:t,className:b,...m,children:[n,y]}),E[18]=n,E[19]=t,E[20]=m,E[21]=b,E[22]=y,E[23]=f):f=E[23],E[24]!==g||E[25]!==f?(h=(0,r.jsx)(l.Y9,{className:g,children:f}),E[24]=g,E[25]=f,E[26]=h):h=E[26],h});S.displayName="AccordionTrigger";let g=i.forwardRef((e,t)=>{let n,o,c,m,S,g,b,v,p=(0,a.c)(19);p[0]!==e?({className:o,contentContainerClass:c,children:n,...m}=e,p[0]=e,p[1]=n,p[2]=o,p[3]=c,p[4]=m):(n=p[1],o=p[2],c=p[3],m=p[4]);let{contentContainerClass:y,contentClass:f}=i.useContext(u);return p[5]!==y||p[6]!==c?(S=(0,s.cn)(d.contentContainer(),y,c),p[5]=y,p[6]=c,p[7]=S):S=p[7],p[8]!==f||p[9]!==o?(g=(0,s.cn)(d.content(),f,o),p[8]=f,p[9]=o,p[10]=g):g=p[10],p[11]!==n||p[12]!==g?(b=(0,r.jsx)("div",{className:g,children:n}),p[11]=n,p[12]=g,p[13]=b):b=p[13],p[14]!==t||p[15]!==m||p[16]!==S||p[17]!==b?(v=(0,r.jsx)(l.UC,{ref:t,className:S,...m,children:b}),p[14]=t,p[15]=m,p[16]=S,p[17]=b,p[18]=v):v=p[18],v});g.displayName="AccordionContent"},7940:(e,t,n)=>{n.d(t,{QJ:()=>g,mM:()=>b});var r=n(95155),a=n(19749),l=n(50558),o=n(84127),i=n(91360),s=n(35354),d=n(42500),u=n(29724),c=n(12115),m=n(21410);let S=(0,d.eU)(!1);function g(e){let t,n,l,o,d=(0,a.c)(10),{isPending:g}=e,{isDirty:b}=(0,m.lN)(),v=(0,u.Xr)(S);d[0]!==b||d[1]!==v?(t=()=>{v(b)},d[0]=b,d[1]=v,d[2]=t):t=d[2],d[3]!==b?(n=[b],d[3]=b,d[4]=n):n=d[4],c.useEffect(t,n);let p=b&&"animate-pulse";return d[5]!==p?(l=(0,i.cn)("text-md",p),d[5]=p,d[6]=l):l=d[6],d[7]!==g||d[8]!==l?(o=(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.D0.Submit,{role:"save",size:"md",className:l,intent:"white",rounded:!0,loading:g,children:"Save"})}),d[7]=g,d[8]=l,d[9]=o):o=d[9],o}function b(e){let t,n=(0,a.c)(7),{className:d}=e,{isDirty:u,isLoading:c,isSubmitting:S,isValidating:g}=(0,m.lN)(),{reset:b}=(0,m.xW)();return n[0]!==d||n[1]!==u||n[2]!==c||n[3]!==S||n[4]!==g||n[5]!==b?(t=u?(0,r.jsx)(l.F,{intent:"info",className:(0,i.cn)("absolute -top-4 right-0 p-3 !mt-0 hidden lg:block",d),children:(0,r.jsxs)("div",{children:["You have unsaved changes. ",(0,r.jsx)(o.$n,{role:"save",size:"md",className:(0,i.cn)("text-md text-[--muted] py-0 h-5 px-1"),intent:"white-link",onClick:()=>b(),children:"Reset"})," ",(0,r.jsx)(s.D0.Submit,{role:"save",size:"md",className:(0,i.cn)("text-md py-0 h-5 px-1"),intent:"white-link",disabled:c||S||g,children:"Save"})]})}):null,n[0]=d,n[1]=u,n[2]=c,n[3]=S,n[4]=g,n[5]=b,n[6]=t):t=n[6],t}},9478:(e,t,n)=>{n.d(t,{D2:()=>b,My:()=>s,bU:()=>u,dO:()=>m,pZ:()=>d,sS:()=>c,uO:()=>S});var r=n(19749),a=n(7675),l=n(74889),o=n(46278),i=n(69554);function s(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:l.S.LOCALFILES.GetLocalFiles.endpoint,method:l.S.LOCALFILES.GetLocalFiles.methods[0],queryKey:[l.S.LOCALFILES.GetLocalFiles.key],enabled:!0},t[0]=e):e=t[0],(0,a.fl)(e)}function d(){let e,t,n=(0,r.c)(3),i=(0,o.jE)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[l.S.LOCALFILES.LocalFileBulkAction.key],n[0]=e):e=n[0],n[1]!==i?(t={endpoint:l.S.LOCALFILES.LocalFileBulkAction.endpoint,method:l.S.LOCALFILES.LocalFileBulkAction.methods[0],mutationKey:e,onSuccess:async()=>{await i.invalidateQueries({queryKey:[l.S.ANIME_COLLECTION.GetLibraryCollection.key]}),await i.invalidateQueries({queryKey:[l.S.ANIME_ENTRIES.GetAnimeEntry.key]})}},n[1]=i,n[2]=t):t=n[2],(0,a.qk)(t)}function u(){let e,t,n=(0,r.c)(3),i=(0,o.jE)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[l.S.LOCALFILES.UpdateLocalFiles.key],n[0]=e):e=n[0],n[1]!==i?(t={endpoint:l.S.LOCALFILES.UpdateLocalFiles.endpoint,method:l.S.LOCALFILES.UpdateLocalFiles.methods[0],mutationKey:e,onSuccess:async()=>{await i.invalidateQueries({queryKey:[l.S.ANIME_COLLECTION.GetLibraryCollection.key]}),await i.invalidateQueries({queryKey:[l.S.ANIME_ENTRIES.GetAnimeEntry.key]})}},n[1]=i,n[2]=t):t=n[2],(0,a.qk)(t)}function c(e){let t,n,s,d,u=(0,r.c)(9),c=(0,o.jE)();u[0]===Symbol.for("react.memo_cache_sentinel")?(t=[l.S.LOCALFILES.UpdateLocalFileData.key],u[0]=t):t=u[0],u[1]!==e||u[2]!==c?(n={endpoint:l.S.LOCALFILES.UpdateLocalFileData.endpoint,method:l.S.LOCALFILES.UpdateLocalFileData.methods[0],mutationKey:t,onSuccess:async()=>{i.oR.success("File metadata updated"),await c.invalidateQueries({queryKey:[l.S.ANIME_COLLECTION.GetLibraryCollection.key]}),e&&await c.invalidateQueries({queryKey:[l.S.ANIME_ENTRIES.GetAnimeEntry.key,String(e)]})}},u[1]=e,u[2]=c,u[3]=n):n=u[3];let m=(0,a.qk)(n);return u[4]!==m?(s=(e,t,n)=>{m.mutate({path:e.path,metadata:e.metadata,locked:e.locked,ignored:e.ignored,mediaId:e.mediaId,...t},{onSuccess:()=>null==n?void 0:n()})},u[4]=m,u[5]=s):s=u[5],u[6]!==m||u[7]!==s?(d={updateLocalFile:s,...m},u[6]=m,u[7]=s,u[8]=d):d=u[8],d}function m(e){let t,n,s=(0,r.c)(4),d=(0,o.jE)();return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=[l.S.LOCALFILES.DeleteLocalFiles.key],s[0]=t):t=s[0],s[1]!==e||s[2]!==d?(n={endpoint:l.S.LOCALFILES.DeleteLocalFiles.endpoint,method:l.S.LOCALFILES.DeleteLocalFiles.methods[0],mutationKey:t,onSuccess:async()=>{i.oR.success("Files deleted"),await d.invalidateQueries({queryKey:[l.S.ANIME_COLLECTION.GetLibraryCollection.key]}),e&&await d.invalidateQueries({queryKey:[l.S.ANIME_ENTRIES.GetAnimeEntry.key,String(e)]})}},s[1]=e,s[2]=d,s[3]=n):n=s[3],(0,a.qk)(n)}function S(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:l.S.LOCALFILES.RemoveEmptyDirectories.endpoint,method:l.S.LOCALFILES.RemoveEmptyDirectories.methods[0],mutationKey:[l.S.LOCALFILES.RemoveEmptyDirectories.key],onSuccess:g},t[0]=e):e=t[0],(0,a.qk)(e)}async function g(){i.oR.success("Empty directories removed")}function b(){let e,t,n=(0,r.c)(3),s=(0,o.jE)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[l.S.LOCALFILES.ImportLocalFiles.key],n[0]=e):e=n[0],n[1]!==s?(t={endpoint:l.S.LOCALFILES.ImportLocalFiles.endpoint,method:l.S.LOCALFILES.ImportLocalFiles.methods[0],mutationKey:e,onSuccess:async()=>{await s.invalidateQueries({queryKey:[l.S.ANIME_COLLECTION.GetLibraryCollection.key]}),await s.invalidateQueries({queryKey:[l.S.ANIME_ENTRIES.GetAnimeEntry.key]}),i.oR.success("Local files imported")}},n[1]=s,n[2]=t):t=n[2],(0,a.qk)(t)}},15155:(e,t,n)=>{n.d(t,{$m:()=>r.$m,As:()=>r.As,nD:()=>r.nD,ub:()=>r.ub});var r=n(1949)},23391:(e,t,n)=>{n.d(t,{tH:()=>p,tU:()=>c,av:()=>g,j7:()=>m,Xi:()=>S});var r=n(95155),a=n(19749),l=n(82889),o=n(21335),i=n(12115),s=n(91360);let d=(0,s.u)({root:(0,o.F)(["UI-Tabs__root"]),list:(0,o.F)(["UI-Tabs__list","inline-flex h-12 items-center justify-center w-full"]),trigger:(0,o.F)(["UI-Tabs__trigger appearance-none shadow-none","inline-flex h-full items-center justify-center whitespace-nowrap px-3 py-1.5 text-sm text-[--muted] font-medium ring-offset-[--background]","transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","border-transparent border-b-2 -mb-px","data-[state=active]:border-[--brand] data-[state=active]:text-[--foreground]"]),content:(0,o.F)(["UI-Tabs__content","ring-offset-[--background]","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[--ring] focus-visible:ring-offset-2"])}),u=i.createContext({}),c=i.forwardRef((e,t)=>{let n,o,i,c,m,S,g,b,v,p=(0,a.c)(19);return p[0]!==e?({className:n,listClass:i,triggerClass:m,contentClass:o,...c}=e,p[0]=e,p[1]=n,p[2]=o,p[3]=i,p[4]=c,p[5]=m):(n=p[1],o=p[2],i=p[3],c=p[4],m=p[5]),p[6]!==o||p[7]!==i||p[8]!==m?(S={listClass:i,triggerClass:m,contentClass:o},p[6]=o,p[7]=i,p[8]=m,p[9]=S):S=p[9],p[10]!==n?(g=(0,s.cn)(d.root(),n),p[10]=n,p[11]=g):g=p[11],p[12]!==t||p[13]!==c||p[14]!==g?(b=(0,r.jsx)(l.bL,{ref:t,className:g,...c}),p[12]=t,p[13]=c,p[14]=g,p[15]=b):b=p[15],p[16]!==S||p[17]!==b?(v=(0,r.jsx)(u.Provider,{value:S,children:b}),p[16]=S,p[17]=b,p[18]=v):v=p[18],v});c.displayName="Tabs";let m=i.forwardRef((e,t)=>{let n,o,c,m,S=(0,a.c)(10);S[0]!==e?({className:n,...o}=e,S[0]=e,S[1]=n,S[2]=o):(n=S[1],o=S[2]);let{listClass:g}=i.useContext(u);return S[3]!==n||S[4]!==g?(c=(0,s.cn)(d.list(),g,n),S[3]=n,S[4]=g,S[5]=c):c=S[5],S[6]!==t||S[7]!==o||S[8]!==c?(m=(0,r.jsx)(l.B8,{ref:t,className:c,...o}),S[6]=t,S[7]=o,S[8]=c,S[9]=m):m=S[9],m});m.displayName="TabsList";let S=i.forwardRef((e,t)=>{let n,o,c,m,S=(0,a.c)(10);S[0]!==e?({className:n,...o}=e,S[0]=e,S[1]=n,S[2]=o):(n=S[1],o=S[2]);let{triggerClass:g}=i.useContext(u);return S[3]!==n||S[4]!==g?(c=(0,s.cn)(d.trigger(),g,n),S[3]=n,S[4]=g,S[5]=c):c=S[5],S[6]!==t||S[7]!==o||S[8]!==c?(m=(0,r.jsx)(l.l9,{ref:t,className:c,...o}),S[6]=t,S[7]=o,S[8]=c,S[9]=m):m=S[9],m});S.displayName="TabsTrigger";let g=i.forwardRef((e,t)=>{let n,o,c,m,S=(0,a.c)(10);S[0]!==e?({className:n,...o}=e,S[0]=e,S[1]=n,S[2]=o):(n=S[1],o=S[2]);let{contentClass:g}=i.useContext(u);return S[3]!==n||S[4]!==g?(c=(0,s.cn)(d.content(),g,n),S[3]=n,S[4]=g,S[5]=c):c=S[5],S[6]!==t||S[7]!==o||S[8]!==c?(m=(0,r.jsx)(l.UC,{ref:t,className:c,...o}),S[6]=t,S[7]=o,S[8]=c,S[9]=m):m=S[9],m});g.displayName="TabsContent";var b=n(5249);let v=(0,s.u)({root:(0,o.F)(["UI-StaticTabs__root","flex w-full overflow-hidden overflow-x-auto"]),trigger:(0,o.F)(["UI-StaticTabs__trigger","group/staticTabs__trigger inline-flex flex-none shrink-0 basis-auto items-center font-medium text-sm transition outline-none min-w-0 justify-center","text-[--muted] hover:text-[--foreground]","h-10 px-4 rounded-full","data-[current=true]:bg-[--subtle] data-[current=true]:font-semibold data-[current=true]:text-[--foreground]","focus-visible:bg-[--subtle]"]),icon:(0,o.F)(["UI-StaticTabs__icon","-ml-0.5 mr-2 h-4 w-4"])}),p=i.forwardRef((e,t)=>{let n,l,o,i,d,u,c,m,S=(0,a.c)(20);if(S[0]!==e){let{children:t,className:r,triggerClass:a,iconClass:s,items:u,...c}=e;n=r,d=a,l=s,o=u,i=c,S[0]=e,S[1]=n,S[2]=l,S[3]=o,S[4]=i,S[5]=d}else n=S[1],l=S[2],o=S[3],i=S[4],d=S[5];if(S[6]!==n?(u=(0,s.cn)(v.root(),n),S[6]=n,S[7]=u):u=S[7],S[8]!==l||S[9]!==o||S[10]!==d){let e;S[12]!==l||S[13]!==d?(e=e=>{var t;return e.href?(0,r.jsxs)(b.i,{href:null!=(t=e.href)?t:"#",className:(0,s.cn)(v.trigger(),d),"aria-current":e.isCurrent?"page":void 0,"data-current":e.isCurrent,children:[e.iconType&&(0,r.jsx)(e.iconType,{className:(0,s.cn)(v.icon(),l),"aria-hidden":"true","data-current":e.isCurrent}),(0,r.jsx)("span",{children:e.name})]},e.name):(0,r.jsxs)("div",{className:(0,s.cn)(v.trigger(),"cursor-pointer",d),"aria-current":e.isCurrent?"page":void 0,"data-current":e.isCurrent,onClick:e.onClick,children:[e.iconType&&(0,r.jsx)(e.iconType,{className:(0,s.cn)(v.icon(),l),"aria-hidden":"true","data-current":e.isCurrent}),(0,r.jsx)("span",{children:e.name})]},e.name)},S[12]=l,S[13]=d,S[14]=e):e=S[14],c=o.map(e),S[8]=l,S[9]=o,S[10]=d,S[11]=c}else c=S[11];return S[15]!==t||S[16]!==i||S[17]!==u||S[18]!==c?(m=(0,r.jsx)("nav",{ref:t,className:u,role:"navigation",...i,children:c}),S[15]=t,S[16]=i,S[17]=u,S[18]=c,S[19]=m):m=S[19],m});p.displayName="StaticTabs"},35243:(e,t,n)=>{n.d(t,{k:()=>O,E:()=>j});var r=n(95155),a=n(19749),l=n(7675),o=n(74889),i=n(46278),s=n(69554),d=n(39758),u=n(1949),c=n(50558),m=n(84127),S=n(91360),g=n(35354),b=n(60695),v=n(23391),p=n(85210),y=n(91332);let f=[{name:"Seanime",backgroundColor:"#070707",accentColor:"#6152df"},{name:"Midnight",backgroundColor:"#000",accentColor:"#5649bb"},{name:"Deep purple",backgroundColor:"#0a050d",accentColor:"#8659c9"},{name:"Desert flower",backgroundColor:"#090e11",accentColor:"#c08b57"},{name:"Pink",backgroundColor:"#0f060c",accentColor:"#ec74b0"},{name:"Sun",backgroundColor:"#0b0803",accentColor:"#e5972a"},{name:"JJK",backgroundColor:"#0c0d10",accentColor:"#8c1d1d"},{name:"Rainforest",backgroundColor:"#050d0c",accentColor:"#1d975a"}];var h=n(41459),E=n(42500),D=n(29724),C=n(21842),T=n(12115),x=n(21410),R=n(37817),A=n(68585),w=n(7940),_=n(38310);let k=(0,g.Jo)(e=>{let{z:t}=e;return t.object({animeEntryScreenLayout:t.string().min(0).default(y.HK.animeEntryScreenLayout),smallerEpisodeCarouselSize:t.boolean().default(y.HK.smallerEpisodeCarouselSize),expandSidebarOnHover:t.boolean().default(y.HK.expandSidebarOnHover),enableColorSettings:t.boolean().default(!1),backgroundColor:t.string().min(0).default(y.HK.backgroundColor).transform(e=>e.trim()),accentColor:t.string().min(0).default(y.HK.accentColor).transform(e=>e.trim()),sidebarBackgroundColor:t.string().min(0).default(y.HK.sidebarBackgroundColor),hideTopNavbar:t.boolean().default(y.HK.hideTopNavbar),enableMediaCardBlurredBackground:t.boolean().default(y.HK.enableMediaCardBlurredBackground),libraryScreenBannerType:t.string().default(y.HK.libraryScreenBannerType),libraryScreenCustomBannerImage:t.string().default(y.HK.libraryScreenCustomBannerImage),libraryScreenCustomBannerPosition:t.string().default(y.HK.libraryScreenCustomBannerPosition),libraryScreenCustomBannerOpacity:t.number().transform(e=>0===e?100:e).default(y.HK.libraryScreenCustomBannerOpacity),libraryScreenCustomBackgroundImage:t.string().default(y.HK.libraryScreenCustomBackgroundImage),libraryScreenCustomBackgroundOpacity:t.number().transform(e=>0===e?100:e).default(y.HK.libraryScreenCustomBackgroundOpacity),libraryScreenCustomBackgroundBlur:t.string().default(y.HK.libraryScreenCustomBackgroundBlur),enableMediaPageBlurredBackground:t.boolean().default(y.HK.enableMediaPageBlurredBackground),disableSidebarTransparency:t.boolean().default(y.HK.disableSidebarTransparency),disableLibraryScreenGenreSelector:t.boolean().default(!1),useLegacyEpisodeCard:t.boolean().default(y.HK.useLegacyEpisodeCard),disableCarouselAutoScroll:t.boolean().default(y.HK.disableCarouselAutoScroll),mediaPageBannerType:t.string().default(y.HK.mediaPageBannerType),mediaPageBannerSize:t.string().default(y.HK.mediaPageBannerSize),mediaPageBannerInfoBoxSize:t.string().default(y.HK.mediaPageBannerInfoBoxSize),showEpisodeCardAnimeInfo:t.boolean().default(y.HK.showEpisodeCardAnimeInfo),continueWatchingDefaultSorting:t.string().default(y.HK.continueWatchingDefaultSorting),animeLibraryCollectionDefaultSorting:t.string().default(y.HK.animeLibraryCollectionDefaultSorting),mangaLibraryCollectionDefaultSorting:t.string().default(y.HK.mangaLibraryCollectionDefaultSorting),showAnimeUnwatchedCount:t.boolean().default(y.HK.showAnimeUnwatchedCount),showMangaUnreadCount:t.boolean().default(y.HK.showMangaUnreadCount),hideEpisodeCardDescription:t.boolean().default(y.HK.hideEpisodeCardDescription),hideDownloadedEpisodeCardFilename:t.boolean().default(y.HK.hideDownloadedEpisodeCardFilename),customCSS:t.string().default(y.HK.customCSS),mobileCustomCSS:t.string().default(y.HK.mobileCustomCSS)})}),j=(0,C.tG)("sea-ui-settings-fix-border-rendering-artifacts",!1),L=(0,E.eU)("main"),I=(0,S.cn)("w-full contents space-y-4"),N=(0,S.cn)("text-base px-6 rounded-[--radius-md] w-fit border-none data-[state=active]:bg-[--subtle] data-[state=active]:text-white dark:hover:text-white","h-10 lg:justify-center px-3 flex-1"),B=(0,S.cn)("w-full flex flex-row lg:flex-row flex-wrap h-fit");function O(){var e,t,n;let E=(0,y.Ky)(),C=(0,R.v1)(),{mutate:O,isPending:M}=function(){let e,t,n=(0,a.c)(3),r=(0,i.jE)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[o.S.THEME.UpdateTheme.key],n[0]=e):e=n[0],n[1]!==r?(t={endpoint:o.S.THEME.UpdateTheme.endpoint,method:o.S.THEME.UpdateTheme.methods[0],mutationKey:e,onSuccess:async()=>{await r.invalidateQueries({queryKey:[o.S.STATUS.GetStatus.key]}),s.oR.success("UI settings saved")}},n[1]=r,n[2]=t):t=n[2],(0,l.qk)(t)}(),[P,K]=(0,D.fp)(j),[H,F]=(0,T.useState)(!1),[U,G]=(0,D.fp)(L),q=T.useRef(null),{customCSS:W,setCustomCSS:z}=(0,d.a)(),Q=T.useCallback((e,t)=>{if(!H)return;let n=document.querySelector(":root");n.style.setProperty("--background",e),n.style.setProperty("--paper",(0,h.Mj)(e).lighten(.025).toHex()),n.style.setProperty("--media-card-popup-background",(0,h.Mj)(e).lighten(.025).toHex()),n.style.setProperty("--hover-from-background-color",(0,h.Mj)(e).lighten(.025).desaturate(.05).toHex()),n.style.setProperty("--color-gray-400","".concat((0,h.Mj)(e).lighten(.3).desaturate(.2).toRgb().r," ").concat((0,h.Mj)(e).lighten(.3).desaturate(.2).toRgb().g," ").concat((0,h.Mj)(e).lighten(.3).desaturate(.2).toRgb().b)),n.style.setProperty("--color-gray-500","".concat((0,h.Mj)(e).lighten(.15).desaturate(.2).toRgb().r," ").concat((0,h.Mj)(e).lighten(.15).desaturate(.2).toRgb().g," ").concat((0,h.Mj)(e).lighten(.15).desaturate(.2).toRgb().b)),n.style.setProperty("--color-gray-600","".concat((0,h.Mj)(e).lighten(.1).desaturate(.2).toRgb().r," ").concat((0,h.Mj)(e).lighten(.1).desaturate(.2).toRgb().g," ").concat((0,h.Mj)(e).lighten(.1).desaturate(.2).toRgb().b)),n.style.setProperty("--color-gray-700","".concat((0,h.Mj)(e).lighten(.08).desaturate(.2).toRgb().r," ").concat((0,h.Mj)(e).lighten(.08).desaturate(.2).toRgb().g," ").concat((0,h.Mj)(e).lighten(.08).desaturate(.2).toRgb().b)),n.style.setProperty("--color-gray-800","".concat((0,h.Mj)(e).lighten(.06).desaturate(.2).toRgb().r," ").concat((0,h.Mj)(e).lighten(.06).desaturate(.2).toRgb().g," ").concat((0,h.Mj)(e).lighten(.06).desaturate(.2).toRgb().b)),n.style.setProperty("--color-gray-900","".concat((0,h.Mj)(e).lighten(.04).desaturate(.05).toRgb().r," ").concat((0,h.Mj)(e).lighten(.04).desaturate(.05).toRgb().g," ").concat((0,h.Mj)(e).lighten(.04).desaturate(.05).toRgb().b)),n.style.setProperty("--color-gray-950","".concat((0,h.Mj)(e).lighten(.008).desaturate(.05).toRgb().r," ").concat((0,h.Mj)(e).lighten(.008).desaturate(.05).toRgb().g," ").concat((0,h.Mj)(e).lighten(.008).desaturate(.05).toRgb().b)),n.style.setProperty("--color-brand-200","".concat((0,h.Mj)(t).lighten(.35).desaturate(.05).toRgb().r," ").concat((0,h.Mj)(t).lighten(.35).desaturate(.05).toRgb().g," ").concat((0,h.Mj)(t).lighten(.35).desaturate(.05).toRgb().b)),n.style.setProperty("--color-brand-300","".concat((0,h.Mj)(t).lighten(.3).desaturate(.05).toRgb().r," ").concat((0,h.Mj)(t).lighten(.3).desaturate(.05).toRgb().g," ").concat((0,h.Mj)(t).lighten(.3).desaturate(.05).toRgb().b)),n.style.setProperty("--color-brand-400","".concat((0,h.Mj)(t).lighten(.1).toRgb().r," ").concat((0,h.Mj)(t).lighten(.1).toRgb().g," ").concat((0,h.Mj)(t).lighten(.1).toRgb().b)),n.style.setProperty("--color-brand-500","".concat((0,h.Mj)(t).toRgb().r," ").concat((0,h.Mj)(t).toRgb().g," ").concat((0,h.Mj)(t).toRgb().b)),n.style.setProperty("--color-brand-600","".concat((0,h.Mj)(t).darken(.1).toRgb().r," ").concat((0,h.Mj)(t).darken(.1).toRgb().g," ").concat((0,h.Mj)(t).darken(.1).toRgb().b)),n.style.setProperty("--color-brand-700","".concat((0,h.Mj)(t).darken(.15).toRgb().r," ").concat((0,h.Mj)(t).darken(.15).toRgb().g," ").concat((0,h.Mj)(t).darken(.15).toRgb().b)),n.style.setProperty("--color-brand-800","".concat((0,h.Mj)(t).darken(.2).toRgb().r," ").concat((0,h.Mj)(t).darken(.2).toRgb().g," ").concat((0,h.Mj)(t).darken(.2).toRgb().b)),n.style.setProperty("--color-brand-900","".concat((0,h.Mj)(t).darken(.25).toRgb().r," ").concat((0,h.Mj)(t).darken(.25).toRgb().g," ").concat((0,h.Mj)(t).darken(.25).toRgb().b)),n.style.setProperty("--color-brand-950","".concat((0,h.Mj)(t).darken(.3).toRgb().r," ").concat((0,h.Mj)(t).darken(.3).toRgb().g," ").concat((0,h.Mj)(t).darken(.3).toRgb().b)),n.style.setProperty("--brand",(0,h.Mj)(t).lighten(.35).desaturate(.1).toHex())},[H]);function X(){let e=(0,x.xW)(),t=(0,x.FH)({control:e.control,name:"accentColor"}),n=(0,x.FH)({control:e.control,name:"backgroundColor"});return T.useEffect(()=>{H&&Q(n,t)},[H,n,t]),null}return(0,r.jsx)(g.lV,{schema:k,mRef:q,onSubmit:e=>{if((0,h.Mj)(e.backgroundColor).isLight())return void s.oR.error("Seanime does not support light themes");let t=null==E?void 0:E.enableColorSettings;O({theme:{id:0,...E,...e,libraryScreenCustomBackgroundBlur:"-"===e.libraryScreenCustomBackgroundBlur?"":e.libraryScreenCustomBackgroundBlur}},{onSuccess(){var n,r;e.enableColorSettings===t||e.enableColorSettings||window.location.reload(),null==(r=q.current)||r.reset(null==(n=q.current)?void 0:n.getValues())}}),z({customCSS:e.customCSS,mobileCustomCSS:e.mobileCustomCSS})},defaultValues:{enableColorSettings:null==E?void 0:E.enableColorSettings,animeEntryScreenLayout:null==E?void 0:E.animeEntryScreenLayout,smallerEpisodeCarouselSize:null==E?void 0:E.smallerEpisodeCarouselSize,expandSidebarOnHover:null==E?void 0:E.expandSidebarOnHover,backgroundColor:null==E?void 0:E.backgroundColor,accentColor:null==E?void 0:E.accentColor,sidebarBackgroundColor:null==E?void 0:E.sidebarBackgroundColor,hideTopNavbar:null==E?void 0:E.hideTopNavbar,enableMediaCardBlurredBackground:null==E?void 0:E.enableMediaCardBlurredBackground,libraryScreenBannerType:null==E?void 0:E.libraryScreenBannerType,libraryScreenCustomBannerImage:null==E?void 0:E.libraryScreenCustomBannerImage,libraryScreenCustomBannerPosition:null==E?void 0:E.libraryScreenCustomBannerPosition,libraryScreenCustomBannerOpacity:null==E?void 0:E.libraryScreenCustomBannerOpacity,libraryScreenCustomBackgroundImage:null==E?void 0:E.libraryScreenCustomBackgroundImage,libraryScreenCustomBackgroundOpacity:null==E?void 0:E.libraryScreenCustomBackgroundOpacity,disableLibraryScreenGenreSelector:null==E?void 0:E.disableLibraryScreenGenreSelector,libraryScreenCustomBackgroundBlur:(null==E?void 0:E.libraryScreenCustomBackgroundBlur)||"-",enableMediaPageBlurredBackground:null==E?void 0:E.enableMediaPageBlurredBackground,disableSidebarTransparency:null==E?void 0:E.disableSidebarTransparency,useLegacyEpisodeCard:null==E?void 0:E.useLegacyEpisodeCard,disableCarouselAutoScroll:null==E?void 0:E.disableCarouselAutoScroll,mediaPageBannerType:null!=(e=null==E?void 0:E.mediaPageBannerType)?e:y.px.Default,mediaPageBannerSize:null!=(t=null==E?void 0:E.mediaPageBannerSize)?t:y.px.Default,mediaPageBannerInfoBoxSize:null!=(n=null==E?void 0:E.mediaPageBannerInfoBoxSize)?n:y.px.Default,showEpisodeCardAnimeInfo:null==E?void 0:E.showEpisodeCardAnimeInfo,continueWatchingDefaultSorting:null==E?void 0:E.continueWatchingDefaultSorting,animeLibraryCollectionDefaultSorting:null==E?void 0:E.animeLibraryCollectionDefaultSorting,mangaLibraryCollectionDefaultSorting:null==E?void 0:E.mangaLibraryCollectionDefaultSorting,showAnimeUnwatchedCount:null==E?void 0:E.showAnimeUnwatchedCount,showMangaUnreadCount:null==E?void 0:E.showMangaUnreadCount,hideEpisodeCardDescription:null==E?void 0:E.hideEpisodeCardDescription,hideDownloadedEpisodeCardFilename:null==E?void 0:E.hideDownloadedEpisodeCardFilename,customCSS:null==E?void 0:E.customCSS,mobileCustomCSS:null==E?void 0:E.mobileCustomCSS},stackClass:"space-y-4 relative",children:e=>{var t,n,a,l,o,i,d,h;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.mM,{className:"-top-14"}),(0,r.jsx)(X,{}),(0,r.jsxs)(v.tU,{value:U,onValueChange:G,className:I,triggerClass:N,listClass:B,children:[(0,r.jsxs)(v.j7,{className:"flex-wrap max-w-full bg-[--paper] p-2 border rounded-lg",children:[(0,r.jsx)(v.Xi,{value:"main",children:"Theme"}),(0,r.jsx)(v.Xi,{value:"media",children:"Media"}),(0,r.jsx)(v.Xi,{value:"navigation",children:"Navigation"}),(0,r.jsx)(v.Xi,{value:"browser-client",children:"Rendering"})]}),(0,r.jsxs)(v.av,{value:"main",className:"space-y-4",children:[(0,r.jsxs)(A.K,{title:"Color scheme",children:[(0,r.jsx)(g.D0.Switch,{side:"right",label:"Enable color settings",name:"enableColorSettings"}),e.watch("enableColorSettings")&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.d,{side:"right",label:"Live preview",name:"enableLivePreview",help:H&&"Disabling will reload the page without applying the changes.",value:H,onValueChange:t=>{F(t),t?Q(e.watch("backgroundColor"),e.watch("accentColor")):window.location.reload()}}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,r.jsx)(g.D0.ColorPicker,{name:"backgroundColor",label:"Background color",help:"Default: #070707"}),(0,r.jsx)(g.D0.ColorPicker,{name:"accentColor",label:"Accent color",help:"Default: #6152df"})]})]}),e.watch("enableColorSettings")&&(0,r.jsx)("div",{className:"flex flex-wrap gap-3 w-full",children:f.map(t=>(0,r.jsx)("div",{className:(0,S.cn)("flex gap-3 items-center w-fit rounded-full border p-1 cursor-pointer",E.backgroundColor===t.backgroundColor&&E.accentColor===t.accentColor&&"border-[--brand] ring-[--brand] ring-offset-1 ring-offset-[--background]"),onClick:()=>{e.setValue("backgroundColor",t.backgroundColor),e.setValue("accentColor",t.accentColor),H?Q(t.backgroundColor,t.accentColor):O({theme:{id:0,...E,enableColorSettings:!0,backgroundColor:t.backgroundColor,accentColor:t.accentColor}},{onSuccess(){var e,t;null==(t=q.current)||t.reset(null==(e=q.current)?void 0:e.getValues())}})},children:(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)("div",{className:"w-6 h-6 rounded-full border",style:{backgroundColor:t.backgroundColor}}),(0,r.jsx)("div",{className:"w-6 h-6 rounded-full border",style:{backgroundColor:t.accentColor}})]})},t.name))})]}),(0,r.jsx)(A.K,{title:"Background image",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,r.jsx)(g.D0.Text,{label:"Image path",name:"libraryScreenCustomBackgroundImage",placeholder:"e.g., image.png",help:"Background image for all pages. Dimmed on non-library screens."}),(0,r.jsx)(g.D0.Number,{label:"Opacity",name:"libraryScreenCustomBackgroundOpacity",placeholder:"Default: 10",min:1,max:100})]})}),(0,r.jsx)(A.K,{title:"Banner image",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,r.jsx)(g.D0.Text,{label:"Image path",name:"libraryScreenCustomBannerImage",placeholder:"e.g., image.gif",help:"Banner image for all pages."}),(0,r.jsx)(g.D0.Text,{label:"Position",name:"libraryScreenCustomBannerPosition",placeholder:"Default: 50% 50%"}),(0,r.jsx)(g.D0.Number,{label:"Opacity",name:"libraryScreenCustomBannerOpacity",placeholder:"Default: 10",min:1,max:100})]})}),(0,r.jsx)(u.nD,{type:"single",collapsible:!0,className:"border rounded-[--radius-md]",triggerClass:"dark:bg-[--paper]",contentClass:"!pt-2 dark:bg-[--paper]",children:(0,r.jsxs)(u.As,{value:"more",children:[(0,r.jsx)(u.$m,{className:"bg-gray-900 rounded-[--radius-md]",children:"Advanced"}),(0,r.jsxs)(u.ub,{className:"space-y-4",children:[(null==C||null==(t=C.themeSettings)?void 0:t.customCSS)!==W.customCSS||(null==C||null==(n=C.themeSettings)?void 0:n.mobileCustomCSS)!==W.mobileCustomCSS&&(0,r.jsx)(m.$n,{intent:"white",disabled:(null==C||null==(a=C.themeSettings)?void 0:a.customCSS)===W.customCSS&&(null==C||null==(l=C.themeSettings)?void 0:l.mobileCustomCSS)===W.mobileCustomCSS,onClick:()=>{var e,t;z({customCSS:(null==C||null==(e=C.themeSettings)?void 0:e.customCSS)||"",mobileCustomCSS:(null==C||null==(t=C.themeSettings)?void 0:t.mobileCustomCSS)||""})},children:"Apply to this client"}),(0,r.jsxs)("p",{className:"text-[--muted] text-sm",children:["The custom CSS will be saved on the server and needs to be applied manually to each client.",(0,r.jsx)("br",{}),"In case of an error rendering the UI unusable, you can always remove it from the local storage using the devtools."]}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,r.jsx)(g.D0.Textarea,{label:"Custom CSS",name:"customCSS",placeholder:"Custom CSS",help:"Applied above 1024px screen size."}),(0,r.jsx)(g.D0.Textarea,{label:"Mobile custom CSS",name:"mobileCustomCSS",placeholder:"Custom CSS",help:"Applied below 1024px screen size."})]})]})]})})]}),(0,r.jsxs)(v.av,{value:"navigation",className:"space-y-4",children:[(0,r.jsxs)(A.K,{title:"Sidebar",children:[(0,r.jsx)(g.D0.Switch,{side:"right",label:"Expand sidebar on hover",name:"expandSidebarOnHover",help:"Causes visual glitches with plugin tray."}),(0,r.jsx)(g.D0.Switch,{side:"right",label:"Disable transparency",name:"disableSidebarTransparency"})]}),(0,r.jsx)(A.K,{title:"Navbar",children:(0,r.jsx)(g.D0.Switch,{side:"right",label:"desktop"===_.env.NEXT_PUBLIC_PLATFORM?"Hide top navbar (Web interface)":"Hide top navbar",name:"hideTopNavbar",help:"Switches to sidebar-only mode."})})]}),(0,r.jsxs)(v.av,{value:"media",className:"space-y-4",children:[(0,r.jsxs)(A.K,{title:"Collection screens",children:[!(null==C||null==(i=C.settings)||null==(o=i.library)?void 0:o.enableWatchContinuity)&&(e.watch("continueWatchingDefaultSorting").includes("LAST_WATCHED")||e.watch("animeLibraryCollectionDefaultSorting").includes("LAST_WATCHED"))&&(0,r.jsx)(c.F,{intent:"alert",description:"Watch continuity needs to be enabled to use the last watched sorting options."}),(0,r.jsx)(g.D0.RadioCards,{label:"Banner type",name:"libraryScreenBannerType",options:[{label:"Dynamic Banner",value:"dynamic"},{label:"Custom Banner",value:"custom"},{label:"None",value:"none"}],stackClass:"flex flex-col md:flex-row flex-wrap gap-2 space-y-0",help:e.watch("libraryScreenBannerType")===y.H4.Custom&&"Use the banner image on all library screens."}),(0,r.jsx)(g.D0.Switch,{side:"right",label:"Remove genre selector",name:"disableLibraryScreenGenreSelector"}),(0,r.jsx)(g.D0.Select,{label:"Continue watching sorting",name:"continueWatchingDefaultSorting",options:p.co.map(e=>({value:e.value,label:e.label}))}),(0,r.jsx)(g.D0.Select,{label:"Anime library sorting",name:"animeLibraryCollectionDefaultSorting",options:p.wi.filter(e=>!e.value.includes("END")).map(e=>({value:e.value,label:e.label}))}),(0,r.jsx)(g.D0.Select,{label:"Manga library sorting",name:"mangaLibraryCollectionDefaultSorting",options:p.I4.filter(e=>!e.value.includes("END")).map(e=>({value:e.value,label:e.label}))})]}),(0,r.jsxs)(A.K,{title:"Media page",children:[(0,r.jsx)(g.D0.RadioCards,{label:"AniList banner image",name:"mediaPageBannerType",options:y.$O.map(e=>({value:e.value,label:e.label})),stackClass:"flex flex-col md:flex-row flex-wrap gap-2 space-y-0",help:null==(d=y.$O.find(t=>t.value===e.watch("mediaPageBannerType")))?void 0:d.description}),(0,r.jsx)(g.D0.RadioCards,{label:"Banner size",name:"mediaPageBannerSize",options:y.sx.map(e=>({value:e.value,label:e.label})),stackClass:"flex flex-col md:flex-row flex-wrap gap-2 space-y-0",help:null==(h=y.sx.find(t=>t.value===e.watch("mediaPageBannerSize")))?void 0:h.description}),(0,r.jsx)(g.D0.RadioCards,{label:"Banner info layout",name:"mediaPageBannerInfoBoxSize",options:y.Rr.map(e=>({value:e.value,label:e.label})),stackClass:"flex flex-col md:flex-row flex-wrap gap-2 space-y-0"}),(0,r.jsx)(g.D0.Switch,{side:"right",label:"Blurred gradient background",name:"enableMediaPageBlurredBackground",help:"Can cause performance issues."})]}),(0,r.jsxs)(A.K,{title:"Media card",children:[(0,r.jsx)(g.D0.Switch,{side:"right",label:"Show anime unwatched count",name:"showAnimeUnwatchedCount"}),(0,r.jsx)(g.D0.Switch,{side:"right",label:"Show manga unread count",name:"showMangaUnreadCount"}),(0,r.jsx)(g.D0.Switch,{side:"right",label:"Glassy background",name:"enableMediaCardBlurredBackground"})]}),(0,r.jsxs)(A.K,{title:"Episode card",children:[(0,r.jsx)(g.D0.Switch,{side:"right",label:"Show anime info",name:"showEpisodeCardAnimeInfo"}),(0,r.jsx)(g.D0.Switch,{side:"right",label:"Hide episode summary",name:"hideEpisodeCardDescription"}),(0,r.jsx)(g.D0.Switch,{side:"right",label:"Hide downloaded episode filename",name:"hideDownloadedEpisodeCardFilename"})]}),(0,r.jsxs)(A.K,{title:"Carousel",children:[(0,r.jsx)(g.D0.Switch,{side:"right",label:"Disable auto-scroll",name:"disableCarouselAutoScroll"}),(0,r.jsx)(g.D0.Switch,{side:"right",label:"Smaller episode cards",name:"smallerEpisodeCarouselSize"})]})]}),(0,r.jsx)(v.av,{value:"browser-client",className:"space-y-4",children:(0,r.jsx)(A.K,{children:(0,r.jsx)(b.d,{side:"right",label:"Fix border rendering artifacts (client-specific)",name:"enableMediaCardStyleFix",help:"Seanime will try to fix border rendering artifacts. This setting only affects this client/browser.",value:P,onValueChange:e=>{K(e),e?s.oR.success("Handling border rendering artifacts"):s.oR.success("Border rendering artifacts are no longer handled")}})})}),"browser-client"!==U&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(g.D0.Submit,{role:"save",intent:"white",rounded:!0,loading:M,children:"Save"})})]})]})}})}},39758:(e,t,n)=>{n.d(t,{G:()=>u,a:()=>c});var r=n(95155),a=n(19749),l=n(29724),o=n(21842),i=n(12115),s=n(68090);let d=(0,o.tG)("sea-custom-css",{customCSS:"",mobileCustomCSS:""},void 0,{getOnInit:!0});function u(e){let t,n,o,u,c,m=(0,a.c)(8),{children:S}=e,[g]=(0,l.fp)(d),[b,v]=(0,i.useState)(!1),{width:p}=(0,s.A)();return t=p<1024?g.mobileCustomCSS:g.customCSS,m[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{v(!0)},o=[],m[0]=n,m[1]=o):(n=m[0],o=m[1]),(0,i.useEffect)(n,o),m[2]!==b||m[3]!==t?(u=b&&t&&(0,r.jsx)("style",{id:"sea-custom-css",dangerouslySetInnerHTML:{__html:t}}),m[2]=b,m[3]=t,m[4]=u):u=m[4],m[5]!==S||m[6]!==u?(c=(0,r.jsxs)(r.Fragment,{children:[S,u]}),m[5]=S,m[6]=u,m[7]=c):c=m[7],c}function c(){let e,t=(0,a.c)(3),[n,r]=(0,l.fp)(d);return t[0]!==n||t[1]!==r?(e={customCSS:n,setCustomCSS:r},t[0]=n,t[1]=r,t[2]=e):e=t[2],e}},43756:(e,t,n)=>{n.d(t,{A:()=>o,l:()=>i});var r=n(99475),a=n.n(r),l=n(38310);function o(e){if("desktop"===l.env.NEXT_PUBLIC_PLATFORM){let{open:t}=n(34908);t(e)}else window.open(e,"_blank")}async function i(e){if("desktop"===l.env.NEXT_PUBLIC_PLATFORM){let{writeText:t}=n(18626);await t(e)}else a()(e)}},55014:(e,t,n)=>{n.d(t,{Dg:()=>p,HO:()=>u,T2:()=>b,UW:()=>c,W9:()=>S,c3:()=>d,iz:()=>y,xN:()=>s});var r=n(19749),a=n(7675),l=n(74889),o=n(46278),i=n(69554);function s(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:l.S.TORRENTSTREAM.GetTorrentstreamSettings.endpoint,method:l.S.TORRENTSTREAM.GetTorrentstreamSettings.methods[0],queryKey:[l.S.TORRENTSTREAM.GetTorrentstreamSettings.key],enabled:!0},t[0]=e):e=t[0],(0,a.fl)(e)}function d(){let e,t,n=(0,r.c)(3),s=(0,o.jE)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[l.S.TORRENTSTREAM.SaveTorrentstreamSettings.key],n[0]=e):e=n[0],n[1]!==s?(t={endpoint:l.S.TORRENTSTREAM.SaveTorrentstreamSettings.endpoint,method:l.S.TORRENTSTREAM.SaveTorrentstreamSettings.methods[0],mutationKey:e,onSuccess:async()=>{await s.invalidateQueries({queryKey:[l.S.TORRENTSTREAM.GetTorrentstreamSettings.key]}),await s.invalidateQueries({queryKey:[l.S.STATUS.GetStatus.key]}),i.oR.success("Settings saved")}},n[1]=s,n[2]=t):t=n[2],(0,a.qk)(t)}function u(e){let t,n,o,i=(0,r.c)(7);i[0]!==e?(t=l.S.TORRENTSTREAM.GetTorrentstreamEpisodeCollection.endpoint.replace("{id}",String(e)),i[0]=e,i[1]=t):t=i[1];let s=String(e);return i[2]!==s?(n=[l.S.TORRENTSTREAM.GetTorrentstreamEpisodeCollection.key,s],i[2]=s,i[3]=n):n=i[3],i[4]!==t||i[5]!==n?(o={endpoint:t,method:l.S.TORRENTSTREAM.GetTorrentstreamEpisodeCollection.methods[0],queryKey:n,enabled:!0},i[4]=t,i[5]=n,i[6]=o):o=i[6],(0,a.fl)(o)}function c(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:l.S.TORRENTSTREAM.TorrentstreamStartStream.endpoint,method:l.S.TORRENTSTREAM.TorrentstreamStartStream.methods[0],mutationKey:[l.S.TORRENTSTREAM.TorrentstreamStartStream.key],onSuccess:m},t[0]=e):e=t[0],(0,a.qk)(e)}async function m(){}function S(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:l.S.TORRENTSTREAM.TorrentstreamStopStream.endpoint,method:l.S.TORRENTSTREAM.TorrentstreamStopStream.methods[0],mutationKey:[l.S.TORRENTSTREAM.TorrentstreamStopStream.key],onSuccess:g},t[0]=e):e=t[0],(0,a.qk)(e)}async function g(){i.oR.success("Stream stopped")}function b(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:l.S.TORRENTSTREAM.TorrentstreamDropTorrent.endpoint,method:l.S.TORRENTSTREAM.TorrentstreamDropTorrent.methods[0],mutationKey:[l.S.TORRENTSTREAM.TorrentstreamDropTorrent.key],onSuccess:v},t[0]=e):e=t[0],(0,a.qk)(e)}async function v(){i.oR.success("Torrent dropped")}function p(e,t){let n,o,i=(0,r.c)(6);return i[0]!==e?(n=[l.S.TORRENTSTREAM.GetTorrentstreamTorrentFilePreviews.key,e],i[0]=e,i[1]=n):n=i[1],i[2]!==t||i[3]!==n||i[4]!==e?(o={endpoint:l.S.TORRENTSTREAM.GetTorrentstreamTorrentFilePreviews.endpoint,method:l.S.TORRENTSTREAM.GetTorrentstreamTorrentFilePreviews.methods[0],queryKey:n,data:e,enabled:t},i[2]=t,i[3]=n,i[4]=e,i[5]=o):o=i[5],(0,a.fl)(o)}function y(e,t){let n,o,i,s=(0,r.c)(9),d=String(e);s[0]!==t||s[1]!==d?(n=[l.S.TORRENTSTREAM.GetTorrentstreamBatchHistory.key,d,t],s[0]=t,s[1]=d,s[2]=n):n=s[2];let u=Number(e);s[3]!==u?(o={mediaId:u},s[3]=u,s[4]=o):o=s[4];let c=!!e;return s[5]!==n||s[6]!==o||s[7]!==c?(i={endpoint:l.S.TORRENTSTREAM.GetTorrentstreamBatchHistory.endpoint,method:l.S.TORRENTSTREAM.GetTorrentstreamBatchHistory.methods[0],queryKey:n,data:o,enabled:c},s[5]=n,s[6]=o,s[7]=c,s[8]=i):i=s[8],(0,a.fl)(i)}},58092:(e,t,n)=>{n.d(t,{E:()=>o});var r=n(19749),a=n(7675),l=n(74889);function o(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:l.S.EXPLORER.OpenInExplorer.endpoint,method:l.S.EXPLORER.OpenInExplorer.methods[0],mutationKey:[l.S.EXPLORER.OpenInExplorer.key],onSuccess:i},t[0]=e):e=t[0],(0,a.qk)(e)}async function i(){}},68585:(e,t,n)=>{n.d(t,{K:()=>d,X:()=>s});var r=n(95155),a=n(19749),l=n(52963),o=n(91360),i=n(12115);function s(e){let t,n,l,o=(0,a.c)(4),{children:s}=e;o[0]===Symbol.for("react.memo_cache_sentinel")?(t={x:0,y:0},o[0]=t):t=o[0];let[,d]=(0,i.useState)(t),u=(0,i.useRef)(null);o[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{if(!u.current)return;let t=u.current.getBoundingClientRect();d({x:e.clientX-t.left,y:e.clientY-t.top})},o[1]=n):n=o[1];let c=n;return o[2]!==s?(l=(0,r.jsx)("div",{className:"pb-4",children:(0,r.jsx)("div",{ref:u,onMouseMove:c,className:"lg:p-2 lg:border lg:rounded-[--radius] lg:bg-[--paper] contents lg:block relative group/settings-nav overflow-hidden",children:s})}),o[2]=s,o[3]=l):l=o[3],l}function d(e){let t,n,s,d,u,c,m,S=(0,a.c)(16),{title:g,description:b,children:v,className:p}=e;S[0]===Symbol.for("react.memo_cache_sentinel")?(t={x:0,y:0},S[0]=t):t=S[0];let[,y]=(0,i.useState)(t),f=(0,i.useRef)(null);S[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{if(!f.current)return;let t=f.current.getBoundingClientRect();y({x:e.clientX-t.left,y:e.clientY-t.top})},S[1]=n):n=S[1];let h=n;S[2]!==p?(s=(0,o.cn)("group/settings-card relative overflow-hidden bg-[--paper]",p),S[2]=p,S[3]=s):s=S[3],S[4]!==b||S[5]!==g?(d=g&&(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{className:"font-semibold text-xl text-[--muted] transition-colors group-hover/settings-card:text-[--brand]",children:g}),b&&(0,r.jsx)(l.BT,{children:b})]}),S[4]=b,S[5]=g,S[6]=d):d=S[6];let E=!g&&"pt-4";return S[7]!==E?(u=(0,o.cn)(E,"space-y-3 flex-wrap"),S[7]=E,S[8]=u):u=S[8],S[9]!==v||S[10]!==u?(c=(0,r.jsx)(l.Wu,{className:u,children:v}),S[9]=v,S[10]=u,S[11]=c):c=S[11],S[12]!==s||S[13]!==d||S[14]!==c?(m=(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(l.Zp,{ref:f,className:s,onMouseMove:h,children:[d,c]})}),S[12]=s,S[13]=d,S[14]=c,S[15]=m):m=S[15],m}},71689:(e,t,n)=>{n.d(t,{NY:()=>S,bx:()=>c,ju:()=>d});var r=n(19749),a=n(37817),l=n(29724),o=n(21842),i=n(12115);let s=(0,o.tG)("sea-mediastream-filepath",void 0,void 0,{getOnInit:!0});function d(){let e,t=(0,r.c)(3),[n,a]=(0,l.fp)(s);return t[0]!==n||t[1]!==a?(e={filePath:n,setFilePath:a},t[0]=n,t[1]=a,t[2]=e):e=t[2],e}let u=(0,o.tG)("sea-mediastream-jassub-offscreen-render",!1,void 0,{getOnInit:!0});function c(){let e,t=(0,r.c)(3),[n,a]=(0,l.fp)(u);return t[0]!==n||t[1]!==a?(e={jassubOffscreenRender:n,setJassubOffscreenRender:a},t[0]=n,t[1]=a,t[2]=e):e=t[2],e}let m=(0,o.tG)("sea-mediastream-active-on-device",null,void 0,{getOnInit:!0});function S(){let e,t,n,o=(0,r.c)(10),s=(0,a.v1)(),[d,u]=(0,l.fp)(m);o[0]!==d||o[1]!==s||o[2]!==u?(e=()=>{s&&null===d&&((null==s?void 0:s.clientDevice)!=="desktop"?u(!0):u(!1))},o[0]=d,o[1]=s,o[2]=u,o[3]=e):e=o[3];let c=null==s?void 0:s.clientUserAgent;return o[4]!==d||o[5]!==c?(t=[c,d],o[4]=d,o[5]=c,o[6]=t):t=o[6],i.useLayoutEffect(e,t),o[7]!==d||o[8]!==u?(n={activeOnDevice:d,setActiveOnDevice:u},o[7]=d,o[8]=u,o[9]=n):n=o[9],n}},78216:(e,t,n)=>{n.d(t,{Dc:()=>u,HM:()=>c,_V:()=>f,kG:()=>S,p$:()=>E,qO:()=>g,zw:()=>v});var r=n(95155),a=n(19749),l=n(42500),o=n(29724),i=n(21842),s=n(19022),d=n(28002);let u=function(e){return e.Default="default",e.ExternalPlayerLink="externalPlayerLink",e}({}),c=[{label:(0,r.jsxs)("div",{className:"flex items-center gap-4 md:gap-2 w-full",children:[(0,r.jsx)(d.WYA,{className:"text-2xl flex-none"}),(0,r.jsx)("p",{className:"max-w-[90%]",children:"Desktop media player or Integrated player (media streaming)"})]}),value:u.Default},{label:(0,r.jsxs)("div",{className:"flex items-center gap-4 md:gap-2 w-full",children:[(0,r.jsx)(s.Upx,{className:"text-2xl flex-none"}),(0,r.jsx)("p",{className:"max-w-[90%]",children:"External player link"})]}),value:u.ExternalPlayerLink}],m=(0,i.tG)("sea-playback-downloaded-media",u.Default),S=function(e){return e.Default="default",e.ExternalPlayerLink="externalPlayerLink",e}({}),g=[{label:(0,r.jsxs)("div",{className:"flex items-center gap-4 md:gap-2 w-full",children:[(0,r.jsx)(d.WYA,{className:"text-2xl flex-none"}),(0,r.jsx)("p",{className:"max-w-[90%]",children:"Desktop media player"})]}),value:S.Default},{label:(0,r.jsxs)("div",{className:"flex items-center gap-4 md:gap-2 w-full",children:[(0,r.jsx)(s.Upx,{className:"text-2xl flex-none"}),(0,r.jsx)("p",{className:"max-w-[90%]",children:"External player link"})]}),value:S.ExternalPlayerLink}],b=(0,i.tG)("sea-playback-torrentstream",S.Default);function v(){let e,t=(0,a.c)(5),[n,r]=(0,o.fp)(m),[l,i]=(0,o.fp)(b);return t[0]!==n||t[1]!==r||t[2]!==i||t[3]!==l?(e={downloadedMediaPlayback:n,setDownloadedMediaPlayback:r,torrentStreamingPlayback:l,setTorrentStreamingPlayback:i},t[0]=n,t[1]=r,t[2]=i,t[3]=l,t[4]=e):e=t[4],e}let p=(0,i.tG)("sea-playback-external-player-link",""),y=(0,i.tG)("sea-playback-external-player-link-encode-path",!1);function f(){let e,t=(0,a.c)(5),[n,r]=(0,o.fp)(p),[l,i]=(0,o.fp)(y);return t[0]!==l||t[1]!==n||t[2]!==i||t[3]!==r?(e={externalPlayerLink:n,setExternalPlayerLink:r,encodePath:l,setEncodePath:i},t[0]=l,t[1]=n,t[2]=i,t[3]=r,t[4]=e):e=t[4],e}let h=(0,l.eU)(null);function E(){let e,t,n,r=(0,a.c)(8),[l,i]=(0,o.fp)(h);r[0]!==i?(e=function(e,t){e&&(i(e),t())},r[0]=i,r[1]=e):e=r[1];let s=e;return r[2]!==i?(t=()=>i(null),r[2]=i,r[3]=t):t=r[3],r[4]!==l||r[5]!==s||r[6]!==t?(n={playNext:l,setPlayNext:s,resetPlayNext:t},r[4]=l,r[5]=s,r[6]=t,r[7]=n):n=r[7],n}},85210:(e,t,n)=>{n.d(t,{$x:()=>b,Bq:()=>m,Hy:()=>f,I4:()=>u,Qg:()=>c,Qw:()=>g,TI:()=>p,Xs:()=>s,co:()=>i,dw:()=>v,ns:()=>y,wi:()=>d});var r=n(24780),a=n(84621),l=n.n(a),o=n(99288);let i=[{label:"Aired recently",value:"AIRDATE_DESC"},{label:"Aired oldest",value:"AIRDATE"},{label:"Highest episode number",value:"EPISODE_NUMBER_DESC"},{label:"Lowest episode number",value:"EPISODE_NUMBER"},{label:"Most unwatched episodes",value:"UNWATCHED_EPISODES_DESC"},{label:"Least unwatched episodes",value:"UNWATCHED_EPISODES"},{label:"Highest score",value:"SCORE_DESC"},{label:"Lowest score",value:"SCORE"},{label:"Started recently",value:"START_DATE_DESC"},{label:"Oldest start date",value:"START_DATE"},{label:"Most recent watch",value:"LAST_WATCHED_DESC"},{label:"Least recent watch",value:"LAST_WATCHED"}],s=[{label:"Highest score",value:"SCORE_DESC"},{label:"Lowest score",value:"SCORE"},{label:"Title",value:"TITLE"},{label:"Title (Z-A)",value:"TITLE_DESC"},{label:"Highest progress",value:"PROGRESS_DESC"},{label:"Lowest progress",value:"PROGRESS"},{label:"Started recently",value:"START_DATE_DESC"},{label:"Oldest start date",value:"START_DATE"},{label:"Completed recently",value:"END_DATE_DESC"},{label:"Oldest completion date",value:"END_DATE"},{label:"Released recently",value:"RELEASE_DATE_DESC"},{label:"Oldest release",value:"RELEASE_DATE"}],d=[{label:"Aired recently and not up-to-date",value:"AIRDATE_DESC"},{label:"Aired oldest and not up-to-date",value:"AIRDATE"},{label:"Most unwatched episodes",value:"UNWATCHED_EPISODES_DESC"},{label:"Least unwatched episodes",value:"UNWATCHED_EPISODES"},{label:"Most recent watch",value:"LAST_WATCHED_DESC"},{label:"Least recent watch",value:"LAST_WATCHED"},...s],u=[{label:"Most unread chapters",value:"UNREAD_CHAPTERS_DESC"},{label:"Least unread chapters",value:"UNREAD_CHAPTERS"},...s],c={sorting:"SCORE_DESC",genre:null,status:null,format:null,season:null,year:null,isAdult:!1,continueWatchingOnly:!1},m={sorting:"SCORE_DESC",genre:null,status:null,format:null,season:null,year:null,isAdult:!1,continueWatchingOnly:!1};function S(e){return""===e||Array.isArray(e)&&0===e.filter(Boolean).length?void 0:"string"!=typeof e||isNaN(parseInt(e))?null!==e?e:void 0:Number(e)}function g(e,t){if(!e)return[];if(e.length>0&&t.length>0){let n=t.toLowerCase().trim().replace(/\s+/g," ");return e.filter(e=>{var t,r,a,l,o,i,s,d,u,c,m;return(null==(a=e.media)||null==(r=a.title)||null==(t=r.english)?void 0:t.toLowerCase().includes(n))||(null==(i=e.media)||null==(o=i.title)||null==(l=o.userPreferred)?void 0:l.toLowerCase().includes(n))||(null==(u=e.media)||null==(d=u.title)||null==(s=d.romaji)?void 0:s.toLowerCase().includes(n))||(null==(m=e.media)||null==(c=m.synonyms)?void 0:c.some(e=>null==e?void 0:e.toLowerCase().includes(n)))})}return e}function b(e,t,n,r){var a;if(!t)return[];let o=[...t];return o&&n.isAdult&&(o=o.filter(e=>{var t;return null==(t=e.media)?void 0:t.isAdult})),r||(o=o.filter(e=>{var t;return!(null==(t=e.media)?void 0:t.isAdult)})),o&&n.format&&(o=o.filter(e=>{var t;return(null==(t=e.media)?void 0:t.format)===n.format})),o&&n.season&&(o=o.filter(e=>{var t;return(null==(t=e.media)?void 0:t.season)===n.season})),o&&n.status&&(o=o.filter(e=>{var t;return(null==(t=e.media)?void 0:t.status)===n.status})),o&&n.year&&(o=o.filter(e=>{var t,r,a,l,o,i;return(null==(t=e.media)?void 0:t.seasonYear)?(null==(r=e.media)?void 0:r.seasonYear)===Number(n.year)||(null==(l=e.media)||null==(a=l.startDate)?void 0:a.year)===Number(n.year):(null==(i=e.media)||null==(o=i.startDate)?void 0:o.year)===Number(n.year)})),o&&(null==(a=n.genre)?void 0:a.length)&&(o=o.filter(e=>{var t;return null==(t=n.genre)?void 0:t.every(t=>{var n,r;return null==(r=e.media)||null==(n=r.genres)?void 0:n.includes(t)})})),o=l()(o,e=>{var t,n;return null==e||null==(n=e.media)||null==(t=n.title)?void 0:t.userPreferred}).reverse(),"TITLE"===S(n.sorting)&&(o=l()(o,e=>{var t,n;return null==e||null==(n=e.media)||null==(t=n.title)?void 0:t.userPreferred})),"TITLE_DESC"===S(n.sorting)&&(o=l()(o,e=>{var t,n;return null==e||null==(n=e.media)||null==(t=n.title)?void 0:t.userPreferred}).reverse()),("RELEASE_DATE"===S(n.sorting)||"RELEASE_DATE_DESC"===S(n.sorting))&&(o=null==o?void 0:o.filter(e=>{var t;return(null==(t=e.media)?void 0:t.startDate)&&!!e.media.startDate.year&&!!e.media.startDate.month})),"RELEASE_DATE"===S(n.sorting)&&(o=l()(o,e=>{var t,n,r,a;return new Date(null==e||null==(n=e.media)||null==(t=n.startDate)?void 0:t.year,(null==e||null==(a=e.media)||null==(r=a.startDate)?void 0:r.month)-1)})),"RELEASE_DATE_DESC"===S(n.sorting)&&(o=l()(o,e=>{var t,n,r,a;return new Date(null==e||null==(n=e.media)||null==(t=n.startDate)?void 0:t.year,(null==e||null==(a=e.media)||null==(r=a.startDate)?void 0:r.month)-1)}).reverse()),"SCORE"===S(n.sorting)&&(o=l()(o,e=>(null==e?void 0:e.score)||999999)),"SCORE_DESC"===S(n.sorting)&&(o=l()(o,e=>(null==e?void 0:e.score)||0).reverse()),"START_DATE"===S(n.sorting)&&(o=l()(o,e=>{var t,n,r;return new Date((null==e||null==(t=e.startedAt)?void 0:t.year)||9999,((null==e||null==(n=e.startedAt)?void 0:n.month)||1)-1,(null==e||null==(r=e.startedAt)?void 0:r.day)||1)})),"START_DATE_DESC"===S(n.sorting)&&(o=l()(o,e=>{var t,n,r;return new Date((null==e||null==(t=e.startedAt)?void 0:t.year)||1e3,((null==e||null==(n=e.startedAt)?void 0:n.month)||1)-1,(null==e||null==(r=e.startedAt)?void 0:r.day)||1)}).reverse()),("END_DATE"===S(n.sorting)||"END_DATE_DESC"===S(n.sorting))&&(o=null==o?void 0:o.filter(e=>e.completedAt&&!!e.completedAt.year&&!!e.completedAt.month&&!!e.completedAt.day)),"END_DATE"===S(n.sorting)&&(o=l()(o,e=>{var t,n,r;return new Date(null==e||null==(t=e.completedAt)?void 0:t.year,(null==e||null==(n=e.completedAt)?void 0:n.month)-1,null==e||null==(r=e.completedAt)?void 0:r.day)})),"END_DATE_DESC"===S(n.sorting)&&(o=l()(o,e=>{var t,n,r;return new Date(null==e||null==(t=e.completedAt)?void 0:t.year,(null==e||null==(n=e.completedAt)?void 0:n.month)-1,null==e||null==(r=e.completedAt)?void 0:r.day)}).reverse()),"PROGRESS"===S(n.sorting)&&(o=l()(o,e=>(null==e?void 0:e.progress)||0)),"PROGRESS_DESC"===S(n.sorting)&&(o=l()(o,e=>(null==e?void 0:e.progress)||0).reverse()),o}function v(e,t,n,r){var a;if(!t)return[];let o=[...t];return o&&n.isAdult&&(o=o.filter(e=>{var t;return null==(t=e.media)?void 0:t.isAdult})),r||(o=o.filter(e=>{var t;return!(null==(t=e.media)?void 0:t.isAdult)})),o&&n.format&&(o=o.filter(e=>{var t;return(null==(t=e.media)?void 0:t.format)===n.format})),o&&n.season&&(o=o.filter(e=>{var t;return(null==(t=e.media)?void 0:t.season)===n.season})),o&&n.status&&(o=o.filter(e=>{var t;return(null==(t=e.media)?void 0:t.status)===n.status})),o&&n.year&&(o=o.filter(e=>{var t,r,a;return(null==(t=e.media)?void 0:t.seasonYear)===Number(n.year)||(null==(a=e.media)||null==(r=a.startDate)?void 0:r.year)===Number(n.year)})),o&&(null==(a=n.genre)?void 0:a.length)&&(o=o.filter(e=>{var t;return null==(t=n.genre)?void 0:t.every(t=>{var n,r;return null==(r=e.media)||null==(n=r.genres)?void 0:n.includes(t)})})),o=l()(o,e=>{var t,n;return null==e||null==(n=e.media)||null==(t=n.title)?void 0:t.userPreferred}).reverse(),"TITLE"===S(n.sorting)&&(o=l()(o,e=>{var t,n;return null==e||null==(n=e.media)||null==(t=n.title)?void 0:t.userPreferred})),"TITLE_DESC"===S(n.sorting)&&(o=l()(o,e=>{var t,n;return null==e||null==(n=e.media)||null==(t=n.title)?void 0:t.userPreferred}).reverse()),("RELEASE_DATE"===S(n.sorting)||"RELEASE_DATE_DESC"===S(n.sorting))&&(o=null==o?void 0:o.filter(e=>{var t;return(null==(t=e.media)?void 0:t.startDate)&&!!e.media.startDate.year&&!!e.media.startDate.month})),"RELEASE_DATE"===S(n.sorting)&&(o=l()(o,e=>{var t,n,r,a;return new Date(null==e||null==(n=e.media)||null==(t=n.startDate)?void 0:t.year,(null==e||null==(a=e.media)||null==(r=a.startDate)?void 0:r.month)-1)})),"RELEASE_DATE_DESC"===S(n.sorting)&&(o=l()(o,e=>{var t,n,r,a;return new Date(null==e||null==(n=e.media)||null==(t=n.startDate)?void 0:t.year,(null==e||null==(a=e.media)||null==(r=a.startDate)?void 0:r.month)-1)}).reverse()),"SCORE"===S(n.sorting)&&(o=l()(o,e=>{var t;return(null==e||null==(t=e.listData)?void 0:t.score)||999999})),"SCORE_DESC"===S(n.sorting)&&(o=l()(o,e=>{var t;return(null==e||null==(t=e.listData)?void 0:t.score)||0}).reverse()),"START_DATE"===S(n.sorting)&&(o=l()(o,e=>{var t,n;return new Date(null!=(n=null==e||null==(t=e.listData)?void 0:t.startedAt)?n:new Date(9999,1,1).toISOString())})),"START_DATE_DESC"===S(n.sorting)&&(o=l()(o,e=>{var t,n;return new Date(null!=(n=null==e||null==(t=e.listData)?void 0:t.startedAt)?n:new Date(1e3,1,1).toISOString())}).reverse()),("END_DATE"===S(n.sorting)||"END_DATE_DESC"===S(n.sorting))&&(o=null==o?void 0:o.filter(e=>{var t;return!!(null==(t=e.listData)?void 0:t.completedAt)})),"END_DATE"===S(n.sorting)&&(o=l()(o,e=>{var t;return new Date(null==e||null==(t=e.listData)?void 0:t.completedAt)})),"END_DATE_DESC"===S(n.sorting)&&(o=l()(o,e=>{var t;return new Date(null==e||null==(t=e.listData)?void 0:t.completedAt)}).reverse()),"PROGRESS"===S(n.sorting)&&(o=l()(o,e=>{var t;return(null==e||null==(t=e.listData)?void 0:t.progress)||0})),"PROGRESS_DESC"===S(n.sorting)&&(o=l()(o,e=>{var t;return(null==e||null==(t=e.listData)?void 0:t.progress)||0}).reverse()),o}function p(e,t,n,r,a){let i=v("anime",e,t,n);return t.continueWatchingOnly&&(i=i.filter(e=>(null==r?void 0:r.findIndex(t=>{var n,r;return(null==(n=t.baseAnime)?void 0:n.id)===(null==(r=e.media)?void 0:r.id)}))!==-1)),"AIRDATE"===S(t.sorting)&&(i=l()(i,e=>{var t,n;return(null==r||null==(n=r.find(t=>{var n,r;return(null==(n=t.baseAnime)?void 0:n.id)===(null==(r=e.media)?void 0:r.id)}))||null==(t=n.episodeMetadata)?void 0:t.airDate)||new Date(9999,1,1).toISOString()})),"AIRDATE_DESC"===S(t.sorting)&&(i=l()(i,e=>{var t,n;return(null==r||null==(n=r.find(t=>{var n,r;return(null==(n=t.baseAnime)?void 0:n.id)===(null==(r=e.media)?void 0:r.id)}))||null==(t=n.episodeMetadata)?void 0:t.airDate)||new Date(1e3,1,1).toISOString()}).reverse()),"UNWATCHED_EPISODES"===S(t.sorting)&&(i=l()(i,e=>{var t,n,r;return(null==(t=e.libraryData)?void 0:t.mainFileCount)?null==(n=e.libraryData)?void 0:n.unwatchedCount:(0,o.wR)(e.media,null==(r=e.listData)?void 0:r.progress)||99999})),"UNWATCHED_EPISODES_DESC"===S(t.sorting)&&(i=l()(i,e=>{var t,n,r;return(null==(t=e.libraryData)?void 0:t.mainFileCount)?null==(n=e.libraryData)?void 0:n.unwatchedCount:(0,o.wR)(e.media,null==(r=e.listData)?void 0:r.progress)}).reverse()),"LAST_WATCHED"===S(t.sorting)&&(i=l()(i,e=>{var t,n;return(null==a||null==(t=a[null==(n=e.media)?void 0:n.id])?void 0:t.timeUpdated)||new Date(9999,1,1).toISOString()})),"LAST_WATCHED_DESC"===S(t.sorting)&&(i=l()(i,e=>{var t,n;return(null==a||null==(t=a[null==(n=e.media)?void 0:n.id])?void 0:t.timeUpdated)||new Date(1e3,1,1).toISOString()}).reverse()),i}function y(e,t,n,a,o,i){if(!i||!a||!o)return[];let s=v("manga",e,t,n);return t.unreadOnly&&(s=s.filter(e=>{var t,n;return((0,r.em)(null==(t=e.media)?void 0:t.id,i,a,o)||999999)-((null==(n=e.listData)?void 0:n.progress)||0)>0})),"UNREAD_CHAPTERS"===S(t.sorting)&&(s=l()(s,e=>{var t,n;return((0,r.em)(null==(t=e.media)?void 0:t.id,i,a,o)||999999)-((null==(n=e.listData)?void 0:n.progress)||0)})),"UNREAD_CHAPTERS_DESC"===S(t.sorting)&&(s=l()(s,e=>{var t,n;return((0,r.em)(null==(t=e.media)?void 0:t.id,i,a,o)||0)-((null==(n=e.listData)?void 0:n.progress)||0)}).reverse()),s}function f(e,t,n,r){if(!e)return[];let a=[...e];return a=l()(a,e=>null==e?void 0:e.displayTitle),"EPISODE_NUMBER"===t&&(a=l()(a,e=>null==e?void 0:e.episodeNumber)),"EPISODE_NUMBER_DESC"===t&&(a=l()(a,e=>null==e?void 0:e.episodeNumber).reverse()),"AIRDATE"===t&&(a=l()(a,e=>{var t;return null==e||null==(t=e.episodeMetadata)?void 0:t.airDate})),"AIRDATE_DESC"===t&&(a=l()(a,e=>{var t;return null==e||null==(t=e.episodeMetadata)?void 0:t.airDate}).reverse()),"UNWATCHED_EPISODES"===t&&(a=l()(a,e=>{var t,r,a,l,i;return null!=(i=null==n||null==(r=n.find(t=>{var n,r;return(null==(n=t.media)?void 0:n.id)===(null==(r=e.baseAnime)?void 0:r.id)}))||null==(t=r.libraryData)?void 0:t.unwatchedCount)?i:(0,o.wR)(e.baseAnime,null==n||null==(l=n.find(t=>{var n,r;return(null==(n=t.media)?void 0:n.id)===(null==(r=e.baseAnime)?void 0:r.id)}))||null==(a=l.listData)?void 0:a.progress)||99999})),"UNWATCHED_EPISODES_DESC"===t&&(a=l()(a,e=>{var t,r,a,l,i;return null!=(i=null==n||null==(r=n.find(t=>{var n,r;return(null==(n=t.media)?void 0:n.id)===(null==(r=e.baseAnime)?void 0:r.id)}))||null==(t=r.libraryData)?void 0:t.unwatchedCount)?i:(0,o.wR)(e.baseAnime,null==n||null==(l=n.find(t=>{var n,r;return(null==(n=t.media)?void 0:n.id)===(null==(r=e.baseAnime)?void 0:r.id)}))||null==(a=l.listData)?void 0:a.progress)}).reverse()),"SCORE"===t&&(a=l()(a,e=>{var t,r;return(null==n||null==(r=n.find(t=>{var n,r;return(null==(n=t.media)?void 0:n.id)===(null==(r=e.baseAnime)?void 0:r.id)}))||null==(t=r.listData)?void 0:t.score)||999999})),"SCORE_DESC"===t&&(a=l()(a,e=>{var t,r;return(null==n||null==(r=n.find(t=>{var n,r;return(null==(n=t.media)?void 0:n.id)===(null==(r=e.baseAnime)?void 0:r.id)}))||null==(t=r.listData)?void 0:t.score)||0}).reverse()),"START_DATE"===t&&(a=l()(a,e=>{var t,r;return(null==n||null==(r=n.find(t=>{var n,r;return(null==(n=t.media)?void 0:n.id)===(null==(r=e.baseAnime)?void 0:r.id)}))||null==(t=r.listData)?void 0:t.startedAt)||new Date(9999,1,1).toISOString()})),"START_DATE_DESC"===t&&(a=l()(a,e=>{var t,r;return(null==n||null==(r=n.find(t=>{var n,r;return(null==(n=t.media)?void 0:n.id)===(null==(r=e.baseAnime)?void 0:r.id)}))||null==(t=r.listData)?void 0:t.startedAt)||new Date(1e3,1,1).toISOString()}).reverse()),"LAST_WATCHED"===t&&(a=l()(a,e=>{var t,n;return(null==r||null==(t=r[null==(n=e.baseAnime)?void 0:n.id])?void 0:t.timeUpdated)||new Date(9999,1,1).toISOString()})),"LAST_WATCHED_DESC"===t&&(a=l()(a,e=>{var t,n;return(null==r||null==(t=r[null==(n=e.baseAnime)?void 0:n.id])?void 0:t.timeUpdated)||new Date(1e3,1,1).toISOString()}).reverse()),a}},98802:(e,t,n)=>{n.d(t,{AG:()=>u,AH:()=>h,FQ:()=>v,O9:()=>y,R5:()=>p,Ts:()=>s,_s:()=>S,fR:()=>b,wO:()=>d,wX:()=>c});var r=n(19749),a=n(7675),l=n(74889),o=n(46278),i=n(69554);function s(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:l.S.DEBRID.GetDebridSettings.endpoint,method:l.S.DEBRID.GetDebridSettings.methods[0],queryKey:[l.S.DEBRID.GetDebridSettings.key],enabled:!0},t[0]=e):e=t[0],(0,a.fl)(e)}function d(){let e,t,n=(0,r.c)(3),s=(0,o.jE)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[l.S.DEBRID.SaveDebridSettings.key],n[0]=e):e=n[0],n[1]!==s?(t={endpoint:l.S.DEBRID.SaveDebridSettings.endpoint,method:l.S.DEBRID.SaveDebridSettings.methods[0],mutationKey:e,onSuccess:async()=>{await s.invalidateQueries({queryKey:[l.S.DEBRID.GetDebridSettings.key]}),await s.invalidateQueries({queryKey:[l.S.STATUS.GetStatus.key]}),i.oR.success("Settings saved")}},n[1]=s,n[2]=t):t=n[2],(0,a.qk)(t)}function u(e){let t,n,s=(0,r.c)(4),d=(0,o.jE)();return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=[l.S.DEBRID.DebridAddTorrents.key],s[0]=t):t=s[0],s[1]!==e||s[2]!==d?(n={endpoint:l.S.DEBRID.DebridAddTorrents.endpoint,method:l.S.DEBRID.DebridAddTorrents.methods[0],mutationKey:t,onSuccess:async()=>{e(),i.oR.success("Torrent added"),await d.invalidateQueries({queryKey:[l.S.DEBRID.DebridGetTorrents.key]})}},s[1]=e,s[2]=d,s[3]=n):n=s[3],(0,a.qk)(n)}function c(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:l.S.DEBRID.DebridDownloadTorrent.endpoint,method:l.S.DEBRID.DebridDownloadTorrent.methods[0],mutationKey:[l.S.DEBRID.DebridDownloadTorrent.key],onSuccess:m},t[0]=e):e=t[0],(0,a.qk)(e)}async function m(){i.oR.info("Download started")}function S(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:l.S.DEBRID.DebridCancelDownload.endpoint,method:l.S.DEBRID.DebridCancelDownload.methods[0],mutationKey:[l.S.DEBRID.DebridCancelDownload.key],onSuccess:g},t[0]=e):e=t[0],(0,a.qk)(e)}async function g(){i.oR.info("Download cancelled")}function b(){let e,t,n=(0,r.c)(3),s=(0,o.jE)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[l.S.DEBRID.DebridDeleteTorrent.key],n[0]=e):e=n[0],n[1]!==s?(t={endpoint:l.S.DEBRID.DebridDeleteTorrent.endpoint,method:l.S.DEBRID.DebridDeleteTorrent.methods[0],mutationKey:e,onSuccess:async()=>{i.oR.success("Torrent deleted"),await s.invalidateQueries({queryKey:[l.S.DEBRID.DebridGetTorrents.key]})}},n[1]=s,n[2]=t):t=n[2],(0,a.qk)(t)}function v(e,t){let n,o,i=(0,r.c)(4);return i[0]===Symbol.for("react.memo_cache_sentinel")?(n=[l.S.DEBRID.DebridGetTorrents.key],i[0]=n):n=i[0],i[1]!==e||i[2]!==t?(o={endpoint:l.S.DEBRID.DebridGetTorrents.endpoint,method:l.S.DEBRID.DebridGetTorrents.methods[0],queryKey:n,enabled:e,retry:3,refetchInterval:t},i[1]=e,i[2]=t,i[3]=o):o=i[3],(0,a.fl)(o)}function p(e,t){var n;let o,i,s=(0,r.c)(6),d=null==e||null==(n=e.torrent)?void 0:n.infoHash;return s[0]!==d?(o=[l.S.DEBRID.DebridGetTorrentFilePreviews.key,d],s[0]=d,s[1]=o):o=s[1],s[2]!==t||s[3]!==o||s[4]!==e?(i={endpoint:l.S.DEBRID.DebridGetTorrentFilePreviews.endpoint,method:l.S.DEBRID.DebridGetTorrentFilePreviews.methods[0],queryKey:o,data:e,enabled:t,gcTime:0},s[2]=t,s[3]=o,s[4]=e,s[5]=i):i=s[5],(0,a.fl)(i)}function y(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:l.S.DEBRID.DebridStartStream.endpoint,method:l.S.DEBRID.DebridStartStream.methods[0],mutationKey:[l.S.DEBRID.DebridStartStream.key],onSuccess:f},t[0]=e):e=t[0],(0,a.qk)(e)}async function f(){}function h(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:l.S.DEBRID.DebridCancelStream.endpoint,method:l.S.DEBRID.DebridCancelStream.methods[0],mutationKey:[l.S.DEBRID.DebridCancelStream.key],onSuccess:E},t[0]=e):e=t[0],(0,a.qk)(e)}async function E(){i.oR.success("Stream cancelled")}},99288:(e,t,n)=>{function r(e){if(!e)return -1;let t=-1;if(e.nextAiringEpisode&&e.nextAiringEpisode.episode&&(t=e.nextAiringEpisode.episode-1),-1===t){var n;t=null!=(n=e.episodes)?n:0}return t}function a(e){var t,n,r,a,l,o,i,s;return{progress:null==e?void 0:e.progress,score:null==e?void 0:e.score,status:null==e?void 0:e.status,startedAt:new Date((null==e||null==(t=e.startedAt)?void 0:t.year)||0,(null==e||null==(n=e.startedAt)?void 0:n.month)?(null==e||null==(r=e.startedAt)?void 0:r.month)-1:0,(null==e||null==(a=e.startedAt)?void 0:a.day)||0).toUTCString(),completedAt:new Date((null==e||null==(l=e.completedAt)?void 0:l.year)||0,(null==e||null==(o=e.completedAt)?void 0:o.month)?(null==e||null==(i=e.completedAt)?void 0:i.month)-1:0,(null==e||null==(s=e.completedAt)?void 0:s.day)||0).toUTCString()}}function l(e){return!!e&&(null==e?void 0:e.format)==="MOVIE"}function o(e,t){return!!e&&r(e)-(null!=t?t:0)}n.d(t,{DH:()=>r,Sv:()=>l,_1:()=>a,wR:()=>o})}}]);