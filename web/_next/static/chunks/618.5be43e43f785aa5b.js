"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[618,4250],{50618:(t,i,e)=>{e.r(i),e.d(i,{HLSProvider:()=>u});var s=e(7311),a=e(85594),h=e(64250),r=e(62634);e(12115);let n=t=>(0,s.q)(t);class l{get instance(){return this.g}setup(t){let{streamType:i}=this.b.$state,e=(0,s.p)(i).includes("live"),h=(0,s.p)(i).includes("ll-");this.g=new t({lowLatencyMode:h,backBufferLength:h?4:e?8:void 0,renderTextTracksNatively:!1,...this.pd});let r=this.Tg.bind(this);for(let i of Object.values(t.Events))this.g.on(i,r);for(let i of(this.g.on(t.Events.ERROR,this.V.bind(this)),this.qd))i(this.g);this.b.player.dispatch("hls-instance",{detail:this.g}),this.g.attachMedia(this.m),this.g.on(t.Events.FRAG_LOADING,this.Pk.bind(this)),this.g.on(t.Events.AUDIO_TRACK_SWITCHED,this.Ug.bind(this)),this.g.on(t.Events.LEVEL_SWITCHED,this.Vg.bind(this)),this.g.on(t.Events.LEVEL_LOADED,this.Wg.bind(this)),this.g.on(t.Events.NON_NATIVE_TEXT_TRACKS_FOUND,this.Xg.bind(this)),this.g.on(t.Events.CUES_PARSED,this.Yg.bind(this)),this.b.qualities[a.Q._a]=this.Zg.bind(this),(0,s.l)(this.b.qualities,"change",this.gb.bind(this)),(0,s.l)(this.b.audioTracks,"change",this._g.bind(this)),this.od=(0,s.g)(this.$g.bind(this))}$g(){if(!this.b.$state.live())return;let t=new r.R(this.ah.bind(this));return t.Cb(),t.sa.bind(t)}ah(){var t,i;this.b.$state.liveSyncPosition.set(null!=(i=null==(t=this.g)?void 0:t.liveSyncPosition)?i:1/0)}Tg(t,i){var e;null==(e=this.b.player)||e.dispatch(new s.D(n(t),{detail:i}))}Xg(t,i){let e=new s.D(t,{detail:i}),h=-1;for(let t=0;t<i.tracks.length;t++){var r;let s=i.tracks[t],n=null!=(r=s.subtitleTrack)?r:s.closedCaptions,l=new a.b({id:"hls-".concat(s.kind).concat(t),src:null==n?void 0:n.url,label:s.label,language:null==n?void 0:n.lang,kind:s.kind,default:s.default});l[a.i.N]=2,l[a.i.Va]=()=>{"showing"===l.mode?(this.g.subtitleTrack=t,h=t):h===t&&(this.g.subtitleTrack=-1,h=-1)},this.b.textTracks.add(l,e)}}Yg(t,i){let e=this.b.textTracks.getById("hls-".concat(i.track));if(!e)return;let a=new s.D(t,{detail:i});for(let t of i.cues)t.positionAlign="auto",e.addCue(t,a)}Ug(t,i){let e=this.b.audioTracks[i.id];if(e){let h=new s.D(t,{detail:i});this.b.audioTracks[a.L.qa](e,!0,h)}}Vg(t,i){let e=this.b.qualities[i.level];if(e){let h=new s.D(t,{detail:i});this.b.qualities[a.L.qa](e,!0,h)}}Wg(t,i){if(this.b.$state.canPlay())return;let{type:e,live:h,totalduration:r,targetduration:n}=i.details,l=new s.D(t,{detail:i});this.b.delegate.c("stream-type-change",h?"EVENT"===e&&Number.isFinite(r)&&n>=10?"live:dvr":"live":"on-demand",l),this.b.delegate.c("duration-change",r,l);let d=this.g.media;for(let t of(-1===this.g.currentLevel&&this.b.qualities[a.Q.Za](!0,l),this.g.audioTracks)){let i={id:t.id.toString(),label:t.name,language:t.lang||"",kind:"main"};this.b.audioTracks[a.L.pa](i,l)}for(let t of this.g.levels){var c,o;let i={id:null!=(o=null==(c=t.id)?void 0:c.toString())?o:t.height+"p",width:t.width,height:t.height,codec:t.codecSet,bitrate:t.bitrate};this.b.qualities[a.L.pa](i,l)}d.dispatchEvent(new s.D("canplay",{trigger:l}))}V(t,i){if(i.fatal)switch(i.type){case"networkError":this.Qk(i.error);break;case"mediaError":var e;null==(e=this.g)||e.recoverMediaError();break;default:this.Ok(i.error)}}Pk(){this.Lk>=0&&this.Mk()}Qk(t){var i;this.Mk(),null==(i=this.g)||i.startLoad(),this.Lk=window.setTimeout(()=>{this.Lk=-1,this.Ok(t)},5e3)}Mk(){clearTimeout(this.Lk),this.Lk=-1}Ok(t){var i;null==(i=this.g)||i.destroy(),this.g=null,this.b.delegate.c("error",{message:t.message,code:1,error:t})}Zg(){this.g&&(this.g.currentLevel=-1)}gb(){let{qualities:t}=this.b;this.g&&!t.auto&&(this.g[t.switch+"Level"]=t.selectedIndex,a.d&&(this.m.currentTime=this.m.currentTime))}_g(){let{audioTracks:t}=this.b;this.g&&this.g.audioTrack!==t.selectedIndex&&(this.g.audioTrack=t.selectedIndex)}Rk(t){var i;(0,s.j)(t.src)&&(this.Mk(),null==(i=this.g)||i.loadSource(t.src))}bh(){var t,i;this.Mk(),this.b&&(this.b.qualities[a.Q._a]=void 0),null==(t=this.g)||t.destroy(),this.g=null,null==(i=this.od)||i.call(this),this.od=null}constructor(t,i){this.m=t,this.b=i,this.g=null,this.od=null,this.pd={},this.qd=new Set,this.Lk=-1}}class d{async ch(){let t={onLoadStart:this.Fa.bind(this),onLoaded:this.rd.bind(this),onLoadError:this.dh.bind(this)},i=await o(this.X,t);return((0,s.i)(i)&&!(0,s.j)(this.X)&&(i=await c(this.X,t)),i)?i.isSupported()?i:(this.b.player.dispatch(new s.D("hls-unsupported")),this.b.delegate.c("error",{message:"[vidstack] `hls.js` is not supported in this environment",code:4}),null):null}Fa(){this.b.player.dispatch(new s.D("hls-lib-load-start"))}rd(t){this.b.player.dispatch(new s.D("hls-lib-loaded",{detail:t})),this.Da(t)}dh(t){let i=(0,a.g)(t);this.b.player.dispatch(new s.D("hls-lib-load-error",{detail:i})),this.b.delegate.c("error",{message:i.message,code:4,error:i})}constructor(t,i,e){this.X=t,this.b=i,this.Da=e,this.ch()}}async function c(t){var i,e,a,h,r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,s.i)(t)){if(null==(i=n.onLoadStart)||i.call(n),t.prototype&&t.prototype!==Function)return null==(e=n.onLoaded)||e.call(n,t),t;try{let i=null==(a=await t())?void 0:a.default;if(i&&i.isSupported)null==(h=n.onLoaded)||h.call(n,i);else throw Error("");return i}catch(t){null==(r=n.onLoadError)||r.call(n,t)}}}async function o(t){var i,e,h;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,s.j)(t)){null==(i=r.onLoadStart)||i.call(r);try{if(await (0,a.h)(t),!(0,s.r)(window.Hls))throw Error("");let i=window.Hls;return null==(e=r.onLoaded)||e.call(r,i),i}catch(t){null==(h=r.onLoadError)||h.call(r,t)}}}class u extends h.VideoProvider{get ctor(){return this.Ye}get instance(){return this.d.instance}get type(){return"hls"}get canLiveSync(){return!0}get config(){return this.d.pd}set config(t){this.d.pd=t}get library(){return this.Hb}set library(t){this.Hb=t}preconnect(){(0,s.j)(this.Hb)&&(0,a.p)(this.Hb)}setup(){super.setup(),new d(this.Hb,this.b,t=>{this.Ye=t,this.d.setup(t),this.b.delegate.c("provider-setup",this);let i=(0,s.p)(this.b.$state.source);i&&this.loadSource(i)})}async loadSource(t,i){if(!(0,s.j)(t.src))return void this.an();this.a.preload=i||"",this.Ym(t,"application/x-mpegurl"),this.d.Rk(t),this.W=t}onInstance(t){let i=this.d.instance;return i&&t(i),this.d.qd.add(t),()=>this.d.qd.delete(t)}destroy(){this.d.bh()}constructor(){super(...arguments),this.$$PROVIDER_TYPE="HLS",this.Ye=null,this.d=new l(this.video,this.b),this.Hb="".concat("https://cdn.jsdelivr.net","/npm/hls.js@^1.5.0/dist/hls",".min.js")}}u.supported=(0,a.j)()},62634:(t,i,e)=>{e.d(i,{R:()=>a});var s=e(7311);class a{Cb(){(0,s.i)(this.da)&&this.Pe()}sa(){(0,s.c)(this.da)&&window.cancelAnimationFrame(this.da),this.da=void 0}Pe(){this.da=window.requestAnimationFrame(()=>{(0,s.i)(this.da)||(this.Da(),this.Pe())})}constructor(t){this.Da=t}}},64250:(t,i,e)=>{e.r(i),e.d(i,{VideoProvider:()=>g});var s=e(7311),a=e(85594),h=e(66140);e(12115);class r{Xc(t){var i,e;let s=t.track;if(!s||(i=this.m,e=s,Array.from(i.children).find(t=>t.track===e)))return;let h=new a.b({id:s.id,kind:s.kind,label:s.label,language:s.language,type:"vtt"});h[a.i.U]={track:s},h[a.i.N]=2,h[a.i.ue]=!0;let r=0,n=t=>{if(s.cues)for(let i=r;i<s.cues.length;i++)h.addCue(s.cues[i],t),r++};n(t),s.oncuechange=n,this.b.textTracks.add(h,t),h.setMode(s.mode,t)}dd(){for(let i of(this.m.textTracks.onaddtrack=null,this.b.textTracks)){var t;let e=null==(t=i[a.i.U])?void 0:t.track;(null==e?void 0:e.oncuechange)&&(e.oncuechange=null)}}constructor(t,i){this.m=t,this.b=i,t.textTracks.onaddtrack=this.Xc.bind(this),(0,s.v)(this.dd.bind(this))}}class n{get active(){return document.pictureInPictureElement===this.m}get supported(){return(0,a.w)(this.m)}async enter(){return this.m.requestPictureInPicture()}exit(){return document.exitPictureInPicture()}Kg(t){this.C(!0,t)}Lg(t){this.C(!1,t)}constructor(t,i){this.m=t,this.a=i,this.C=(t,i)=>{this.a.delegate.c("picture-in-picture-change",t,i)},(0,s.l)(this.m,"enterpictureinpicture",this.Kg.bind(this)),(0,s.l)(this.m,"leavepictureinpicture",this.Lg.bind(this))}}class l{get Te(){return(0,a.x)(this.m)}async lc(t){this.J!==t&&this.m.webkitSetPresentationMode(t)}Va(t){var i;let e=this.J;this.J=this.m.webkitPresentationMode,null==(i=this.a.player)||i.dispatch(new s.D("video-presentation-change",{detail:this.J,trigger:t})),["fullscreen","picture-in-picture"].forEach(i=>{(this.J===i||e===i)&&this.a.delegate.c("".concat(i,"-change"),this.J===i,t)})}constructor(t,i){this.m=t,this.a=i,this.J="inline",(0,s.l)(this.m,"webkitpresentationmodechanged",this.Va.bind(this))}}class d{get active(){return"fullscreen"===this.ga.J}get supported(){return this.ga.Te}async enter(){this.ga.lc("fullscreen")}async exit(){this.ga.lc("inline")}constructor(t){this.ga=t}}class c{get active(){return"picture-in-picture"===this.ga.J}get supported(){return this.ga.Te}async enter(){this.ga.lc("picture-in-picture")}async exit(){this.ga.lc("inline")}constructor(t){this.ga=t}}class o{get supported(){return this.Te()}mk(){!a.I&&this.m.remote&&this.Pl&&(this.m.remote.watchAvailability(t=>{this.Te.set(t)}).catch(()=>{this.Te.set(!1)}),(0,s.g)(this.Sm.bind(this)))}Sm(){if(!this.Te())return;let t=this.Sg.bind(this);for(let i of(t(),(0,s.l)(this.m,"playing",t),["connecting","connect","disconnect"]))(0,s.l)(this.m.remote,i,t)}async prompt(){if(!this.supported)throw Error("Not supported on this platform.");return"airplay"===this.wb&&this.m.webkitShowPlaybackTargetPicker?this.m.webkitShowPlaybackTargetPicker():this.m.remote.prompt()}Sg(t){let i=this.m.remote.state;if(i===this.nc)return;let e={type:this.wb,state:i};this.b.delegate.c("remote-playback-change",e,t),this.nc=i}constructor(t,i){this.m=t,this.b=i,this.Te=(0,s.s)(!1),this.mk()}}class u extends o{get Pl(){return"WebKitPlaybackTargetAvailabilityEvent"in window}constructor(){super(...arguments),this.wb="airplay"}}class g extends h.H{get type(){return"video"}setup(){super.setup(),(0,a.y)(this.video)&&new r(this.video,this.b),this.b.textRenderers.Ge(this.video),(0,s.v)(()=>{this.b.textRenderers.Ge(null)}),"video"===this.type&&this.b.delegate.c("provider-setup",this)}get video(){return this.a}constructor(t,i){super(t,i),this.$$PROVIDER_TYPE="VIDEO",(0,s.G)(()=>{if(this.airPlay=new u(t,i),(0,a.x)(t)){let e=new l(t,i);this.fullscreen=new d(e),this.pictureInPicture=new c(e)}else(0,a.w)(t)&&(this.pictureInPicture=new n(t,i))},this.scope)}}},66140:(t,i,e)=>{e.d(i,{H:()=>l});var s=e(7311),a=e(85594),h=e(62634);class r{get a(){return this.i.media}get c(){return this.b.delegate.c}dd(){this.ad=!1,this.bd=!1,this.Ea.sa(),this.ta.empty()}cd(){let t=this.a.currentTime;this.b.$state.realCurrentTime()!==t&&this.ab(t)}qg(){this.u("loadstart",this.Fa),this.u("abort",this.Qe),this.u("emptied",this.sg),this.u("error",this.V),this.u("volumechange",this.bb)}tg(){this.ad||(this.ta.add(this.u("loadeddata",this.ug),this.u("loadedmetadata",this.vg),this.u("canplay",this.ic),this.u("canplaythrough",this.wg),this.u("durationchange",this.xg),this.u("play",this.yb),this.u("progress",this.jc),this.u("stalled",this.yg),this.u("suspend",this.zg),this.u("ratechange",this.Cg)),this.ad=!0)}Ag(){this.bd||(this.ta.add(this.u("pause",this.Ba),this.u("playing",this.Bg),this.u("seeked",this.cb),this.u("seeking",this.Dg),this.u("ended",this.Eb),this.u("waiting",this.ed)),this.bd=!0)}u(t,i){return(0,s.l)(this.a,t,i.bind(this))}Fg(t){}ab(t,i){let e={currentTime:Math.min(t,this.b.$state.seekableEnd()),played:this.a.played};this.c("time-update",e,i)}Fa(t){if(3===this.a.networkState)return void this.Qe(t);this.tg(),this.c("load-start",void 0,t)}Qe(t){this.c("abort",void 0,t)}sg(){this.c("emptied",void 0,event)}ug(t){this.c("loaded-data",void 0,t)}vg(t){this.Ag(),this.c("loaded-metadata",void 0,t),(a.e||a.k&&(0,a.m)(this.b.$state.source()))&&this.b.delegate.kc(this.fd(),t)}fd(){return{provider:(0,s.p)(this.b.$provider),duration:this.a.duration,buffered:this.a.buffered,seekable:this.a.seekable}}yb(t){this.b.$state.canPlay&&this.c("play",void 0,t)}Ba(t){(1!==this.a.readyState||this.Db)&&(this.Db=!1,this.Ea.sa(),this.c("pause",void 0,t))}ic(t){this.b.delegate.kc(this.fd(),t)}wg(t){this.b.$state.started()||this.c("can-play-through",this.fd(),t)}Bg(t){this.Db=!1,this.c("playing",void 0,t),this.Ea.Cb()}yg(t){this.c("stalled",void 0,t),this.a.readyState<3&&(this.Db=!0,this.c("waiting",void 0,t))}ed(t){this.a.readyState<3&&(this.Db=!0,this.c("waiting",void 0,t))}Eb(t){this.Ea.sa(),this.ab(this.a.duration,t),this.c("end",void 0,t),this.b.$state.loop()&&(0,s.w)(this.a.controls)&&(this.a.controls=!1)}rg(){this.b.$state.paused()&&(0,s.l)(this.a,"timeupdate",this.Fb.bind(this))}Fb(t){this.ab(this.a.currentTime,t)}xg(t){this.b.$state.ended()&&this.ab(this.a.duration,t),this.c("duration-change",this.a.duration,t)}bb(t){let i={volume:this.a.volume,muted:this.a.muted};this.c("volume-change",i,t)}cb(t){this.ab(this.a.currentTime,t),this.c("seeked",this.a.currentTime,t),Math.trunc(this.a.currentTime)===Math.trunc(this.a.duration)&&(0,a.n)(this.a.duration)>(0,a.n)(this.a.currentTime)&&(this.ab(this.a.duration,t),this.a.ended||this.b.player.dispatch(new s.D("media-play-request",{trigger:t})))}Dg(t){this.c("seeking",this.a.currentTime,t)}jc(t){let i={buffered:this.a.buffered,seekable:this.a.seekable};this.c("progress",i,t)}zg(t){this.c("suspend",void 0,t)}Cg(t){this.c("rate-change",this.a.playbackRate,t)}V(t){let i=this.a.error;if(!i)return;let e={message:i.message,code:i.code,mediaError:i};this.c("error",e,t)}constructor(t,i){this.i=t,this.b=i,this.ta=(0,s.t)(),this.Db=!1,this.ad=!1,this.bd=!1,this.Ea=new h.R(this.cd.bind(this)),this.Re=void 0,this.Eg=void 0,this.qg(),(0,s.g)(this.rg.bind(this)),(0,s.v)(this.dd.bind(this))}}class n{get Gb(){return this.i.media.audioTracks}Gg(t){let i=t.track;if(""===i.label)return;let e={id:i.id.toString(),label:i.label,language:i.language,kind:i.kind,selected:!1};this.b.audioTracks[a.L.pa](e,t),i.enabled&&(e.selected=!0)}Hg(t){let i=this.b.audioTracks.getById(t.track.id);i&&this.b.audioTracks[a.L.Zb](i,t)}Ig(t){let i=this.Se();if(!i)return;let e=this.b.audioTracks.getById(i.id);e&&this.b.audioTracks[a.L.qa](e,!0,t)}Se(){return Array.from(this.Gb).find(t=>t.enabled)}Jg(t){let{current:i}=t.detail;if(!i)return;let e=this.Gb.getTrackById(i.id);if(e){let t=this.Se();t&&(t.enabled=!1),e.enabled=!0}}constructor(t,i){this.i=t,this.b=i,this.Gb.onaddtrack=this.Gg.bind(this),this.Gb.onremovetrack=this.Hg.bind(this),this.Gb.onchange=this.Ig.bind(this),(0,s.l)(this.b.audioTracks,"change",this.Jg.bind(this))}}class l{setup(){new r(this,this.b),"audioTracks"in this.media&&new n(this,this.b),(0,s.v)(()=>{for(let t of(this.a.srcObject=null,this.a.removeAttribute("src"),this.a.querySelectorAll("source")))t.remove();this.a.load()})}get type(){return""}get media(){return this.a}get currentSrc(){return this.W}setPlaybackRate(t){this.a.playbackRate=t}async play(){return this.a.play()}async pause(){return this.a.pause()}setMuted(t){this.a.muted=t}setVolume(t){this.a.volume=t}setCurrentTime(t){this.a.currentTime=t}setPlaysInline(t){(0,s.x)(this.a,"playsinline",t)}async loadSource(t,i){let{src:e,type:h}=t;this.a.preload=i||"",(0,a.o)(e)?(this.an(),this.a.srcObject=e):(this.a.srcObject=null,(0,s.j)(e)?"?"!==h?this.Ym({src:e,type:h}):(this.an(),this.a.src=this.nl(e)):(this.an(),this.a.src=window.URL.createObjectURL(e))),this.a.load(),this.W={src:e,type:h}}Ym(t,i){let e=this.a.querySelector("source[data-vds]"),a=null!=e?e:document.createElement("source");(0,s.x)(a,"src",this.nl(t.src)),(0,s.x)(a,"type","?"!==t.type?t.type:i),(0,s.x)(a,"data-vds",""),e||this.a.append(a)}an(){var t;null==(t=this.a.querySelector("source[data-vds]"))||t.remove()}nl(t){let{clipStartTime:i,clipEndTime:e}=this.b.$state,s=i(),a=e();return s>0&&a>0?"".concat(t,"#t=").concat(s,",").concat(a):s>0?"".concat(t,"#t=").concat(s):a>0?"".concat(t,"#t=0,").concat(a):t}constructor(t,i){this.a=t,this.b=i,this.scope=(0,s.h)(),this.W=null}}}}]);