"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2796],{32:(e,t,l)=>{l.d(t,{f:()=>c});var n=l(95155),a=l(2159),i=l(84127),r=l(97400),s=l(12115),o=l(70376),d=l(64685);let c=(0,s.memo)(e=>{let{mediaId:t,allFilesLocked:l,size:c="sm"}=e,[u,m]=s.useState(l),{mutate:p,isPending:x}=(0,a.qt)(t);s.useLayoutEffect(()=>{m(l)},[l]);let v=s.useCallback(()=>{p({mediaId:t,action:"toggle-lock"}),m(e=>!e)},[t]);return(0,n.jsx)(r.m_,{trigger:(0,n.jsx)(i.K0,{icon:u?(0,n.jsx)(d.zu7,{}):(0,n.jsx)(o.iXN,{}),intent:u?"success-subtle":"warning-subtle",size:c,className:"hover:opacity-60",loading:x,onClick:v}),children:u?"Unlock all files":"Lock all files"})})},10109:(e,t,l)=>{l.d(t,{Lq:()=>b,PV:()=>m,QQ:()=>p,R7:()=>c,X8:()=>w,YI:()=>v,a8:()=>j,gA:()=>h,gv:()=>d,mS:()=>S,yN:()=>E});var n=l(19749),a=l(7675),i=l(74889),r=l(37817),s=l(46278),o=l(69554);function d(){let e,t,l=(0,n.c)(3);(0,r.v1)();let o=(0,s.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[i.S.PLAYBACK_MANAGER.PlaybackSyncCurrentProgress.key],l[0]=e):e=l[0],l[1]!==o?(t={endpoint:i.S.PLAYBACK_MANAGER.PlaybackSyncCurrentProgress.endpoint,method:i.S.PLAYBACK_MANAGER.PlaybackSyncCurrentProgress.methods[0],mutationKey:e,onSuccess:async e=>{await o.invalidateQueries({queryKey:[i.S.ANIME_ENTRIES.GetAnimeEntry.key,String(e)]}),await o.invalidateQueries({queryKey:[i.S.ANIME_COLLECTION.GetLibraryCollection.key]}),await o.invalidateQueries({queryKey:[i.S.ANILIST.GetAnimeCollection.key]})}},l[1]=o,l[2]=t):t=l[2],(0,a.qk)(t)}function c(){let e;for(var t=arguments.length,l=Array(t),r=0;r<t;r++)l[r]=arguments[r];let s=(0,n.c)(2);return s[0]!==l?(e={endpoint:i.S.PLAYBACK_MANAGER.PlaybackPlayNextEpisode.endpoint,method:i.S.PLAYBACK_MANAGER.PlaybackPlayNextEpisode.methods[0],mutationKey:[i.S.PLAYBACK_MANAGER.PlaybackPlayNextEpisode.key,...l],onSuccess:u},s[0]=l,s[1]=e):e=s[1],(0,a.qk)(e)}async function u(){}function m(e){let t,l,r=(0,n.c)(4),{onSuccess:o}=e,d=(0,s.jE)();return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=[i.S.PLAYBACK_MANAGER.PlaybackStartPlaylist.key],r[0]=t):t=r[0],r[1]!==o||r[2]!==d?(l={endpoint:i.S.PLAYBACK_MANAGER.PlaybackStartPlaylist.endpoint,method:i.S.PLAYBACK_MANAGER.PlaybackStartPlaylist.methods[0],mutationKey:t,onSuccess:async()=>{await d.refetchQueries({queryKey:[i.S.PLAYLIST.GetPlaylists.key]}),null==o||o()}},r[1]=o,r[2]=d,r[3]=l):l=r[3],(0,a.qk)(l)}function p(){let e;for(var t=arguments.length,l=Array(t),r=0;r<t;r++)l[r]=arguments[r];let s=(0,n.c)(2);return s[0]!==l?(e={endpoint:i.S.PLAYBACK_MANAGER.PlaybackCancelCurrentPlaylist.endpoint,method:i.S.PLAYBACK_MANAGER.PlaybackCancelCurrentPlaylist.methods[0],mutationKey:[i.S.PLAYBACK_MANAGER.PlaybackCancelCurrentPlaylist.key,...l],onSuccess:x},s[0]=l,s[1]=e):e=s[1],(0,a.qk)(e)}async function x(){o.oR.info("Cancelling playlist")}function v(){let e;for(var t=arguments.length,l=Array(t),r=0;r<t;r++)l[r]=arguments[r];let s=(0,n.c)(2);return s[0]!==l?(e={endpoint:i.S.PLAYBACK_MANAGER.PlaybackPlaylistNext.endpoint,method:i.S.PLAYBACK_MANAGER.PlaybackPlaylistNext.methods[0],mutationKey:[i.S.PLAYBACK_MANAGER.PlaybackPlaylistNext.key,...l],onSuccess:f},s[0]=l,s[1]=e):e=s[1],(0,a.qk)(e)}async function f(){o.oR.info("Loading next file")}function h(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:i.S.PLAYBACK_MANAGER.PlaybackPlayVideo.endpoint,method:i.S.PLAYBACK_MANAGER.PlaybackPlayVideo.methods[0],mutationKey:[i.S.PLAYBACK_MANAGER.PlaybackPlayVideo.key],onSuccess:g},t[0]=e):e=t[0],(0,a.qk)(e)}async function g(){}function b(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:i.S.PLAYBACK_MANAGER.PlaybackPlayRandomVideo.endpoint,method:i.S.PLAYBACK_MANAGER.PlaybackPlayRandomVideo.methods[0],mutationKey:[i.S.PLAYBACK_MANAGER.PlaybackPlayRandomVideo.key],onSuccess:y},t[0]=e):e=t[0],(0,a.qk)(e)}async function y(){o.oR.success("Playing random episode")}function j(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:i.S.PLAYBACK_MANAGER.PlaybackStartManualTracking.endpoint,method:i.S.PLAYBACK_MANAGER.PlaybackStartManualTracking.methods[0],mutationKey:[i.S.PLAYBACK_MANAGER.PlaybackStartManualTracking.key],onSuccess:N},t[0]=e):e=t[0],(0,a.qk)(e)}async function N(){}function S(e){let t,l,r=(0,n.c)(3),{onSuccess:s}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=[i.S.PLAYBACK_MANAGER.PlaybackCancelManualTracking.key],r[0]=t):t=r[0],r[1]!==s?(l={endpoint:i.S.PLAYBACK_MANAGER.PlaybackCancelManualTracking.endpoint,method:i.S.PLAYBACK_MANAGER.PlaybackCancelManualTracking.methods[0],mutationKey:t,onSuccess:async()=>{null==s||s()}},r[1]=s,r[2]=l):l=r[2],(0,a.qk)(l)}function w(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:i.S.PLAYBACK_MANAGER.PlaybackGetNextEpisode.endpoint,method:i.S.PLAYBACK_MANAGER.PlaybackGetNextEpisode.methods[0],mutationKey:[i.S.PLAYBACK_MANAGER.PlaybackGetNextEpisode.key]},t[0]=e):e=t[0],(0,a.qk)(e)}function E(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:i.S.PLAYBACK_MANAGER.PlaybackAutoPlayNextEpisode.endpoint,method:i.S.PLAYBACK_MANAGER.PlaybackAutoPlayNextEpisode.methods[0],mutationKey:[i.S.PLAYBACK_MANAGER.PlaybackAutoPlayNextEpisode.key],onSuccess:A},t[0]=e):e=t[0],(0,a.qk)(e)}async function A(){o.oR.info("Loading next episode")}},13029:(e,t,l)=>{l.d(t,{U:()=>b});var n=l(95155),a=l(47601),i=l(18292),r=l(32754),s=l(37817),o=l(35656),d=l(47342),c=l(91360),u=l(6773),m=l(90711),p=l(91332),x=l(35089),v=l(6066),f=l(12115),h=l(78453),g=l(10653);function b(e){var t,l;let{children:b,actionIcon:y=null!==e.actionIcon?(0,n.jsx)(h.G2B,{className:"opacity-50"}):void 0,image:j,onClick:N,topTitle:S,meta:w,title:E,type:A="carousel",isInvalid:C,className:k,containerClass:I,mRef:_,episodeNumber:T,progressTotal:D,progressNumber:M,hasDiscrepancy:R,length:P,imageClass:F,badge:L,percentageComplete:B,minutesRemaining:z,anime:K,...O}=e,G=(0,v.useRouter)(),Y=(0,v.usePathname)(),V=(0,s.v1)(),q=(0,p.Ky)(),{setPreviewModalMediaId:U}=(0,r.D)(),H=q.showEpisodeCardAnimeInfo&&!!K,Q=f.useMemo(()=>!!D&&D>1,[D]),$=f.useMemo(()=>+!!R,[R]),W=()=>(0,n.jsxs)("div",{"data-episode-card-info-container":!0,className:"relative z-[3] w-full space-y-0",children:[(0,n.jsx)("p",{"data-episode-card-title":!0,className:"w-[80%] line-clamp-1 text-md md:text-lg transition-colors duration-200 text-[--foreground] font-semibold",children:null==S?void 0:S.replaceAll("`","'")}),(0,n.jsxs)("div",{"data-episode-card-info-content":!0,className:"w-full justify-between flex flex-none items-center",children:[(0,n.jsxs)("p",{"data-episode-card-subtitle":!0,className:"line-clamp-1 flex items-center",children:[(0,n.jsxs)("span",{className:"flex-none text-base md:text-xl font-medium",children:[E,Q?(0,n.jsxs)("span",{className:"opacity-40",children:[" / ",D-$]}):""]}),(0,n.jsx)("span",{className:"text-[--muted] text-base md:text-xl ml-2 font-normal line-clamp-1",children:H?"- "+K.title:""})]}),(!!w||!!P)&&(0,n.jsxs)("p",{"data-episode-card-meta-text":!0,className:"text-[--muted] flex-none ml-2 text-sm md:text-base line-clamp-2 text-right",children:[w,!!w&&!!P&&"  â€¢ ",P?"".concat(P,"m"):""]})]})]});return(0,n.jsx)(a.i,{hideMenuIf:!(null==K?void 0:K.id),content:(0,n.jsxs)(d.Q2,{children:[(0,n.jsx)(d.F7,{className:"text-[--muted] line-clamp-1 py-0 my-2",children:null==K?void 0:K.title}),"/entry"!==Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.kt,{onClick:()=>{G.push("/entry?id=".concat(null==K?void 0:K.id))},children:"Open page"}),!(null==V?void 0:V.isOffline)&&(0,n.jsx)(d.kt,{onClick:()=>{U((null==K?void 0:K.id)||0,"anime")},children:"Preview"})]}),(0,n.jsx)(g.tq,{episode:e.episode})]}),children:(0,n.jsx)(d.Rc,{children:(0,n.jsxs)("div",{ref:_,className:(0,c.cn)("rounded-lg overflow-hidden space-y-2 flex-none group/episode-card cursor-pointer","select-none","carousel"===A&&"w-full","grid"===A&&"aspect-[4/2] w-72 lg:w-[26rem]",k,I),onClick:N,"data-episode-card":!0,"data-episode-number":T,"data-media-id":null==K?void 0:K.id,"data-progress-total":D,"data-progress-number":M,...O,children:[(0,n.jsxs)("div",{"data-episode-card-image-container":!0,className:"w-full h-full rounded-lg overflow-hidden z-[1] aspect-[4/2] relative",children:[j?(0,n.jsx)(x.default,{"data-episode-card-image":!0,src:(0,m.VG)(j),alt:"",fill:!0,quality:100,placeholder:(0,o.r)(700,475),sizes:"20rem",className:(0,c.cn)("object-cover rounded-lg object-center transition lg:group-hover/episode-card:scale-105 duration-200",F)}):(0,n.jsx)("div",{"data-episode-card-image-bottom-gradient":!0,className:"h-full block rounded-lg absolute w-full bg-gradient-to-t from-gray-800 to-transparent z-[2]"}),(0,n.jsx)(i._,{}),(null==V||null==(l=V.settings)||null==(t=l.library)?void 0:t.enableWatchContinuity)&&!!B&&(0,n.jsxs)("div",{"data-episode-card-progress-bar-container":!0,className:"absolute bottom-0 left-0 w-full z-[3]","data-episode-number":T,"data-media-id":null==K?void 0:K.id,"data-progress-total":D,"data-progress-number":M,children:[(0,n.jsx)(u.z,{value:B,size:"xs"}),z&&(0,n.jsx)("div",{className:"absolute bottom-2 right-2",children:(0,n.jsxs)("p",{className:"text-[--muted] text-sm",children:[z,"m left"]})})]}),(0,n.jsx)("div",{"data-episode-card-action-icon":!0,className:(0,c.cn)("group-hover/episode-card:opacity-100 text-6xl text-gray-200","cursor-pointer opacity-0 transition-opacity bg-gray-950 bg-opacity-60 z-[2] absolute w-[105%] h-[105%] items-center justify-center","hidden md:flex"),children:y&&y}),C&&(0,n.jsx)("p",{"data-episode-card-invalid-metadata":!0,className:"text-red-300 opacity-50 absolute left-2 bottom-2 z-[2]",children:"No metadata found"})]}),H?(0,n.jsxs)("div",{"data-episode-card-anime-info-container":!0,className:"flex gap-3 items-center",children:[(0,n.jsx)("div",{"data-episode-card-anime-image-container":!0,className:"flex-none w-12 aspect-[5/6] rounded-lg overflow-hidden z-[1] relative",children:!!(null==K?void 0:K.image)&&(0,n.jsx)(x.default,{"data-episode-card-anime-image":!0,src:(0,m.VG)(K.image),alt:"",fill:!0,quality:100,placeholder:(0,o.r)(700,475),sizes:"20rem",className:(0,c.cn)("object-cover rounded-lg object-center transition lg:group-hover/episode-card:scale-105 duration-200",F)})}),(0,n.jsx)(W,{})]}):(0,n.jsx)(W,{})]})})})}},18292:(e,t,l)=>{l.d(t,{H:()=>r,_:()=>s});var n=l(95155),a=l(19749),i=l(91332);function r(){let e,t=(0,a.c)(2),l=(0,i.Ky)();if(l.libraryScreenCustomBackgroundImage||l.hasCustomBackgroundColor){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{"data-media-card-body-bottom-gradient":!0,className:"z-[5] absolute inset-x-0 bottom-0 w-full h-[40%] opacity-80 bg-gradient-to-t from-[#0c0c0c] to-transparent"}),t[0]=e):e=t[0],e}return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{"data-media-card-body-bottom-gradient":!0,className:"z-[5] absolute inset-x-0 bottom-0 w-full opacity-90 to-40% h-[50%] bg-gradient-to-t from-[#0c0c0c] to-transparent"}),t[1]=e):e=t[1],e}function s(){let e,t=(0,a.c)(2);if((0,i.Ky)().useLegacyEpisodeCard){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{"data-episode-item-bottom-gradient":!0,className:"z-[1] absolute inset-x-0 bottom-0 w-full h-full opacity-90 md:h-[80%] bg-gradient-to-t from-[#0c0c0c] to-transparent"}),t[0]=e):e=t[0],e}return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{"data-episode-item-bottom-gradient":!0,className:"z-[1] absolute inset-x-0 bottom-0 w-full h-full opacity-50 md:h-[70%] bg-gradient-to-t from-[#0c0c0c] to-transparent"}),t[1]=e):e=t[1],e}l(12115)},24449:(e,t,l)=>{l.d(t,{v:()=>c});var n=l(95155),a=l(19749),i=l(36945),r=l(61585),s=l(63717),o=l(86694),d=l.n(o);function c(e){let t,l,r,s,o,d,c=(0,a.c)(12),{entry:f,details:h}=e;if(c[0]!==h||c[1]!==f){o=Symbol.for("react.early_return_sentinel");e:{var g,b,y,j,N,S,w,E;let e=null==h||null==(j=h.relations)||null==(y=j.edges)||null==(b=y.filter(Boolean))||null==(g=b.filter(v))?void 0:g.slice(0,3),a=(null==h||null==(E=h.recommendations)||null==(w=E.edges)||null==(S=w.map(x))||null==(N=S.filter(Boolean))?void 0:N.slice(0,6))||[];if(!f||!h){o=null;break e}t="space-y-4",l=!0,r=!!(null==e?void 0:e.length)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:"Relations"}),(0,n.jsx)(i.Ln,{children:null==e?void 0:e.toSorted(p).map(m)})]}),s=a.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:"Recommendations"}),(0,n.jsx)(i.Ln,{children:a.map(u)})]})}c[0]=h,c[1]=f,c[2]=t,c[3]=l,c[4]=r,c[5]=s,c[6]=o}else t=c[2],l=c[3],r=c[4],s=c[5],o=c[6];return o!==Symbol.for("react.early_return_sentinel")?o:(c[7]!==t||c[8]!==l||c[9]!==r||c[10]!==s?(d=(0,n.jsxs)("div",{className:t,"data-manga-recommendations-container":l,children:[r,s]}),c[7]=t,c[8]=l,c[9]=r,c[10]=s,c[11]=d):d=c[11],d)}function u(e){return(0,n.jsx)("div",{className:"col-span-1",children:(0,n.jsx)(r.V,{media:e,type:"manga"})},e.id)}function m(e){var t,l;return(0,n.jsx)("div",{className:"col-span-1",children:(0,n.jsx)(r.V,{media:null==e?void 0:e.node,showLibraryBadge:!0,showTrailer:!0,overlay:(0,n.jsx)(s.E,{className:"font-semibold text-white bg-gray-950 !bg-opacity-90 rounded-[--radius-md] text-base rounded-bl-none rounded-tr-none",intent:"gray",size:"lg",children:(null==e||null==(t=e.node)?void 0:t.format)==="MOVIE"?d()(e.relationType||"").replace("_"," ")+" (Movie)":d()(e.relationType||"").replace("_"," ")}),type:"anime"})},null==e||null==(l=e.node)?void 0:l.id)}function p(e,t){var l,n,a,i;return(null==(l=e.node)?void 0:l.format)==="TV"&&(null==(n=t.node)?void 0:n.format)!=="TV"?-1:+((null==(a=e.node)?void 0:a.format)!=="TV"&&(null==(i=t.node)?void 0:i.format)==="TV")}function x(e){var t;return null==e||null==(t=e.node)?void 0:t.mediaRecommendation}function v(e){var t,l,n,a;return(null==e||null==(t=e.node)?void 0:t.type)==="ANIME"&&((null==e||null==(l=e.node)?void 0:l.format)==="TV"||(null==e||null==(n=e.node)?void 0:n.format)==="MOVIE"||(null==e||null==(a=e.node)?void 0:a.format)==="TV_SHORT")}l(12115)},24685:(e,t,l)=>{l.d(t,{m:()=>eR,l:()=>eM});var n=l(95155),a=l(19749),i=l(55014),r=l(37817),s=l(51441),o=l(98802),d=l(68648),c=l(41963),u=l(95094),m=l(36808),p=l(84127),x=l(91360),v=l(2091),f=l(76049),h=l(52885),g=l(22960),b=l(97400),y=l(29724),j=l(12115),N=l(38628),S=l(41452);function w(e){let{entry:t}=e,[,l]=(0,y.fp)(d.IF),[a,i]=(0,y.fp)(c.W),[r,w]=j.useState(""),{torrentStreamingSelectedEpisode:E}=(0,u.O)(),{data:A,isLoading:C}=(0,o.R5)({torrent:a,media:t.media,episodeNumber:null==E?void 0:E.episodeNumber},!!a),{handleStreamSelection:k}=(0,s.u)();function I(e){""!=e&&a&&E&&E.aniDBEpisode&&(k({torrent:a,entry:t,aniDBEpisode:E.aniDBEpisode,episodeNumber:E.episodeNumber,chosenFileId:e}),i(void 0),w(""),l(void 0))}j.useEffect(()=>{A&&1===A.length&&(w(String(A[0].fileId)),j.startTransition(()=>{I(String(A[0].fileId))}))},[A]);let _=null==A?void 0:A.some(e=>e.isLikely),T=_&&(null==A?void 0:A.filter(e=>e.isLikely).length)===1,D=j.useRef(null),M=j.useCallback(()=>{var e;return(0,n.jsx)(h.z,{value:r,onValueChange:e=>w(e),options:(null==A||null==(e=A.toSorted((e,t)=>e.path.localeCompare(t.path)))?void 0:e.map((e,t)=>({label:(0,n.jsxs)("div",{className:(0,x.cn)("w-full",_&&!e.isLikely&&"opacity-60"),ref:T&&e.isLikely?D:void 0,children:[(0,n.jsx)("p",{className:"mb-1 line-clamp-1",children:e.displayTitle}),e.isLikely&&(0,n.jsxs)("p",{className:"flex items-center",children:[(0,n.jsx)(S._IM,{className:"text-[--green] mr-1"}),(0,n.jsx)("span",{className:"text-white",children:"Likely match"})]}),(0,n.jsx)(b.m_,{trigger:(0,n.jsx)("p",{className:"font-normal line-clamp-1 text-sm text-[--muted]",children:e.displayPath}),children:e.path})]}),value:String(e.fileId)})))||[],itemContainerClass:(0,x.cn)("items-start cursor-pointer transition border-transparent rounded-[--radius] p-2 w-full","hover:bg-[--subtle] bg-gray-900 hover:bg-gray-950","data-[state=checked]:bg-white dark:data-[state=checked]:bg-gray-950","focus:ring-2 ring-brand-100 dark:ring-brand-900 ring-offset-1 ring-offset-[--background] focus-within:ring-2 transition","border border-transparent data-[state=checked]:border-[--brand] data-[state=checked]:ring-offset-0"),itemClass:(0,x.cn)("border-transparent absolute top-2 right-2 bg-transparent dark:bg-transparent dark:data-[state=unchecked]:bg-transparent","data-[state=unchecked]:bg-transparent data-[state=unchecked]:hover:bg-transparent dark:data-[state=unchecked]:hover:bg-transparent","focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:ring-offset-transparent"),itemIndicatorClass:"hidden",itemLabelClass:"font-medium flex flex-col items-center data-[state=checked]:text-[--brand] cursor-pointer",stackClass:"flex flex-col gap-2 space-y-0"})},[A,r,_]),R=j.useRef(null);return j.useEffect(()=>{if(T&&D.current&&R.current){let e=setTimeout(()=>{let e=D.current,t=R.current;if(e&&t){let l=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=l.top-n.top+t.scrollTop-16;t.scrollTo({top:a,behavior:"smooth"})}},1e3);return()=>clearTimeout(e)}},[T,D.current]),(0,n.jsx)(f.a,{open:!!a,onOpenChange:e=>{e||(i(void 0),w(""))},contentClass:"max-w-5xl",title:(null==A?void 0:A.length)!==1?"Choose a file to stream":"Launching stream...",children:C||(null==A?void 0:A.length)===1?(0,n.jsx)(v.kt,{title:(null==A?void 0:A.length)===1?"Launching stream...":"Fetching torrent info..."}):(0,n.jsxs)(m.KZ,{className:"mt-4",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"flex flex-1"}),(0,n.jsx)(p.$n,{intent:"primary",className:"",rightIcon:(0,n.jsx)(N.HI7,{className:"text-xl"}),disabled:""===r||C,onClick:()=>I(r),children:"Stream"})]}),(0,n.jsx)(g.F,{viewportRef:R,className:"h-[75dvh] overflow-y-auto p-4 border rounded-[--radius-md]",children:(0,n.jsx)(M,{})})]})})}var E=l(63717),A=l(42732),C=l.n(A),k=l(2311),I=l(43994),_=l(28002);function T(e){let t,l=(0,a.c)(3),{resolution:i}=e;if(!i)return null;let r=(null==i?void 0:i.includes("1080"))?"warning":(null==i?void 0:i.includes("2160"))||(null==i?void 0:i.toLowerCase().includes("4k"))?"success":(null==i?void 0:i.includes("720"))?"blue":"gray";return l[0]!==i||l[1]!==r?(t=(0,n.jsx)(E.E,{"data-torrent-item-resolution-badge":!0,className:"rounded-[--radius-md] border-transparent bg-transparent px-0",intent:r,children:i}),l[0]=i,l[1]=r,l[2]=t):t=l[2],t}function D(e){let t,l,i=(0,a.c)(6),{seeders:r}=e;if(0===r)return null;let s=r>4?r>19?"primary":"success":"gray";i[0]!==r?(t=(0,n.jsx)("span",{className:"text-sm",children:r}),i[0]=r,i[1]=t):t=i[1];let o=r>1?"s":"";return i[2]!==s||i[3]!==t||i[4]!==o?(l=(0,n.jsxs)(E.E,{"data-torrent-item-seeders-badge":!0,className:"rounded-[--radius-md] border-transparent bg-transparent px-0",intent:s,children:[t," seeder",o]}),i[2]=s,i[3]=t,i[4]=o,i[5]=l):l=i[5],l}function M(e){var t,l,i,r,s,o,d,c,u,m,p,x,v,f,h,g,y,j,N,S,w,A;let C,I,T,D,M,K,O,G,Y,V,q=(0,a.c)(25),{metadata:U}=e;if(!U)return null;q[0]!==(null==(t=U.metadata)?void 0:t.subtitles)?(C=null==(d=U.metadata)||null==(o=d.subtitles)?void 0:o.some(z),q[0]=null==(c=U.metadata)?void 0:c.subtitles,q[1]=C):C=q[1];let H=C;q[2]!==(null==(l=U.metadata)?void 0:l.subtitles)?(I=null==(m=U.metadata)||null==(u=m.subtitles)?void 0:u.some(B),q[2]=null==(p=U.metadata)?void 0:p.subtitles,q[3]=I):I=q[3];let Q=I;q[4]!==(null==(i=U.metadata)?void 0:i.language)?(T=(null==(v=U.metadata)||null==(x=v.language)?void 0:x.length)?[...new Set(null==(f=U.metadata)?void 0:f.language)]:[],q[4]=null==(h=U.metadata)?void 0:h.language,q[5]=T):T=q[5];let $=T;return q[6]!==$?(D=(null==$?void 0:$.length)&&2==$.length?null==(g=$.slice(0,2))?void 0:g.map(L):null,q[6]=$,q[7]=D):D=q[7],q[8]!==$?(M=(null==$?void 0:$.length)&&$.length>2?(0,n.jsx)(b.m_,{trigger:(0,n.jsxs)(E.E,{className:"rounded-md bg-transparent border-transparent px-1",children:[(0,n.jsx)(_.T2_,{className:"text-lg text-[--blue]"})," Multiple languages"]}),children:(0,n.jsx)("span",{children:$.join(", ")})}):null,q[8]=$,q[9]=M):M=q[9],q[10]!==(null==(r=U.metadata)?void 0:r.video_term)?(K=null==(j=U.metadata)||null==(y=j.video_term)?void 0:y.map(F),q[10]=null==(N=U.metadata)?void 0:N.video_term,q[11]=K):K=q[11],q[12]!==(null==(s=U.metadata)?void 0:s.audio_term)?(O=null==(w=U.metadata)||null==(S=w.audio_term)?void 0:S.filter(P).map(R),q[12]=null==(A=U.metadata)?void 0:A.audio_term,q[13]=O):O=q[13],q[14]!==H?(G=H&&(0,n.jsxs)(E.E,{className:"rounded-md border-transparent bg-indigo-300 px-1",children:[(0,n.jsx)(k.MlR,{className:"text-lg text-[--red]"})," Dubbed"]}),q[14]=H,q[15]=G):G=q[15],q[16]!==Q?(Y=Q&&(0,n.jsxs)(E.E,{className:"rounded-md border-transparent bg-indigo-300 px-1",children:[(0,n.jsx)(_.dEZ,{className:"text-lg text-[--orange]"})," Multi Subs"]}),q[16]=Q,q[17]=Y):Y=q[17],q[18]!==D||q[19]!==M||q[20]!==K||q[21]!==O||q[22]!==G||q[23]!==Y?(V=(0,n.jsxs)("div",{className:"flex flex-row gap-1 flex-wrap justify-end w-full lg:absolute bottom-0 right-0",children:[D,M,K,O,G,Y]}),q[18]=D,q[19]=M,q[20]=K,q[21]=O,q[22]=G,q[23]=Y,q[24]=V):V=q[24],V}function R(e){return(0,n.jsxs)(E.E,{className:"rounded-md border-transparent bg-[--subtle] px-1",children:[(0,n.jsx)(_.sJ3,{className:"text-lg text-[--rose]"})," ",C()(e)]},e)}function P(e){return e.toLowerCase().includes("dual")||e.toLowerCase().includes("multi")}function F(e){return(0,n.jsx)(E.E,{className:"rounded-md border-transparent bg-[--subtle] !text-[--muted] px-1",children:e},e)}function L(e){return(0,n.jsxs)(E.E,{className:"rounded-md bg-transparent border-transparent px-1",children:[(0,n.jsx)(_.T2_,{className:"text-lg text-[--blue]"})," ",e]},e)}function B(e){return e.toLocaleLowerCase().includes("multi")}function z(e){return e.toLocaleLowerCase().includes("dub")}function K(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(b.m_,{trigger:(0,n.jsx)(E.E,{"data-torrent-item-debrid-instant-availability-badge":!0,className:"rounded-[--radius-md] bg-transparent border-transparent dark:text-[--white] animate-pulse",intent:"white",leftIcon:(0,n.jsx)(I.FY8,{className:"text-lg"}),children:"Cached"}),children:"Instantly available on Debrid service"}),t[0]=e):e=t[0],e}var O=l(43756),G=l(35089),Y=l(78453),V=l(70376),q=l(79858),U=l(28718);let H=(0,j.memo)(e=>{let t,l,i,r,s,o,d,c,u,m,v,f,h,g,y,j,N,w,E,A,C,k,I=(0,a.c)(76),{link:_,isBasic:T,isSelected:D,isInvalid:M,className:R,onClick:P,releaseGroup:F,isBatch:L,title:B,subtitle:z,children:K,action:H,image:Q,fallbackImage:$,isBestRelease:W,confirmed:X,addon:Z}=e,J=L?"":B,ee=!D;I[0]!==R||I[1]!==M||I[2]!==D||I[3]!==ee?(t=(0,x.cn)("border p-3 pr-12 rounded-lg relative transition lg:hover:scale-[1.01] group/torrent-preview-item overflow-hidden","max-w-full bg-[--background]",{"border-brand-200":D,"hover:border-gray-500":ee,"border-red-700":M},R),I[0]=R,I[1]=M,I[2]=D,I[3]=ee,I[4]=t):t=I[4],I[5]!==X||I[6]!==W?(l=X&&(0,n.jsx)("div",{className:"absolute left-2 top-2","data-torrent-preview-item-confirmed-badge":!0,children:(0,n.jsx)(S._IM,{className:(0,x.cn)("text-[--gray] text-lg",W?"text-[--pink]":"opacity-30")})}),I[5]=X,I[6]=W,I[7]=l):l=I[7],I[8]!==$||I[9]!==Q||I[10]!==D?(i=(Q||$)&&(0,n.jsx)(G.default,{"data-torrent-preview-item-image":!0,src:Q||$,alt:"episode image",fill:!0,className:(0,x.cn)("object-cover object-center absolute w-full h-full group-hover/torrent-preview-item:blur-0 transition-opacity opacity-25 group-hover/torrent-preview-item:opacity-60 z-[0] select-none pointer-events-none",!Q&&$&&"opacity-10 group-hover/torrent-preview-item:opacity-30",D&&"opacity-50")}),I[8]=$,I[9]=Q,I[10]=D,I[11]=i):i=I[11],I[12]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)("div",{"data-torrent-preview-item-image-end-gradient":!0,className:"transition-colors absolute w-full h-full -right-2 bg-gradient-to-l from-[--background] hover:from-[var(--hover-from-background-color)] to-transparent z-[1] select-none pointer-events-none"}),I[12]=r):r=I[12],I[13]!==i?(s=(0,n.jsxs)("div",{className:"absolute left-0 top-0 w-full h-full max-w-[180px]","data-torrent-preview-item-image-container":!0,children:[i,r]}),I[13]=i,I[14]=s):s=I[14];let et=!!P;I[15]!==et?(o=(0,x.cn)("flex gap-4 relative z-[2]",{"cursor-pointer":et}),I[15]=et,I[16]=o):o=I[16];let el=T&&"h-20";I[17]!==el?(d=(0,x.cn)("h-24 w-24 lg:w-28 flex-none rounded-[--radius-md] object-cover object-center relative overflow-hidden","flex items-center justify-center","text-xs px-2",el),I[17]=el,I[18]=d):d=I[18],I[19]===Symbol.for("react.memo_cache_sentinel")?(c=(0,x.cn)("z-[1] font-bold truncate flex items-center max-w-full w-fit px-2 py-1 rounded-[--radius-md]","border-transparent bg-transparent"),I[19]=c):c=I[19],I[20]!==F?(u=(0,n.jsx)("p",{className:c,"data-torrent-preview-item-release-group":!0,children:(0,n.jsx)("span",{className:"truncate",children:F})}),I[20]=F,I[21]=u):u=I[21],I[22]!==L?(m=L&&(0,n.jsx)(U.WNP,{className:"text-7xl absolute opacity-20 group-hover/torrent-preview-item:opacity-30"}),I[22]=L,I[23]=m):m=I[23],I[24]!==$||I[25]!==Q||I[26]!==L?(v=!(Q||$)&&!L&&(0,n.jsx)(q.KJ,{className:"text-7xl absolute opacity-10"}),I[24]=$,I[25]=Q,I[26]=L,I[27]=v):v=I[27],I[28]!==u||I[29]!==m||I[30]!==v||I[31]!==d?(f=(0,n.jsxs)("div",{"data-torrent-preview-item-release-info-container":!0,className:d,children:[u,m,v]}),I[28]=u,I[29]=m,I[30]=v,I[31]=d,I[32]=f):f=I[32],I[33]!==M?(h=M&&(0,n.jsxs)("p",{className:"flex gap-2 text-red-300 items-center",children:[(0,n.jsx)(Y.mRc,{className:"text-lg text-red-500"})," Unidentified"]}),I[33]=M,I[34]=h):h=I[34];let en=T&&"text-sm";I[35]!==en?(g=(0,x.cn)("font-normal text-[.9rem] transition line-clamp-2 tracking-wide",en),I[35]=en,I[36]=g):g=I[36],I[37]!==J||I[38]!==g?(y=(0,n.jsx)("p",{className:g,"data-torrent-preview-item-title":!0,children:J}),I[37]=J,I[38]=g,I[39]=y):y=I[39],I[40]!==J||I[41]!==z?(j=!!z&&(0,n.jsx)("p",{className:(0,x.cn)("text-[.85rem] tracking-wide group-hover/torrent-preview-item:text-gray-200 line-clamp-2 break-all",J?"text-[--muted]":"font-normal transition tracking-wide"),"data-torrent-preview-item-subtitle":!0,children:z}),I[40]=J,I[41]=z,I[42]=j):j=I[42];let ea=K&&K;return I[43]!==ea?(N=(0,n.jsx)("div",{className:"flex flex-col gap-2","data-torrent-preview-item-subcontent":!0,children:ea}),I[43]=ea,I[44]=N):N=I[44],I[45]!==h||I[46]!==y||I[47]!==j||I[48]!==N?(w=(0,n.jsxs)("div",{className:"relative overflow-hidden space-y-1 w-full","data-torrent-preview-item-metadata":!0,children:[h,y,j,N]}),I[45]=h,I[46]=y,I[47]=j,I[48]=N,I[49]=w):w=I[49],I[50]!==P||I[51]!==f||I[52]!==w||I[53]!==o?(E=(0,n.jsxs)("div",{"data-torrent-preview-item-content":!0,className:o,onClick:P,children:[f,w]}),I[50]=P,I[51]=f,I[52]=w,I[53]=o,I[54]=E):E=I[54],I[55]!==_?(A=_&&(0,n.jsx)(b.m_,{side:"left",trigger:(0,n.jsx)(p.K0,{"data-torrent-preview-item-open-in-browser-button":!0,icon:(0,n.jsx)(V.zaF,{className:"text-[--muted]"}),intent:"gray-basic",size:"sm",onClick:()=>(0,O.A)(_)}),children:"Open in browser"}),I[55]=_,I[56]=A):A=I[56],I[57]!==H||I[58]!==A?(C=(0,n.jsxs)("div",{className:"absolute right-1 top-1 flex flex-col items-center","data-torrent-preview-item-actions":!0,children:[A,H]}),I[57]=H,I[58]=A,I[59]=C):C=I[59],I[60]!==Z||I[61]!==X||I[62]!==L||I[63]!==W||I[64]!==M||I[65]!==D||I[66]!==_||I[67]!==F||I[68]!==z||I[69]!==t||I[70]!==l||I[71]!==E||I[72]!==C||I[73]!==s||I[74]!==B?(k=(0,n.jsxs)("div",{"data-torrent-preview-item":!0,"data-title":B,"data-subtitle":z,"data-release-group":F,"data-is-batch":L,"data-is-best-release":W,"data-confirmed":X,"data-is-invalid":M,"data-is-selected":D,"data-link":_,className:t,tabIndex:0,children:[Z,l,s,E,C]}),I[60]=Z,I[61]=X,I[62]=L,I[63]=W,I[64]=M,I[65]=D,I[66]=_,I[67]=F,I[68]=z,I[69]=t,I[70]=l,I[71]=E,I[72]=C,I[73]=s,I[74]=B,I[75]=k):k=I[75],k});var Q=l(63352),$=l(75435),W=l(80893);let X=(e,t,l)=>e!==t?(0,n.jsx)(W.vRG,{className:"opacity-50 text-lg"}):"asc"===l?(0,n.jsx)(W.dFm,{className:"text-brand-200 text-lg"}):(0,n.jsx)(W.RE7,{className:"text-brand-200 text-lg"}),Z=e=>e?(0,n.jsx)(W.XPy,{className:"text-brand-200 animate-bounce text-lg"}):(0,n.jsx)(W.XPy,{className:"opacity-50 text-lg"}),J=(e,t,l,n,a)=>{t===e?"desc"===l?a("asc"):"asc"===l?(n(null),a(null)):a("desc"):(n(e),a("desc"))},ee=e=>{var t,l;return!!e&&!!(null==(l=e.metadata)||null==(t=l.subtitles)?void 0:t.some(e=>e.toLocaleLowerCase().includes("multi")))},et=e=>{var t,l;return!!e&&!!(null==(l=e.metadata)||null==(t=l.audio_term)?void 0:t.some(e=>e.toLowerCase().includes("dual")||e.toLowerCase().includes("multi")))},el=e=>{var t,l;return!!e&&!!(null==(l=e.metadata)||null==(t=l.subtitles)?void 0:t.some(e=>e.toLocaleLowerCase().includes("dub")))};function en(e,t,l){return t&&l?[...e].sort((e,n)=>{let a,i,r="torrent"in e?e.torrent:e,s="torrent"in n?n.torrent:n;if(!r||!s)return 0;switch(t){case"seeders":a=r.seeders||0,i=s.seeders||0;break;case"size":a=r.size||0,i=s.size||0;break;case"date":a=new Date(r.date).getTime(),i=new Date(s.date).getTime();break;case"resolution":a=r.resolution?parseInt(r.resolution.replace(/[^\d]/g,"")||"0"):0,i=s.resolution?parseInt(s.resolution.replace(/[^\d]/g,"")||"0"):0;break;default:return 0}return"asc"===l?a-i:i-a}):e}function ea(e,t,l){return t&&(l.multiSubs||l.dualAudio||l.dubbed)?e.filter(e=>{let n="torrent"in e?e.torrent:e;if(!(null==n?void 0:n.infoHash)||!t[n.infoHash])return!0;let a=t[n.infoHash];return(!l.multiSubs||!!ee(a))&&(!l.dualAudio||!!et(a))&&(!l.dubbed||!!el(a))}):e}function ei(){let e,t,l=(0,a.c)(7),[n,i]=(0,j.useState)("seeders"),[r,s]=(0,j.useState)("desc");l[0]!==r||l[1]!==n?(e=e=>{J(e,n,r,i,s)},l[0]=r,l[1]=n,l[2]=e):e=l[2];let o=e;return l[3]!==o||l[4]!==r||l[5]!==n?(t={sortField:n,sortDirection:r,handleSortChange:o},l[3]=o,l[4]=r,l[5]=n,l[6]=t):t=l[6],t}function er(){let e,t,l,n=(0,a.c)(5);n[0]===Symbol.for("react.memo_cache_sentinel")?(e={multiSubs:!1,dualAudio:!1,dubbed:!1},n[0]=e):e=n[0];let[i,r]=(0,j.useState)(e);n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(e,t)=>{"boolean"==typeof t&&r(l=>({...l,[e]:t}))},n[1]=t):t=n[1];let s=t,o=i.multiSubs||i.dualAudio||i.dubbed;return n[2]!==i||n[3]!==o?(l={filters:i,handleFilterChange:s,isAnyFilterActive:o},n[2]=i,n[3]=o,n[4]=l):l=n[4],l}let es=e=>{let t,l,i,r,s,o,d,c,u,m,x,v,f,h,g,b,y,j,N,S,w,E,A,C,I,T,D,M,R,P,F,L,B,z=(0,a.c)(81),{resultCount:K,sortField:O,sortDirection:G,filters:Y,onSortChange:V,onFilterChange:q}=e,U=Y.multiSubs||Y.dualAudio||Y.dubbed;return z[0]!==K?(t=(0,n.jsxs)("p",{className:"text-sm text-[--muted] flex-none",children:[K," results"]}),z[0]=K,z[1]=t):t=z[1],z[2]!==U?(l=Z(U),z[2]=U,z[3]=l):l=z[3],z[4]!==l?(i=(0,n.jsx)(p.$n,{size:"xs",intent:"gray-basic",leftIcon:(0,n.jsx)(n.Fragment,{children:l}),children:"Filters"}),z[4]=l,z[5]=i):i=z[5],z[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)("p",{className:"text-sm text-[--muted] flex-none pb-2",children:"Filters may miss some results"}),z[6]=r):r=z[6],z[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(_.dEZ,{className:"text-lg text-[--orange]"})," Multi Subs"]}),z[7]=s):s=z[7],z[8]!==q?(o=e=>q("multiSubs",e),z[8]=q,z[9]=o):o=z[9],z[10]!==Y.multiSubs||z[11]!==o?(d=(0,n.jsx)(Q.Sc,{label:s,value:Y.multiSubs,onValueChange:o}),z[10]=Y.multiSubs,z[11]=o,z[12]=d):d=z[12],z[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(_.sJ3,{className:"text-lg text-[--rose]"})," Dual Audio"]}),z[13]=c):c=z[13],z[14]!==q?(u=e=>q("dualAudio",e),z[14]=q,z[15]=u):u=z[15],z[16]!==Y.dualAudio||z[17]!==u?(m=(0,n.jsx)(Q.Sc,{label:c,value:Y.dualAudio,onValueChange:u}),z[16]=Y.dualAudio,z[17]=u,z[18]=m):m=z[18],z[19]===Symbol.for("react.memo_cache_sentinel")?(x=(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(k.MlR,{className:"text-lg text-[--red]"})," Dubbed"]}),z[19]=x):x=z[19],z[20]!==q?(v=e=>q("dubbed",e),z[20]=q,z[21]=v):v=z[21],z[22]!==Y.dubbed||z[23]!==v?(f=(0,n.jsx)(Q.Sc,{label:x,value:Y.dubbed,onValueChange:v}),z[22]=Y.dubbed,z[23]=v,z[24]=f):f=z[24],z[25]!==m||z[26]!==f||z[27]!==d?(h=(0,n.jsxs)("div",{className:"space-y-1",children:[d,m,f]}),z[25]=m,z[26]=f,z[27]=d,z[28]=h):h=z[28],z[29]!==h||z[30]!==i?(g=(0,n.jsxs)($.A,{trigger:i,children:[r,h]}),z[29]=h,z[30]=i,z[31]=g):g=z[31],z[32]!==G||z[33]!==O?(b=X(O,"seeders",G),z[32]=G,z[33]=O,z[34]=b):b=z[34],z[35]!==b?(y=(0,n.jsx)(n.Fragment,{children:b}),z[35]=b,z[36]=y):y=z[36],z[37]!==V?(j=()=>V("seeders"),z[37]=V,z[38]=j):j=z[38],z[39]!==y||z[40]!==j?(N=(0,n.jsx)(p.$n,{size:"xs",intent:"gray-basic",leftIcon:y,onClick:j,children:"Seeders"}),z[39]=y,z[40]=j,z[41]=N):N=z[41],z[42]!==G||z[43]!==O?(S=X(O,"size",G),z[42]=G,z[43]=O,z[44]=S):S=z[44],z[45]!==S?(w=(0,n.jsx)(n.Fragment,{children:S}),z[45]=S,z[46]=w):w=z[46],z[47]!==V?(E=()=>V("size"),z[47]=V,z[48]=E):E=z[48],z[49]!==w||z[50]!==E?(A=(0,n.jsx)(p.$n,{size:"xs",intent:"gray-basic",leftIcon:w,onClick:E,children:"Size"}),z[49]=w,z[50]=E,z[51]=A):A=z[51],z[52]!==G||z[53]!==O?(C=X(O,"date",G),z[52]=G,z[53]=O,z[54]=C):C=z[54],z[55]!==C?(I=(0,n.jsx)(n.Fragment,{children:C}),z[55]=C,z[56]=I):I=z[56],z[57]!==V?(T=()=>V("date"),z[57]=V,z[58]=T):T=z[58],z[59]!==I||z[60]!==T?(D=(0,n.jsx)(p.$n,{size:"xs",intent:"gray-basic",leftIcon:I,onClick:T,children:"Date"}),z[59]=I,z[60]=T,z[61]=D):D=z[61],z[62]!==G||z[63]!==O?(M=X(O,"resolution",G),z[62]=G,z[63]=O,z[64]=M):M=z[64],z[65]!==M?(R=(0,n.jsx)(n.Fragment,{children:M}),z[65]=M,z[66]=R):R=z[66],z[67]!==V?(P=()=>V("resolution"),z[67]=V,z[68]=P):P=z[68],z[69]!==R||z[70]!==P?(F=(0,n.jsx)(p.$n,{size:"xs",intent:"gray-basic",leftIcon:R,onClick:P,children:"Resolution"}),z[69]=R,z[70]=P,z[71]=F):F=z[71],z[72]!==g||z[73]!==N||z[74]!==A||z[75]!==D||z[76]!==F?(L=(0,n.jsxs)("div",{className:"flex items-center gap-1 flex-wrap",children:[g,N,A,D,F]}),z[72]=g,z[73]=N,z[74]=A,z[75]=D,z[76]=F,z[77]=L):L=z[77],z[78]!==t||z[79]!==L?(B=(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[t,L]}),z[78]=t,z[79]=L,z[80]=B):B=z[80],B};var eo=l(78106);function ed(e){let t,l,i,r,s,o,d,c,u=(0,a.c)(14);if(u[0]!==e){let{listClass:n,className:a,children:r,...s}=e;l=a,t=r,i=s,u[0]=e,u[1]=t,u[2]=l,u[3]=i}else t=u[1],l=u[2],i=u[3];return u[4]!==l?(r=(0,x.cn)("h-[calc(100dvh_-_25rem)] min-h-52 relative border rounded-[--radius]",l),u[4]=l,u[5]=r):r=u[5],u[6]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)("div",{className:"z-[5] absolute bottom-0 w-full h-8 bg-gradient-to-t from-[--background] to-transparent"}),o=(0,n.jsx)("div",{className:"z-[5] absolute top-0 w-full h-8 bg-gradient-to-b from-[--background] to-transparent"}),u[6]=s,u[7]=o):(s=u[6],o=u[7]),u[8]!==t?(d=(0,n.jsx)("div",{className:"space-y-2 p-6",children:t}),u[8]=t,u[9]=d):d=u[9],u[10]!==i||u[11]!==r||u[12]!==d?(c=(0,n.jsxs)(g.F,{className:r,...i,children:[s,o,d]}),u[10]=i,u[11]=r,u[12]=d,u[13]=c):c=u[13],c}var ec=l(77717),eu=l(13544);let em=j.memo(e=>{let t,l,i,r,s,o,d,c,u=(0,a.c)(43),{entry:m,previews:p,isLoading:x,selectedTorrents:v,onToggleTorrent:f,debridInstantAvailability:h,type:g,torrentMetadata:b}=e,{sortField:y,sortDirection:j,handleSortChange:N}=ei(),{filters:S,handleFilterChange:w}=er();if(x){let e;return u[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(ec.E,{className:"h-[96px]"}),(0,n.jsx)(ec.E,{className:"h-[96px]"}),(0,n.jsx)(ec.E,{className:"h-[96px]"}),(0,n.jsx)(ec.E,{className:"h-[96px]"})]}),u[0]=e):e=u[0],e}if(!x&&!(null==p?void 0:p.length)){let e;return u[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(eo.D,{title:"Nothing found"}),u[1]=e):e=u[1],e}if(u[2]!==h||u[3]!==m||u[4]!==S||u[5]!==w||u[6]!==N||u[7]!==f||u[8]!==p||u[9]!==v||u[10]!==j||u[11]!==y||u[12]!==b||u[13]!==g){let e,a=en(ea(p,b,S),y,j);r="space-y-2",s=!0;let d=(null==a?void 0:a.length)||0;u[20]!==S||u[21]!==w||u[22]!==N||u[23]!==j||u[24]!==y||u[25]!==d?(o=(0,n.jsx)(es,{resultCount:d,sortField:y,sortDirection:j,filters:S,onSortChange:N,onFilterChange:w}),u[20]=S,u[21]=w,u[22]=N,u[23]=j,u[24]=y,u[25]=d,u[26]=o):o=u[26],t=ed,l="h-[calc(100dvh_-_25rem)]",u[27]!==h||u[28]!==m||u[29]!==f||u[30]!==v||u[31]!==b||u[32]!==g?(e=e=>{var t,l,a,i,r,s,o,d,c,u,p,x,y,j,N,S,w,A;return e.torrent?(0,n.jsxs)(H,{link:null==(t=e.torrent)?void 0:t.link,confirmed:null==(l=e.torrent)?void 0:l.confirmed,title:(null==(a=e.episode)?void 0:a.displayTitle)||(null==(s=e.episode)||null==(r=s.baseAnime)||null==(i=r.title)?void 0:i.userPreferred)||"",releaseGroup:e.torrent.releaseGroup||"",subtitle:e.torrent.name,isBatch:null!=(A=e.torrent.isBatch)&&A,isBestRelease:e.torrent.isBestRelease,image:(null==(d=e.episode)||null==(o=d.episodeMetadata)?void 0:o.image)||(null==(p=e.episode)||null==(u=p.baseAnime)||null==(c=u.coverImage)?void 0:c.large)||(e.torrent.confirmed?(null==(y=m.media)||null==(x=y.coverImage)?void 0:x.large)||(null==(j=m.media)?void 0:j.bannerImage):null),fallbackImage:(null==(S=m.media)||null==(N=S.coverImage)?void 0:N.large)||(null==(w=m.media)?void 0:w.bannerImage),isSelected:-1!==v.findIndex(t=>t.link===e.torrent.link),onClick:()=>f(e.torrent),children:[(0,n.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[e.torrent.isBestRelease&&(0,n.jsx)(E.E,{className:"rounded-[--radius-md] text-[0.8rem] bg-pink-800 border-transparent border",intent:"success-solid",children:"Best release"}),(0,n.jsx)(T,{resolution:e.torrent.resolution}),("download"===g||"debrid-stream-select"===g||"debrid-stream-select-file"===g)&&!!e.torrent.infoHash&&h[e.torrent.infoHash]&&(0,n.jsx)(K,{}),(0,n.jsx)(D,{seeders:e.torrent.seeders}),!!e.torrent.size&&(0,n.jsx)("p",{className:"text-gray-300 text-sm flex items-center gap-1",children:e.torrent.formattedSize}),(0,n.jsxs)("p",{className:"text-[--muted] text-sm flex items-center gap-1",children:[(0,n.jsx)(V.zBL,{})," ",(0,eu.dU)(e.torrent.date)]})]}),(0,n.jsx)(M,{metadata:null==b?void 0:b[e.torrent.infoHash]})]},e.torrent.link):null},u[27]=h,u[28]=m,u[29]=f,u[30]=v,u[31]=b,u[32]=g,u[33]=e):e=u[33],i=a.filter(Boolean).map(e),u[2]=h,u[3]=m,u[4]=S,u[5]=w,u[6]=N,u[7]=f,u[8]=p,u[9]=v,u[10]=j,u[11]=y,u[12]=b,u[13]=g,u[14]=t,u[15]=l,u[16]=i,u[17]=r,u[18]=s,u[19]=o}else t=u[14],l=u[15],i=u[16],r=u[17],s=u[18],o=u[19];return u[34]!==t||u[35]!==l||u[36]!==i?(d=(0,n.jsx)(t,{className:l,children:i}),u[34]=t,u[35]=l,u[36]=i,u[37]=d):d=u[37],u[38]!==r||u[39]!==s||u[40]!==o||u[41]!==d?(c=(0,n.jsxs)("div",{className:r,"data-torrent-preview-list":s,children:[o,d]}),u[38]=r,u[39]=s,u[40]=o,u[41]=d,u[42]=c):c=u[42],c});var ep=l(53712);let ex=(0,j.memo)(e=>{var t,l,i,r,s,o,d,c,u,m,p,x;let v,f=(0,a.c)(23),{entry:h,torrents:g,selectedTorrents:b,globalFilter:y,setGlobalFilter:j,isFetching:N,isLoading:S,onToggleTorrent:w,debridInstantAvailability:A,animeMetadata:C,torrentMetadata:k}=e,{sortField:I,sortDirection:_,handleSortChange:R}=ei(),{filters:P,handleFilterChange:F}=er();if(f[0]!==C||f[1]!==A||f[2]!==(null==h||null==(t=h.media)?void 0:t.bannerImage)||f[3]!==(null==h||null==(i=h.media)||null==(l=i.coverImage)?void 0:l.large)||f[4]!==(null==h||null==(r=h.media)?void 0:r.episodes)||f[5]!==(null==h||null==(o=h.media)||null==(s=o.nextAiringEpisode)?void 0:s.episode)||f[6]!==P||f[7]!==y||f[8]!==F||f[9]!==R||f[10]!==N||f[11]!==S||f[12]!==w||f[13]!==b||f[14]!==j||f[15]!==_||f[16]!==I||f[17]!==k||f[18]!==g){let e,t=en(ea(g,k,P),I,_);f[20]!==y||f[21]!==j?(e=(0,n.jsx)(ep.k,{value:y,onValueChange:j}),f[20]=y,f[21]=j,f[22]=e):e=f[22],v=(0,n.jsxs)(n.Fragment,{children:[e,S||N?(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(ec.E,{className:"h-[96px]"}),(0,n.jsx)(ec.E,{className:"h-[96px]"}),(0,n.jsx)(ec.E,{className:"h-[96px]"}),(0,n.jsx)(ec.E,{className:"h-[96px]"})]}):(null==g?void 0:g.length)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(es,{resultCount:(null==t?void 0:t.length)||0,sortField:I,sortDirection:_,filters:P,onSortChange:R,onFilterChange:F}),(0,n.jsx)(ed,{className:"h-[calc(100dvh_-_25rem)]",children:t.map(e=>{var t,l,a,i,r,s,o,d,c,u,m,p,x,v,f,g;let y,j=null==k||null==(a=k[e.infoHash])||null==(l=a.metadata)||null==(t=l.episode_number)?void 0:t[0],N=j?parseInt(j):void 0,S=e.releaseGroup||(null==k||null==(r=k[e.infoHash])||null==(i=r.metadata)?void 0:i.release_group)||"",I=e.episodeNumber||N||-1;if(I>((null==h||null==(s=h.media)?void 0:s.episodes)||((null==h||null==(d=h.media)||null==(o=d.nextAiringEpisode)?void 0:o.episode)?null==h||null==(u=h.media)||null==(c=u.nextAiringEpisode)?void 0:c.episode:0)))for(let e in null==C?void 0:C.episodes){let t=null==C||null==(v=C.episodes)?void 0:v[e];(null==t?void 0:t.absoluteEpisodeNumber)===I&&(I=t.episodeNumber)}if(C&&(null!=I?I:-1)>=0){let e=null==(f=C.episodes)?void 0:f[I.toString()];e&&(y=e.image)}let _=9999;if(k&&e.infoHash){let t=k[e.infoHash];t&&(_=t.distance)}return _>20&&(y=void 0),(0,n.jsxs)(H,{link:e.link,title:e.name,releaseGroup:S,subtitle:e.isBatch?e.name:(null!=I?I:-1)>=0?"Episode ".concat(I):"",isBatch:null!=(g=e.isBatch)&&g,isBestRelease:e.isBestRelease,image:_<=20?y:void 0,fallbackImage:(null==h||null==(p=h.media)||null==(m=p.coverImage)?void 0:m.large)||(null==h||null==(x=h.media)?void 0:x.bannerImage),isSelected:-1!==b.findIndex(t=>t.link===e.link),onClick:()=>w(e),children:[(0,n.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[e.isBestRelease&&(0,n.jsx)(E.E,{className:"rounded-[--radius-md] text-[0.8rem] bg-pink-800 border-transparent border",intent:"success-solid",children:"Best release"}),(0,n.jsx)(T,{resolution:e.resolution}),!!e.infoHash&&A[e.infoHash]&&(0,n.jsx)(K,{}),(0,n.jsx)(D,{seeders:e.seeders}),!!e.size&&(0,n.jsx)("p",{className:"text-gray-300 text-sm flex items-center gap-1",children:e.formattedSize}),(0,n.jsxs)("p",{className:"text-[--muted] text-sm flex items-center gap-1",children:[(0,n.jsx)(V.zBL,{})," ",(0,eu.dU)(e.date)]})]}),(0,n.jsx)(M,{metadata:null==k?void 0:k[e.infoHash]})]},e.link)})})]}):(0,n.jsx)("div",{children:(0,n.jsx)(eo.D,{title:"Nothing found"})})]}),f[0]=C,f[1]=A,f[2]=null==h||null==(d=h.media)?void 0:d.bannerImage,f[3]=null==h||null==(u=h.media)||null==(c=u.coverImage)?void 0:c.large,f[4]=null==h||null==(m=h.media)?void 0:m.episodes,f[5]=null==h||null==(x=h.media)||null==(p=x.nextAiringEpisode)?void 0:p.episode,f[6]=P,f[7]=y,f[8]=F,f[9]=R,f[10]=N,f[11]=S,f[12]=w,f[13]=b,f[14]=j,f[15]=_,f[16]=I,f[17]=k,f[18]=g,f[19]=v}else v=f[19];return v});var ev=l(17946),ef=l(7675),eh=l(74889),eg=l(14370),eb=l(93715);let ey=function(e){return e.SMART="smart",e.SIMPLE="simple",e}({});var ej=l(86628),eN=l(82449),eS=l(50558),ew=l(90764),eE=l(76136),eA=l(30033),eC=l(60695),ek=l(24151),eI=l(5883),e_=l(47947),eT=l(42500),eD=l(40568);let eM=(0,eT.eU)([]);function eR(e){var t,l,i,s,o,u,p,v,f,h,g,b,N,S,E,A,C,k,I,_,T,D,M,R,P,F,L,B,z,K,O,G,Y,V,q,U,H,Q,$,W,X,Z,J,ee,et,el,en,ea,ei,er,es,ed,eu,ep,eN,eT,eR,eB,ez,eK,eO,eG,eY,eV,eq,eU,eH,eQ,e$;let eW,eX,eZ,eJ,e0,e1,e2,e3,e4,e5,e6,e7,e9,e8,te,tt,tl,tn,ta,ti,tr,ts,to,td,tc,tu,tm,tp,tx=(0,a.c)(110),{type:tv,entry:tf}=e;eW=tf.downloadInfo,(0,r.v1)(),tx[0]!==(null==eW?void 0:eW.canBatch)||tx[1]!==(null==eW||null==(t=eW.episodesToDownload)?void 0:t.length)||tx[2]!==(null==(i=tf.media)||null==(l=i.endDate)?void 0:l.day)||tx[3]!==(null==(o=tf.media)||null==(s=o.endDate)?void 0:s.month)||tx[4]!==(null==(p=tf.media)||null==(u=p.endDate)?void 0:u.year)||tx[5]!==tv?(eX=()=>{var e,t,l,n,a,i,r,s,o,d,c;let u=(null==(t=tf.media)||null==(e=t.endDate)?void 0:e.year)?new Date(null==(n=tf.media)||null==(l=n.endDate)?void 0:l.year,(null==(i=tf.media)||null==(a=i.endDate)?void 0:a.month)?(null==(s=tf.media)||null==(r=s.endDate)?void 0:r.month)-1:0,(null==(d=tf.media)||null==(o=d.endDate)?void 0:o.day)||0):null,m=new Date,p=!0;return"download"===tv?(u&&(0,eI.e)(m,6)<u&&(p=!1),!!(null==eW?void 0:eW.canBatch)&&!!(null==eW||null==(c=eW.episodesToDownload)?void 0:c.length)&&p):(u&&(0,e_.a)(m,1)<u&&(p=!1),!!(null==eW?void 0:eW.canBatch)&&p)},tx[0]=null==eW?void 0:eW.canBatch,tx[1]=null==eW||null==(M=eW.episodesToDownload)?void 0:M.length,tx[2]=null==(P=tf.media)||null==(R=P.endDate)?void 0:R.day,tx[3]=null==(L=tf.media)||null==(F=L.endDate)?void 0:F.month,tx[4]=null==(z=tf.media)||null==(B=z.endDate)?void 0:B.year,tx[5]=tv,tx[6]=eX):eX=tx[6],null==eW||eW.canBatch,null==eW||null==(v=eW.episodesToDownload)||v.length,null==(f=tf.media)||f.endDate;let th=eX();null==eW||null==(h=eW.episodesToDownload)||h.length,eZ=!!(null==eW||null==(g=eW.episodesToDownload)?void 0:g.length);let[tg,tb]=j.useState((null==(b=tf.media)?void 0:b.isAdult)===!0);tx[7]!==eW||tx[8]!==tf||tx[9]!==eZ||tx[10]!==tg||tx[11]!==th||tx[12]!==tv?(eJ={isAdult:tg,hasEpisodesToDownload:eZ,shouldLookForBatches:th,downloadInfo:eW,entry:tf,type:tv},tx[7]=eW,tx[8]=tf,tx[9]=eZ,tx[10]=tg,tx[11]=th,tx[12]=tv,tx[13]=eJ):eJ=tx[13];let{warnings:ty,hasOneWarning:tj,selectedProviderExtension:tN,selectedProviderExtensionId:tS,setSelectedProviderExtensionId:tw,providerExtensions:tE,globalFilter:tA,setGlobalFilter:tC,selectedTorrents:tk,setSelectedTorrents:tI,searchType:t_,setSearchType:tT,smartSearchBatch:tD,setSmartSearchBatch:tM,smartSearchEpisode:tR,setSmartSearchEpisode:tP,smartSearchResolution:tF,setSmartSearchResolution:tL,smartSearchBest:tB,setSmartSearchBest:tz,data:tK,isLoading:tO,isFetching:tG}=function(e){var t,l,n,i,s,o,c,u,m,p,x,v,f,h;let{hasEpisodesToDownload:g,shouldLookForBatches:b,downloadInfo:N,entry:S,isAdult:w}=e,E=(0,r.v1)(),{data:A}=(0,ev.N2)(),C=j.useMemo(()=>null==A?void 0:A.find(e=>{var t,l;return e.id===(null==E||null==(l=E.settings)||null==(t=l.library)?void 0:t.torrentProvider)}),[null==E||null==(l=E.settings)||null==(t=l.library)?void 0:t.torrentProvider,A]),[k,I]=j.useState((null==C?void 0:C.id)||"none");j.useLayoutEffect(()=>{I((null==C?void 0:C.id)||"none")},[C]);let _=j.useMemo(()=>null==A?void 0:A.find(e=>e.id===k),[k,A]),[T,D]=(0,y.fp)(d.f0),[M,R]=j.useState(w?ey.SIMPLE:ey.SMART),[P,F,L]=(0,eg.H)(g?"":(null==S||null==(i=S.media)||null==(n=i.title)?void 0:n.romaji)||"",500),[B,z]=(0,y.fp)(eM),[K,O]=j.useState(b||!1),[G,Y]=j.useState(""),[V,q]=j.useState(!1),[U,H,Q]=(0,eg.H)((null==N||null==(c=N.episodesToDownload)||null==(o=c[0])||null==(s=o.episode)?void 0:s.episodeNumber)||1,500),$={noProvider:!_,extensionDoesNotSupportAdult:w&&_&&!(null==_||null==(u=_.settings)?void 0:u.supportsAdult),extensionDoesNotSupportSmartSearch:M===ey.SMART&&_&&!(null==_||null==(m=_.settings)?void 0:m.canSmartSearch),extensionDoesNotSupportBestRelease:V&&_&&!(null==_||null==(x=_.settings)||null==(p=x.smartSearchFilters)?void 0:p.includes("bestReleases")),extensionDoesNotSupportBatchSearch:K&&_&&!(null==_||null==(f=_.settings)||null==(v=f.smartSearchFilters)?void 0:v.includes("batch"))};j.useLayoutEffect(()=>{var e;M===ey.SIMPLE&&(null==_||null==(e=_.settings)?void 0:e.canSmartSearch)&&R(ey.SMART)},[M&&$.extensionDoesNotSupportSmartSearch,null==_||null==(h=_.settings)?void 0:h.canSmartSearch,k]),j.useLayoutEffect(()=>{M===ey.SMART&&$.extensionDoesNotSupportSmartSearch&&R(ey.SIMPLE)},[$.extensionDoesNotSupportSmartSearch,k,M]),j.useLayoutEffect(()=>{V&&$.extensionDoesNotSupportBestRelease&&q(!1)},[$.extensionDoesNotSupportBestRelease,k,V]),j.useLayoutEffect(()=>{K&&$.extensionDoesNotSupportBatchSearch&&O(!1)},[$.extensionDoesNotSupportBatchSearch,k,K]),j.useEffect(()=>{console.log("globalFilter",P)},[P]),console.log("smartSearchResolution",G);let{data:W,isLoading:X,isFetching:Z}=function(e,t){let l,n,i,r=(0,a.c)(9);r[0]!==e?(l=JSON.stringify(e),r[0]=e,r[1]=l):l=r[1],r[2]!==l?(n=[eh.S.TORRENT_SEARCH.SearchTorrent.key,l],r[2]=l,r[3]=n):n=r[3];let s=0===e.episodeNumber?0:void 0;return r[4]!==t||r[5]!==n||r[6]!==s||r[7]!==e?(i={endpoint:eh.S.TORRENT_SEARCH.SearchTorrent.endpoint,method:eh.S.TORRENT_SEARCH.SearchTorrent.methods[0],data:e,queryKey:n,enabled:t,gcTime:s},r[4]=t,r[5]=n,r[6]=s,r[7]=e,r[8]=i):i=r[8],(0,ef.fl)(i)}({query:F.trim().toLowerCase(),episodeNumber:H,batch:K,media:null==S?void 0:S.media,absoluteOffset:(null==N?void 0:N.absoluteOffset)||0,resolution:G,type:M,provider:null==_?void 0:_.id,bestRelease:M===ey.SMART&&V},(M!==ey.SIMPLE||0!==F.length)&&!$.noProvider&&!$.extensionDoesNotSupportAdult&&!$.extensionDoesNotSupportSmartSearch&&!$.extensionDoesNotSupportBestRelease&&!!A);return j.useLayoutEffect(()=>{void 0!==T&&(Q(T),(0,j.startTransition)(()=>{D(void 0)}))},[T]),j.useEffect(()=>{(0,eb.v)("TORRENT SEARCH").info({warnings:$})},[$]),j.useEffect(()=>{(0,eb.v)("TORRENT SEARCH").info({selectedProviderExtension:_})},[$]),j.useEffect(()=>{(0,eb.v)("TORRENT SEARCH").info({globalFilter:P,searchType:M,smartSearchBatch:K,smartSearchEpisode:U,smartSearchResolution:G,smartSearchBest:V,debouncedSmartSearchEpisode:H})},[P,M,K,U,G,V,H]),{warnings:$,hasOneWarning:Object.values($).some(e=>e),providerExtensions:A,selectedProviderExtension:_,selectedProviderExtensionId:k,setSelectedProviderExtensionId:I,globalFilter:P,setGlobalFilter:L,selectedTorrents:B,setSelectedTorrents:z,searchType:M,setSearchType:R,smartSearchBatch:K,setSmartSearchBatch:O,smartSearchEpisode:U,setSmartSearchEpisode:Q,smartSearchResolution:G,setSmartSearchResolution:Y,smartSearchBest:V,setSmartSearchBest:q,debouncedSmartSearchEpisode:H,soughtEpisode:T,data:W,isLoading:X,isFetching:Z}}(eJ);tx[14]!==tI?(e0=()=>{tI([])},tx[14]=tI,tx[15]=e0):e0=tx[15],tx[16]===Symbol.for("react.memo_cache_sentinel")?(e1=[],tx[16]=e1):e1=tx[16],j.useEffect(e0,e1),tx[17]!==(null==(S=tf.media)||null==(N=S.title)?void 0:N.english)||tx[18]!==(null==(A=tf.media)||null==(E=A.title)?void 0:E.romaji)||tx[19]!==(null==(k=tf.media)||null==(C=k.title)?void 0:C.userPreferred)||tx[20]!==t_||tx[21]!==tC?(e2=()=>{if(t_===ey.SMART)tC("");else if(t_===ey.SIMPLE){var e,t,l,n,a,i;let r=(null==(t=tf.media)||null==(e=t.title)?void 0:e.romaji)||(null==(n=tf.media)||null==(l=n.title)?void 0:l.english)||(null==(i=tf.media)||null==(a=i.title)?void 0:a.userPreferred);tC((null==r?void 0:r.replaceAll(":","").replaceAll("-",""))||"")}},tx[17]=null==(O=tf.media)||null==(K=O.title)?void 0:K.english,tx[18]=null==(Y=tf.media)||null==(G=Y.title)?void 0:G.romaji,tx[19]=null==(q=tf.media)||null==(V=q.title)?void 0:V.userPreferred,tx[20]=t_,tx[21]=tC,tx[22]=e2):e2=tx[22];let tY=null==(I=tf.media)?void 0:I.title;tx[23]!==t_||tx[24]!==tY?(e3=[t_,tY],tx[23]=t_,tx[24]=tY,tx[25]=e3):e3=tx[25],j.useLayoutEffect(e2,e3),null==tK||tK.torrents,tx[26]!==(null==tK?void 0:tK.torrents)?(e5=null!=(U=null==tK?void 0:tK.torrents)?U:[],tx[26]=null==tK?void 0:tK.torrents,tx[27]=e5):e5=tx[27],e4=e5,tx[28]!==(null==tK?void 0:tK.previews)?(e6=()=>{var e;return null!=(e=null==tK?void 0:tK.previews)?e:[]},tx[28]=null==tK?void 0:tK.previews,tx[29]=e6):e6=tx[29],null==tK||tK.previews,tx[30]!==e6?(e7=e6(),tx[30]=e6,tx[31]=e7):e7=tx[31];let tV=e7;null==tK||tK.debridInstantAvailability,tx[32]!==(null==tK?void 0:tK.debridInstantAvailability)?(e8=null!=(H=null==tK?void 0:tK.debridInstantAvailability)?H:{},tx[32]=null==tK?void 0:tK.debridInstantAvailability,tx[33]=e8):e8=tx[33],e9=e8,tx[34]!==tI||tx[35]!==tv?(te=e=>{"download"===tv?tI(t=>-1!==t.findIndex(t=>t.link===e.link)?t.filter(t=>t.link!==e.link):[...t,e]):tI(t=>-1!==t.findIndex(t=>t.link===e.link)?[]:[e])},tx[34]=tI,tx[35]=tv,tx[36]=te):te=tx[36];let tq=te;tx[37]!==e9||tx[38]!==tf||tx[39]!==tv?(tt=("select"===tv||"select-file"===tv||"debrid-stream-select-file"===tv||"debrid-stream-select"===tv)&&(0,n.jsx)(eL,{type:tv,entry:tf,debridInstantAvailability:e9}),tx[37]=e9,tx[38]=tf,tx[39]=tv,tx[40]=tt):tt=tx[40];let tU=null!=(Q=null==tN?void 0:tN.id)?Q:ek.xF.NONE;if(tx[41]===Symbol.for("react.memo_cache_sentinel")?(tl=(0,n.jsx)(eD.j$e,{className:"text-[--brand]"}),tx[41]=tl):tl=tx[41],tx[42]!==tE){let e;tx[44]===Symbol.for("react.memo_cache_sentinel")?(e={label:"None",value:ek.xF.NONE},tx[44]=e):e=tx[44],tn=[...(null!=($=null==tE?void 0:tE.map(eF))?$:[]).sort(eP),e],tx[42]=tE,tx[43]=tn}else tn=tx[43];return tx[45]!==tw||tx[46]!==tU||tx[47]!==tn?(ta=(0,n.jsx)("div",{className:"w-[200px]","data-torrent-search-container-param-container-provider-select-container":!0,children:(0,n.jsx)(eA.l,{name:"torrentProvider",value:tU,onValueChange:tw,leftIcon:tl,options:tn})}),tx[45]=tw,tx[46]=tU,tx[47]=tn,tx[48]=ta):ta=tx[48],tx[49]!==(null==(_=tf.media)?void 0:_.isAdult)||tx[50]!==tg||tx[51]!==t_||tx[52]!==(null==tN||null==(T=tN.settings)?void 0:T.canSmartSearch)||tx[53]!==tS||tx[54]!==tT?(ti="none"!==tS&&""!==tS&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"h-10 rounded-[--radius] px-2 flex items-center","data-torrent-search-container-param-container-smart-search-switch-container":!0,children:(0,n.jsx)(eC.d,{label:"Smart search",moreHelp:(null==tN||null==(W=tN.settings)?void 0:W.canSmartSearch)?"Automatically search based on given parameters":"This provider does not support smart search",value:t_===ey.SMART,onValueChange:e=>tT(e?ey.SMART:ey.SIMPLE),disabled:!(null==tN||null==(X=tN.settings)?void 0:X.canSmartSearch),containerClass:"flex-row-reverse gap-1"})}),(null==(Z=tf.media)?void 0:Z.isAdult)===!1&&(0,n.jsx)("div",{className:"h-10 rounded-[--radius] px-2 flex items-center","data-torrent-search-container-param-container-adult-switch-container":!0,children:(0,n.jsx)(eC.d,{label:"Adult",moreHelp:"If enabled, the adult content flag will be passed to the provider.",value:tg,onValueChange:tb,containerClass:"flex-row-reverse gap-1"})})]}),tx[49]=null==(J=tf.media)?void 0:J.isAdult,tx[50]=tg,tx[51]=t_,tx[52]=null==tN||null==(ee=tN.settings)?void 0:ee.canSmartSearch,tx[53]=tS,tx[54]=tT,tx[55]=ti):ti=tx[55],tx[56]!==ta||tx[57]!==ti?(tr=(0,n.jsxs)("div",{className:"Sea-TorrentSearchContainer__paramContainer flex flex-wrap gap-3 items-center","data-torrent-search-container-param-container":!0,children:[ta,ti]}),tx[56]=ta,tx[57]=ti,tx[58]=tr):tr=tx[58],tx[59]!==tS||tx[60]!==ty?(ts="none"!==tS&&""!==tS&&(null==(et=Object.keys(ty))?void 0:et.map(e=>ty[e]?(0,n.jsx)(eS.F,{"data-torrent-search-container-warning":!0,intent:"warning",description:(0,n.jsxs)(n.Fragment,{children:["extensionDoesNotSupportAdult"===e&&"This provider does not support adult content","extensionDoesNotSupportSmartSearch"===e&&"This provider does not support smart search","extensionDoesNotSupportBestRelease"===e&&"This provider does not support best release search"]})},e):null)),tx[59]=tS,tx[60]=ty,tx[61]=ts):ts=tx[61],tx[62]!==(null==tK?void 0:tK.animeMetadata)||tx[63]!==(null==tK?void 0:tK.torrentMetadata)||tx[64]!==e9||tx[65]!==(null==eW?void 0:eW.canBatch)||tx[66]!==tf||tx[67]!==tA||tx[68]!==tq||tx[69]!==tj||tx[70]!==tG||tx[71]!==tO||tx[72]!==tV||tx[73]!==tE||tx[74]!==t_||tx[75]!==(null==tN||null==(D=tN.settings)?void 0:D.smartSearchFilters)||tx[76]!==tS||tx[77]!==tk||tx[78]!==tC||tx[79]!==tM||tx[80]!==tz||tx[81]!==tP||tx[82]!==tL||tx[83]!==tD||tx[84]!==tB||tx[85]!==tR||tx[86]!==tF||tx[87]!==e4||tx[88]!==tv?(to="none"!==tS&&""!==tS?(0,n.jsxs)(n.Fragment,{children:[t_===ey.SMART&&(0,n.jsxs)(m.KZ,{className:"Sea-TorrentSearchContainer__smartSearchContainer","data-torrent-search-smart-search-container":!0,children:[(0,n.jsxs)("div",{"data-torrent-search-smart-search-provider-param-container":!0,className:(0,x.cn)("Sea-TorrentSearchContainer__providerParamContainer flex flex-col items-center flex-wrap justify-around gap-3 md:flex-row w-full border rounded-[--radius] p-3",{hidden:!(null==tN||null==(en=tN.settings)||null==(el=en.smartSearchFilters)?void 0:el.includes("episodeNumber"))&&!(null==tN||null==(ei=tN.settings)||null==(ea=ei.smartSearchFilters)?void 0:ea.includes("resolution"))&&!(null==tN||null==(es=tN.settings)||null==(er=es.smartSearchFilters)?void 0:er.includes("batch"))&&!(null==tN||null==(eu=tN.settings)||null==(ed=eu.smartSearchFilters)?void 0:ed.includes("bestReleases"))&&!(null==tN||null==(eN=tN.settings)||null==(ep=eN.smartSearchFilters)?void 0:ep.includes("search"))}),children:[(null==tN||null==(eR=tN.settings)||null==(eT=eR.smartSearchFilters)?void 0:eT.includes("episodeNumber"))&&(0,n.jsx)(eE.Q,{"data-torrent-search-smart-search-episode-number-input":!0,label:"Episode number",value:tR,disabled:(null==tf||null==(eB=tf.media)?void 0:eB.format)==="MOVIE"||tB,onValueChange:e=>{(0,j.startTransition)(()=>{tP(e)})},formatOptions:{useGrouping:!1},size:"sm",fieldClass:(0,x.cn)("flex flex-none w-fit md:justify-end gap-3 space-y-0",{"opacity-50 cursor-not-allowed pointer-events-none":tD||t_!=ey.SMART}),fieldLabelClass:(0,x.cn)("flex-none self-center font-normal !text-md sm:text-md lg:text-md"),className:"max-w-[4rem]"}),(null==tN||null==(eK=tN.settings)||null==(ez=eK.smartSearchFilters)?void 0:ez.includes("resolution"))&&(0,n.jsx)(eA.l,{"data-torrent-search-smart-search-resolution-select":!0,label:"Resolution",value:tF||"-",onValueChange:e=>tL("-"!=e?e:""),options:[{value:"-",label:"Any"},{value:"1080",label:"1080p"},{value:"720",label:"720p"},{value:"540",label:"540p"},{value:"480",label:"480p"},{value:"2160",label:"2160p"}],disabled:tB||t_!=ey.SMART,size:"sm",fieldClass:(0,x.cn)("flex flex-none w-fit md:justify-center gap-3 space-y-0",{"opacity-50 cursor-not-allowed pointer-events-none":t_!=ey.SMART||tB}),fieldLabelClass:"flex-none self-center font-normal !text-md sm:text-md lg:text-md",className:"w-[6rem]"}),(null==tN||null==(eG=tN.settings)||null==(eO=eG.smartSearchFilters)?void 0:eO.includes("batch"))&&(0,n.jsx)(eC.d,{"data-torrent-search-smart-search-batch-switch":!0,label:"Batches",value:tD,onValueChange:tM,disabled:tB||!(null==eW?void 0:eW.canBatch),fieldClass:(0,x.cn)("flex flex-none w-fit",{"opacity-50 cursor-not-allowed pointer-events-none":!(null==eW?void 0:eW.canBatch)||tB}),size:"sm",containerClass:"flex-row-reverse gap-1"}),(null==tN||null==(eV=tN.settings)||null==(eY=eV.smartSearchFilters)?void 0:eY.includes("bestReleases"))&&(0,n.jsx)(eC.d,{"data-torrent-search-smart-search-best-releases-switch":!0,label:"Best releases",value:tB,onValueChange:tz,fieldClass:(0,x.cn)("flex flex-none w-fit",{"opacity-50 cursor-not-allowed pointer-events-none":!(null==eW?void 0:eW.canBatch)}),size:"sm",containerClass:"flex-row-reverse gap-1"})]}),!tj&&(0,n.jsxs)(n.Fragment,{children:[(null==tN||null==(eU=tN.settings)||null==(eq=eU.smartSearchFilters)?void 0:eq.includes("query"))&&(0,n.jsx)("div",{className:"py-1","data-torrent-search-smart-search-query-input-container":!0,children:(0,n.jsx)(ew.xd,{value:null!=tA?tA:"",onChange:e=>tC(e),placeholder:t_===ey.SMART?"Refine the title (".concat(null==(eQ=tf.media)||null==(eH=eQ.title)?void 0:eH.romaji,")"):"Search",fieldClass:"md:max-w-full w-full"})}),(0,n.jsx)(em,{entry:tf,previews:tV,isLoading:tO,selectedTorrents:tk,onToggleTorrent:tq,debridInstantAvailability:e9,type:tv,torrentMetadata:null==tK?void 0:tK.torrentMetadata})]})]}),tj&&(0,n.jsx)(eo.D,{}),t_!==ey.SMART&&!tj&&!(null==tV?void 0:tV.length)&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ex,{entry:tf,torrents:e4,globalFilter:tA,setGlobalFilter:tC,smartSearch:!1,supportsQuery:!0,isLoading:tO,isFetching:tG,selectedTorrents:tk,onToggleTorrent:tq,debridInstantAvailability:e9,animeMetadata:null==tK?void 0:tK.animeMetadata,torrentMetadata:null==tK?void 0:tK.torrentMetadata})})]}):tE?(0,n.jsx)(eo.D,{title:"No extension selected"}):(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(ec.E,{className:"h-[96px]"}),(0,n.jsx)(ec.E,{className:"h-[96px]"}),(0,n.jsx)(ec.E,{className:"h-[96px]"}),(0,n.jsx)(ec.E,{className:"h-[96px]"})]}),tx[62]=null==tK?void 0:tK.animeMetadata,tx[63]=null==tK?void 0:tK.torrentMetadata,tx[64]=e9,tx[65]=null==eW?void 0:eW.canBatch,tx[66]=tf,tx[67]=tA,tx[68]=tq,tx[69]=tj,tx[70]=tG,tx[71]=tO,tx[72]=tV,tx[73]=tE,tx[74]=t_,tx[75]=null==tN||null==(e$=tN.settings)?void 0:e$.smartSearchFilters,tx[76]=tS,tx[77]=tk,tx[78]=tC,tx[79]=tM,tx[80]=tz,tx[81]=tP,tx[82]=tL,tx[83]=tD,tx[84]=tB,tx[85]=tR,tx[86]=tF,tx[87]=e4,tx[88]=tv,tx[89]=to):to=tx[89],tx[90]!==tr||tx[91]!==ts||tx[92]!==to?(td=(0,n.jsxs)(m.KZ,{className:"Sea-TorrentSearchContainer__root space-y-4","data-torrent-search-container":!0,children:[tr,ts,to]}),tx[90]=tr,tx[91]=ts,tx[92]=to,tx[93]=td):td=tx[93],tx[94]!==tf||tx[95]!==tq||tx[96]!==tv?(tc="download"===tv&&(0,n.jsx)(ej.Z,{onToggleTorrent:tq,media:tf.media,entry:tf}),tx[94]=tf,tx[95]=tq,tx[96]=tv,tx[97]=tc):tc=tx[97],tx[98]!==tf||tx[99]!==tv?(tu="select-file"===tv&&(0,n.jsx)(c.I,{entry:tf}),tx[98]=tf,tx[99]=tv,tx[100]=tu):tu=tx[100],tx[101]!==tf||tx[102]!==tv?(tm="debrid-stream-select-file"===tv&&(0,n.jsx)(w,{entry:tf}),tx[101]=tf,tx[102]=tv,tx[103]=tm):tm=tx[103],tx[104]!==tt||tx[105]!==td||tx[106]!==tc||tx[107]!==tu||tx[108]!==tm?(tp=(0,n.jsxs)(n.Fragment,{children:[tt,td,tc,tu,tm]}),tx[104]=tt,tx[105]=td,tx[106]=tc,tx[107]=tu,tx[108]=tm,tx[109]=tp):tp=tx[109],tp}function eP(e,t){var l,n;return null!=(n=null==e||null==(l=e.label)?void 0:l.localeCompare(null==t?void 0:t.label))?n:0}function eF(e){return{label:e.name,value:e.id}}function eL(e){var t,l,r,o,p,x,v,f,h,g,b,j,N,S,w,A,C,k,_,M,R,P,F,L,B;let z,O,G,Y,q,U,Q,$,W,X,Z,J,ee=(0,a.c)(46),{entry:et,type:el,debridInstantAvailability:en}=e,{data:ea}=(0,i.iz)(null==et?void 0:et.mediaId,!0),{handleManualTorrentStreamSelection:ei}=(0,eN.w9)(),{handleStreamSelection:er}=(0,s.u)(),{torrentStreamingSelectedEpisode:es}=(0,u.O)(),eo=(0,y.Xr)(c.W),[,ed]=(0,y.fp)(d.IF);if(!(null==ea?void 0:ea.torrent)||!et)return null;ee[0]===Symbol.for("react.memo_cache_sentinel")?(z=(0,n.jsxs)("h5",{className:"text-center flex gap-2 items-center",children:[(0,n.jsx)(I.YcD,{className:"mt-1"})," Previous selection"]}),ee[0]=z):z=ee[0];let ec=null==ea||null==(t=ea.torrent)?void 0:t.link,em=null==ea||null==(l=ea.torrent)?void 0:l.confirmed,ep=null==ea?void 0:ea.torrent.link,ex=(null==ea?void 0:ea.torrent.releaseGroup)||"",ev=null==ea?void 0:ea.torrent.name,ef=null!=(A=null==ea?void 0:ea.torrent.isBatch)&&A,eh=(null==et||null==(o=et.media)||null==(r=o.coverImage)?void 0:r.large)||(null==et||null==(p=et.media)?void 0:p.bannerImage),eg=(null==et||null==(v=et.media)||null==(x=v.coverImage)?void 0:x.large)||(null==et||null==(f=et.media)?void 0:f.bannerImage),eb=null==ea?void 0:ea.torrent.isBestRelease;ee[1]!==(null==ea?void 0:ea.torrent)||ee[2]!==et||ee[3]!==ei||ee[4]!==er||ee[5]!==eo||ee[6]!==ed||ee[7]!==es||ee[8]!==el?(O=()=>{(null==ea?void 0:ea.torrent)&&(null==es?void 0:es.aniDBEpisode)&&("select"===el?(ei({torrent:null==ea?void 0:ea.torrent,entry:et,aniDBEpisode:es.aniDBEpisode,episodeNumber:es.episodeNumber,chosenFileIndex:void 0}),ed(void 0)):"debrid-stream-select"===el?(er({torrent:null==ea?void 0:ea.torrent,entry:et,aniDBEpisode:es.aniDBEpisode,episodeNumber:es.episodeNumber,chosenFileId:""}),ed(void 0)):("select-file"===el||"debrid-stream-select-file"===el)&&eo(null==ea?void 0:ea.torrent))},ee[1]=null==ea?void 0:ea.torrent,ee[2]=et,ee[3]=ei,ee[4]=er,ee[5]=eo,ee[6]=ed,ee[7]=es,ee[8]=el,ee[9]=O):O=ee[9],ee[10]!==(null==ea||null==(h=ea.torrent)?void 0:h.isBestRelease)?(G=(null==ea||null==(C=ea.torrent)?void 0:C.isBestRelease)&&(0,n.jsx)(E.E,{className:"rounded-[--radius-md] text-[0.8rem] bg-pink-800 border-transparent border",intent:"success-solid",children:"Best release"}),ee[10]=null==ea||null==(k=ea.torrent)?void 0:k.isBestRelease,ee[11]=G):G=ee[11];let ey=null==ea||null==(g=ea.torrent)?void 0:g.resolution;ee[12]!==ey?(Y=(0,n.jsx)(T,{resolution:ey}),ee[12]=ey,ee[13]=Y):Y=ee[13],ee[14]!==(null==ea||null==(b=ea.torrent)?void 0:b.infoHash)||ee[15]!==en?(q=!!(null==ea||null==(_=ea.torrent)?void 0:_.infoHash)&&en[null==ea||null==(M=ea.torrent)?void 0:M.infoHash]&&(0,n.jsx)(K,{}),ee[14]=null==ea||null==(R=ea.torrent)?void 0:R.infoHash,ee[15]=en,ee[16]=q):q=ee[16];let ej=null==ea||null==(j=ea.torrent)?void 0:j.seeders;ee[17]!==ej?(U=(0,n.jsx)(D,{seeders:ej}),ee[17]=ej,ee[18]=U):U=ee[18],ee[19]!==(null==ea||null==(N=ea.torrent)?void 0:N.formattedSize)||ee[20]!==(null==ea||null==(S=ea.torrent)?void 0:S.size)?(Q=!!(null==ea||null==(P=ea.torrent)?void 0:P.size)&&(0,n.jsx)("p",{className:"text-gray-300 text-sm flex items-center gap-1",children:null==ea||null==(F=ea.torrent)?void 0:F.formattedSize}),ee[19]=null==ea||null==(L=ea.torrent)?void 0:L.formattedSize,ee[20]=null==ea||null==(B=ea.torrent)?void 0:B.size,ee[21]=Q):Q=ee[21],ee[22]===Symbol.for("react.memo_cache_sentinel")?($=(0,n.jsx)(V.zBL,{}),ee[22]=$):$=ee[22];let eS=null==ea||null==(w=ea.torrent)?void 0:w.date;return ee[23]!==eS?(W=(0,eu.dU)(eS),ee[23]=eS,ee[24]=W):W=ee[24],ee[25]!==W?(X=(0,n.jsxs)("p",{className:"text-[--muted] text-sm flex items-center gap-1",children:[$," ",W]}),ee[25]=W,ee[26]=X):X=ee[26],ee[27]!==G||ee[28]!==Y||ee[29]!==q||ee[30]!==U||ee[31]!==Q||ee[32]!==X?(Z=(0,n.jsxs)("div",{className:"flex flex-wrap gap-3 items-center",children:[G,Y,q,U,Q,X]}),ee[27]=G,ee[28]=Y,ee[29]=q,ee[30]=U,ee[31]=Q,ee[32]=X,ee[33]=Z):Z=ee[33],ee[34]!==eb||ee[35]!==O||ee[36]!==ec||ee[37]!==Z||ee[38]!==em||ee[39]!==ep||ee[40]!==ex||ee[41]!==ev||ee[42]!==ef||ee[43]!==eh||ee[44]!==eg?(J=(0,n.jsxs)(m.KZ,{children:[z,(0,n.jsx)(H,{link:ec,confirmed:em,title:"",releaseGroup:ex,subtitle:ev,isBatch:ef,image:eh,fallbackImage:eg,isBestRelease:eb,onClick:O,children:Z},ep)]}),ee[34]=eb,ee[35]=O,ee[36]=ec,ee[37]=Z,ee[38]=em,ee[39]=ep,ee[40]=ex,ee[41]=ev,ee[42]=ef,ee[43]=eh,ee[44]=eg,ee[45]=J):J=ee[45],J}},25264:(e,t,l)=>{l.d(t,{KL:()=>h,NZ:()=>b,bp:()=>g,d5:()=>y});var n=l(95155),a=l(19749),i=l(55014),r=l(14490),s=l(84127),o=l(91360),d=l(2091),c=l(6773),u=l(97400),m=l(42500),p=l(29724),x=l(12115),v=l(70376),f=function(e){return e.TorrentLoading="torrentstream-torrent-loading",e.TorrentLoadingFailed="torrentstream-torrent-loading-failed",e.TorrentLoadingStatus="torrentstream-torrent-loading-status",e.TorrentLoaded="torrentstream-torrent-loaded",e.TorrentStartedPlaying="torrentstream-torrent-started-playing",e.TorrentStatus="torrentstream-torrent-status",e.TorrentStopped="torrentstream-torrent-stopped",e}(f||{});let h=function(e){return e.Loaded="loaded",e.Stopped="stopped",e}({}),g=(0,m.eU)(null),b=(0,m.eU)(h.Stopped);function y(){let e,t,l,m,y,j,N,S=(0,a.c)(58),[w,E]=(0,p.fp)(g),[A,C]=(0,p.fp)(b),[k,I]=(0,x.useState)(null),[_,T]=(0,x.useState)(null),[D,M]=(0,x.useState)(!1),{mutate:R,isPending:P}=(0,i.W9)();if(S[0]!==E?(e={type:f.TorrentLoading,onMessage:e=>{E("SEARCHING_TORRENTS"),I(null),M(!1)}},S[0]=E,S[1]=e):e=S[1],(0,r.oA)(e),S[2]!==E?(t={type:f.TorrentLoadingFailed,onMessage:e=>{E(null),I(null),M(!1)}},S[2]=E,S[3]=t):t=S[3],(0,r.oA)(t),S[4]!==E?(l={type:f.TorrentLoadingStatus,onMessage:e=>{E(e.state),T(e.torrentBeingChecked),M(!1)}},S[4]=E,S[5]=l):l=S[5],(0,r.oA)(l),S[6]!==E||S[7]!==C?(m={type:f.TorrentLoaded,onMessage:e=>{E("SENDING_STREAM_TO_MEDIA_PLAYER"),C(h.Loaded),M(!1)}},S[6]=E,S[7]=C,S[8]=m):m=S[8],(0,r.oA)(m),S[9]!==E||S[10]!==C?(y={type:f.TorrentStartedPlaying,onMessage:e=>{E(null),C(h.Loaded),M(!0)}},S[9]=E,S[10]=C,S[11]=y):y=S[11],(0,r.oA)(y),S[12]!==E||S[13]!==C?(j={type:f.TorrentStopped,onMessage:e=>{E(null),C(h.Stopped),I(null),M(!1)}},S[12]=E,S[13]=C,S[14]=j):j=S[14],(0,r.oA)(j),S[15]!==C?(N={type:f.TorrentStatus,onMessage:e=>{C(h.Loaded),I(e)}},S[15]=C,S[16]=N):N=S[16],(0,r.oA)(N),A===h.Loaded&&k){let e,t,l,a,i,r,d,m,p,x,f,h,g,b,y;S[17]!==D?(e=!D&&(0,n.jsx)("div",{className:"w-full bg-gray-950 fixed top-0 left-0 z-[100]",children:(0,n.jsx)(c.z,{size:"xs",isIndeterminate:!0})}),S[17]=D,S[18]=e):e=S[18];let j=k.progressPercentage<5;S[19]!==j?(t=(0,o.cn)("text-green-300",{"text-[--muted] animate-pulse":j}),S[19]=j,S[20]=t):t=S[20],S[21]!==k.progressPercentage?(l=k.progressPercentage.toFixed(2),S[21]=k.progressPercentage,S[22]=l):l=S[22],S[23]!==l||S[24]!==t?(a=(0,n.jsxs)("span",{className:t,children:[l,"%"]}),S[23]=l,S[24]=t,S[25]=a):a=S[25],S[26]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)(v.hTi,{className:"inline-block text-lg"}),S[26]=i):i=S[26],S[27]!==k.seeders?(r=(0,n.jsxs)("div",{className:"space-x-1",children:[i,(0,n.jsx)("span",{children:k.seeders})]}),S[27]=k.seeders,S[28]=r):r=S[28],S[29]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)(v.nfB,{className:"inline-block mr-2"}),S[29]=d):d=S[29];let N=""!==k.downloadSpeed?k.downloadSpeed:"0 B/s";S[30]!==N?(m=(0,n.jsxs)("div",{className:"space-x-1",children:[d,N]}),S[30]=N,S[31]=m):m=S[31],S[32]===Symbol.for("react.memo_cache_sentinel")?(p=(0,n.jsx)(v.yL8,{className:"inline-block mr-2"}),S[32]=p):p=S[32];let w=""!==k.uploadSpeed?k.uploadSpeed:"0 B/s";return S[33]!==w?(x=(0,n.jsxs)("div",{className:"space-x-1",children:[p,w]}),S[33]=w,S[34]=x):x=S[34],S[35]!==R?(f=()=>R(),S[35]=R,S[36]=f):f=S[36],S[37]===Symbol.for("react.memo_cache_sentinel")?(h=(0,n.jsx)(v.yQ,{}),S[37]=h):h=S[37],S[38]!==P||S[39]!==f?(g=(0,n.jsx)(u.m_,{trigger:(0,n.jsx)(s.K0,{onClick:f,loading:P,intent:"alert-basic",icon:h}),children:"Stop stream"}),S[38]=P,S[39]=f,S[40]=g):g=S[40],S[41]!==a||S[42]!==r||S[43]!==m||S[44]!==x||S[45]!==g?(b=(0,n.jsx)("div",{className:"fixed left-0 top-8 w-full flex justify-center z-[100] pointer-events-none",children:(0,n.jsxs)("div",{className:"bg-gray-950 flex-wrap rounded-full border lg:max-w-[50%] w-fit h-14 px-6 flex gap-3 items-center text-sm lg:text-base pointer-events-auto",children:[a,r,m,x,g]})}),S[41]=a,S[42]=r,S[43]=m,S[44]=x,S[45]=g,S[46]=b):b=S[46],S[47]!==b||S[48]!==e?(y=(0,n.jsxs)(n.Fragment,{children:[e,b]}),S[47]=b,S[48]=e,S[49]=y):y=S[49],y}if(w){let e,t,l;S[50]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"w-full bg-gray-950 fixed top-0 left-0 z-[100]",children:(0,n.jsx)(c.z,{size:"xs",isIndeterminate:!0})}),S[50]=e):e=S[50],S[51]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(d.y$,{className:"w-4 h-4"}),S[51]=t):t=S[51];let a="SEARCHING_TORRENTS"===w?"Selecting file...":"",i="ADDING_TORRENT"===w?'Adding torrent "'.concat(_,'"'):"",r="CHECKING_TORRENT"===w?'Checking torrent "'.concat(_,'"'):"",s="SELECTING_FILE"===w?"Selecting file...":"",o="SENDING_STREAM_TO_MEDIA_PLAYER"===w?"Sending stream to media player":"";return S[52]!==i||S[53]!==r||S[54]!==s||S[55]!==o||S[56]!==a?(l=(0,n.jsxs)(n.Fragment,{children:[e,(0,n.jsx)("div",{className:"fixed left-0 top-8 w-full flex justify-center z-[100] pointer-events-none",children:(0,n.jsxs)("div",{className:"bg-gray-950 rounded-full border lg:max-w-[50%] w-fit h-14 px-6 flex gap-2 items-center text-sm lg:text-base pointer-events-auto",children:[t,(0,n.jsxs)("div",{className:"truncate max-w-[500px]",children:[a,i,r,s,o]})]})})]}),S[52]=i,S[53]=r,S[54]=s,S[55]=o,S[56]=a,S[57]=l):l=S[57],l}return null}},32754:(e,t,l)=>{l.d(t,{D:()=>B,M:()=>z});var n=l(95155),a=l(19749),i=l(42094),r=l(2159),s=l(38900),o=l(53540),d=l(78045),c=l(25305),u=l(90168),m=l(37817),p=l(76968),x=l(71780),v=l(24685),f=l(68648),h=l(24449),g=l(5249),b=l(84127),y=l(91360),j=l(2091),N=l(76049),S=l(77717),w=l(90711),E=l(24151),A=l(91332),C=l(50943),k=l(42500),I=l(14300),_=l(29724),T=l(35089),D=l(6066),M=l(12115),R=l(70376),P=l(19705),F=l(67187);let L=(0,k.eU)(void 0);function B(){let e,t=(0,a.c)(2),l=(0,_.Xr)(L);return t[0]!==l?(e={setPreviewModalMediaId:(e,t)=>{l({mediaId:e,type:t})}},t[0]=l,t[1]=e):e=t[1],e}function z(e){let t,l,i,r,s,o,d,c,u=(0,a.c)(23);if(u[0]!==e){let{children:l,...n}=e;t=n,u[0]=e,u[1]=t}else t=u[1];let[m,p]=(0,_.fp)(L),x=(0,C.ZC)(m),v=(0,D.usePathname)();u[2]!==p?(l=()=>{p(void 0)},u[2]=p,u[3]=l):l=u[3],u[4]!==v?(i=[v],u[4]=v,u[5]=i):i=u[5],M.useEffect(l,i);let f=!!m;return u[6]!==p?(r=e=>p(t=>e?t:void 0),u[6]=p,u[7]=r):r=u[7],u[8]!==m||u[9]!==x||u[10]!==p?(s=m&&(0,n.jsxs)("div",{className:"z-[12] absolute right-2 top-2 flex gap-2 items-center",children:[!!x&&x.mediaId!==m.mediaId&&(0,n.jsx)(b.K0,{intent:"white-subtle",size:"sm",className:"rounded-full",icon:(0,n.jsx)(P.JWD,{}),onClick:()=>{p(x)}}),(0,n.jsx)(b.K0,{intent:"alert",size:"sm",className:"rounded-full",icon:(0,n.jsx)(R.Gsv,{}),onClick:()=>{p(void 0)}})]}),u[8]=m,u[9]=x,u[10]=p,u[11]=s):s=u[11],u[12]!==m?(o=(null==m?void 0:m.type)==="anime"&&(0,n.jsx)(K,{mediaId:m.mediaId}),u[12]=m,u[13]=o):o=u[13],u[14]!==m?(d=(null==m?void 0:m.type)==="manga"&&(0,n.jsx)(O,{mediaId:m.mediaId}),u[14]=m,u[15]=d):d=u[15],u[16]!==t||u[17]!==f||u[18]!==r||u[19]!==s||u[20]!==o||u[21]!==d?(c=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(N.a,{open:f,onOpenChange:r,contentClass:"max-w-7xl relative",hideCloseButton:!0,...t,children:[s,o,d]})}),u[16]=t,u[17]=f,u[18]=r,u[19]=s,u[20]=o,u[21]=d,u[22]=c):c=u[22],c}function K(e){let t,l=(0,a.c)(5),{mediaId:s}=e,{data:o,isLoading:d}=(0,r._8)(s),{data:c,isLoading:u}=(0,i.yg)(s);return l[0]!==c||l[1]!==u||l[2]!==o||l[3]!==d?(t=(0,n.jsx)(G,{entry:o,details:c,entryLoading:d,detailsLoading:u,type:"anime"}),l[0]=c,l[1]=u,l[2]=o,l[3]=d,l[4]=t):t=l[4],t}function O(e){let t,l=(0,a.c)(5),{mediaId:i}=e,{data:r,isLoading:o}=(0,s.Kq)(i),{data:d,isLoading:c}=(0,s.Or)(i);return l[0]!==d||l[1]!==c||l[2]!==r||l[3]!==o?(t=(0,n.jsx)(G,{entry:r,details:d,entryLoading:o,detailsLoading:c,type:"manga"}),l[0]=d,l[1]=c,l[2]=r,l[3]=o,l[4]=t):t=l[4],t}function G(e){var t,l,i,r,s,N,C,k,_,D,M,R,P,L,B,z,K,O,G,Y,V,q,U,H,Q,$,W,X,Z,J;let ee,et,el,en,ea,ei,er,es,eo,ed,ec,eu,em,ep,ex,ev=(0,a.c)(38),{entry:ef,entryLoading:eh,detailsLoading:eg,details:eb,type:ey}=e,ej=(0,m.v1)(),eN=(0,A.Ky)(),eS=null==ef?void 0:ef.media,ew=(null==eS?void 0:eS.bannerImage)||(null==eS||null==(t=eS.coverImage)?void 0:t.extraLarge),{hasTorrentProvider:eE}=(0,m.lJ)(),{hasDebridService:eA}=(0,m.bV)();ev[0]===Symbol.for("react.memo_cache_sentinel")?(ee=[f.IF,f.f0,v.l],ev[0]=ee):ee=ev[0];let eC=eN.mediaPageBannerSize===A.kE.Small?"lg:h-[23rem]":"h-[12rem] lg:h-[22rem] 2xl:h-[30rem]";return ev[1]!==eC?(et=(0,y.cn)("absolute z-[0] opacity-30 w-full rounded-t-[--radius] overflow-hidden","w-full flex-none object-cover object-center z-[3] bg-[--background] h-[12rem]",eC),ev[1]=eC,ev[2]=et):et=ev[2],ev[3]===Symbol.for("react.memo_cache_sentinel")?(el=(0,n.jsx)("div",{className:(0,y.cn)("w-full z-[2] absolute bottom-[-5rem] h-[5rem] bg-gradient-to-b from-[--background] via-transparent via-100% to-transparent")}),en=(0,y.cn)("absolute top-0 left-0 w-full h-full"),ev[3]=el,ev[4]=en):(el=ev[3],en=ev[4]),ev[5]!==ew?(ea=!!ew&&(0,n.jsx)(T.default,{src:(0,w.VG)(ew||""),alt:"banner image",fill:!0,quality:100,priority:!0,sizes:"100vw",className:(0,y.cn)("object-cover object-center z-[1]")}),ev[5]=ew,ev[6]=ea):ea=ev[6],ev[7]===Symbol.for("react.memo_cache_sentinel")?(ei=(0,n.jsx)("div",{className:(0,y.cn)("hidden lg:block max-w-[60rem] xl:max-w-[100rem] w-full z-[2] h-full absolute left-0 bg-gradient-to-r from-[--background]  transition-opacity to-transparent","opacity-85 duration-1000")}),er=(0,n.jsx)("div",{className:(0,y.cn)("hidden lg:block max-w-[60rem] xl:max-w-[80rem] w-full z-[2] h-full absolute left-0 bg-gradient-to-r from-[--background] from-25% transition-opacity to-transparent","opacity-50 duration-500")}),ev[7]=ei,ev[8]=er):(ei=ev[7],er=ev[8]),ev[9]!==ea?(es=(0,n.jsxs)("div",{className:en,children:[ea,ei,er]}),ev[9]=ea,ev[10]=es):es=ev[10],ev[11]===Symbol.for("react.memo_cache_sentinel")?(eo=(0,n.jsx)("div",{className:(0,y.cn)("w-full z-[3] absolute bottom-0 h-[50%] bg-gradient-to-t from-[--background] via-transparent via-100% to-transparent")}),ed=(0,n.jsx)("div",{className:(0,y.cn)("absolute h-full w-full block lg:hidden bg-[--background] opacity-70 z-[2]")}),ev[11]=eo,ev[12]=ed):(eo=ev[11],ed=ev[12]),ev[13]!==et||ev[14]!==es?(ec=(0,n.jsxs)("div",{className:et,children:[el,es,eo,ed]}),ev[13]=et,ev[14]=es,ev[15]=ec):ec=ev[15],ev[16]!==eh||ev[17]!==eN.mediaPageBannerSize?(eu=eh&&(0,n.jsx)("div",{className:"space-y-4 relative z-[5]",children:(0,n.jsx)(S.E,{className:(0,y.cn)("h-[12rem]",eN.mediaPageBannerSize===A.kE.Small?"lg:h-[23rem]":"h-[12rem] lg:h-[22rem] 2xl:h-[30rem]")})}),ev[16]=eh,ev[17]=eN.mediaPageBannerSize,ev[18]=eu):eu=ev[18],ev[19]!==eb||ev[20]!==eg||ev[21]!==ef||ev[22]!==eh||ev[23]!==eA||ev[24]!==eE||ev[25]!==(null==eS?void 0:eS.id)||ev[26]!==(null==ej||null==(i=ej.settings)||null==(l=i.torrent)?void 0:l.defaultTorrentClient)||ev[27]!==eN.mediaPageBannerInfoBoxSize||ev[28]!==ey?(em=!eh&&ef&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"z-[5] relative",children:[(0,n.jsx)(u.xN,{coverImage:(null==(s=ef.media)||null==(r=s.coverImage)?void 0:r.extraLarge)||(null==(C=ef.media)||null==(N=C.coverImage)?void 0:N.large),title:null==(_=ef.media)||null==(k=_.title)?void 0:k.userPreferred,color:null==(M=ef.media)||null==(D=M.coverImage)?void 0:D.color,englishTitle:null==(P=ef.media)||null==(R=P.title)?void 0:R.english,romajiTitle:null==(B=ef.media)||null==(L=B.title)?void 0:L.romaji,startDate:null==(z=ef.media)?void 0:z.startDate,season:null==(K=ef.media)?void 0:K.season,progressTotal:null==(O=ef.media)?void 0:O.episodes,status:null==(G=ef.media)?void 0:G.status,description:null==(Y=ef.media)?void 0:Y.description,listData:ef.listData,media:ef.media,smallerTitle:!0,type:"anime",children:(0,n.jsxs)("div",{className:(0,y.cn)("flex gap-3 flex-wrap items-center relative z-[10]",eN.mediaPageBannerInfoBoxSize===A.Pw.Fluid&&"justify-center lg:justify-start lg:max-w-[65vw]"),children:[(0,n.jsx)(c.H2,{meanScore:null==ef||null==(V=ef.media)?void 0:V.meanScore,badgeClass:"bg-transparent"}),(null==eb?void 0:eb.studios)&&(0,n.jsx)(d.v,{studios:null==eb?void 0:eb.studios}),(0,n.jsx)(c.vZ,{genres:null==eb?void 0:eb.genres}),(0,n.jsx)("div",{className:(0,y.cn)(eN.mediaPageBannerInfoBoxSize===A.Pw.Fluid?"w-full":"contents"),children:(0,n.jsx)(c.Kt,{rankings:null==eb?void 0:eb.rankings})})]})}),(0,n.jsxs)("div",{className:"mt-6 flex gap-3 items-center",children:[(0,n.jsx)(g.i,{href:"anime"===ey?"/entry?id=".concat(null==eS?void 0:eS.id):"/manga/entry?id=".concat(null==eS?void 0:eS.id),children:(0,n.jsx)(b.$n,{className:"px-0",intent:"gray-link",children:"Open page"})}),"anime"===ey&&!!(null==ef||null==(U=ef.media)||null==(q=U.trailer)?void 0:q.id)&&(0,n.jsx)(o.f,{trailerId:null==ef||null==(Q=ef.media)||null==(H=Q.trailer)?void 0:H.id,trigger:(0,n.jsx)(b.$n,{intent:"gray-link",className:"px-0",children:"Trailer"})}),(0,n.jsx)(g.i,{href:"https://anilist.co/".concat(ey,"/").concat(ef.mediaId),target:"_blank",children:(0,n.jsx)(b.K0,{intent:"gray-link",className:"px-0",icon:(0,n.jsx)(F.vFL,{className:"text-lg"})})}),"anime"===ey&&(null==ef||null==($=ef.media)?void 0:$.status)!=="NOT_YET_RELEASED"&&eE&&((null==ej||null==(X=ej.settings)||null==(W=X.torrent)?void 0:W.defaultTorrentClient)!==E.XH.NONE||eA)&&(0,n.jsx)(x.R,{entry:ef})]}),eg?(0,n.jsx)(j.kt,{}):(0,n.jsxs)("div",{className:"space-y-6 pt-6",children:["anime"===ey&&(0,n.jsx)(p.P,{entry:ef,details:eb}),"manga"===ey&&(0,n.jsx)(h.v,{entry:ef,details:eb})]})]})}),ev[19]=eb,ev[20]=eg,ev[21]=ef,ev[22]=eh,ev[23]=eA,ev[24]=eE,ev[25]=null==eS?void 0:eS.id,ev[26]=null==ej||null==(J=ej.settings)||null==(Z=J.torrent)?void 0:Z.defaultTorrentClient,ev[27]=eN.mediaPageBannerInfoBoxSize,ev[28]=ey,ev[29]=em):em=ev[29],ev[30]!==ef||ev[31]!==ey?(ep="anime"===ey&&!!ef&&(0,n.jsx)(f.qM,{entry:ef}),ev[30]=ef,ev[31]=ey,ev[32]=ep):ep=ev[32],ev[33]!==ec||ev[34]!==eu||ev[35]!==em||ev[36]!==ep?(ex=(0,n.jsxs)(I.U,{atoms:ee,children:[ec,eu,em,ep]}),ev[33]=ec,ev[34]=eu,ev[35]=em,ev[36]=ep,ev[37]=ex):ex=ev[37],ex}},32931:(e,t,l)=>{l.d(t,{k:()=>f,k3:()=>x,ke:()=>v,ul:()=>p});var n=l(17946),a=l(38900),i=l(85210),r=l(91332),s=l(47555),o=l(29724),d=l(6066),c=l(12115),u=l(24780);let m={...i.Qg,sorting:"TITLE",unreadOnly:!1},p=(0,s.E)(m),x=(0,s.E)(m),v=(0,s.E)({latestChapterNumbers:{},storedProviders:{},storedFilters:{}});function f(){let e=(0,d.useRouter)(),{data:t,isLoading:l,isError:s}=(0,a.QJ)(),{data:x}=(0,a.MT)(),{data:f}=(0,n.LW)(),{mangaLibraryCollectionDefaultSorting:h}=(0,r.Ky)();c.useEffect(()=>{s&&e.push("/")},[s]);let{storedProviders:g}=(0,u.L$)(f),{storedFilters:b}=(0,u.Ef)(f,g),[,y]=(0,o.fp)(v);c.useEffect(()=>{x&&y({latestChapterNumbers:x,storedProviders:g,storedFilters:b})},[g,b,x]);let[j,N]=(0,o.fp)(p);c.useEffect(()=>{t&&N(m)},[t]);let S=c.useMemo(()=>{var e,l;let n=new Set;return null==t||null==(e=t.lists)||e.forEach(e=>{var t;null==(t=e.entries)||t.forEach(e=>{var t,l;null==(l=e.media)||null==(t=l.genres)||t.forEach(e=>{n.add(e)})})}),null==(l=Array.from(n))?void 0:l.sort((e,t)=>e.localeCompare(t))},[t]),w=c.useMemo(()=>{if(!t||!t.lists)return t;let e=t.lists.map(e=>{if(!e)return e;let t={...j,sorting:h},l=(0,i.ns)(e.entries,t,!0,g,b,x);if(0===l.length&&t.unreadOnly){let t={...j,unreadOnly:!1,sorting:h};l=(0,i.ns)(e.entries,t,!0,g,b,x)}return{type:e.type,status:e.status,entries:l}});return{lists:[e.find(e=>"CURRENT"===e.type),e.find(e=>"PAUSED"===e.type),e.find(e=>"PLANNING"===e.type)].filter(Boolean)}},[t,j,g,b,x]),E=c.useMemo(()=>{if(!t||!t.lists)return t;let e=t.lists.map(e=>{if(!e)return e;let t={...j,sorting:h},l=(0,i.dw)("manga",e.entries,t,!0);return{type:e.type,status:e.status,entries:l}});return{lists:[e.find(e=>"CURRENT"===e.type),e.find(e=>"PAUSED"===e.type),e.find(e=>"PLANNING"===e.type)].filter(Boolean)}},[t,j]),A=c.useMemo(()=>{var e,t;return null==(t=[...new Set(null==E||null==(e=E.lists)?void 0:e.flatMap(e=>{var t,l;return null!=(l=null==(t=e.entries)?void 0:t.flatMap(e=>{var t;return null==(t=e.media)?void 0:t.genres}))?l:[]}))].filter(Boolean))?void 0:t.sort((e,t)=>e.localeCompare(t))},[E]);return{genres:S,mangaCollection:w,filteredMangaCollection:E,mangaCollectionGenres:A,mangaCollectionLoading:l,storedFilters:b,storedProviders:g}}},36945:(e,t,l)=>{l.d(t,{Ln:()=>c,xt:()=>u});var n=l(95155),a=l(19749),i=l(78106),r=l(91360),s=l(77717),o=l(12115);let d=(0,r.cn)("grid grid-cols-2 min-[768px]:grid-cols-3 min-[1080px]:grid-cols-4 min-[1320px]:grid-cols-5 min-[1750px]:grid-cols-6 min-[1850px]:grid-cols-7 min-[2000px]:grid-cols-8 gap-4");function c(e){let t,l,s,c,u=(0,a.c)(8);if(u[0]!==e?({children:t,...l}=e,u[0]=e,u[1]=t,u[2]=l):(t=u[1],l=u[2]),0===o.Children.toArray(t).length){let e;return u[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(i.D,{title:null,children:(0,n.jsx)("p",{children:"Nothing to see"})}),u[3]=e):e=u[3],e}return u[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.cn)(d),u[4]=s):s=u[4],u[5]!==t||u[6]!==l?(c=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{"data-media-card-grid":!0,className:s,...l,children:t})}),u[5]=t,u[6]=l,u[7]=c):c=u[7],c}function u(e){let t,l,r,s,o=(0,a.c)(12);if(o[0]!==e?({children:t,itemCount:l,...r}=e,o[0]=e,o[1]=t,o[2]=l,o[3]=r):(t=o[1],l=o[2],r=o[3]),0===l){let e;return o[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(i.D,{title:null,children:(0,n.jsx)("p",{children:"Nothing to see"})}),o[4]=e):e=o[4],e}if(l<=48){let e;return o[5]!==t||o[6]!==r?(e=(0,n.jsx)(c,{...r,children:t}),o[5]=t,o[6]=r,o[7]=e):e=o[7],e}return o[8]!==t||o[9]!==l||o[10]!==r?(s=(0,n.jsx)(p,{itemCount:l,...r,children:t}),o[8]=t,o[9]=l,o[10]=r,o[11]=s):s=o[11],s}let m=[{min:0,cols:2},{min:768,cols:3},{min:1080,cols:4},{min:1320,cols:5},{min:1750,cols:6},{min:1850,cols:7},{min:2e3,cols:8}];function p(e){var t,l;let i,c,u,p,v,f,h,g,b,y,j,N,S,w,E,A,C=(0,a.c)(27);C[0]!==e?({children:i,itemCount:c,...u}=e,C[0]=e,C[1]=i,C[2]=c,C[3]=u):(i=C[1],c=C[2],u=C[3]),C[4]===Symbol.for("react.memo_cache_sentinel")?(p=new Set,C[4]=p):p=C[4];let[k,I]=o.useState(p);C[5]===Symbol.for("react.memo_cache_sentinel")?(v=new Map,C[5]=v):v=C[5];let[_,T]=o.useState(v),D=o.useRef(null);C[6]===Symbol.for("react.memo_cache_sentinel")?(f=[],C[6]=f):f=C[6];let M=o.useRef(f),R=o.useRef(null);h=null!=(l=null==(t=m.find(x))?void 0:t.cols)?l:8,C[7]!==c?(g=()=>(I(new Set(Array.from(Array(Math.min(h,c)).keys()))),()=>{T(new Map)}),b=[h,c],C[7]=c,C[8]=g,C[9]=b):(g=C[8],b=C[9]),o.useEffect(g,b),C[10]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{if(D.current)return R.current=new IntersectionObserver(e=>{e.forEach(e=>{var t;let l=parseInt(null!=(t=e.target.getAttribute("data-index"))?t:"-1");e.isIntersecting?I(e=>{let t=new Set(e);return t.add(l),t}):I(e=>{let t=new Set(e);return l>=h&&t.delete(l),t})})},{root:null,rootMargin:"200px 0px",threshold:0}),M.current.forEach(e=>{if(e){var t;null==(t=R.current)||t.observe(e)}}),()=>{var e;null==(e=R.current)||e.disconnect()}},C[10]=y):y=C[10],C[11]!==c?(j=[c,h],C[11]=c,C[12]=j):j=C[12],o.useEffect(y,j),C[13]===Symbol.for("react.memo_cache_sentinel")?(N=(e,t)=>{T(l=>{let n=new Map(l);return n.set(e,t),n})},C[13]=N):N=C[13];let P=N;if(C[14]===Symbol.for("react.memo_cache_sentinel")?(S=(0,r.cn)(d),C[14]=S):S=C[14],C[15]!==i||C[16]!==_||C[17]!==k){let e;C[19]!==_||C[20]!==k?(e=(e,t)=>{let l=k.has(t),a=_.get(t);return(0,n.jsx)("div",{"data-media-card-lazy-grid-item":!0,ref:e=>M.current[t]=e,"data-index":t,className:"transition-all duration-300 ease-in-out",children:l?(0,n.jsx)("div",{"data-media-card-lazy-grid-item-content":!0,ref:e=>{e&&!a&&P(t,e.offsetHeight)},children:e}):(0,n.jsx)(s.E,{"data-media-card-lazy-grid-item-skeleton":!0,className:"w-full",style:{height:a||"300px"}})},(null==e?void 0:e.key)?null==e?void 0:e.key:t)},C[19]=_,C[20]=k,C[21]=e):e=C[21],w=o.Children.map(i,e),C[15]=i,C[16]=_,C[17]=k,C[18]=w}else w=C[18];return C[22]!==w?(E=(0,n.jsx)("div",{"data-media-card-lazy-grid":!0,className:S,ref:D,children:w}),C[22]=w,C[23]=E):E=C[23],C[24]!==u||C[25]!==E?(A=(0,n.jsx)("div",{"data-media-card-lazy-grid-renderer":!0,...u,children:E}),C[24]=u,C[25]=E,C[26]=A):A=C[26],A}function x(e){return window.innerWidth>=e.min}},37054:(e,t,l)=>{l.d(t,{p:()=>c});var n=l(95155),a=l(19749),i=l(87403),r=l(75733),s=l(84127),o=l(97400);l(12115);var d=l(41452);function c(e){let t,l,c,u,m,p,x,v,f,h,g,b,y=(0,a.c)(34);y[0]!==e?({mediaId:t,type:u,size:c,...l}=e,y[0]=e,y[1]=t,y[2]=l,y[3]=c,y[4]=u):(t=y[1],l=y[2],c=y[3],u=y[4]);let{data:j,isLoading:N}=(0,i.jM)(t,u),{mutate:S,isPending:w}=(0,i.IE)(),{mutate:E,isPending:A}=(0,i.ZM)();y[5]!==S||y[6]!==j||y[7]!==t||y[8]!==E||y[9]!==u?(m=function(){j?E({mediaId:t,type:u}):S({media:[{mediaId:t,type:u}]})},y[5]=S,y[6]=j,y[7]=t,y[8]=E,y[9]=u,y[10]=m):m=y[10];let C=m;y[11]!==C?(p={title:"Remove offline data",description:"This action will remove the offline data for this media entry. Are you sure you want to proceed?",onConfirm:()=>{C()}},y[11]=C,y[12]=p):p=y[12];let k=(0,r.J)(p);y[13]!==j?(x=j?(0,n.jsx)(d.uyw,{}):(0,n.jsx)(d.Qpb,{}),y[13]=j,y[14]=x):x=y[14],y[15]!==k||y[16]!==C||y[17]!==j?(v=()=>j?k.open():C(),y[15]=k,y[16]=C,y[17]=j,y[18]=v):v=y[18];let I=N||w||A,_=j?"primary-subtle":"gray-subtle";y[19]!==l||y[20]!==c||y[21]!==x||y[22]!==v||y[23]!==I||y[24]!==_?(f=(0,n.jsx)(s.K0,{icon:x,onClick:v,loading:I,intent:_,size:c,...l}),y[19]=l,y[20]=c,y[21]=x,y[22]=v,y[23]=I,y[24]=_,y[25]=f):f=y[25];let T=j?"Remove offline data":"Save locally";return y[26]!==f||y[27]!==T?(h=(0,n.jsx)(o.m_,{trigger:f,children:T}),y[26]=f,y[27]=T,y[28]=h):h=y[28],y[29]!==k?(g=(0,n.jsx)(r.K,{...k}),y[29]=k,y[30]=g):g=y[30],y[31]!==h||y[32]!==g?(b=(0,n.jsxs)(n.Fragment,{children:[h,g]}),y[31]=h,y[32]=g,y[33]=b):b=y[33],b}},41422:(e,t,l)=>{l.d(t,{Ce:()=>a,QG:()=>r,TH:()=>i});var n=l(42500);let a=(0,n.eU)([]),i=(0,n.eU)([]),r=(0,n.eU)(e=>e(a).length)},41963:(e,t,l)=>{l.d(t,{I:()=>N,W:()=>j});var n=l(95155),a=l(55014),i=l(68648),r=l(82449),s=l(95094),o=l(36808),d=l(84127),c=l(91360),u=l(2091),m=l(76049),p=l(52885),x=l(22960),v=l(97400),f=l(42500),h=l(29724),g=l(12115),b=l(38628),y=l(41452);let j=(0,f.eU)(void 0);function N(e){let{entry:t}=e,[,l]=(0,h.fp)(i.IF),[f,N]=(0,h.fp)(j),[S,w]=g.useState(-1),{torrentStreamingSelectedEpisode:E}=(0,s.O)(),{data:A,isLoading:C}=(0,a.Dg)({torrent:f,episodeNumber:null==E?void 0:E.episodeNumber,media:t.media},!!f),{handleManualTorrentStreamSelection:k}=(0,r.w9)(),I=null==A?void 0:A.some(e=>e.isLikely),_=(null==A?void 0:A.filter(e=>e.isLikely).length)===1,T=g.useRef(null),D=g.useCallback(()=>{var e;return(0,n.jsx)(p.z,{value:String(S),onValueChange:e=>w(Number(e)),options:(null==A||null==(e=A.toSorted((e,t)=>e.path.localeCompare(t.path)))?void 0:e.map((e,t)=>({label:(0,n.jsxs)("div",{className:(0,c.cn)("w-full",I&&!e.isLikely&&"opacity-60"),ref:_&&e.isLikely?T:void 0,children:[(0,n.jsx)("p",{className:"mb-1 line-clamp-1",children:e.displayTitle}),e.isLikely&&(0,n.jsxs)("p",{className:"flex items-center",children:[(0,n.jsx)(y._IM,{className:"text-[--green] mr-1"}),(0,n.jsx)("span",{className:"text-white",children:"Likely match"})]}),(0,n.jsx)(v.m_,{trigger:(0,n.jsx)("p",{className:"font-normal line-clamp-1 text-sm text-[--muted]",children:e.displayPath}),children:e.path})]}),value:String(e.index)})))||[],itemContainerClass:(0,c.cn)("items-start cursor-pointer transition border-transparent rounded-[--radius] p-2 w-full","hover:bg-[--subtle] bg-gray-900 hover:bg-gray-950","data-[state=checked]:bg-white dark:data-[state=checked]:bg-gray-950","focus:ring-2 ring-brand-100 dark:ring-brand-900 ring-offset-1 ring-offset-[--background] focus-within:ring-2 transition","border border-transparent data-[state=checked]:border-[--brand] data-[state=checked]:ring-offset-0"),itemClass:(0,c.cn)("border-transparent absolute top-2 right-2 bg-transparent dark:bg-transparent dark:data-[state=unchecked]:bg-transparent","data-[state=unchecked]:bg-transparent data-[state=unchecked]:hover:bg-transparent dark:data-[state=unchecked]:hover:bg-transparent","focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:ring-offset-transparent"),itemIndicatorClass:"hidden",itemLabelClass:"font-medium flex flex-col items-center data-[state=checked]:text-[--brand] cursor-pointer",stackClass:"flex flex-col gap-2 space-y-0"})},[A,S]),M=g.useRef(null);return g.useEffect(()=>{if(_&&T.current&&M.current){let e=setTimeout(()=>{let e=T.current,t=M.current;if(e&&t){let l=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=l.top-n.top+t.scrollTop-16;t.scrollTo({top:a,behavior:"smooth"})}},1e3);return()=>clearTimeout(e)}},[_,T.current]),(0,n.jsx)(m.a,{open:!!f,onOpenChange:e=>{e||(N(void 0),w(-1))},contentClass:"max-w-5xl",title:"Choose a file to stream",children:(0,n.jsx)(o.KZ,{className:"mt-4",children:C?(0,n.jsx)(u.kt,{}):(0,n.jsxs)(o.KZ,{className:"pb-0",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"flex flex-1"}),(0,n.jsx)(d.$n,{intent:"primary",className:"",rightIcon:(0,n.jsx)(b.HI7,{className:"text-xl"}),disabled:-1===S||C,onClick:function(){-1!=S&&f&&E&&E.aniDBEpisode&&(k({torrent:f,entry:t,aniDBEpisode:E.aniDBEpisode,episodeNumber:E.episodeNumber,chosenFileIndex:S}),N(void 0),w(-1),l(void 0))},children:"Stream"})]}),(0,n.jsx)(x.F,{viewportRef:M,className:"h-[75dvh] overflow-y-auto p-4 border rounded-[--radius-md]",children:(0,n.jsx)(D,{})})]})})})}},42793:(e,t,l)=>{l.d(t,{a9:()=>J,K9:()=>$});var n=l(95155),a=l(19749),i=l(42094),r=l(2159),s=l(75193),o=l(29260),d=l(83563),c=l(37817),u=l(83368),m=l(76968),p=l(55014),x=l(51441),v=l(68648),f=l(83394),h=l(13029),g=l(26589),b=l(77166),y=l(10653),j=l(65539),N=l(67236),S=l(59271),w=l(80677),E=l(91332),A=l(12115);function C(e){var t,l;let a=(0,E.Ky)(),{entry:i,episodeCollection:r,onEpisodeClick:s,onPlayNextEpisodeOnMount:o,bottomSection:d,...c}=e,{data:u}=(0,f.H_)(),m=(0,A.useMemo)(()=>{var e,t,l,n,a,s;if(!(null==r?void 0:r.episodes))return[];let o=[...null==r?void 0:r.episodes];return(null==(e=(null==(t=i.listData)?void 0:t.progress)&&(null==(l=i.media)?void 0:l.episodes)&&(null==(n=i.listData)?void 0:n.progress)===(null==(a=i.media)?void 0:a.episodes)?null==o?void 0:o.reverse():null==o?void 0:o.slice((null==(s=i.listData)?void 0:s.progress)||0))?void 0:e.slice(0,30))||[]},[null==r?void 0:r.episodes,i.nextEpisode,null==(t=i.listData)?void 0:t.progress]);return((0,N.k)({onPlay:()=>{o(m[0])}},!!m[0]),i&&r)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(w.FN,{className:"w-full max-w-full",gap:"md",opts:{align:"start"},children:[(0,n.jsx)(w.h1,{}),(0,n.jsx)(w.Wk,{children:m.map((e,t)=>{var l,o,d,c,m,p,x,v,g,b,y,j,N,E,A;return(0,n.jsx)(w.A7,{className:(0,S.pF)(a.smallerEpisodeCarouselSize),children:(0,n.jsx)(h.U,{episode:e,image:(null==(l=e.episodeMetadata)?void 0:l.image)||(null==(o=e.baseAnime)?void 0:o.bannerImage)||(null==(c=e.baseAnime)||null==(d=c.coverImage)?void 0:d.extraLarge),topTitle:e.episodeTitle||(null==e||null==(p=e.baseAnime)||null==(m=p.title)?void 0:m.userPreferred),title:e.displayTitle,isInvalid:e.isInvalid,progressTotal:null==(x=e.baseAnime)?void 0:x.episodes,progressNumber:e.progressNumber,episodeNumber:e.episodeNumber,length:null==(v=e.episodeMetadata)?void 0:v.length,percentageComplete:(0,f.hH)(u,i.mediaId,e.episodeNumber),minutesRemaining:(0,f.pj)(u,i.mediaId,e.episodeNumber),hasDiscrepancy:(null==r||null==(g=r.episodes)?void 0:g.findIndex(e=>"special"===e.type))!==-1,onClick:()=>{s(e)},anime:{id:i.mediaId,image:null==(y=e.baseAnime)||null==(b=y.coverImage)?void 0:b.medium,title:null==e||null==(N=e.baseAnime)||null==(j=N.title)?void 0:j.userPreferred}},(null==(E=e.localFile)?void 0:E.path)||"")},(null==e||null==(A=e.localFile)?void 0:A.path)||t)})})]}),(0,n.jsx)(j.i,{children:null==r||null==(l=r.episodes)?void 0:l.map(e=>{var t,l,a,r,o,d,c,u,m,p,x,v,f;return(0,n.jsx)(g.X,{media:null==e?void 0:e.baseAnime,title:(null==e?void 0:e.displayTitle)||(null==e||null==(l=e.baseAnime)||null==(t=l.title)?void 0:t.userPreferred)||"",image:(null==e||null==(a=e.episodeMetadata)?void 0:a.image)||(null==e||null==(o=e.baseAnime)||null==(r=o.coverImage)?void 0:r.large),episodeTitle:null==e?void 0:e.episodeTitle,onClick:()=>{s(e)},description:null==e||null==(d=e.episodeMetadata)?void 0:d.overview,isFiller:null==e||null==(c=e.episodeMetadata)?void 0:c.isFiller,length:null==e||null==(u=e.episodeMetadata)?void 0:u.length,isWatched:!!(null==(m=i.listData)?void 0:m.progress)&&i.listData.progress>=(null==e?void 0:e.progressNumber),className:"flex-none w-full",episodeNumber:e.episodeNumber,progressNumber:e.progressNumber,action:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.H,{title:e.displayTitle,image:null==(p=e.episodeMetadata)?void 0:p.image,episodeTitle:e.episodeTitle,airDate:null==(x=e.episodeMetadata)?void 0:x.airDate,length:null==(v=e.episodeMetadata)?void 0:v.length,summary:null==(f=e.episodeMetadata)?void 0:f.overview,isInvalid:e.isInvalid}),(0,n.jsx)(y.bv,{isDropdownMenu:!0,type:"torrentstream",episode:e})]})},e.episodeNumber+e.displayTitle)})}),d]}):null}var k=l(82449),I=l(95094),_=l(36808),T=l(2091),D=l(60695),M=l(93715),R=l(29724),P=l(21842);let F=(0,P.tG)("sea-debridstream-manually-select-file",!1);function L(e){var t,l,i,r;let s,o,d,u,m,f,h,g,b,y,j,N=(0,a.c)(34),{entry:S,bottomSection:w}=e,E=(0,c.v1)(),[P,L]=A.useState(null==E||null==(t=E.debridSettings)?void 0:t.streamAutoSelect),[B,z]=(0,R.fp)(F),{data:K,isLoading:O}=(0,p.HO)(S.mediaId);N[0]!==(null==K?void 0:K.hasMappingError)||N[1]!==(null==E||null==(l=E.debridSettings)?void 0:l.streamAutoSelect)?(s=()=>{if(null==K?void 0:K.hasMappingError)L(!1);else{var e;L(null==E||null==(e=E.debridSettings)?void 0:e.streamAutoSelect)}},N[0]=null==K?void 0:K.hasMappingError,N[1]=null==E||null==(r=E.debridSettings)?void 0:r.streamAutoSelect,N[2]=s):s=N[2];let G=null==E||null==(i=E.torrentstreamSettings)?void 0:i.autoSelect;N[3]!==K||N[4]!==G?(o=[G,K],N[3]=K,N[4]=G,N[5]=o):o=N[5],A.useLayoutEffect(s,o);let[,Y]=(0,R.fp)(v.IF),[,V]=(0,R.fp)(v.f0),{setTorrentStreamingSelectedEpisode:q}=(0,I.O)(),U=function(e){P?W(S,e):X(e)},{handleAutoSelectStream:H}=(0,x.u)(),{setDebridstreamAutoplayInfo:Q}=(0,k.ZH)();N[6]!==S||N[7]!==(null==K?void 0:K.episodes)||N[8]!==Q?(d=function(e){var t;if(!e||!e.aniDBEpisode||!(null==K?void 0:K.episodes))return;let l=null==K||null==(t=K.episodes)?void 0:t.find(t=>t.episodeNumber===e.episodeNumber+1);(0,M.v)("TORRENTSTREAM").info("Auto select, Next episode",l),l&&l.aniDBEpisode?Q({allEpisodes:null==K?void 0:K.episodes,entry:S,episodeNumber:l.episodeNumber,aniDBEpisode:l.aniDBEpisode,type:"debridstream"}):Q(null)},N[6]=S,N[7]=null==K?void 0:K.episodes,N[8]=Q,N[9]=d):d=N[9];let $=d;function W(e,t){t&&t.aniDBEpisode&&(null==K?void 0:K.episodes)&&(H({entry:e,episodeNumber:t.episodeNumber,aniDBEpisode:t.aniDBEpisode}),$(t))}let X=e=>{e&&e.aniDBEpisode&&(q(e),P?W(S,e):A.startTransition(()=>{V(e.episodeNumber),A.startTransition(()=>{B?(Y("debrid-stream-select"),$(e)):Y("debrid-stream-select-file")})}))};if(!S.media)return null;if(O){let e;return N[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(T.kt,{}),N[10]=e):e=N[10],e}return N[11]===Symbol.for("react.memo_cache_sentinel")?(u=(0,n.jsx)("div",{className:"absolute right-0 top-[-3rem]","data-debrid-stream-page-title-container":!0,children:(0,n.jsx)("h2",{className:"text-xl lg:text-3xl flex items-center gap-3",children:"Debrid streaming"})}),N[11]=u):u=N[11],N[12]===Symbol.for("react.memo_cache_sentinel")?(m=e=>{L(e)},N[12]=m):m=N[12],N[13]!==P?(f=(0,n.jsx)(D.d,{label:"Auto-select",value:P,onValueChange:m,fieldClass:"w-fit"}),N[13]=P,N[14]=f):f=N[14],N[15]!==P||N[16]!==B||N[17]!==z?(h=!P&&(0,n.jsx)(D.d,{label:"Auto-select file",value:B,onValueChange:e=>{z(e)},moreHelp:"The episode file will be automatically selected from your chosen batch torrent",fieldClass:"w-fit"}),N[15]=P,N[16]=B,N[17]=z,N[18]=h):h=N[18],N[19]!==f||N[20]!==h?(g=(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 pb-6 2xl:py-0","data-debrid-stream-page-content-actions-container":!0,children:[f,h]}),N[19]=f,N[20]=h,N[21]=g):g=N[21],N[22]!==(null==K?void 0:K.hasMappingError)?(b=(null==K?void 0:K.hasMappingError)&&(0,n.jsx)("div",{"data-debrid-stream-page-no-metadata-message-container":!0,children:(0,n.jsx)("p",{className:"text-red-200 opacity-50",children:"No metadata info available for this anime. You may need to manually select the file to stream."})}),N[22]=null==K?void 0:K.hasMappingError,N[23]=b):b=N[23],N[24]!==w||N[25]!==S||N[26]!==K||N[27]!==X||N[28]!==U?(y=(0,n.jsx)(C,{episodeCollection:K,entry:S,onEpisodeClick:X,onPlayNextEpisodeOnMount:U,bottomSection:w}),N[24]=w,N[25]=S,N[26]=K,N[27]=X,N[28]=U,N[29]=y):y=N[29],N[30]!==y||N[31]!==g||N[32]!==b?(j=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(_.KZ,{"data-debrid-stream-page":!0,children:[u,g,b,y]})}),N[30]=y,N[31]=g,N[32]=b,N[33]=j):j=N[33],j}var B=l(92547);let z=(0,P.tG)("sea-torrentstream-auto-select-file",!0);function K(e){var t,l,i,r;let s,o,u,m,x,f,h,g,b,y,j,N,S,w,E,P,F=(0,a.c)(57),{entry:L,bottomSection:B}=e,K=(0,c.v1)(),[G,Y]=A.useState(null==K||null==(t=K.torrentstreamSettings)?void 0:t.autoSelect),[V,q]=(0,R.fp)(z),{data:U,isLoading:H}=(0,p.HO)(L.mediaId);F[0]!==(null==U?void 0:U.hasMappingError)||F[1]!==(null==K||null==(l=K.torrentstreamSettings)?void 0:l.autoSelect)?(s=()=>{if(null==U?void 0:U.hasMappingError)Y(!1);else{var e;Y(null==K||null==(e=K.torrentstreamSettings)?void 0:e.autoSelect)}},F[0]=null==U?void 0:U.hasMappingError,F[1]=null==K||null==(r=K.torrentstreamSettings)?void 0:r.autoSelect,F[2]=s):s=F[2];let Q=null==K||null==(i=K.torrentstreamSettings)?void 0:i.autoSelect;F[3]!==U||F[4]!==Q?(o=[Q,U],F[3]=U,F[4]=Q,F[5]=o):o=F[5],A.useLayoutEffect(s,o);let $=(0,R.Xr)(v.IF),W=(0,R.Xr)(v.f0),{setTorrentStreamingSelectedEpisode:X}=(0,I.O)(),{handleAutoSelectTorrentStream:Z,isPending:J}=(0,k.w9)(),{setTorrentstreamAutoplayInfo:ee}=(0,k.j)();F[6]!==L||F[7]!==(null==U?void 0:U.episodes)||F[8]!==ee?(u=function(e){var t;if(!e||!e.aniDBEpisode||!(null==U?void 0:U.episodes))return;let l=null==U||null==(t=U.episodes)?void 0:t.find(t=>t.episodeNumber===e.episodeNumber+1);(0,M.v)("TORRENTSTREAM").info("Auto select, Next episode",l),l&&l.aniDBEpisode?ee({allEpisodes:null==U?void 0:U.episodes,entry:L,episodeNumber:l.episodeNumber,aniDBEpisode:l.aniDBEpisode,type:"torrentstream"}):ee(null)},F[6]=L,F[7]=null==U?void 0:U.episodes,F[8]=ee,F[9]=u):u=F[9];let et=u;F[10]!==(null==U?void 0:U.episodes)||F[11]!==Z||F[12]!==et||F[13]!==J?(m=function(e,t){!J&&t&&t.aniDBEpisode&&(null==U?void 0:U.episodes)&&(Z({entry:e,episodeNumber:t.episodeNumber,aniDBEpisode:t.aniDBEpisode}),et(t))},F[10]=null==U?void 0:U.episodes,F[11]=Z,F[12]=et,F[13]=J,F[14]=m):m=F[14];let el=m;F[15]!==G||F[16]!==V||F[17]!==L||F[18]!==el||F[19]!==et||F[20]!==J||F[21]!==$||F[22]!==W||F[23]!==X?(f=function(e){G?el(L,e):x(e)},x=e=>{J||(X(e),A.startTransition(()=>{G?el(L,e):(W(e.episodeNumber),A.startTransition(()=>{V?($("select"),et(e)):$("select-file")}))}))},F[15]=G,F[16]=V,F[17]=L,F[18]=el,F[19]=et,F[20]=J,F[21]=$,F[22]=W,F[23]=X,F[24]=x,F[25]=f):(x=F[24],f=F[25]);let{inject:en,remove:ea}=(0,d.H)();F[26]!==U||F[27]!==x||F[28]!==en||F[29]!==ea?(h=()=>{var e;if(null==U||null==(e=U.episodes)?void 0:e.length)return en("torrent-stream-episodes",{items:U.episodes.map(e=>({id:"episode-".concat(e.episodeNumber),value:"".concat(e.episodeNumber),heading:"Episodes",render:()=>(0,n.jsxs)("div",{className:"flex gap-1 items-center w-full",children:[(0,n.jsx)("p",{className:"max-w-[70%] truncate",children:e.displayTitle}),!!e.episodeTitle&&(0,n.jsxs)("p",{className:"text-[--muted] flex-1 truncate",children:["- ",e.episodeTitle]})]}),onSelect:()=>x(e)})),filter:O}),()=>ea("torrent-stream-episodes")},F[26]=U,F[27]=x,F[28]=en,F[29]=ea,F[30]=h):h=F[30];let ei=null==U?void 0:U.episodes;if(F[31]!==ei?(g=[ei],F[31]=ei,F[32]=g):g=F[32],A.useEffect(h,g),!L.media)return null;if(H){let e;return F[33]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(T.kt,{}),F[33]=e):e=F[33],e}return F[34]===Symbol.for("react.memo_cache_sentinel")?(b=(0,n.jsx)("div",{className:"absolute right-0 top-[-3rem]","data-torrent-stream-page-title-container":!0,children:(0,n.jsx)("h2",{className:"text-xl lg:text-3xl flex items-center gap-3",children:"Torrent streaming"})}),F[34]=b):b=F[34],F[35]===Symbol.for("react.memo_cache_sentinel")?(y=e=>{Y(e)},F[35]=y):y=F[35],F[36]!==G?(j=(0,n.jsx)(D.d,{label:"Auto-select",value:G,onValueChange:y,fieldClass:"w-fit"}),F[36]=G,F[37]=j):j=F[37],F[38]!==G||F[39]!==V||F[40]!==q?(N=!G&&(0,n.jsx)(D.d,{label:"Auto-select file",value:V,onValueChange:e=>{q(e)},moreHelp:"The episode file will be automatically selected from your chosen batch torrent",fieldClass:"w-fit"}),F[38]=G,F[39]=V,F[40]=q,F[41]=N):N=F[41],F[42]!==j||F[43]!==N?(S=(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 pb-6 2xl:py-0","data-torrent-stream-page-content-actions-container":!0,children:[j,N]}),F[42]=j,F[43]=N,F[44]=S):S=F[44],F[45]!==(null==U?void 0:U.hasMappingError)?(w=(null==U?void 0:U.hasMappingError)&&(0,n.jsx)("div",{"data-torrent-stream-page-no-metadata-message-container":!0,children:(0,n.jsx)("p",{className:"text-red-200 opacity-50",children:"No metadata info available for this anime. You may need to manually select the file to stream."})}),F[45]=null==U?void 0:U.hasMappingError,F[46]=w):w=F[46],F[47]!==B||F[48]!==L||F[49]!==U||F[50]!==x||F[51]!==f?(E=(0,n.jsx)(C,{episodeCollection:U,entry:L,onEpisodeClick:x,onPlayNextEpisodeOnMount:f,bottomSection:B}),F[47]=B,F[48]=L,F[49]=U,F[50]=x,F[51]=f,F[52]=E):E=F[52],F[53]!==S||F[54]!==w||F[55]!==E?(P=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(_.KZ,{"data-torrent-stream-page":!0,children:[b,S,w,E]})}),F[53]=S,F[54]=w,F[55]=E,F[56]=P):P=F[56],P}function O(e){let{item:t,input:l}=e;return!l||t.value.toLowerCase().includes(l.toLowerCase())}var G=l(19979),Y=l(45754),V=l(43826),q=l(42500),U=l(6066),H=l(2513);let Q=(0,q.eU)("library");function $(){let e,t,l,n,i=(0,a.c)(16),[r,s]=(0,R.fp)(Q),o="library"===r,d="torrentstream"===r,c="debridstream"===r,u="onlinestream"===r;i[0]!==s?(e=function(){s(Z)},i[0]=s,i[1]=e):e=i[1];let m=e;i[2]!==s?(t=function(){s(X)},i[2]=s,i[3]=t):t=i[3];let p=t;i[4]!==s?(l=function(){s(W)},i[4]=s,i[5]=l):l=i[5];let x=l;return i[6]!==r||i[7]!==c||i[8]!==o||i[9]!==u||i[10]!==d||i[11]!==s||i[12]!==p||i[13]!==x||i[14]!==m?(n={currentView:r,setView:s,isLibraryView:o,isTorrentStreamingView:d,isDebridStreamingView:c,isOnlineStreamingView:u,toggleTorrentStreamingView:m,toggleDebridStreamingView:p,toggleOnlineStreamingView:x},i[6]=r,i[7]=c,i[8]=o,i[9]=u,i[10]=d,i[11]=s,i[12]=p,i[13]=x,i[14]=m,i[15]=n):n=i[15],n}function W(e){return"onlinestream"===e?"library":"onlinestream"}function X(e){return"debridstream"===e?"library":"debridstream"}function Z(e){return"torrentstream"===e?"library":"torrentstream"}function J(){var e;let t=(0,c.v1)(),l=(0,U.useRouter)(),a=(0,U.useSearchParams)(),p=a.get("id"),{data:x,isLoading:f}=(0,r._8)(p),{data:h,isLoading:g}=(0,i.yg)(p),b=(0,E.Ky)(),{currentView:y,isLibraryView:j,setView:N}=$();A.useEffect(()=>{try{var e,t,l,n;(null==x||null==(t=x.media)||null==(e=t.title)?void 0:e.userPreferred)&&(document.title="".concat(null==x||null==(n=x.media)||null==(l=n.title)?void 0:l.userPreferred," | Seanime"))}catch(e){}},[x]);let S=A.useRef(!1);A.useLayoutEffect(()=>{var e,l,n,a,i,r,s,o,d,c,u,m,p,v,h,g,b;!f&&(null==x||null==(e=x.media)?void 0:e.status)!=="NOT_YET_RELEASED"&&!(null==x?void 0:x.libraryData)&&j&&((null==t||null==(l=t.torrentstreamSettings)?void 0:l.enabled)&&(null==t||null==(n=t.torrentstreamSettings)?void 0:n.includeInLibrary)||(null==t||null==(a=t.debridSettings)?void 0:a.enabled)&&(null==t||null==(i=t.debridSettings)?void 0:i.includeDebridStreamInLibrary)||(null==t||null==(s=t.settings)||null==(r=s.library)?void 0:r.enableOnlinestream)&&(null==t||null==(d=t.settings)||null==(o=d.library)?void 0:o.includeOnlineStreamingInLibrary))&&!S.current&&(S.current=!0,(null==t||null==(c=t.debridSettings)?void 0:c.enabled)&&(null==t||null==(u=t.debridSettings)?void 0:u.includeDebridStreamInLibrary)?N("debridstream"):(null==t||null==(m=t.torrentstreamSettings)?void 0:m.enabled)&&(null==t||null==(p=t.torrentstreamSettings)?void 0:p.includeInLibrary)?N("torrentstream"):(null==t||null==(h=t.settings)||null==(v=h.library)?void 0:v.enableOnlinestream)&&(null==t||null==(b=t.settings)||null==(g=b.library)?void 0:g.includeOnlineStreamingInLibrary)&&N("onlinestream"))},[f,a,null==t||null==(e=t.torrentstreamSettings)?void 0:e.includeInLibrary,y]),A.useEffect(()=>{p&&(f||x)||l.push("/")},[x,f]),(0,H.A)(()=>{N("library")});let w=(0,R.Xr)(v.IF),{inject:C,remove:k}=(0,d.H)();return(A.useEffect(()=>{var e,l,a,i;return C("anime-entry-navigation",{items:[...[{id:"library",description:"Downloaded episodes",show:"library"!==y},{id:"torrentstream",description:"Torrent streaming",show:(null==t||null==(e=t.torrentstreamSettings)?void 0:e.enabled)&&"torrentstream"!==y},{id:"debridstream",description:"Debrid streaming",show:(null==t||null==(l=t.debridSettings)?void 0:l.enabled)&&"debridstream"!==y},{id:"onlinestream",description:"Online streaming",show:(null==t||null==(i=t.settings)||null==(a=i.library)?void 0:a.enableOnlinestream)&&"onlinestream"!==y}].map(e=>({id:e.id,value:e.id,heading:"Views",data:e,render:()=>(0,n.jsx)("div",{children:e.description}),onSelect:()=>N(e.id),shouldShow:()=>!!e.show})),{id:"download",value:"download",render:()=>(0,n.jsx)("div",{children:"Download torrents"}),heading:"Views",data:"download torrents",onSelect:()=>w("download"),shouldShow:()=>"library"===y}],filter:e=>{var t,l;let{item:n,input:a}=e;return!a||(null==(l=n.data)||null==(t=l.description)?void 0:t.toLowerCase().startsWith(a.toLowerCase()))},priority:-1}),()=>k("anime-entry-navigation")},[y,t]),f||g)?(0,n.jsx)(o.C,{}):x?(0,n.jsxs)("div",{"data-anime-entry-page":!0,"data-media":JSON.stringify(x.media),"data-anime-entry-list-data":JSON.stringify(x.listData),children:[(0,n.jsx)(u.l,{entry:x,details:h}),(0,n.jsx)("div",{className:"px-4 md:px-8 relative z-[8]","data-anime-entry-page-content-container":!0,children:(0,n.jsxs)(Y.f,{"data-anime-entry-page-content":!0,className:"relative 2xl:order-first pb-10",initial:{opacity:0,y:60},animate:{opacity:1,y:0},exit:{opacity:0,y:60},transition:{type:"spring",damping:10,stiffness:80,delay:.6},children:[b.mediaPageBannerInfoBoxSize===E.Pw.Fluid&&(0,n.jsx)("div",{className:"h-10 lg:h-10"}),(0,n.jsxs)(V.N,{mode:"wait",initial:!1,children:["library"===y&&(0,n.jsx)(Y.f,{"data-anime-entry-page-episode-list-view":!0,className:"relative 2xl:order-first pb-10",initial:{opacity:0,y:60},animate:{opacity:1,y:0},exit:{opacity:0,scale:.99},transition:{duration:.35},children:(0,n.jsx)(B.B,{entry:x,details:h,bottomSection:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.A,{details:h}),(0,n.jsx)(m.P,{entry:x,details:h})]})})},"episode-list"),"torrentstream"===y&&(0,n.jsx)(Y.f,{"data-anime-entry-page-torrent-stream-view":!0,className:"relative 2xl:order-first pb-10 lg:pt-0",initial:{opacity:0,y:60},animate:{opacity:1,y:0},exit:{opacity:0,scale:.99},transition:{duration:.35},children:(0,n.jsx)(K,{entry:x,bottomSection:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.A,{details:h}),(0,n.jsx)(m.P,{entry:x,details:h})]})})},"torrent-streaming-episodes"),"debridstream"===y&&(0,n.jsx)(Y.f,{"data-anime-entry-page-debrid-stream-view":!0,className:"relative 2xl:order-first pb-10 lg:pt-0",initial:{opacity:0,y:60},animate:{opacity:1,y:0},exit:{opacity:0,scale:.99},transition:{duration:.35},children:(0,n.jsx)(L,{entry:x,bottomSection:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.A,{details:h}),(0,n.jsx)(m.P,{entry:x,details:h})]})})},"torrent-streaming-episodes"),"onlinestream"===y&&(0,n.jsx)(Y.f,{"data-anime-entry-page-online-streaming-view":!0,className:"relative 2xl:order-first pb-10 lg:pt-0",initial:{opacity:0,y:60},animate:{opacity:1,y:0},exit:{opacity:0,scale:.99},transition:{duration:.35},children:(0,n.jsxs)("div",{className:"space-y-4","data-anime-entry-page-online-streaming-view-content":!0,children:[(0,n.jsx)("div",{className:"absolute right-0 top-[-3rem]","data-anime-entry-page-online-streaming-view-content-title-container":!0,children:(0,n.jsx)("h2",{className:"text-xl lg:text-3xl flex items-center gap-3",children:"Online streaming"})}),(0,n.jsx)(G.P,{animeEntry:x,animeEntryLoading:f,hideBackButton:!0})]})},"online-streaming-episodes")]})]})}),(0,n.jsx)(v.qM,{entry:x})]}):null}},47601:(e,t,l)=>{l.d(t,{i:()=>o});var n=l(95155),a=l(19749),i=l(37817),r=l(47342),s=l(62816);function o(e){let t,l,o,d,c,u,m,p=(0,a.c)(15);p[0]!==e?({content:l,children:t,availableWhenOffline:c,hideMenuIf:o,...d}=e,p[0]=e,p[1]=t,p[2]=l,p[3]=o,p[4]=d,p[5]=c):(t=p[1],l=p[2],o=p[3],d=p[4],c=p[5]);let x=void 0===c||c,v=(0,i.v1)();return p[6]!==x||p[7]!==l||p[8]!==o||p[9]!==(null==v?void 0:v.isOffline)?(u=((null==v?void 0:v.isOffline)&&x||!(null==v?void 0:v.isOffline))&&!o&&(0,n.jsx)(r.Ip,{className:"max-w-xs","data-sea-context-menu-content":!0,children:l}),p[6]=x,p[7]=l,p[8]=o,p[9]=null==v?void 0:v.isOffline,p[10]=u):u=p[10],p[11]!==t||p[12]!==d||p[13]!==u?(m=(0,n.jsxs)(s.tz,{"data-sea-context-menu":!0,...d,children:[t,u]}),p[11]=t,p[12]=d,p[13]=u,p[14]=m):m=p[14],m}},51441:(e,t,l)=>{l.d(t,{u:()=>d});var n=l(98802),a=l(78216),i=l(55340),r=l(73826),s=l(29724),o=l(12115);function d(){let{mutate:e,isPending:t}=(0,n.O9)(),{torrentStreamingPlayback:l}=(0,a.zw)(),{externalPlayerLink:d}=(0,a._V)(),c=(0,s.md)(r.O1),[u,m]=(0,s.fp)(i.q),p=o.useMemo(()=>(null==d?void 0:d.length)&&l===a.kG.ExternalPlayerLink?"externalPlayerLink":"default",[l,d]);return{handleStreamSelection:o.useCallback(t=>{e({mediaId:t.entry.mediaId,episodeNumber:t.episodeNumber,torrent:t.torrent,aniDBEpisode:t.aniDBEpisode,fileId:t.chosenFileId,playbackType:p,clientId:c||"",autoSelect:!1},{onSuccess:()=>{},onError:()=>{m(null)}})},[p,c]),handleAutoSelectStream:o.useCallback(t=>{e({mediaId:t.entry.mediaId,episodeNumber:t.episodeNumber,torrent:void 0,aniDBEpisode:t.aniDBEpisode,fileId:"",playbackType:p,clientId:c||"",autoSelect:!0},{onSuccess:()=>{},onError:()=>{m(null)}})},[p,c]),isPending:t}}},52116:(e,t,l)=>{l.d(t,{Wk:()=>d,Y2:()=>c,v7:()=>u});var n=l(19749),a=l(2159),i=l(41422),r=l(29724),s=l(6066),o=l(12115);function d(){return(0,r.md)(i.QG)}function c(){return(0,r.md)(i.Ce)}function u(){let e,t,l=(0,n.c)(7),d=(0,s.usePathname)(),c=(0,r.Xr)(i.Ce),u=(0,r.Xr)(i.TH),{data:m}=(0,a.Cf)("/schedule"!==d);return l[0]!==(null==m?void 0:m.episodes)||l[1]!==(null==m?void 0:m.silencedEpisodes)||l[2]!==c||l[3]!==u?(e=()=>{var e,t;c(null!=(e=null==m?void 0:m.episodes)?e:[]),u(null!=(t=null==m?void 0:m.silencedEpisodes)?t:[])},l[0]=null==m?void 0:m.episodes,l[1]=null==m?void 0:m.silencedEpisodes,l[2]=c,l[3]=u,l[4]=e):e=l[4],l[5]!==m?(t=[m],l[5]=m,l[6]=t):t=l[6],(0,o.useEffect)(e,t),null}},53540:(e,t,l)=>{l.d(t,{f:()=>c});var n=l(95155),a=l(19749),i=l(78106),r=l(91360),s=l(15388),o=l(2091),d=l(12115);function c(e){let t,l,i,r,o=(0,a.c)(10),{trigger:d,trailerId:c,isOpen:m,setIsOpen:p}=e;return o[0]!==p?(t=e=>null==p?void 0:p(e),o[0]=p,o[1]=t):t=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)("div",{className:"!mt-0 bg-[url(/pattern-2.svg)] z-[-1] w-full h-[5rem] absolute opacity-30 top-0 left-0 bg-no-repeat bg-right bg-cover",children:(0,n.jsx)("div",{className:"w-full absolute top-0 h-full bg-gradient-to-t from-[--background] to-transparent z-[-2]"})}),o[2]=l):l=o[2],o[3]!==c?(i=(0,n.jsx)(u,{trailerId:c}),o[3]=c,o[4]=i):i=o[4],o[5]!==m||o[6]!==t||o[7]!==i||o[8]!==d?(r=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(s._s,{open:m,onOpenChange:t,trigger:d,size:"xl",side:"right",contentClass:"flex items-center justify-center",children:[l,i]})}),o[5]=m,o[6]=t,o[7]=i,o[8]=d,o[9]=r):r=o[9],r}function u(e){let t,l,s,c,u,m=(0,a.c)(13),{trailerId:p}=e,[x]=d.useState(!0);if(d.useState(!0),!p){let e;return m[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(i.D,{title:"No trailer found"}),m[0]=e):e=m[0],e}m[1]!==x?(t=!x&&(0,n.jsx)(o.kt,{className:""}),m[1]=x,m[2]=t):t=m[2];let v=!x&&"hidden";m[3]!==v?(l=(0,r.cn)("relative aspect-video h-[85dvh] flex items-center overflow-hidden rounded-xl",v),m[3]=v,m[4]=l):l=m[4];let f="https://www.youtube.com/embed/".concat(p);return m[5]!==f?(s=(0,n.jsx)("iframe",{src:f,title:"YouTube Video",className:"w-full aspect-video rounded-xl",allowFullScreen:!0,loading:"lazy"}),m[5]=f,m[6]=s):s=m[6],m[7]!==l||m[8]!==s?(c=(0,n.jsx)("div",{className:l,children:s}),m[7]=l,m[8]=s,m[9]=c):c=m[9],m[10]!==t||m[11]!==c?(u=(0,n.jsxs)(n.Fragment,{children:[t,c]}),m[10]=t,m[11]=c,m[12]=u):u=m[12],u}},55340:(e,t,l)=>{l.d(t,{q:()=>b,r:()=>y});var n=l(95155),a=l(19749),i=l(98802),r=l(14490),s=l(75733),o=l(36808),d=l(84127),c=l(2091),u=l(76049),m=l(6773),p=l(23862),x=l(42500),v=l(29724),f=l(12115),h=l(65160),g=l(69554);let b=(0,x.eU)(null);function y(){let e,t,l,x,y,j,N,S,w,E,A,C,k,I,_,T,D,M,R,P,F,L=(0,a.c)(56),[B,z]=(0,v.fp)(b),{mutate:K,isPending:O}=(0,i.AH)(),[G,Y]=f.useState(!0),[V,q]=f.useState(!1);L[0]!==z?(e={type:p.c.DEBRID_STREAM_STATE,onMessage:e=>{if(e){if("downloading"===e.status||"started"===e.status){z(e),q(!1);return}if("failed"===e.status){z(null),g.oR.error(e.message),q(!1);return}if("ready"===e.status){z(null),g.oR.info("Sending stream to player...",{duration:1}),q(!0);return}}}},L[0]=z,L[1]=e):e=L[1],(0,r.oA)(e),L[2]===Symbol.for("react.memo_cache_sentinel")?(t={type:p.c.PLAYBACK_MANAGER_PROGRESS_TRACKING_STARTED,onMessage:e=>{e&&q(!1)}},L[2]=t):t=L[2],(0,r.oA)(t),L[3]!==K||L[4]!==z?(l={title:"Cancel and remove torrent",description:"Are you sure you want to cancel the stream and remove the torrent?",onConfirm:()=>{K({options:{removeTorrent:!0}},{onSuccess:()=>{z(null)}})}},L[3]=K,L[4]=z,L[5]=l):l=L[5];let U=(0,s.J)(l);L[6]!==K||L[7]!==z?(x={title:"Cancel stream",description:"Are you sure you want to cancel the stream?",onConfirm:()=>{K({options:{removeTorrent:!1}},{onSuccess:()=>{z(null)}})}},L[6]=K,L[7]=z,L[8]=x):x=L[8];let H=(0,s.J)(x);if(!B){let e,t;return L[9]!==V?(e=V&&(0,n.jsx)("div",{className:"w-full bg-gray-950 fixed top-0 left-0 z-[100]",children:(0,n.jsx)(m.z,{size:"xs",isIndeterminate:!0})}),L[9]=V,L[10]=e):e=L[10],L[11]!==e?(t=(0,n.jsx)(n.Fragment,{children:e}),L[11]=e,L[12]=t):t=L[12],t}L[13]!==G||L[14]!==(null==B?void 0:B.message)?(y=G&&(0,n.jsx)("div",{className:"fixed z-[100] bottom-8 w-full h-fit flex justify-center",children:(0,n.jsx)("div",{className:"shadow-2xl p-4 bg-gray-900 border text-white rounded-3xl cursor-pointer hover:border-gray-600",onClick:()=>Y(!1),children:(0,n.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,n.jsx)(h.hgf,{className:"text-2xl text-[--brand]"}),(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("p",{children:"Awaiting stream from Debrid service"}),(0,n.jsx)("p",{className:"text-[--muted] text-sm",children:null==B?void 0:B.message})]}),(0,n.jsx)(c.y$,{className:"size-5"})]})})}),L[13]=G,L[14]=null==B?void 0:B.message,L[15]=y):y=L[15],L[16]!==(null==B?void 0:B.status)?(j=(null==B?void 0:B.status)==="downloading"&&(0,n.jsx)("div",{className:"w-full bg-gray-950 fixed top-0 left-0 z-[100]",children:(0,n.jsx)(m.z,{size:"xs",isIndeterminate:!0})}),L[16]=null==B?void 0:B.status,L[17]=j):j=L[17];let Q=!G&&!!B;L[18]===Symbol.for("react.memo_cache_sentinel")?(N=e=>Y(!e),L[18]=N):N=L[18],L[19]===Symbol.for("react.memo_cache_sentinel")?(S=(0,n.jsx)("p",{className:"text-[--muted] italic text-sm",children:"Closing this modal will not cancel the stream"}),L[19]=S):S=L[19];let $=null==B?void 0:B.torrentName;L[20]!==$?(w=(0,n.jsx)("p",{className:"text-center text-sm line-clamp-1 tracking-wide",children:$}),L[20]=$,L[21]=w):w=L[21];let W=null==B?void 0:B.message;L[22]!==W?(E=(0,n.jsx)(c.kt,{title:W}),L[22]=W,L[23]=E):E=L[23],L[24]!==w||L[25]!==E?(A=(0,n.jsxs)("div",{className:"p-4 pb-0",children:[w,E]}),L[24]=w,L[25]=E,L[26]=A):A=L[26],L[27]!==H?(C=()=>H.open(),L[27]=H,L[28]=C):C=L[28];let X=O||(null==B?void 0:B.status)!=="downloading"||(null==B?void 0:B.message)==="Downloading torrent...";L[29]!==C||L[30]!==X?(k=(0,n.jsx)(d.$n,{onClick:C,intent:"alert-basic",disabled:X,size:"sm",children:"Cancel"}),L[29]=C,L[30]=X,L[31]=k):k=L[31],L[32]!==U?(I=()=>U.open(),L[32]=U,L[33]=I):I=L[33];let Z=O||(null==B?void 0:B.status)!=="downloading"||(null==B?void 0:B.message)==="Downloading torrent...";return L[34]!==I||L[35]!==Z?(_=(0,n.jsx)(d.$n,{onClick:I,intent:"alert-basic",disabled:Z,size:"sm",children:"Cancel and remove torrent"}),L[34]=I,L[35]=Z,L[36]=_):_=L[36],L[37]!==k||L[38]!==_?(T=(0,n.jsxs)("div",{className:"flex justify-center gap-1 mt-4",children:[k,_]}),L[37]=k,L[38]=_,L[39]=T):T=L[39],L[40]!==A||L[41]!==T?(D=(0,n.jsxs)(o.KZ,{children:[S,A,T]}),L[40]=A,L[41]=T,L[42]=D):D=L[42],L[43]!==D||L[44]!==Q?(M=(0,n.jsx)(u.a,{contentClass:"max-w-xl sm:rounded-3xl",open:Q,onOpenChange:N,children:D}),L[43]=D,L[44]=Q,L[45]=M):M=L[45],L[46]!==H?(R=(0,n.jsx)(s.K,{...H}),L[46]=H,L[47]=R):R=L[47],L[48]!==U?(P=(0,n.jsx)(s.K,{...U}),L[48]=U,L[49]=P):P=L[49],L[50]!==M||L[51]!==R||L[52]!==P||L[53]!==y||L[54]!==j?(F=(0,n.jsxs)(n.Fragment,{children:[y,j,M,R,P]}),L[50]=M,L[51]=R,L[52]=P,L[53]=y,L[54]=j,L[55]=F):F=L[55],F}},61585:(e,t,l)=>{l.d(t,{V:()=>es});var n=l(95155),a=l(75006),i=l(78216),r=l(19749),s=l(63717),o=l(91360),d=l(99288),c=l(91332),u=l(12115),m=l(41452);function p(e){var t;let l,a,i,u=(0,r.c)(4),{media:p,libraryData:x,progress:v}=e,{showAnimeUnwatchedCount:f}=(0,c.Ky)();if(!f)return null;let h=(0,d.DH)(p),g=null!=(t=null==x?void 0:x.unwatchedCount)?t:0,b=(null==x?void 0:x.mainFileCount)?g:h-(null!=v?v:0);return b<=0?null:(u[0]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.cn)("flex w-full z-[5]"),u[0]=l):l=u[0],u[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)(m.EER,{className:"text-lg"}),u[1]=a):a=u[1],u[2]!==b?(i=(0,n.jsx)("div",{"data-anime-entry-card-unwatched-badge-container":!0,className:l,children:(0,n.jsxs)(s.E,{intent:"unstyled",size:"lg",className:"text-sm tracking-wide flex gap-1 items-center rounded-[--radius-md] border-0 bg-transparent px-1.5","data-anime-entry-card-unwatched-badge":!0,children:[a,(0,n.jsx)("span",{className:"text-[--foreground] font-normal",children:b})]})}),u[2]=b,u[3]=i):i=u[3],i)}var x=l(32),v=l(47601),f=l(18292);let h=e=>{let t,l,a,i=(0,r.c)(10),{progress:d,progressTotal:c,forceShowTotal:u,forceShowProgress:m,top:p}=e;return i[0]!==p?(t=p&&(0,n.jsx)("span",{"data-media-entry-progress-badge-top":!0,className:"block",children:p}),i[0]=p,i[1]=t):t=i[1],i[2]!==m||i[3]!==u||i[4]!==d||i[5]!==c?(l=(!!d||m)&&(0,n.jsxs)("span",{"data-media-entry-progress-badge-progress":!0,className:"block","data-progress":d,"data-progress-total":c,"data-force-show-total":u,children:[d||0,(!!c||u)&&(0,n.jsxs)("span",{"data-media-entry-progress-badge-progress-total":!0,className:(0,o.cn)("text-[--muted]"),children:["/",c||"-"]})]}),i[2]=m,i[3]=u,i[4]=d,i[5]=c,i[6]=l):l=i[6],i[7]!==t||i[8]!==l?(a=(0,n.jsxs)(s.E,{intent:"unstyled",size:"lg",className:"font-semibold tracking-wide flex-col rounded-[--radius-md] rounded-tl-none rounded-br-none border-0 bg-zinc-950/40 px-1.5 py-0.5 gap-0 !h-auto","data-media-entry-progress-badge":!0,children:[t,l]}),i[7]=t,i[8]=l,i[9]=a):a=i[9],a};var g=l(35243),b=l(35656),y=l(5249),j=l(97400),N=l(90711),S=l(44608),w=l(80919),E=l(42500),A=l(29724),C=l(86694),k=l.n(C),I=l(42732),_=l.n(I),T=l(35089),D=l(70376),M=l(38628),R=l(40568);function P(e){let t,l,a,i,s,d,c=(0,r.c)(12);return c[0]!==e?({children:t,className:l,mRef:a,...i}=e,c[0]=e,c[1]=t,c[2]=l,c[3]=a,c[4]=i):(t=c[1],l=c[2],a=c[3],i=c[4]),c[5]!==l?(s=(0,o.cn)("h-full col-span-1 group/media-entry-card relative flex flex-col place-content-stretch focus-visible:outline-0 flex-none",l),c[5]=l,c[6]=s):s=c[6],c[7]!==t||c[8]!==a||c[9]!==i||c[10]!==s?(d=(0,n.jsx)("div",{"data-media-entry-card-container":!0,ref:a,className:s,...i,children:t}),c[7]=t,c[8]=a,c[9]=i,c[10]=s,c[11]=d):d=c[11],d}function F(e){let t,l,a=(0,r.c)(3),{overlay:i}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.cn)("absolute z-[14] top-0 left-0 w-full"),a[0]=t):t=a[0],a[1]!==i?(l=(0,n.jsx)("div",{"data-media-entry-card-overlay":!0,className:t,children:i}),a[1]=i,a[2]=l):l=a[2],l}function L(e){let t,l,a,i,s,d,u,m,p=(0,r.c)(20);if(p[0]!==e){let{children:n,className:i,coverImage:r,...s}=e;t=n,l=r,a=s,p[0]=e,p[1]=t,p[2]=l,p[3]=a}else t=p[1],l=p[2],a=p[3];let x=(0,c.Ky)(),v=(0,A.md)(g.E),f=x.enableMediaCardBlurredBackground?"bg-[--background]":"bg-[--media-card-popup-background]",h=v&&"w-[101%] -left-[0.5%]";return p[4]!==f||p[5]!==h?(i=(0,o.cn)(f,"absolute z-[15] opacity-0 scale-100 border border-[rgb(255_255_255_/_5%)] duration-150","group-hover/media-entry-card:opacity-100 group-hover/media-entry-card:scale-100","group-focus-visible/media-entry-card:opacity-100 group-focus-visible/media-entry-card:scale-100","focus-visible:opacity-100 focus-visible:scale-100","h-[105%] w-[100%] -top-[5%] rounded-[0.7rem] transition ease-in-out","focus-visible:ring-2 ring-brand-400 focus-visible:outline-0","hidden lg:block",h),p[4]=f,p[5]=h,p[6]=i):i=p[6],p[7]!==l||p[8]!==x.enableMediaCardBlurredBackground?(s=x.enableMediaCardBlurredBackground&&!!l&&(0,n.jsxs)("div",{"data-media-entry-card-hover-popup-image-container":!0,className:"absolute top-0 left-0 w-full h-full rounded-[--radius] overflow-hidden",children:[(0,n.jsx)(T.default,{"data-media-entry-card-hover-popup-image":!0,src:(0,N.VG)(l||""),alt:"cover image",fill:!0,placeholder:(0,b.r)(700,475),quality:100,sizes:"20rem",className:"object-cover object-center transition opacity-20"}),(0,n.jsx)("div",{"data-media-entry-card-hover-popup-image-blur-overlay":!0,className:"absolute top-0 w-full h-full backdrop-blur-xl z-[0]"})]}),p[7]=l,p[8]=x.enableMediaCardBlurredBackground,p[9]=s):s=p[9],p[10]!==x.enableMediaCardBlurredBackground?(d=x.enableMediaCardBlurredBackground&&(0,n.jsx)("div",{"data-media-entry-card-hover-popup-image-blur-gradient":!0,className:"w-full absolute top-0 h-full opacity-60 bg-gradient-to-b from-70% from-[--background] to-transparent z-[2] rounded-[--radius]"}),p[10]=x.enableMediaCardBlurredBackground,p[11]=d):d=p[11],p[12]!==t?(u=(0,n.jsx)("div",{"data-media-entry-card-hover-popup-content":!0,className:"p-2 h-full w-full flex flex-col justify-between relative z-[2]",children:t}),p[12]=t,p[13]=u):u=p[13],p[14]!==a||p[15]!==i||p[16]!==s||p[17]!==d||p[18]!==u?(m=(0,n.jsxs)("div",{"data-media-entry-card-hover-popup":!0,className:i,...a,children:[s,d,u]}),p[14]=a,p[15]=i,p[16]=s,p[17]=d,p[18]=u,p[19]=m):m=p[19],m}function B(e){let t,l,a,i,s,d=(0,r.c)(10);return d[0]!==e?({children:t,className:l,...a}=e,d[0]=e,d[1]=t,d[2]=l,d[3]=a):(t=d[1],l=d[2],a=d[3]),d[4]!==l?(i=(0,o.cn)("space-y-1 select-none",l),d[4]=l,d[5]=i):i=d[5],d[6]!==t||d[7]!==a||d[8]!==i?(s=(0,n.jsx)("div",{"data-media-entry-card-hover-popup-body":!0,className:i,...a,children:t}),d[6]=t,d[7]=a,d[8]=i,d[9]=s):s=d[9],s}function z(e){let t,l,a,i,s,d=(0,r.c)(10);return d[0]!==e?({children:t,className:l,...a}=e,d[0]=e,d[1]=t,d[2]=l,d[3]=a):(t=d[1],l=d[2],a=d[3]),d[4]!==l?(i=(0,o.cn)("flex gap-2 items-center",l),d[4]=l,d[5]=i):i=d[5],d[6]!==t||d[7]!==a||d[8]!==i?(s=(0,n.jsx)("div",{"data-media-entry-card-hover-popup-footer":!0,className:i,...a,children:t}),d[6]=t,d[7]=a,d[8]=i,d[9]=s):s=d[9],s}function K(e){let t,l,a,i=(0,r.c)(10),{link:s,title:o,season:d,year:c,format:u}=e;return i[0]!==s||i[1]!==o?(t=(0,n.jsx)("div",{"data-media-entry-card-hover-popup-title":!0,className:"select-none",children:(0,n.jsx)(y.i,{href:s,className:"text-center text-pretty font-medium text-sm lg:text-base px-4 leading-0 line-clamp-2 hover:text-brand-100",children:o})}),i[0]=s,i[1]=o,i[2]=t):t=i[2],i[3]!==u||i[4]!==d||i[5]!==c?(l=!!c&&(0,n.jsx)("div",{children:(0,n.jsxs)("p",{"data-media-entry-card-hover-popup-title-section-year-season":!0,className:"justify-center text-sm text-[--muted] flex w-full gap-1 items-center",children:[_()(u||"")," - ",(0,n.jsx)(D.zBL,{})," ",k()(null!=d?d:"")," ",c]})}),i[3]=u,i[4]=d,i[5]=c,i[6]=l):l=i[6],i[7]!==t||i[8]!==l?(a=(0,n.jsxs)(n.Fragment,{children:[t,l]}),i[7]=t,i[8]=l,i[9]=a):a=i[9],a}function O(e){let t,l,a,i=(0,r.c)(7),{nextAiring:s}=e;if(!s)return null;let o=null==s?void 0:s.episode;return i[0]!==o?(t=(0,n.jsx)("span",{className:"font-semibold",children:o}),i[0]=o,i[1]=t):t=i[1],i[2]!==(null==s?void 0:s.timeUntilAiring)?(l=(0,S.m)((0,w.p)(new Date,null==s?void 0:s.timeUntilAiring),{addSuffix:!0}),i[2]=null==s?void 0:s.timeUntilAiring,i[3]=l):l=i[3],i[4]!==t||i[5]!==l?(a=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{"data-anime-entry-card-next-airing-container":!0,className:"flex gap-1 items-center justify-center",children:(0,n.jsxs)("p",{"data-anime-entry-card-next-airing":!0,className:"text-justify font-normal text-xs min-[2000px]:text-md",children:["Episode ",t," ",l]})})}),i[4]=t,i[5]=l,i[6]=a):a=i[6],a}function G(e){let t,l,a,i,d,c,u,m,p,x,v,h,g=(0,r.c)(32),{link:j,listStatus:S,status:w,showProgressBar:E,progress:A,progressTotal:C,bannerImage:k,isAdult:I,showLibraryBadge:_,children:D,blurAdultContent:P}=e;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.cn)("media-entry-card__body aspect-[6/8] flex-none rounded-[--radius] object-cover object-center relative overflow-hidden select-none"),l=(0,n.jsx)(f.H,{}),g[0]=t,g[1]=l):(t=g[0],l=g[1]),g[2]!==S||g[3]!==A||g[4]!==C||g[5]!==E?(a=E&&A&&C&&(0,n.jsx)("div",{"data-media-entry-card-body-progress-bar-container":!0,className:(0,o.cn)("absolute top-0 w-full h-1 z-[2] bg-gray-700 left-0","COMPLETED"===S&&"hidden"),children:(0,n.jsx)("div",{"data-media-entry-card-body-progress-bar":!0,className:(0,o.cn)("h-1 absolute z-[2] left-0 bg-gray-200 transition-all","CURRENT"===S?"bg-brand-400":"bg-gray-400"),style:{width:"".concat(String(Math.ceil(A/C*100)),"%")}})}),g[2]=S,g[3]=A,g[4]=C,g[5]=E,g[6]=a):a=g[6],g[7]!==_?(i=_&&(0,n.jsx)("div",{"data-media-entry-card-body-library-badge":!0,className:"absolute z-[1] left-0 top-0",children:(0,n.jsx)(s.E,{size:"xl",intent:"warning-solid",className:"rounded-[--radius] rounded-bl-none rounded-tr-none text-orange-900",children:(0,n.jsx)(M.Q9o,{})})}),g[7]=_,g[8]=i):i=g[8],g[9]!==w?(d=("RELEASING"===w||"NOT_YET_RELEASED"===w)&&(0,n.jsx)("div",{"data-media-entry-card-body-releasing-badge-container":!0,className:"absolute z-[10] right-1 top-2",children:(0,n.jsx)(s.E,{intent:"RELEASING"===w?"primary-solid":"zinc-solid",size:"lg",children:(0,n.jsx)(R.PgI,{})})}),g[9]=w,g[10]=d):d=g[10];let F=k||"";g[11]!==F?(c=(0,N.VG)(F),g[11]=F,g[12]=c):c=g[12],g[13]===Symbol.for("react.memo_cache_sentinel")?(u=(0,b.r)(700,475),g[13]=u):u=g[13];let L=P&&I&&"opacity-80";return g[14]!==L?(m=(0,o.cn)("object-cover object-center transition-transform","group-hover/media-entry-card:scale-110",L),g[14]=L,g[15]=m):m=g[15],g[16]!==c||g[17]!==m?(p=(0,n.jsx)(T.default,{"data-media-entry-card-body-image":!0,src:c,alt:"",fill:!0,placeholder:u,quality:100,sizes:"20rem",className:m}),g[16]=c,g[17]=m,g[18]=p):p=g[18],g[19]!==P||g[20]!==I?(x=P&&I&&(0,n.jsx)("div",{"data-media-entry-card-body-blur-adult-content-overlay":!0,className:"absolute top-0 w-[125%] h-[125%] -translate-x-[10%] -translate-y-[10%] backdrop-blur-xl z-[3] rounded-[--radius]"}),g[19]=P,g[20]=I,g[21]=x):x=g[21],g[22]!==D||g[23]!==p||g[24]!==x||g[25]!==a||g[26]!==i||g[27]!==d?(v=(0,n.jsxs)("div",{"data-media-entry-card-body":!0,className:t,children:[l,a,i,d,D,p,x]}),g[22]=D,g[23]=p,g[24]=x,g[25]=a,g[26]=i,g[27]=d,g[28]=v):v=g[28],g[29]!==j||g[30]!==v?(h=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(y.i,{href:j,className:"w-full relative focus-visible:ring-2 ring-[--brand]","data-media-entry-card-body-link":!0,children:v})}),g[29]=j,g[30]=v,g[31]=h):h=g[31],h}function Y(e){let t,l,a,i=(0,r.c)(8),{title:s,season:o,year:d}=e;return i[0]!==s?(t=(0,n.jsx)("div",{children:(0,n.jsx)("p",{"data-media-entry-card-title-section-title":!0,className:"text-pretty font-medium min-[2000px]:font-semibold text-sm lg:text-[1rem] min-[2000px]:text-lg line-clamp-2",children:s})}),i[0]=s,i[1]=t):t=i[1],i[2]!==o||i[3]!==d?(l=(!!o||!!d)&&(0,n.jsx)("div",{children:(0,n.jsxs)("p",{"data-media-entry-card-title-section-year-season":!0,className:"text-sm text-[--muted] inline-flex gap-1 items-center",children:[k()(null!=o?o:"")," ",d]})}),i[2]=o,i[3]=d,i[4]=l):l=i[4],i[5]!==t||i[6]!==l?(a=(0,n.jsxs)("div",{"data-media-entry-card-title-section":!0,className:"pt-2 space-y-1 flex flex-col justify-between h-full select-none",children:[t,l]}),i[5]=t,i[6]=l,i[7]=a):a=i[7],a}let V=(0,E.eU)(void 0),q=(0,u.memo)(e=>{let t,l,a,i,d,m,p,x,v,f,g,S,w=(0,r.c)(44),{trailerId:E,showProgressBar:C,mediaId:k,progress:I,progressTotal:_,showTrailer:D,disableAnimeCardTrailers:M,bannerImage:P,isAdult:F,blurAdultContent:L,link:B,listStatus:z,status:K}=e,[O,G]=u.useState(!1),[Y]=(0,A.fp)(V),q=Y===k,[U,H]=u.useState(!!E&&!M&&D),Q=(0,c.Ky)();w[0]!==M||w[1]!==D||w[2]!==E?(t=()=>{H(!!E&&!M&&D)},w[0]=M,w[1]=D,w[2]=E,w[3]=t):t=w[3];let $=!!E,W=!M;w[4]!==D||w[5]!==$||w[6]!==W?(l=[$,W,D],w[4]=D,w[5]=$,w[6]=W,w[7]=l):l=w[7],u.useEffect(t,l),w[8]!==z||w[9]!==I||w[10]!==_||w[11]!==C?(a=C&&I&&z&&_&&I!==_&&(0,n.jsx)("div",{"data-media-entry-card-hover-popup-banner-progress-bar-container":!0,className:"absolute rounded-[--radius] overflow-hidden top-0 w-full h-1 z-[2] bg-gray-700 left-0",children:(0,n.jsx)("div",{"data-media-entry-card-hover-popup-banner-progress-bar":!0,className:(0,o.cn)("h-1 absolute z-[2] left-0 bg-gray-200 transition-all","CURRENT"===z||"COMPLETED"===z?"bg-brand-400":"bg-gray-400"),style:{width:"".concat(String(Math.ceil(I/_*100)),"%")}})}),w[8]=z,w[9]=I,w[10]=_,w[11]=C,w[12]=a):a=w[12],w[13]!==K?(i=("RELEASING"===K||"NOT_YET_RELEASED"===K)&&(0,n.jsx)("div",{"data-media-entry-card-hover-popup-banner-releasing-badge-container":!0,className:"absolute z-[10] right-1 top-2",children:(0,n.jsx)(j.m_,{trigger:(0,n.jsx)(s.E,{intent:"RELEASING"===K?"primary-solid":"zinc-solid",size:"lg",children:(0,n.jsx)(R.PgI,{})}),children:"RELEASING"===K?"Releasing":"Not yet released"})}),w[13]=K,w[14]=i):i=w[14],w[15]!==P||w[16]!==O?(d=P?(0,n.jsx)(T.default,{"data-media-entry-card-hover-popup-banner-image":!0,src:(0,N.VG)(P||""),alt:"banner",fill:!0,placeholder:(0,b.r)(700,475),quality:100,sizes:"20rem",className:(0,o.cn)("object-cover top-0 object-center rounded-[--radius] transition",O&&"hidden")}):(0,n.jsx)("div",{"data-media-entry-card-hover-popup-banner-image-gradient":!0,className:"h-full block absolute w-full bg-gradient-to-t from-gray-800 to-transparent"}),w[15]=P,w[16]=O,w[17]=d):d=w[17],w[18]!==L||w[19]!==F?(m=L&&F&&(0,n.jsx)("div",{"data-media-entry-card-hover-popup-banner-blur-adult-content-overlay":!0,className:"absolute top-0 w-full h-full backdrop-blur-xl z-[3] rounded-[--radius]"}),w[18]=L,w[19]=F,w[20]=m):m=w[20],w[21]!==I||w[22]!==_?(p=(0,n.jsx)("div",{"data-media-entry-card-hover-popup-banner-progress-badge-container":!0,className:"absolute z-[4] left-0 bottom-0",children:(0,n.jsx)(h,{progress:I,progressTotal:_,forceShowTotal:!0})}),w[21]=I,w[22]=_,w[23]=p):p=w[23],w[24]!==q||w[25]!==U||w[26]!==E||w[27]!==O?(x=U&&q&&(0,n.jsx)("div",{"data-media-entry-card-hover-popup-banner-trailer-container":!0,className:(0,o.cn)("absolute w-full h-full overflow-hidden rounded-[--radius]",!O&&"hidden"),children:(0,n.jsx)("iframe",{"data-media-entry-card-hover-popup-banner-trailer":!0,src:"https://www.youtube-nocookie.com/embed/".concat(E,"?autoplay=1&controls=0&mute=1&disablekb=1&loop=1&vq=medium&playlist=").concat(E,"&cc_lang_pref=ja"),className:(0,o.cn)("aspect-video w-full absolute left-0"),allow:"autoplay",onLoad:()=>G(!0),onError:()=>H(!1)})}),w[24]=q,w[25]=U,w[26]=E,w[27]=O,w[28]=x):x=w[28];let X=Q.enableMediaCardBlurredBackground&&"from-[--background] from-0% bottom-0 rounded-[--radius] opacity-80";return w[29]!==X?(v=(0,o.cn)("w-full absolute -bottom-1 h-[80%] from-10% bg-gradient-to-t from-[--media-card-popup-background] to-transparent z-[2]",X),w[29]=X,w[30]=v):v=w[30],w[31]!==v?(f=(0,n.jsx)("div",{"data-media-entry-card-hover-popup-banner-gradient":!0,className:v}),w[31]=v,w[32]=f):f=w[32],w[33]!==x||w[34]!==f||w[35]!==a||w[36]!==i||w[37]!==d||w[38]!==m||w[39]!==p?(g=(0,n.jsxs)("div",{"data-media-entry-card-hover-popup-banner-container":!0,className:"aspect-[4/2] relative rounded-[--radius] mb-2 cursor-pointer",children:[a,i,d,m,p,x,f]}),w[33]=x,w[34]=f,w[35]=a,w[36]=i,w[37]=d,w[38]=m,w[39]=p,w[40]=g):g=w[40],w[41]!==B||w[42]!==g?(S=(0,n.jsx)(y.i,{tabIndex:-1,href:B,"data-media-entry-card-hover-popup-banner-link":!0,children:g}),w[41]=B,w[42]=g,w[43]=S):S=w[43],S});var U=l(25305),H=l(41966);let Q=e=>{let t,l,a,i=(0,r.c)(9),{score:s,isMediaCard:d}=e;if(!s)return null;let c=d&&"rounded-none rounded-tl-lg border-none";i[0]!==s||i[1]!==c?(t=(0,o.cn)("backdrop-blur-lg inline-flex items-center justify-center border gap-1 w-14 h-7 rounded-full font-bold bg-opacity-70 drop-shadow-sm shadow-lg",c,(0,H.O)(s,"user")),i[0]=s,i[1]=c,i[2]=t):t=i[2],i[3]!==s?(l=s>=90?(0,n.jsx)(D.$iZ,{className:"text-sm"}):(0,n.jsx)(D.kpv,{className:"text-sm"}),i[3]=s,i[4]=l):l=i[4];let u=0===s?"-":s/10;return i[5]!==t||i[6]!==l||i[7]!==u?(a=(0,n.jsxs)("div",{"data-media-entry-score-badge":!0,className:t,children:[l," ",u]}),i[5]=t,i[6]=l,i[7]=u,i[8]=a):a=i[8],a};var $=l(59899),W=l(32754),X=l(96876),Z=l(52116),J=l(37817),ee=l(32931),et=l(24780);function el(e){let t,l,a,i,o=(0,r.c)(8),{mediaId:d,progress:m,progressTotal:p}=e,{showMangaUnreadCount:x}=(0,c.Ky)(),[v]=(0,A.fp)(ee.ke),[f,h]=u.useState(p||0);if(o[0]!==v||o[1]!==d?(t=()=>{let e=(0,et.em)(d,v.latestChapterNumbers,v.storedProviders,v.storedFilters);e&&h(e)},o[0]=v,o[1]=d,o[2]=t):t=o[2],o[3]!==v?(l=[v],o[3]=v,o[4]=l):l=o[4],u.useEffect(t,l),!x)return null;let g=f-(m||0);return g<=0?null:(o[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)(M.cg8,{className:"text-sm"}),o[5]=a):a=o[5],o[6]!==g?(i=(0,n.jsx)("div",{className:"flex w-full z-[5]","data-manga-entry-card-unread-badge-container":!0,children:(0,n.jsxs)(s.E,{intent:"unstyled",size:"lg",className:"text-sm tracking-wide rounded-[--radius-md] flex gap-1 items-center rounded-tr-none rounded-bl-none border-0 px-1.5","data-manga-entry-card-unread-badge":!0,children:[a,(0,n.jsx)("span",{className:"text-[--foreground] font-normal",children:g})]})}),o[6]=g,o[7]=i):i=o[7],i)}var en=l(84127),ea=l(47342),ei=l(6066),er=l(10653);function es(e){var t,l,r,o,d,c,m,f,g,b,j,N,S,w,E,C,I,_,T;let{media:H,listData:ee,libraryData:et,overlay:es,showListDataButton:eo,showTrailer:ed,type:ec,withAudienceScore:eu=!0,hideUnseenCountBadge:em=!1,hideAnilistEntryEditButton:ep=!1}=e,ex=(0,ei.useRouter)(),ev=(0,J.v1)(),ef=(0,Z.Y2)(),[eh,eg]=(0,u.useState)(ee),[eb,ey]=(0,u.useState)(et),ej=(0,A.Xr)(V),eN=u.useRef(null),[eS,ew]=(0,A.fp)(a.c),eE=!!eb&&!!e.showLibraryBadge,eA=u.useMemo(()=>(null==eh?void 0:eh.progress)&&"anime"===ec?!!(null==H?void 0:H.episodes):!!(null==H?void 0:H.chapters)&&(null==eh?void 0:eh.status)!=="COMPLETED",[null==eh?void 0:eh.progress,H,null==eh?void 0:eh.status]),eC=u.useMemo(()=>ed&&!eb&&!(null==H?void 0:H.isAdult),[ed,eb,H]),ek=(null==ev?void 0:ev.isOffline)?"/offline/entry/manga?id=".concat(H.id):"/manga/entry?id=".concat(H.id),eI=(null==ev?void 0:ev.isOffline)?"/offline/entry/anime?id=".concat(H.id):"/entry?id=".concat(H.id),e_=u.useMemo(()=>"anime"===ec?eI:ek,[null==ev?void 0:ev.isOffline,ec]),eT="anime"===ec?null==H?void 0:H.episodes:null==H?void 0:H.chapters,eD=(0,ei.usePathname)();u.useEffect(()=>{if("/"!==eD){let e=ew(H.id);ee||eg(null==e?void 0:e.listData),et||ey(null==e?void 0:e.libraryData)}},[eD,eS]),u.useLayoutEffect(()=>{eg(ee)},[ee]),u.useLayoutEffect(()=>{ey(et)},[et]);let eM=(0,X.X_)(H.id);u.useEffect(()=>{eM&&!ee&&eg(eM)},[eM,ee]);let{setPlayNext:eR}=(0,i.p$)(),eP=u.useCallback(()=>{(null==eh?void 0:eh.progress)&&(null==eh?void 0:eh.status)!=="COMPLETED"?eR(H.id,()=>{ex.push(eI)}):ex.push(eI)},[null==eh?void 0:eh.progress,null==eh?void 0:eh.status,H.id]),eF=u.useCallback(()=>{ej(H.id)},[H.id]),eL=u.useCallback(()=>{ej(void 0)},[H.id]),{setPreviewModalMediaId:eB}=(0,W.D)();return H?(0,n.jsxs)(P,{"data-media-id":H.id,"data-media-mal-id":H.idMal,"data-media-type":ec,mRef:eN,className:e.containerClassName,"data-list-data":JSON.stringify(eh),children:[(0,n.jsx)(F,{overlay:es}),(0,n.jsx)(v.i,{content:(0,n.jsxs)(ea.Q2,{children:[(0,n.jsx)(ea.F7,{className:"text-[--muted] line-clamp-1 py-0 my-2",children:null==(t=H.title)?void 0:t.userPreferred}),(0,n.jsx)(ea.kt,{onClick:()=>{eB(H.id,ec)},children:"Preview"}),(0,n.jsx)(er.Ml,{for:ec,media:H})]}),children:(0,n.jsx)(ea.Rc,{children:(0,n.jsxs)(L,{onMouseEnter:eF,onMouseLeave:eL,coverImage:H.bannerImage||(null==(l=H.coverImage)?void 0:l.extraLarge)||"",children:[(0,n.jsxs)(B,{children:[(0,n.jsx)(q,{trailerId:null==H||null==(r=H.trailer)?void 0:r.id,showProgressBar:eA,mediaId:H.id,progress:null==eh?void 0:eh.progress,progressTotal:eT,showTrailer:eC,disableAnimeCardTrailers:null==ev||null==(d=ev.settings)||null==(o=d.library)?void 0:o.disableAnimeCardTrailers,bannerImage:H.bannerImage||(null==(c=H.coverImage)?void 0:c.extraLarge),isAdult:H.isAdult,blurAdultContent:null==ev||null==(f=ev.settings)||null==(m=f.anilist)?void 0:m.blurAdultContent,link:e_,listStatus:null==eh?void 0:eh.status,status:H.status}),(0,n.jsx)(K,{title:(null==(g=H.title)?void 0:g.userPreferred)||"",year:null!=(I=H.seasonYear)?I:null==(b=H.startDate)?void 0:b.year,season:H.season,format:H.format,link:e_}),"anime"===ec&&(0,n.jsx)(O,{nextAiring:H.nextAiringEpisode}),"anime"===ec&&(0,n.jsx)("div",{className:"py-1",children:(0,n.jsx)(en.$n,{leftIcon:(0,n.jsx)(D.UIR,{className:"text-2xl"}),intent:"gray-subtle",size:"sm",className:"w-full text-sm",tabIndex:-1,onClick:eP,children:(null==eh?void 0:eh.progress)&&((null==eh?void 0:eh.status)==="CURRENT"||(null==eh?void 0:eh.status)==="PAUSED")?"Continue watching":"Watch"})}),"manga"===ec&&(0,n.jsx)(y.i,{href:ek,children:(0,n.jsx)(en.$n,{leftIcon:(0,n.jsx)(M.Q9o,{}),intent:"gray-subtle",size:"sm",className:"w-full text-sm mt-2",tabIndex:-1,children:"Read"})}),(null==eh?void 0:eh.status)&&(0,n.jsx)("p",{className:"text-center text-sm text-[--muted]",children:(null==eh?void 0:eh.status)==="CURRENT"?"anime"===ec?"Watching":"Reading":k()(null!=(_=null==eh?void 0:eh.status)?_:"")})]}),(0,n.jsxs)(z,{children:["anime"===ec&&!!eb&&(0,n.jsx)(x.f,{mediaId:H.id,allFilesLocked:eb.allFilesLocked}),!ep&&(0,n.jsx)($.e,{listData:eh,media:H,type:ec}),eu&&(0,n.jsx)(U.H2,{meanScore:H.meanScore})]})]})})}),(0,n.jsxs)(G,{link:e_,type:ec,title:(null==(j=H.title)?void 0:j.userPreferred)||"",season:H.season,listStatus:null==eh?void 0:eh.status,status:H.status,showProgressBar:eA,progress:null==eh?void 0:eh.progress,progressTotal:eT,startDate:H.startDate,bannerImage:(null==(N=H.coverImage)?void 0:N.extraLarge)||"",isAdult:H.isAdult,showLibraryBadge:eE,blurAdultContent:null==ev||null==(w=ev.settings)||null==(S=w.anilist)?void 0:S.blurAdultContent,children:[(0,n.jsx)("div",{"data-media-entry-card-body-progress-badge-container":!0,className:"absolute z-[10] left-0 bottom-0 flex items-end",children:(0,n.jsx)(h,{progress:null==eh?void 0:eh.progress,progressTotal:eT,forceShowTotal:"manga"===ec,top:em?null:(0,n.jsxs)(n.Fragment,{children:["anime"===ec&&((null==eh?void 0:eh.status)==="CURRENT"||(null==eh?void 0:eh.status)==="REPEATING")&&(0,n.jsx)(p,{progress:(null==eh?void 0:eh.progress)||0,media:H,libraryData:eb}),"manga"===ec&&(0,n.jsx)(el,{mediaId:H.id,progress:null==eh?void 0:eh.progress,progressTotal:eT})]})})}),(0,n.jsx)("div",{"data-media-entry-card-body-score-badge-container":!0,className:"absolute z-[10] right-0 bottom-0",children:(0,n.jsx)(Q,{isMediaCard:!0,score:null==eh?void 0:eh.score})}),"anime"===ec&&!!eb&&ef.find(e=>{var t;return(null==(t=e.baseAnime)?void 0:t.id)===H.id})&&(0,n.jsx)("div",{"data-media-entry-card-body-missing-episodes-badge-container":!0,className:"absolute z-[10] w-full flex justify-center left-1 bottom-0",children:(0,n.jsx)(s.E,{className:"font-semibold animate-pulse text-white bg-gray-950 !bg-opacity-90 rounded-[--radius-md] text-base rounded-bl-none rounded-br-none",intent:"gray-solid",size:"xl",children:(0,n.jsx)(R._UP,{})})})]}),(0,n.jsx)(Y,{title:(null==(E=H.title)?void 0:E.userPreferred)||"",year:null!=(T=H.seasonYear)?T:null==(C=H.startDate)?void 0:C.year,season:H.season,format:H.format})]}):null}},61816:(e,t,l)=>{l.d(t,{F:()=>d,e:()=>o});var n=l(19749),a=l(7675),i=l(74889),r=l(58092),s=l(69554);function o(e){let t,l,r=(0,n.c)(3);return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=[i.S.DOWNLOAD.DownloadTorrentFile.key],r[0]=t):t=r[0],r[1]!==e?(l={endpoint:i.S.DOWNLOAD.DownloadTorrentFile.endpoint,method:i.S.DOWNLOAD.DownloadTorrentFile.methods[0],mutationKey:t,onSuccess:async()=>{s.oR.success("Files downloaded"),null==e||e()}},r[1]=e,r[2]=l):l=r[2],(0,a.qk)(l)}function d(){let e,t,l=(0,n.c)(3),{mutate:o}=(0,r.E)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[i.S.DOWNLOAD.DownloadRelease.key],l[0]=e):e=l[0],l[1]!==o?(t={endpoint:i.S.DOWNLOAD.DownloadRelease.endpoint,method:i.S.DOWNLOAD.DownloadRelease.methods[0],mutationKey:e,onSuccess:async e=>{s.oR.success("Update downloaded successfully!"),(null==e?void 0:e.error)&&s.oR.error(e.error),(null==e?void 0:e.destination)&&o({path:e.destination})}},l[1]=o,l[2]=t):t=l[2],(0,a.qk)(t)}},65539:(e,t,l)=>{l.d(t,{i:()=>r});var n=l(95155),a=l(19749),i=l(91360);function r(e){let t,l,r,s,o=(0,a.c)(7);return o[0]!==e?({children:t,...l}=e,o[0]=e,o[1]=t,o[2]=l):(t=o[1],l=o[2]),o[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.cn)("grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 min-[2000px]:grid-cols-4","gap-4"),o[3]=r):r=o[3],o[4]!==t||o[5]!==l?(s=(0,n.jsx)("div",{className:r,...l,"data-episode-list-grid":!0,children:t}),o[4]=t,o[5]=l,o[6]=s):s=o[6],s}l(12115)},67236:(e,t,l)=>{l.d(t,{k:()=>o});var n=l(19749),a=l(78216),i=l(37817),r=l(6066),s=l(12115);function o(e,t){let l,o,d=(0,n.c)(11),{onPlay:c}=e,u=void 0===t||t,m=(0,i.v1)();(0,r.useRouter)();let p=(0,r.usePathname)();(0,r.useSearchParams)();let{playNext:x,resetPlayNext:v}=(0,a.p$)();return d[0]!==u||d[1]!==c||d[2]!==x||d[3]!==v?(l=()=>{if(!u)return;let e=setTimeout(()=>{x&&(v(),c())},500);return()=>clearTimeout(e)},d[0]=u,d[1]=c,d[2]=x,d[3]=v,d[4]=l):l=d[4],d[5]!==u||d[6]!==c||d[7]!==p||d[8]!==x||d[9]!==m?(o=[p,x,m,c,u],d[5]=u,d[6]=c,d[7]=p,d[8]=x,d[9]=m,d[10]=o):o=d[10],s.useEffect(l,o),null}},68648:(e,t,l)=>{l.d(t,{qM:()=>j,f0:()=>y,IF:()=>b});var n=l(95155),a=l(19749),i=l(51441),r=l(24685),s=l(82449),o=l(41963),d=l(95094),c=l(29724),u=l(12115),m=l(86628),p=l(36808),x=l(76049),v=l(90711),f=l(42500),h=l(35089),g=l(6066);let b=(0,f.eU)(void 0),y=(0,f.eU)(void 0);function j(e){var t,l,f,y,j,S,w;let E,A,C,k,I,_,T,D,M,R,P,F,L=(0,a.c)(38),{entry:B}=e,[z,K]=(0,c.fp)(b),O=(0,g.useSearchParams)(),G=(0,g.useRouter)(),Y=(0,g.usePathname)();L[0]!==O?(E=O.get("id"),L[0]=O,L[1]=E):E=L[1];let V=E;L[2]!==O?(A=O.get("download"),L[2]=O,L[3]=A):A=L[3];let q=A;L[4]!==q||L[5]!==V||L[6]!==Y||L[7]!==G||L[8]!==K?(C=()=>{q&&(K("download"),G.replace(Y+"?id=".concat(V)))},L[4]=q,L[5]=V,L[6]=Y,L[7]=G,L[8]=K,L[9]=C):C=L[9],L[10]!==q?(k=[q],L[10]=q,L[11]=k):k=L[11],(0,u.useEffect)(C,k),L[12]!==B||L[13]!==z?(I={entry:B,type:z},L[12]=B,L[13]=z,L[14]=I):I=L[14];let{onTorrentValidated:U}=function(e){let t,l,n=(0,a.c)(14),{type:m,entry:p}=e,x=void 0===m?"download":m,[v,f]=(0,c.fp)(r.l),{handleManualTorrentStreamSelection:h}=(0,s.w9)(),{handleStreamSelection:g}=(0,i.u)(),{torrentStreamingSelectedEpisode:y}=(0,d.O)(),j=(0,c.Xr)(o.W),[,N]=(0,c.fp)(b),{setDebridstreamAutoplaySelectedTorrent:S}=(0,s.ZH)(),{setTorrentstreamAutoplaySelectedTorrent:w}=(0,s.j)();n[0]!==p||n[1]!==h||n[2]!==g||n[3]!==v||n[4]!==S||n[5]!==f||n[6]!==w||n[7]!==j||n[8]!==N||n[9]!==y||n[10]!==x?(t=()=>{console.log("onTorrentValidated",y),"select"===x?v.length&&(null==y?void 0:y.aniDBEpisode)&&(w(v[0]),h({torrent:v[0],entry:p,aniDBEpisode:y.aniDBEpisode,episodeNumber:y.episodeNumber,chosenFileIndex:void 0}),N(void 0),u.startTransition(()=>{f([])})):"select-file"===x?v.length&&(null==y?void 0:y.aniDBEpisode)&&(j(v[0]),u.startTransition(()=>{f([])})):"debrid-stream-select"===x?v.length&&(null==y?void 0:y.aniDBEpisode)&&(S(v[0]),g({torrent:v[0],entry:p,aniDBEpisode:y.aniDBEpisode,episodeNumber:y.episodeNumber,chosenFileId:""}),N(void 0),u.startTransition(()=>{f([])})):"debrid-stream-select-file"===x&&v.length&&(null==y?void 0:y.aniDBEpisode)&&(j(v[0]),u.startTransition(()=>{f([])}))},n[0]=p,n[1]=h,n[2]=g,n[3]=v,n[4]=S,n[5]=f,n[6]=w,n[7]=j,n[8]=N,n[9]=y,n[10]=x,n[11]=t):t=n[11];let E=t;return n[12]!==E?(l={onTorrentValidated:E},n[12]=E,n[13]=l):l=n[13],l}(I),H=void 0!==z;L[15]!==K?(_=()=>K(void 0),L[15]=K,L[16]=_):_=L[16];let Q="".concat((null==B||null==(l=B.media)||null==(t=l.title)?void 0:t.userPreferred)||"Anime");L[17]!==(null==B||null==(f=B.media)?void 0:f.bannerImage)?(T=(null==B||null==(y=B.media)?void 0:y.bannerImage)&&(0,n.jsxs)("div",{"data-torrent-search-drawer-banner-image-container":!0,className:"Sea-TorrentSearchDrawer__bannerImage h-36 w-full flex-none object-cover object-center overflow-hidden rounded-t-xl absolute left-0 top-0 z-[-1]",children:[(0,n.jsx)(h.default,{"data-torrent-search-drawer-banner-image":!0,src:(0,v.VG)(null==B||null==(j=B.media)?void 0:j.bannerImage),alt:"banner",fill:!0,quality:80,priority:!0,sizes:"20rem",className:"object-cover object-center opacity-10"}),(0,n.jsx)("div",{"data-torrent-search-drawer-banner-image-bottom-gradient":!0,className:"Sea-TorrentSearchDrawer__bannerImage-bottomGradient z-[5] absolute bottom-0 w-full h-[70%] bg-gradient-to-t from-[--background] to-transparent"})]}),L[17]=null==B||null==(S=B.media)?void 0:S.bannerImage,L[18]=T):T=L[18],L[19]!==B||L[20]!==z?(D="download"===z&&(0,n.jsx)(N,{episodes:null==(w=B.downloadInfo)?void 0:w.episodesToDownload}),L[19]=B,L[20]=z,L[21]=D):D=L[21],L[22]!==B||L[23]!==z?(M=!!z&&(0,n.jsx)(r.m,{type:z,entry:B}),L[22]=B,L[23]=z,L[24]=M):M=L[24],L[25]!==M||L[26]!==D?(R=(0,n.jsxs)(p.KZ,{className:"relative z-[1]","data-torrent-search-drawer-content":!0,children:[D,M]}),L[25]=M,L[26]=D,L[27]=R):R=L[27];let $=z||"download";return L[28]!==U||L[29]!==$?(P=(0,n.jsx)(m.V,{type:$,onTorrentValidated:U}),L[28]=U,L[29]=$,L[30]=P):P=L[30],L[31]!==R||L[32]!==P||L[33]!==H||L[34]!==_||L[35]!==Q||L[36]!==T?(F=(0,n.jsxs)(x.a,{open:H,onOpenChange:_,contentClass:"max-w-5xl",title:Q,titleClass:"max-w-[500px] text-ellipsis truncate","data-torrent-search-drawer":!0,children:[T,R,P]}),L[31]=R,L[32]=P,L[33]=H,L[34]=_,L[35]=Q,L[36]=T,L[37]=F):F=L[37],F}function N(e){let t,l,i,r,s,o,d,c,u=(0,a.c)(18),{episodes:m}=e;if(!m||!m.length)return null;if(u[0]!==m){t=m.sort(w),s="space-y-2",o=!0;let e=t.length>1?"s":"";u[7]!==e?(l=(0,n.jsxs)("span",{className:"font-semibold",children:["Missing episode",e]}),u[7]=e,u[8]=l):l=u[8],i=": ",r=t.slice(0,5).map(S).join(", "),u[0]=m,u[1]=t,u[2]=l,u[3]=i,u[4]=r,u[5]=s,u[6]=o}else t=u[1],l=u[2],i=u[3],r=u[4],s=u[5],o=u[6];let p=t.length>5?", ..., ".concat(t[t.length-1].episodeNumber):"";return u[9]!==l||u[10]!==i||u[11]!==r||u[12]!==p?(d=(0,n.jsxs)("p",{children:[l,i,r,p]}),u[9]=l,u[10]=i,u[11]=r,u[12]=p,u[13]=d):d=u[13],u[14]!==s||u[15]!==o||u[16]!==d?(c=(0,n.jsx)("div",{className:s,"data-torrent-search-drawer-episode-list":o,children:d}),u[14]=s,u[15]=o,u[16]=d,u[17]=c):c=u[17],c}function S(e){return e.episodeNumber}function w(e,t){return e.episodeNumber-t.episodeNumber}},71780:(e,t,l)=>{l.d(t,{R:()=>c});var n=l(95155),a=l(19749),i=l(83368),r=l(68648),s=l(29724);l(12115);var o=l(70376),d=l(75780);function c(e){var t,l,c,u,m,p,x,v,f,h,g;let b,y,j,N,S,w=(0,a.c)(14),{entry:E}=e,A=(0,s.Xr)(r.IF),C=null==(l=E.downloadInfo)||null==(t=l.episodesToDownload)?void 0:t.length;null==(c=E.media)||c.format,b=(null==(u=E.media)?void 0:u.format)==="MOVIE";let k=(null==(m=E.downloadInfo)?void 0:m.hasInaccurateSchedule)?"white-subtle":C?"white":"gray-subtle";return w[0]!==C?(y=C?(0,n.jsx)(o.Ah9,{}):(0,n.jsx)(d.CKj,{}),w[0]=C,w[1]=y):y=w[1],w[2]!==A?(j=()=>A("download"),w[2]=A,w[3]=j):j=w[3],w[4]!==C||w[5]!==(null==(p=E.downloadInfo)?void 0:p.batchAll)||w[6]!==(null==(x=E.downloadInfo)?void 0:x.hasInaccurateSchedule)||w[7]!==b?(N=(null==(v=E.downloadInfo)?void 0:v.hasInaccurateSchedule)||!C?(0,n.jsx)(n.Fragment,{children:"Search torrents"}):(0,n.jsxs)(n.Fragment,{children:[!b&&"Download ".concat((null==(f=E.downloadInfo)?void 0:f.batchAll)?"batch /":"next"," ").concat(C>1?"".concat(C," episodes"):"episode"),b&&"Download movie"]}),w[4]=C,w[5]=null==(h=E.downloadInfo)?void 0:h.batchAll,w[6]=null==(g=E.downloadInfo)?void 0:g.hasInaccurateSchedule,w[7]=b,w[8]=N):N=w[8],w[9]!==k||w[10]!==y||w[11]!==j||w[12]!==N?(S=(0,n.jsx)("div",{className:"contents","data-torrent-search-button-container":!0,children:(0,n.jsx)(i.e,{intent:k,size:"md",leftIcon:y,iconClass:"text-2xl",onClick:j,"data-torrent-search-button":!0,children:N})}),w[9]=k,w[10]=y,w[11]=j,w[12]=N,w[13]=S):S=w[13],S}},75193:(e,t,l)=>{l.d(t,{A:()=>u});var n=l(95155),a=l(35656),i=l(5249),r=l(91360),s=l(91332),o=l(35089),d=l(12115),c=l(70376);function u(e){var t;let{details:l,isMangaPage:u,...m}=e,p=(0,s.Ky)(),x=d.useMemo(()=>{var e,t;return(null==l||null==(t=l.characters)||null==(e=t.edges)?void 0:e.filter(e=>"MAIN"===e.role||"SUPPORTING"===e.role))||[]},[null==l||null==(t=l.characters)?void 0:t.edges]);return 0===x.length?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{"data-media-entry-characters-section-title":!0,children:"Characters"}),(0,n.jsx)("div",{"data-media-entry-characters-section-grid":!0,className:(0,r.cn)("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4",u&&"grid-cols-1 md:grid-col-2 lg:grid-cols-3 xl:grid-cols-2 2xl:grid-cols-2"),children:null==x?void 0:x.slice(0,10).map(e=>{var t,l,s,d,u,x,v,f,h,g,b,y,j;return(0,n.jsx)("div",{className:"col-span-1","data-media-entry-characters-section-grid-item":!0,children:(0,n.jsxs)("div",{"data-media-entry-characters-section-grid-item-container":!0,className:(0,r.cn)("max-w-full flex gap-4","rounded-lg relative transition group/episode-list-item select-none",p.libraryScreenCustomBackgroundImage&&p.libraryScreenCustomBackgroundOpacity>5?"bg-[--background] p-3":"py-3","pr-12"),...m,children:[(0,n.jsxs)("div",{"data-media-entry-characters-section-grid-item-image-container":!0,className:(0,r.cn)("size-20 flex-none rounded-[--radius-md] object-cover object-center relative overflow-hidden","group/ep-item-img-container"),children:[(0,n.jsx)("div",{"data-media-entry-characters-section-grid-item-image-overlay":!0,className:"absolute z-[1] rounded-[--radius-md] w-full h-full"}),(0,n.jsx)("div",{"data-media-entry-characters-section-grid-item-image-background":!0,className:"bg-[--background] absolute z-[0] rounded-[--radius-md] w-full h-full"}),(null==e||null==(l=e.node)||null==(t=l.image)?void 0:t.large)&&(0,n.jsx)(o.default,{"data-media-entry-characters-section-grid-item-image":!0,src:(null==e||null==(d=e.node)||null==(s=d.image)?void 0:s.large)||"",alt:"episode image",fill:!0,quality:60,placeholder:(0,a.r)(700,475),sizes:"10rem",className:(0,r.cn)("object-cover object-center transition select-none"),"data-src":null==e||null==(x=e.node)||null==(u=x.image)?void 0:u.large})]}),(0,n.jsxs)("div",{"data-media-entry-characters-section-grid-item-content":!0,children:[(0,n.jsx)(i.i,{href:(null==e||null==(v=e.node)?void 0:v.siteUrl)||"#",target:"_blank","data-media-entry-characters-section-grid-item-content-link":!0,children:(0,n.jsx)("p",{className:(0,r.cn)("text-lg font-semibold transition line-clamp-2 leading-5 hover:text-brand-100"),children:null==e||null==(h=e.node)||null==(f=h.name)?void 0:f.full})}),(null==e||null==(g=e.node)?void 0:g.age)&&(0,n.jsxs)("p",{"data-media-entry-characters-section-grid-item-content-age":!0,className:"text-sm",children:[null==e||null==(b=e.node)?void 0:b.age," years old"]}),(0,n.jsx)("p",{"data-media-entry-characters-section-grid-item-content-role":!0,className:"text-[--muted] text-xs",children:null==e?void 0:e.role}),(null==e||null==(y=e.node)?void 0:y.isFavourite)&&(0,n.jsx)("div",{"data-media-entry-characters-section-grid-item-content-favourite":!0,children:(0,n.jsx)(c.DfY,{className:"text-pink-600 text-lg block"})})]})]})},null==e||null==(j=e.node)?void 0:j.id)})})]})}},76968:(e,t,l)=>{l.d(t,{P:()=>c});var n=l(95155),a=l(36945),i=l(61585),r=l(37817),s=l(86694),o=l.n(s),d=l(12115);function c(e){var t,l,s,c,u;let{entry:m,details:p,containerRef:x,...v}=e,f=(0,r.v1)(),h=d.useMemo(()=>{var e,t,l,n,a;return(null==f||null==(t=f.settings)||null==(e=t.library)?void 0:e.enableManga)?null==p||null==(a=p.relations)||null==(n=a.edges)||null==(l=n.find(e=>{var t;return((null==e?void 0:e.relationType)==="SOURCE"||(null==e?void 0:e.relationType)==="ADAPTATION")&&(null==e||null==(t=e.node)?void 0:t.format)==="MANGA"}))?void 0:l.node:void 0},[null==p||null==(t=p.relations)?void 0:t.edges,null==f||null==(s=f.settings)||null==(l=s.library)?void 0:l.enableManga]),g=d.useMemo(()=>{var e,t;return((null==p||null==(t=p.relations)||null==(e=t.edges)?void 0:e.map(e=>e))||[]).filter(Boolean).filter(e=>{var t,l,n,a;return((null==(t=e.node)?void 0:t.format)==="TV"||(null==(l=e.node)?void 0:l.format)==="OVA"||(null==(n=e.node)?void 0:n.format)==="MOVIE"||(null==(a=e.node)?void 0:a.format)==="SPECIAL")&&("PREQUEL"===e.relationType||"SEQUEL"===e.relationType||"PARENT"===e.relationType||"SIDE_STORY"===e.relationType||"ALTERNATIVE"===e.relationType||"ADAPTATION"===e.relationType)})},[null==p||null==(c=p.relations)?void 0:c.edges]),b=d.useMemo(()=>{var e,t,l;return(null==p||null==(l=p.recommendations)||null==(t=l.edges)||null==(e=t.map(e=>{var t;return null==e||null==(t=e.node)?void 0:t.mediaRecommendation}))?void 0:e.filter(Boolean))||[]},[null==p||null==(u=p.recommendations)?void 0:u.edges]);return m&&p?(0,n.jsxs)(n.Fragment,{children:[(!!h||g.length>0)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:"Relations"}),(0,n.jsxs)(a.Ln,{children:[!!h&&(0,n.jsx)("div",{className:"col-span-1",children:(0,n.jsx)(i.V,{media:h,overlay:(0,n.jsx)("p",{className:"font-semibold text-white bg-gray-950 z-[-1] absolute right-0 w-fit px-4 py-1.5 text-center !bg-opacity-90 text-sm lg:text-base rounded-none rounded-bl-lg border border-t-0 border-r-0",children:"Manga"}),type:"manga"})}),g.slice(0,4).map(e=>{var t,l;return(0,n.jsx)("div",{className:"col-span-1",children:(0,n.jsx)(i.V,{media:e.node,overlay:(0,n.jsx)("p",{className:"font-semibold text-white bg-gray-950 z-[-1] absolute right-0 w-fit px-4 py-1.5 text-center !bg-opacity-90 text-sm lg:text-base rounded-none rounded-bl-lg border border-t-0 border-r-0",children:(null==(t=e.node)?void 0:t.format)==="MOVIE"?o()(e.relationType||"").replace("_"," ")+" (Movie)":o()(e.relationType||"").replace("_"," ")}),showLibraryBadge:!0,showTrailer:!0,type:"anime"})},null==(l=e.node)?void 0:l.id)})]})]}),b.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:"Recommendations"}),(0,n.jsx)(a.Ln,{children:b.map(e=>(0,n.jsx)("div",{className:"col-span-1",children:(0,n.jsx)(i.V,{media:e,showLibraryBadge:!0,showTrailer:!0,type:"anime"})},e.id))})]})]}):null}},78045:(e,t,l)=>{l.d(t,{v:()=>c});var n=l(95155),a=l(19749),i=l(42094),r=l(61585),s=l(63717),o=l(15388),d=l(2091);function c(e){var t,l;let i,r,o=(0,a.c)(5),{studios:d}=e;if(!(null==d?void 0:d.nodes))return null;let c=null==d||null==(l=d.nodes)||null==(t=l[0])?void 0:t.name;return o[0]!==c?(i=(0,n.jsx)(s.E,{size:"lg",intent:"gray",className:"rounded-full px-0 border-transparent bg-transparent cursor-pointer transition-all hover:bg-transparent hover:text-white hover:-translate-y-0.5","data-anime-entry-studio-badge":!0,children:c}),o[0]=c,o[1]=i):i=o[1],o[2]!==d||o[3]!==i?(r=(0,n.jsx)(u,{studios:d,children:i}),o[2]=d,o[3]=i,o[4]=r):r=o[4],r}function u(e){var t;let l,i,r,s=(0,a.c)(7),{studios:d,children:c}=e,u=null==d||null==(t=d.nodes)?void 0:t[0];return(null==u?void 0:u.name)?(s[0]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)("div",{"data-anime-entry-studio-details-modal-top-padding":!0,className:"py-4"}),s[0]=l):l=s[0],s[1]!==d?(i=(0,n.jsx)(m,{studios:d}),s[1]=d,s[2]=i):i=s[2],s[3]!==c||s[4]!==u.name||s[5]!==i?(r=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(o._s,{trigger:c,size:"xl",title:u.name,"data-anime-entry-studio-details-modal":!0,children:[l,i]})}),s[3]=c,s[4]=u.name,s[5]=i,s[6]=r):r=s[6],r):null}function m(e){var t,l,r,s,o,c,u,m,x;let v,f,h=(0,a.c)(5),{studios:g}=e,{data:b,isLoading:y}=(0,i.gW)(null==g||null==(l=g.nodes)||null==(t=l[0])?void 0:t.id);if(y){let e;return h[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(d.kt,{}),h[0]=e):e=h[0],e}return h[1]!==(null==b||null==(s=b.Studio)||null==(r=s.media)?void 0:r.nodes)?(v=null==b||null==(u=b.Studio)||null==(c=u.media)||null==(o=c.nodes)?void 0:o.map(p),h[1]=null==b||null==(x=b.Studio)||null==(m=x.media)?void 0:m.nodes,h[2]=v):v=h[2],h[3]!==v?(f=(0,n.jsx)("div",{"data-anime-entry-studio-details-modal-content":!0,className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 gap-4",children:v}),h[3]=v,h[4]=f):f=h[4],f}function p(e){return(0,n.jsx)("div",{className:"col-span-1","data-anime-entry-studio-details-modal-content-media-entry-card":!0,children:(0,n.jsx)(r.V,{media:e,type:"anime",showLibraryBadge:!0})},null==e?void 0:e.id)}l(12115)},80677:(e,t,l)=>{l.d(t,{FN:()=>v,Wk:()=>h,h1:()=>S,A7:()=>g});var n=l(95155),a=l(19749),i=l(91332),r=l(21335),s=l(32514),o=l(10907),d=l(12115),c=l(84127),u=l(91360);let m=(0,u.u)({root:(0,r.F)(["UI-Carousel__root","relative"]),content:(0,r.F)(["UI-Carousel__content","overflow-hidden"]),innerContent:(0,r.F)(["UI-Carousel__innerContent","flex"],{variants:{gap:{none:null,sm:null,md:null,lg:null,xl:null},orientation:{horizontal:null,vertical:null}},compoundVariants:[{gap:"none",orientation:"horizontal",className:"ml-0"},{gap:"sm",orientation:"horizontal",className:"-ml-2"},{gap:"md",orientation:"horizontal",className:"-ml-4"},{gap:"lg",orientation:"horizontal",className:"-ml-6"},{gap:"xl",orientation:"horizontal",className:"-ml-8"},{gap:"none",orientation:"vertical",className:"-mt-0 flex-col"},{gap:"sm",orientation:"vertical",className:"-mt-2 flex-col"},{gap:"md",orientation:"vertical",className:"-mt-4 flex-col"},{gap:"lg",orientation:"vertical",className:"-mt-6 flex-col"},{gap:"xl",orientation:"vertical",className:"-mt-8 flex-col"}]}),item:(0,r.F)(["UI-Carousel__item","min-w-0 shrink-0 grow-0 basis-full"],{variants:{gap:{none:null,sm:null,md:null,lg:null,xl:null},orientation:{horizontal:null,vertical:null}},compoundVariants:[{gap:"none",orientation:"horizontal",className:"pl-0"},{gap:"sm",orientation:"horizontal",className:"pl-2"},{gap:"md",orientation:"horizontal",className:"pl-4"},{gap:"lg",orientation:"horizontal",className:"pl-6"},{gap:"xl",orientation:"horizontal",className:"pl-8"},{gap:"none",orientation:"vertical",className:"pt-0"},{gap:"sm",orientation:"vertical",className:"pt-2"},{gap:"md",orientation:"vertical",className:"pt-4"},{gap:"lg",orientation:"vertical",className:"pt-6"},{gap:"xl",orientation:"vertical",className:"pt-8"}]}),button:(0,r.F)(["UI-Carousel__button","rounded-full z-[10]"],{variants:{placement:{previous:null,next:null},orientation:{horizontal:null,vertical:null}},compoundVariants:[{placement:"previous",orientation:"horizontal",className:""},{placement:"next",orientation:"horizontal",className:""},{placement:"previous",orientation:"vertical",className:"-top-12 left-1/2 -translate-x-1/2 rotate-90"},{placement:"next",orientation:"vertical",className:"-bottom-12 left-1/2 -translate-x-1/2 rotate-90"}]}),chevronIcon:(0,r.F)(["UI-Carousel__chevronIcon","size-6"])}),p=d.createContext(null);function x(){let e=d.useContext(p);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}let v=d.forwardRef((e,t)=>{let{orientation:l="horizontal",opts:a,gap:r="md",setApi:c,plugins:x,className:v,children:h,autoScroll:g,autoScrollDelay:b=5e3,...y}=e,j=(0,i.Ky)(),N=d.useMemo(()=>[...x||[],...g&&!j.disableCarouselAutoScroll?[(0,s.A)({delay:b,stopOnMouseEnter:!0,stopOnInteraction:!1})]:[]],[x,g,j.disableCarouselAutoScroll]),[S,w]=(0,o.A)({...a,axis:"horizontal"===l?"x":"y"},N),[E,A]=d.useState(!1),[C,k]=d.useState(!1),I=d.useCallback(e=>{e&&(A(e.canScrollPrev()),k(e.canScrollNext()))},[]),_=d.useCallback(()=>{null==w||w.scrollPrev()},[w]),T=d.useCallback(()=>{null==w||w.scrollNext()},[w]),D=d.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),_()):"ArrowRight"===e.key&&(e.preventDefault(),T())},[_,T]);return d.useEffect(()=>{w&&c&&c(w)},[w,c]),d.useEffect(()=>{if(w)return I(w),w.on("reInit",I),w.on("select",I),()=>{null==w||w.off("select",I)}},[w,I]),(0,n.jsx)(p.Provider,{value:{carouselRef:S,api:w,opts:a,gap:r,orientation:l||((null==a?void 0:a.axis)==="y"?"vertical":"horizontal"),scrollPrev:_,scrollNext:T,canScrollPrev:E,canScrollNext:C},children:(0,n.jsxs)("div",{ref:t,onKeyDownCapture:D,className:(0,u.cn)(m.root(),v),role:"region","aria-roledescription":"carousel",...y,children:[h,(0,n.jsx)(f,{})]})})});function f(e){let t,l,i=(0,a.c)(4),{scrollSnaps:r}=j();return i[0]!==r.length?(t=r.length>30&&(0,n.jsxs)("div",{className:"flex gap-2 absolute top-[-3.5rem] right-0",children:[(0,n.jsx)(b,{}),(0,n.jsx)(y,{})]}),i[0]=r.length,i[1]=t):t=i[1],i[2]!==t?(l=(0,n.jsx)(n.Fragment,{children:t}),i[2]=t,i[3]=l):l=i[3],l}v.displayName="Carousel";let h=d.forwardRef((e,t)=>{let l,i,r,s,o,d,c,p=(0,a.c)(18);p[0]!==e?({className:l,contentClass:i,...r}=e,p[0]=e,p[1]=l,p[2]=i,p[3]=r):(l=p[1],i=p[2],r=p[3]);let{carouselRef:v,orientation:f,gap:h}=x();return p[4]!==i?(s=(0,u.cn)(m.content(),i),p[4]=i,p[5]=s):s=p[5],p[6]!==l||p[7]!==h||p[8]!==f?(o=(0,u.cn)(m.innerContent({orientation:f,gap:h}),l),p[6]=l,p[7]=h,p[8]=f,p[9]=o):o=p[9],p[10]!==t||p[11]!==r||p[12]!==o?(d=(0,n.jsx)("div",{ref:t,className:o,...r}),p[10]=t,p[11]=r,p[12]=o,p[13]=d):d=p[13],p[14]!==v||p[15]!==s||p[16]!==d?(c=(0,n.jsx)("div",{ref:v,className:s,children:d}),p[14]=v,p[15]=s,p[16]=d,p[17]=c):c=p[17],c});h.displayName="CarouselContent";let g=d.forwardRef((e,t)=>{let l,i,r,s,o=(0,a.c)(11);o[0]!==e?({className:l,...i}=e,o[0]=e,o[1]=l,o[2]=i):(l=o[1],i=o[2]);let{orientation:d,gap:c}=x();return o[3]!==l||o[4]!==c||o[5]!==d?(r=(0,u.cn)(m.item({orientation:d,gap:c}),l),o[3]=l,o[4]=c,o[5]=d,o[6]=r):r=o[6],o[7]!==t||o[8]!==i||o[9]!==r?(s=(0,n.jsx)("div",{ref:t,role:"group","aria-roledescription":"slide",className:r,...i}),o[7]=t,o[8]=i,o[9]=r,o[10]=s):s=o[10],s});g.displayName="CarouselItem";let b=d.forwardRef((e,t)=>{let l,i,r,s,o,d,p,v,f=(0,a.c)(19);if(f[0]!==e){let{className:t,chevronIconClass:n,intent:a,...s}=e;l=n,r=a,i=s,f[0]=e,f[1]=l,f[2]=i,f[3]=r}else l=f[1],i=f[2],r=f[3];let h=void 0===r?"gray-outline":r,{orientation:g,scrollPrev:b,canScrollPrev:y}=x();f[4]!==g?(s=m.button({orientation:g,placement:"previous"}),f[4]=g,f[5]=s):s=f[5];let j=!y;return f[6]!==l?(o=(0,u.cn)(m.chevronIcon(),l),f[6]=l,f[7]=o):o=f[7],f[8]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)("path",{d:"m15 18-6-6 6-6"}),f[8]=d):d=f[8],f[9]!==o?(p=(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o,children:d}),f[9]=o,f[10]=p):p=f[10],f[11]!==h||f[12]!==t||f[13]!==i||f[14]!==b||f[15]!==s||f[16]!==j||f[17]!==p?(v=(0,n.jsx)(c.K0,{ref:t,intent:h,className:s,disabled:j,onClick:b,icon:p,...i}),f[11]=h,f[12]=t,f[13]=i,f[14]=b,f[15]=s,f[16]=j,f[17]=p,f[18]=v):v=f[18],v});b.displayName="CarouselPrevious";let y=d.forwardRef((e,t)=>{let l,i,r,s,o,d,p,v,f=(0,a.c)(19);if(f[0]!==e){let{className:t,chevronIconClass:n,intent:a,...s}=e;l=n,r=a,i=s,f[0]=e,f[1]=l,f[2]=i,f[3]=r}else l=f[1],i=f[2],r=f[3];let h=void 0===r?"gray-outline":r,{orientation:g,scrollNext:b,canScrollNext:y}=x();f[4]!==g?(s=m.button({orientation:g,placement:"next"}),f[4]=g,f[5]=s):s=f[5];let j=!y;return f[6]!==l?(o=(0,u.cn)(m.chevronIcon(),l),f[6]=l,f[7]=o):o=f[7],f[8]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)("path",{d:"m9 18 6-6-6-6"}),f[8]=d):d=f[8],f[9]!==o?(p=(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o,children:d}),f[9]=o,f[10]=p):p=f[10],f[11]!==h||f[12]!==t||f[13]!==i||f[14]!==b||f[15]!==s||f[16]!==j||f[17]!==p?(v=(0,n.jsx)(c.K0,{ref:t,intent:h,className:s,disabled:j,onClick:b,icon:p,...i}),f[11]=h,f[12]=t,f[13]=i,f[14]=b,f[15]=s,f[16]=j,f[17]=p,f[18]=v):v=f[18],v});y.displayName="CarouselNext";let j=()=>{let e,t,l,n,i,r,s,o=(0,a.c)(12),{api:c}=x(),[u,m]=d.useState(0);o[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[0]=e):e=o[0];let[p,v]=d.useState(e);o[1]!==c?(t=e=>{c&&c.scrollTo(e)},o[1]=c,o[2]=t):t=o[2];let f=t;o[3]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{v(e.scrollSnapList())},o[3]=l):l=o[3];let h=l;o[4]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{m(e.selectedScrollSnap())},o[4]=n):n=o[4];let g=n;return o[5]!==c?(i=()=>{c&&(h(c),g(c),c.on("reInit",h),c.on("reInit",g),c.on("select",g))},r=[c,h,g],o[5]=c,o[6]=i,o[7]=r):(i=o[6],r=o[7]),d.useEffect(i,r),o[8]!==f||o[9]!==p||o[10]!==u?(s={selectedIndex:u,scrollSnaps:p,onDotButtonClick:f},o[8]=f,o[9]=p,o[10]=u,o[11]=s):s=o[11],s},N=e=>{let t,l,i,r,s,o=(0,a.c)(10);return o[0]!==e?({children:t,className:l,...i}=e,o[0]=e,o[1]=t,o[2]=l,o[3]=i):(t=o[1],l=o[2],i=o[3]),o[4]!==l?(r=(0,u.cn)("rounded-full size-4 p-0 bg-gray-600 dark:bg-opacity-50",l),o[4]=l,o[5]=r):r=o[5],o[6]!==t||o[7]!==i||o[8]!==r?(s=(0,n.jsx)(c.$n,{size:"xs",className:r,intent:"gray-subtle",...i,children:t}),o[6]=t,o[7]=i,o[8]=r,o[9]=s):s=o[9],s},S=e=>{let t,l,i,r,s,o=(0,a.c)(19),{selectedIndex:c,scrollSnaps:m,onDotButtonClick:p}=j();if(o[0]!==p?(t=()=>{p(0)},o[0]=p,o[1]=t):t=o[1],o[2]!==p||o[3]!==e.flag||o[4]!==m?(l=[p,m,e.flag],o[2]=p,o[3]=e.flag,o[4]=m,o[5]=l):l=o[5],d.useEffect(t,l),m.length>30)return null;if(o[6]!==e.className?(i=(0,u.cn)("absolute -top-8 right-0 hidden md:flex gap-2",e.className),o[6]=e.className,o[7]=i):i=o[7],o[8]!==p||o[9]!==m||o[10]!==c){let e;o[12]!==p||o[13]!==m.length||o[14]!==c?(e=(e,t)=>(0,n.jsx)(N,{onClick:()=>p(t),className:(0,u.cn)({"bg-white":t===c},{"size-4 [&:nth-child(odd)]:hidden":m.length>30})},t),o[12]=p,o[13]=m.length,o[14]=c,o[15]=e):e=o[15],r=m.map(e),o[8]=p,o[9]=m,o[10]=c,o[11]=r}else r=o[11];return o[16]!==i||o[17]!==r?(s=(0,n.jsx)("div",{className:i,children:r}),o[16]=i,o[17]=r,o[18]=s):s=o[18],s}},82449:(e,t,l)=>{l.d(t,{ZH:()=>h,j:()=>f,w9:()=>p});var n=l(19749),a=l(55014),i=l(78216),r=l(51441),s=l(25264),o=l(73826),d=l(29724),c=l(42500),u=l(12115),m=l(69554);function p(){let{mutate:e,isPending:t}=(0,a.UW)(),l=(0,d.Xr)(s.bp),n=(0,d.Xr)(s.NZ),{torrentStreamingPlayback:r}=(0,i.zw)(),{externalPlayerLink:c}=(0,i._V)(),m=(0,d.md)(o.O1),p=u.useMemo(()=>(null==c?void 0:c.length)&&r===i.kG.ExternalPlayerLink?"externalPlayerLink":"default",[r,c]);return{handleManualTorrentStreamSelection:u.useCallback(t=>{var a;e({mediaId:t.entry.mediaId,episodeNumber:t.episodeNumber,torrent:t.torrent,aniDBEpisode:t.aniDBEpisode,autoSelect:!1,fileIndex:null!=(a=t.chosenFileIndex)?a:void 0,playbackType:p,clientId:m||""},{onSuccess:()=>{},onError:()=>{l(null),n(s.KL.Stopped)}})},[p,m]),handleAutoSelectTorrentStream:u.useCallback(t=>{e({mediaId:t.entry.mediaId,episodeNumber:t.episodeNumber,aniDBEpisode:t.aniDBEpisode,autoSelect:!0,torrent:void 0,playbackType:p,clientId:m||""},{onError:()=>{l(null),n(s.KL.Stopped)}})},[p,m]),isPending:t}}let x=(0,c.eU)(null),v=(0,c.eU)(null);function f(){let e,t,l,a=(0,n.c)(14),[i,r]=(0,d.fp)(x),{handleAutoSelectTorrentStream:s,handleManualTorrentStreamSelection:o}=p(),[c,u]=(0,d.fp)(v);a[0]!==s||a[1]!==o||a[2]!==i||a[3]!==c||a[4]!==r?(e=function(){if(!i)return;let{entry:e,episodeNumber:t,aniDBEpisode:l,allEpisodes:n}=i;(null==c?void 0:c.isBatch)?o({entry:e,episodeNumber:t,aniDBEpisode:l,torrent:c,chosenFileIndex:void 0}):s({entry:e,episodeNumber:t,aniDBEpisode:l});let a=null==n?void 0:n.find(e=>e.episodeNumber===t+1);a&&a.aniDBEpisode?r({allEpisodes:n,entry:e,episodeNumber:a.episodeNumber,aniDBEpisode:a.aniDBEpisode,type:"torrentstream"}):r(null),m.oR.info("Requesting next episode")},a[0]=s,a[1]=o,a[2]=i,a[3]=c,a[4]=r,a[5]=e):e=a[5];let f=e,h=!!i&&"torrentstream"===i.type;return a[6]!==r?(t=()=>r(null),a[6]=r,a[7]=t):t=a[7],a[8]!==f||a[9]!==r||a[10]!==u||a[11]!==h||a[12]!==t?(l={hasNextTorrentstreamEpisode:h,setTorrentstreamAutoplayInfo:r,autoplayNextTorrentstreamEpisode:f,resetTorrentstreamAutoplayInfo:t,setTorrentstreamAutoplaySelectedTorrent:u},a[8]=f,a[9]=r,a[10]=u,a[11]=h,a[12]=t,a[13]=l):l=a[13],l}function h(){let e,t,l,a=(0,n.c)(14),[i,s]=(0,d.fp)(x),{handleAutoSelectStream:o,handleStreamSelection:c}=(0,r.u)(),[u,p]=(0,d.fp)(v);a[0]!==o||a[1]!==c||a[2]!==i||a[3]!==u||a[4]!==s?(e=function(){if(!i)return;let{entry:e,episodeNumber:t,aniDBEpisode:l,allEpisodes:n}=i;(null==u?void 0:u.isBatch)?c({entry:e,episodeNumber:t,aniDBEpisode:l,torrent:u,chosenFileId:""}):o({entry:e,episodeNumber:t,aniDBEpisode:l});let a=null==n?void 0:n.find(e=>e.episodeNumber===t+1);a&&a.aniDBEpisode?s({allEpisodes:n,entry:e,episodeNumber:a.episodeNumber,aniDBEpisode:a.aniDBEpisode,type:"debridstream"}):s(null),m.oR.info("Requesting next episode")},a[0]=o,a[1]=c,a[2]=i,a[3]=u,a[4]=s,a[5]=e):e=a[5];let f=e,h=!!i&&"debridstream"===i.type;return a[6]!==s?(t=()=>s(null),a[6]=s,a[7]=t):t=a[7],a[8]!==f||a[9]!==s||a[10]!==p||a[11]!==h||a[12]!==t?(l={hasNextDebridstreamEpisode:h,setDebridstreamAutoplayInfo:s,autoplayNextDebridstreamEpisode:f,resetDebridstreamAutoplayInfo:t,setDebridstreamAutoplaySelectedTorrent:p},a[8]=f,a[9]=s,a[10]=p,a[11]=h,a[12]=t,a[13]=l):l=a[13],l}},83368:(e,t,l)=>{l.d(t,{e:()=>eD,l:()=>eM});var n=l(95155),a=l(19749),i=l(53540),r=l(37723),s=l(48555),o=l(37817),d=l(6134),c=l(69665),u=l(78106),m=l(84127),p=l(76049),x=l(73832),v=l(29724),f=l(12115),h=l(70376),g=l(80893);function b(e){var t,l,i,s,d,c;let u,x,v,h,b,j,N,S=(0,a.c)(19);S[0]!==e?({entry:u,size:v,...x}=e,S[0]=e,S[1]=u,S[2]=x,S[3]=v):(u=S[1],x=S[2],v=S[3]);let w=(0,o.v1)(),{data:E,isLoading:A}=(0,r.aT)(u.mediaId,!!(null==w||null==(l=w.settings)||null==(t=l.autoDownloader)?void 0:t.enabled)),[C,k]=f.useState(!1);if(A||!(null==w||null==(s=w.settings)||null==(i=s.autoDownloader)?void 0:i.enabled)||!u.listData||(null==(d=u.media)?void 0:d.status)!="RELEASING"&&(null==(c=u.media)?void 0:c.status)!="NOT_YET_RELEASED")return null;let I=!!(null==E?void 0:E.length);S[4]!==I?(h=(0,n.jsx)(g.EnF,{}),S[4]=I,S[5]=h):h=S[5];let _=I?"primary-subtle":"gray-subtle";return S[6]!==A||S[7]!==x||S[8]!==v||S[9]!==h||S[10]!==_?(b=(0,n.jsx)(m.K0,{icon:h,loading:A,intent:_,size:v,...x}),S[6]=A,S[7]=x,S[8]=v,S[9]=h,S[10]=_,S[11]=b):b=S[11],S[12]!==u||S[13]!==E?(j=(0,n.jsx)(y,{entry:u,rules:E}),S[12]=u,S[13]=E,S[14]=j):j=S[14],S[15]!==C||S[16]!==b||S[17]!==j?(N=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(p.a,{title:"Auto Downloader",contentClass:"max-w-3xl",open:C,onOpenChange:k,trigger:b,children:j})}),S[15]=C,S[16]=b,S[17]=j,S[18]=N):N=S[18],N}function y(e){let t,l,i,r,o,f,g,b,y,j=(0,a.c)(23),{entry:N,rules:S}=e,w=(0,v.md)(s.Qy),E=(0,x.C)(!1);return j[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)("div",{className:"flex-1"}),j[0]=t):t=j[0],j[1]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)(h.Ca6,{}),j[1]=l):l=j[1],j[2]!==E?(i=(0,n.jsx)(m.$n,{className:"rounded-full",intent:"success-subtle",leftIcon:l,onClick:()=>{E.on()},children:"New Rule"}),j[2]=E,j[3]=i):i=j[3],j[4]!==E?(r=()=>E.off(),j[4]=E,j[5]=r):r=j[5],j[6]!==N.mediaId||j[7]!==r?(o=(0,n.jsx)(c.xC,{mediaId:N.mediaId,type:"create",onRuleCreatedOrDeleted:r}),j[6]=N.mediaId,j[7]=r,j[8]=o):o=j[8],j[9]!==E.active||j[10]!==E.set||j[11]!==i||j[12]!==o?(f=(0,n.jsxs)("div",{className:"flex w-full",children:[t,(0,n.jsx)(p.a,{open:E.active,onOpenChange:E.set,title:"Create a new rule",contentClass:"max-w-3xl",trigger:i,children:o})]}),j[9]=E.active,j[10]=E.set,j[11]=i,j[12]=o,j[13]=f):f=j[13],j[14]!==(null==S?void 0:S.length)?(g=!(null==S?void 0:S.length)&&(0,n.jsx)(u.D,{title:null,children:"No rules found for this anime."}),j[14]=null==S?void 0:S.length,j[15]=g):g=j[15],j[16]!==S||j[17]!==w?(b=null==S?void 0:S.map(e=>(0,n.jsx)(d.U,{rule:e,userMedia:w},e.dbId)),j[16]=S,j[17]=w,j[18]=b):b=j[18],j[19]!==f||j[20]!==g||j[21]!==b?(y=(0,n.jsxs)("div",{className:"space-y-4",children:[f,g,b]}),j[19]=f,j[20]=g,j[21]=b,j[22]=y):y=j[22],y}var j=l(32),N=l(78045),S=l(25305),w=l(90168),E=l(37054),A=l(42793),C=l(78453),k=l(75780);function I(e){var t,l,i,r;let s,d,c,u=(0,a.c)(9),{entry:m}=e,p=(0,o.v1)(),{isLibraryView:x,isOnlineStreamingView:v,toggleOnlineStreamingView:f}=(0,A.K9)();if(!m||(null==(t=m.media)?void 0:t.status)==="NOT_YET_RELEASED"||!(null==p||null==(i=p.settings)||null==(l=i.library)?void 0:l.enableOnlinestream)||(null==(r=m.media)?void 0:r.isAdult)||!x&&!v)return null;let h=v?"gray-subtle":"white-subtle";u[0]!==v?(s=v?(0,n.jsx)(C.nXt,{className:"text-xl"}):(0,n.jsx)(k.yb2,{className:"text-2xl"}),u[0]=v,u[1]=s):s=u[1],u[2]!==f?(d=()=>f(),u[2]=f,u[3]=d):d=u[3];let g=v?"Close Online streaming":"Online streaming";return u[4]!==h||u[5]!==s||u[6]!==d||u[7]!==g?(c=(0,n.jsx)(eD,{"data-anime-onlinestream-button":!0,intent:h,size:"md",leftIcon:s,onClick:d,children:g}),u[4]=h,u[5]=s,u[6]=d,u[7]=g,u[8]=c):c=u[8],c}var _=l(91360),T=l(91332),D=l(44608),M=l(80919),R=l(74500);function P(e){var t,l,i,r,s,o,d;let c,u,m,p,x=(0,a.c)(11);x[0]!==(null==(t=e.media.nextAiringEpisode)?void 0:t.timeUntilAiring)?(c=(0,D.m)((0,M.p)(new Date,(null==(i=e.media.nextAiringEpisode)?void 0:i.timeUntilAiring)||0),{addSuffix:!0}),x[0]=null==(r=e.media.nextAiringEpisode)?void 0:r.timeUntilAiring,x[1]=c):c=x[1];let v=c;x[2]!==(null==(l=e.media.nextAiringEpisode)?void 0:l.timeUntilAiring)?(u=(0,R.GP)((0,M.p)(new Date,(null==(s=e.media.nextAiringEpisode)?void 0:s.timeUntilAiring)||0),"EEEE"),x[2]=null==(o=e.media.nextAiringEpisode)?void 0:o.timeUntilAiring,x[3]=u):u=x[3];let f=u,g=(0,T.Ky)();return x[4]!==f||x[5]!==v||x[6]!==e.media.nextAiringEpisode||x[7]!==g?(m=!!e.media.nextAiringEpisode&&(0,n.jsxs)("div",{className:(0,_.cn)("flex gap-2 items-center justify-center text-lg",g.mediaPageBannerInfoBoxSize===T.Pw.Fluid&&"justify-start"),children:[(0,n.jsxs)("span",{className:"font-semibold",children:["Episode ",null==(d=e.media.nextAiringEpisode)?void 0:d.episode]})," ",v,(0,n.jsx)(h.zBL,{className:"text-lg text-[--muted]"}),(0,n.jsx)("span",{className:"text-[--muted]",children:f})]}),x[4]=f,x[5]=v,x[6]=e.media.nextAiringEpisode,x[7]=g,x[8]=m):m=x[8],x[9]!==m?(p=(0,n.jsx)(n.Fragment,{children:m}),x[9]=m,x[10]=p):p=x[10],p}var F=l(65160);function L(e){var t,l;let i,r,s,d=(0,a.c)(9),{entry:c}=e,u=(0,o.v1)(),{isLibraryView:m,isDebridStreamingView:p,toggleDebridStreamingView:x}=(0,A.K9)();if(!c||(null==(t=c.media)?void 0:t.status)==="NOT_YET_RELEASED"||!(null==u||null==(l=u.debridSettings)?void 0:l.enabled)||!m&&!p)return null;let v=p?"gray-subtle":"white-subtle";d[0]!==p?(i=p?(0,n.jsx)(C.nXt,{className:"text-xl"}):(0,n.jsx)(F.hgf,{className:"text-2xl"}),d[0]=p,d[1]=i):i=d[1],d[2]!==x?(r=()=>x(),d[2]=x,d[3]=r):r=d[3];let f=p?"Close Debrid streaming":"Debrid streaming";return d[4]!==v||d[5]!==i||d[6]!==r||d[7]!==f?(s=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(eD,{"data-debrid-stream-button":!0,intent:v,size:"md",leftIcon:i,onClick:r,children:f})}),d[4]=v,d[5]=i,d[6]=r,d[7]=f,d[8]=s):s=d[8],s}var B=l(2159),z=l(7675),K=l(74889);async function O(){}var G=l(10653),Y=l(9478),V=l(63352),q=l(98836),U=l(12556);function H(e){let t,l,i,r,s,o,d,c,u,m,p,x,v,f=(0,a.c)(28);f[0]!==e?({filepaths:i,allFilepaths:t,onFilepathSelected:r,showFullPath:o,className:l,...s}=e,f[0]=e,f[1]=t,f[2]=l,f[3]=i,f[4]=r,f[5]=s,f[6]=o):(t=f[1],l=f[2],i=f[3],r=f[4],s=f[5],o=f[6]);let h=i.length===t.length;f[7]!==l?(d=(0,_.cn)("overflow-y-auto px-2 space-y-1",l),f[7]=l,f[8]=d):d=f[8];let g=!!h||0!==i.length&&"indeterminate";return f[9]!==t||f[10]!==r?(c=e=>{"boolean"==typeof e&&r(e?t:[])},f[9]=t,f[10]=r,f[11]=c):c=f[11],f[12]!==g||f[13]!==c?(u=(0,n.jsx)("div",{className:"",children:(0,n.jsx)(V.Sc,{label:"Select all files",value:g,onValueChange:c,fieldClass:"w-[fit-content]"})}),f[12]=g,f[13]=c,f[14]=u):u=f[14],f[15]===Symbol.for("react.memo_cache_sentinel")?(m=(0,n.jsx)(q.w,{}),f[15]=m):m=f[15],f[16]!==t||f[17]!==i||f[18]!==r||f[19]!==o?(p=null==t?void 0:t.toSorted(Q).map((e,t)=>(0,n.jsx)("div",{className:"py-2",children:(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(V.Sc,{label:(0,n.jsxs)("span",{className:(0,_.cn)("",o&&"text-[--muted]"),children:[o?e.replace(U.V.basename(e),""):U.V.basename(e),o&&(0,n.jsx)("span",{className:"text-[--foreground]",children:U.V.basename(e)})]}),value:i.includes(e),onValueChange:t=>{"boolean"==typeof t&&r(l=>t?[...l,e]:l.filter(t=>t!==e))},labelClass:"break-all tracking-wide text-sm",fieldLabelClass:"break-all",fieldClass:"w-[fit-content]"})})},"".concat(e,"-").concat(t))),f[16]=t,f[17]=i,f[18]=r,f[19]=o,f[20]=p):p=f[20],f[21]!==p?(x=(0,n.jsx)("div",{className:"divide-[--border] divide-y",children:p}),f[21]=p,f[22]=x):x=f[22],f[23]!==s||f[24]!==d||f[25]!==u||f[26]!==x?(v=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:d,...s,children:[u,m,x]})}),f[23]=s,f[24]=d,f[25]=u,f[26]=x,f[27]=v):v=f[27],v}function Q(e,t){return e.localeCompare(t)}var $=l(75733),W=l(42500);let X=(0,W.eU)(!1);function Z(e){let t,l,i,r,s=(0,a.c)(9),{entry:o}=e,[d,c]=(0,v.fp)(X);return s[0]!==c?(t=()=>c(!1),s[0]=c,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)("span",{children:"Select files to delete"}),s[2]=l):l=s[2],s[3]!==o?(i=(0,n.jsx)(J,{entry:o}),s[3]=o,s[4]=i):i=s[4],s[5]!==d||s[6]!==t||s[7]!==i?(r=(0,n.jsx)(p.a,{open:d,onOpenChange:t,contentClass:"max-w-2xl",title:l,titleClass:"text-center",children:i}),s[5]=d,s[6]=t,s[7]=i,s[8]=r):r=s[8],r}function J(e){let t,l,i,r,s,o,d,c,u,p,x,h,g,b=(0,a.c)(32),{entry:y}=e,[,j]=(0,v.fp)(X);b[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],b[0]=t):t=b[0];let[N,S]=f.useState(t),w=y.media;b[1]!==y.localFiles?(l=()=>{y.localFiles&&S(y.localFiles.map(et))},i=[y.localFiles],b[1]=y.localFiles,b[2]=l,b[3]=i):(l=b[2],i=b[3]),f.useEffect(l,i);let{mutate:E,isPending:A}=(0,Y.dO)(y.mediaId);b[4]!==E||b[5]!==N||b[6]!==j?(r={title:"Delete files",description:"This action cannot be undone.",onConfirm:()=>{0!==N.length&&E({paths:N},{onSuccess:()=>{j(!1)}})}},b[4]=E,b[5]=N,b[6]=j,b[7]=r):r=b[7];let C=(0,$.J)(r);if(!w)return null;if(b[8]!==y.localFiles){var k,I;s=null!=(I=null==(k=y.localFiles)?void 0:k.map(ee))?I:[],b[8]=y.localFiles,b[9]=s}else s=b[9];return b[10]!==N||b[11]!==s?(o=(0,n.jsx)(H,{className:"max-h-96",filepaths:N,allFilepaths:s,onFilepathSelected:S,showFullPath:!0}),b[10]=N,b[11]=s,b[12]=o):o=b[12],b[13]!==C?(d=()=>C.open(),b[13]=C,b[14]=d):d=b[14],b[15]!==A||b[16]!==d?(c=(0,n.jsx)(m.$n,{intent:"alert",onClick:d,loading:A,children:"Delete"}),b[15]=A,b[16]=d,b[17]=c):c=b[17],b[18]!==j?(u=()=>j(!1),b[18]=j,b[19]=u):u=b[19],b[20]!==A||b[21]!==u?(p=(0,n.jsx)(m.$n,{intent:"white",onClick:u,disabled:A,children:"Cancel"}),b[20]=A,b[21]=u,b[22]=p):p=b[22],b[23]!==p||b[24]!==c?(x=(0,n.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[c,p]}),b[23]=p,b[24]=c,b[25]=x):x=b[25],b[26]!==C?(h=(0,n.jsx)($.K,{...C}),b[26]=C,b[27]=h):h=b[27],b[28]!==x||b[29]!==h||b[30]!==o?(g=(0,n.jsxs)("div",{className:"space-y-2 mt-2",children:[o,x,h]}),b[28]=x,b[29]=h,b[30]=o,b[31]=g):g=b[31],g}function ee(e){return e.path}function et(e){return e.path}var el=l(45886),en=l(43756);let ea=(0,W.eU)(!1);function ei(e){let t,l,i,r,s=(0,a.c)(9),{entry:o}=e,[d,c]=(0,v.fp)(ea);return s[0]!==c?(t=()=>c(!1),s[0]=c,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)("span",{children:"Select files to download"}),s[2]=l):l=s[2],s[3]!==o?(i=(0,n.jsx)(er,{entry:o}),s[3]=o,s[4]=i):i=s[4],s[5]!==d||s[6]!==t||s[7]!==i?(r=(0,n.jsx)(p.a,{open:d,onOpenChange:t,contentClass:"max-w-2xl",title:l,titleClass:"text-center",children:i}),s[5]=d,s[6]=t,s[7]=i,s[8]=r):r=s[8],r}function er(e){let t,l,i,r,s,o,d,c,u=(0,a.c)(16),{entry:p}=e,[,x]=(0,v.fp)(ea);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],u[0]=t):t=u[0];let[h,g]=f.useState(t);u[1]!==h||u[2]!==x?(l=function(){for(let e of h){let t=(0,el.M)()+"/api/v1/mediastream/file/"+encodeURIComponent(e);(0,en.A)(t)}x(!1)},u[1]=h,u[2]=x,u[3]=l):l=u[3];let b=l;if(!p.media)return null;if(u[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)("p",{className:"text-[--muted]",children:"Seanime will open a new tab for each file you download. Make sure your browser allows popups."}),r=(0,n.jsx)(q.w,{}),u[4]=i,u[5]=r):(i=u[4],r=u[5]),u[6]!==p.localFiles){var y,j;s=null!=(j=null==(y=p.localFiles)?void 0:y.map(es))?j:[],u[6]=p.localFiles,u[7]=s}else s=u[7];return u[8]!==h||u[9]!==s?(o=(0,n.jsx)(H,{className:"max-h-96",filepaths:h,allFilepaths:s,onFilepathSelected:g,showFullPath:!0}),u[8]=h,u[9]=s,u[10]=o):o=u[10],u[11]!==b?(d=(0,n.jsx)("div",{className:"flex justify-end gap-2 mt-2",children:(0,n.jsx)(m.$n,{intent:"white",onClick:()=>b(),children:"Download"})}),u[11]=b,u[12]=d):d=u[12],u[13]!==o||u[14]!==d?(c=(0,n.jsxs)("div",{className:"space-y-2 mt-2",children:[i,r,o,d]}),u[13]=o,u[14]=d,u[15]=c):c=u[15],c}function es(e){return e.path}var eo=l(46278),ed=l(69554),ec=l(38628);let eu=(0,W.eU)(!1);function em(e){var t,l,i;let r,s,o,d,c,u,x,f,h,g,b,y,j,N,S,w,E,A=(0,a.c)(49),{entry:C}=e,[k,I]=(0,v.fp)(eu),{mutate:_,isPending:T}=function(){let e,t,l=(0,a.c)(3),n=(0,eo.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[K.S.METADATA.PopulateTVDBEpisodes.key],l[0]=e):e=l[0],l[1]!==n?(t={endpoint:K.S.METADATA.PopulateTVDBEpisodes.endpoint,method:K.S.METADATA.PopulateTVDBEpisodes.methods[0],mutationKey:e,onSuccess:async()=>{await n.invalidateQueries({queryKey:[K.S.ANIME_ENTRIES.GetAnimeEntry.key]}),ed.oR.success("Metadata updated"),await n.invalidateQueries({queryKey:[K.S.ANIME_COLLECTION.GetLibraryCollection.key]}),await n.invalidateQueries({queryKey:[K.S.TORRENTSTREAM.GetTorrentstreamEpisodeCollection.key]})}},l[1]=n,l[2]=t):t=l[2],(0,z.qk)(t)}(),{mutate:D,isPending:M}=function(){let e,t,l=(0,a.c)(3),n=(0,eo.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[K.S.METADATA.EmptyTVDBEpisodes.key],l[0]=e):e=l[0],l[1]!==n?(t={endpoint:K.S.METADATA.EmptyTVDBEpisodes.endpoint,method:K.S.METADATA.EmptyTVDBEpisodes.methods[0],mutationKey:e,onSuccess:async()=>{await n.invalidateQueries({queryKey:[K.S.ANIME_ENTRIES.GetAnimeEntry.key]}),ed.oR.success("TheTVDB Metadata emptied"),await n.invalidateQueries({queryKey:[K.S.ANIME_COLLECTION.GetLibraryCollection.key]}),await n.invalidateQueries({queryKey:[K.S.TORRENTSTREAM.GetTorrentstreamEpisodeCollection.key]})}},l[1]=n,l[2]=t):t=l[2],(0,z.qk)(t)}(),{mutate:R,isPending:P}=function(){let e,t,l=(0,a.c)(3),n=(0,eo.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[K.S.METADATA.PopulateFillerData.key],l[0]=e):e=l[0],l[1]!==n?(t={endpoint:K.S.METADATA.PopulateFillerData.endpoint,method:K.S.METADATA.PopulateFillerData.methods[0],mutationKey:e,onSuccess:async()=>{await n.invalidateQueries({queryKey:[K.S.ANIME_ENTRIES.GetAnimeEntry.key]}),ed.oR.success("Filler data fetched"),await n.invalidateQueries({queryKey:[K.S.TORRENTSTREAM.GetTorrentstreamEpisodeCollection.key]})}},l[1]=n,l[2]=t):t=l[2],(0,z.qk)(t)}(),{mutate:F,isPending:L}=function(){let e,t,l=(0,a.c)(3),n=(0,eo.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[K.S.METADATA.RemoveFillerData.key],l[0]=e):e=l[0],l[1]!==n?(t={endpoint:K.S.METADATA.RemoveFillerData.endpoint,method:K.S.METADATA.RemoveFillerData.methods[0],mutationKey:e,onSuccess:async()=>{await n.invalidateQueries({queryKey:[K.S.ANIME_ENTRIES.GetAnimeEntry.key]}),ed.oR.success("Filler data removed"),await n.invalidateQueries({queryKey:[K.S.TORRENTSTREAM.GetTorrentstreamEpisodeCollection.key]})}},l[1]=n,l[2]=t):t=l[2],(0,z.qk)(t)}(),B=(null==(t=C.media)?void 0:t.format)!=="TV"&&(null==(l=C.media)?void 0:l.format)!=="TV_SHORT"&&(null==(i=C.media)?void 0:i.format)!=="ONA";A[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)("p",{className:"text-[--muted]",children:"Having issues with missing images? Try fetching metadata from other sources."}),s=(0,n.jsx)("h3",{className:"text-center",children:"TVDB"}),A[0]=r,A[1]=s):(r=A[0],s=A[1]),A[2]!==C.mediaId||A[3]!==_?(o=()=>_({mediaId:C.mediaId}),A[2]=C.mediaId,A[3]=_,A[4]=o):o=A[4];let O=T||M||B;A[5]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)(ec.gnT,{className:"text-xl"}),A[5]=d):d=A[5];let G=T?"Populating...":"Fetch / Reload TVDB metadata";A[6]!==o||A[7]!==O||A[8]!==G||A[9]!==T?(c=(0,n.jsx)(m.$n,{className:"w-full",intent:"success-subtle",onClick:o,loading:T,disabled:O,leftIcon:d,children:G}),A[6]=o,A[7]=O,A[8]=G,A[9]=T,A[10]=c):c=A[10],A[11]!==C.mediaId||A[12]!==D?(u=()=>D({mediaId:C.mediaId}),A[11]=C.mediaId,A[12]=D,A[13]=u):u=A[13];let Y=T||M||B,V=M?"Emptying...":"Remove TVDB metadata";A[14]!==u||A[15]!==Y||A[16]!==V||A[17]!==M?(x=(0,n.jsx)(m.$n,{className:"w-full",intent:"gray-subtle",onClick:u,loading:M,disabled:Y,children:V}),A[14]=u,A[15]=Y,A[16]=V,A[17]=M,A[18]=x):x=A[18],A[19]!==x||A[20]!==c?(f=(0,n.jsxs)("div",{className:"flex sm:flex-row flex-col gap-2",children:[c,x]}),A[19]=x,A[20]=c,A[21]=f):f=A[21],A[22]===Symbol.for("react.memo_cache_sentinel")?(h=(0,n.jsx)(q.w,{}),g=(0,n.jsx)("h3",{className:"text-center",children:"AnimeFillerList"}),A[22]=h,A[23]=g):(h=A[22],g=A[23]),A[24]===Symbol.for("react.memo_cache_sentinel")?(b=(0,n.jsx)(ec.v9M,{className:"text-xl"}),A[24]=b):b=A[24],A[25]!==C.mediaId||A[26]!==R?(y=()=>R({mediaId:C.mediaId}),A[25]=C.mediaId,A[26]=R,A[27]=y):y=A[27];let U=P||L||B,H=P?"Fetching...":"Fetch filler info";A[28]!==P||A[29]!==y||A[30]!==U||A[31]!==H?(j=(0,n.jsx)(m.$n,{className:"w-full",intent:"primary-subtle",leftIcon:b,onClick:y,loading:P,disabled:U,children:H}),A[28]=P,A[29]=y,A[30]=U,A[31]=H,A[32]=j):j=A[32],A[33]!==C.mediaId||A[34]!==F?(N=()=>F({mediaId:C.mediaId}),A[33]=C.mediaId,A[34]=F,A[35]=N):N=A[35];let Q=P||L||B,$=L?"Removing...":"Remove filler info";return A[36]!==L||A[37]!==N||A[38]!==Q||A[39]!==$?(S=(0,n.jsx)(m.$n,{className:"w-full",intent:"gray-subtle",onClick:N,loading:L,disabled:Q,children:$}),A[36]=L,A[37]=N,A[38]=Q,A[39]=$,A[40]=S):S=A[40],A[41]!==j||A[42]!==S?(w=(0,n.jsxs)("div",{className:"flex lg:flex-row flex-col gap-2",children:[j,S]}),A[41]=j,A[42]=S,A[43]=w):w=A[43],A[44]!==k||A[45]!==I||A[46]!==f||A[47]!==w?(E=(0,n.jsxs)(p.a,{open:k,onOpenChange:I,title:"Metadata",contentClass:"max-w-xl",titleClass:"",children:[r,s,f,h,g,w]}),A[44]=k,A[45]=I,A[46]=f,A[47]=w,A[48]=E):E=A[48],E}let ep=(0,W.eU)(!1);function ex(e){let t,l,i,r,s=(0,a.c)(9),{entry:o}=e,[d,c]=(0,v.fp)(ep);return s[0]!==c?(t=()=>c(!1),s[0]=c,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)("span",{children:"Select files to unmatch"}),s[2]=l):l=s[2],s[3]!==o?(i=(0,n.jsx)(ev,{entry:o}),s[3]=o,s[4]=i):i=s[4],s[5]!==d||s[6]!==t||s[7]!==i?(r=(0,n.jsx)(p.a,{open:d,onOpenChange:t,contentClass:"max-w-2xl",title:l,titleClass:"text-center",children:i}),s[5]=d,s[6]=t,s[7]=i,s[8]=r):r=s[8],r}function ev(e){let t,l,i,r,s,o,d,c,u,p,x,h,g,b=(0,a.c)(32),{entry:y}=e,[,j]=(0,v.fp)(ep);b[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],b[0]=t):t=b[0];let[N,S]=f.useState(t),w=y.media;b[1]!==y.localFiles?(l=()=>{y.localFiles&&S(y.localFiles.map(eh))},i=[y.localFiles],b[1]=y.localFiles,b[2]=l,b[3]=i):(l=b[2],i=b[3]),f.useEffect(l,i);let{mutate:E,isPending:A}=(0,Y.bU)();b[4]!==N||b[5]!==j||b[6]!==E?(r={title:"Unmatch files",onConfirm:()=>{0!==N.length&&E({paths:N,action:"unmatch"},{onSuccess:()=>{j(!1)}})}},b[4]=N,b[5]=j,b[6]=E,b[7]=r):r=b[7];let C=(0,$.J)(r);if(!w)return null;if(b[8]!==y.localFiles){var k,I;s=null!=(I=null==(k=y.localFiles)?void 0:k.map(ef))?I:[],b[8]=y.localFiles,b[9]=s}else s=b[9];return b[10]!==N||b[11]!==s?(o=(0,n.jsx)(H,{className:"max-h-96",filepaths:N,allFilepaths:s,onFilepathSelected:S,showFullPath:!0}),b[10]=N,b[11]=s,b[12]=o):o=b[12],b[13]!==C?(d=()=>C.open(),b[13]=C,b[14]=d):d=b[14],b[15]!==A||b[16]!==d?(c=(0,n.jsx)(m.$n,{intent:"warning",onClick:d,loading:A,children:"Unmatch"}),b[15]=A,b[16]=d,b[17]=c):c=b[17],b[18]!==j?(u=()=>j(!1),b[18]=j,b[19]=u):u=b[19],b[20]!==A||b[21]!==u?(p=(0,n.jsx)(m.$n,{intent:"white",onClick:u,disabled:A,children:"Cancel"}),b[20]=A,b[21]=u,b[22]=p):p=b[22],b[23]!==p||b[24]!==c?(x=(0,n.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[c,p]}),b[23]=p,b[24]=c,b[25]=x):x=b[25],b[26]!==C?(h=(0,n.jsx)($.K,{...C}),b[26]=C,b[27]=h):h=b[27],b[28]!==x||b[29]!==h||b[30]!==o?(g=(0,n.jsxs)("div",{className:"space-y-2 mt-2",children:[o,x,h]}),b[28]=x,b[29]=h,b[30]=o,b[31]=g):g=b[31],g}function ef(e){return e.path}function eh(e){return e.path}var eg=l(17934),eb=l(43994),ey=l(41452),ej=l(28002);function eN(e){var t,l,i,r,s,d,c;let u,p,x,f,g,b,y,j,N,S,w,E,A,C=(0,a.c)(35),{entry:I}=e,_=(0,o.v1)(),T=(0,v.Xr)(eu),D=!!I.libraryData,{mutate:M}=function(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:K.S.MEDIAPLAYER.StartDefaultMediaPlayer.endpoint,method:K.S.MEDIAPLAYER.StartDefaultMediaPlayer.methods[0],mutationKey:[K.S.MEDIAPLAYER.StartDefaultMediaPlayer.key],onSuccess:O},t[0]=e):e=t[0],(0,z.qk)(e)}(),{mutate:R}=(0,B.wd)(),P=(0,v.Xr)(X),F=(0,v.Xr)(ep),L=(0,v.Xr)(ea);return(null==I||null==(t=I.media)?void 0:t.status)==="NOT_YET_RELEASED"?null:(C[0]===Symbol.for("react.memo_cache_sentinel")?(u=(0,n.jsx)(m.K0,{"data-anime-entry-dropdown-menu-trigger":!0,icon:(0,n.jsx)(h.voe,{}),intent:"gray-basic",size:"md"}),C[0]=u):u=C[0],C[1]!==I.mediaId||C[2]!==D||C[3]!==R||C[4]!==(null==_||null==(i=_.settings)||null==(l=i.mediaPlayer)?void 0:l.defaultPlayer)||C[5]!==M?(p=D&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(eg._2,{onClick:()=>R({mediaId:I.mediaId}),children:[(0,n.jsx)(h.gNt,{})," Open directory"]}),(null==_||null==(s=_.settings)||null==(r=s.mediaPlayer)?void 0:r.defaultPlayer)!="mpv"&&(0,n.jsxs)(eg._2,{onClick:()=>M(),children:[(0,n.jsx)(ej.WYA,{})," Start external media player"]}),(0,n.jsx)(eg.mB,{})]}),C[1]=I.mediaId,C[2]=D,C[3]=R,C[4]=null==_||null==(c=_.settings)||null==(d=c.mediaPlayer)?void 0:d.defaultPlayer,C[5]=M,C[6]=p):p=C[6],C[7]!==T?(x=()=>T(ew),C[7]=T,C[8]=x):x=C[8],C[9]===Symbol.for("react.memo_cache_sentinel")?(f=(0,n.jsx)(eb.Lmn,{}),C[9]=f):f=C[9],C[10]!==x?(g=(0,n.jsxs)(eg._2,{onClick:x,children:[f," Metadata"]}),C[10]=x,C[11]=g):g=C[11],C[12]!==D||C[13]!==F||C[14]!==P||C[15]!==L?(b=D&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eg.mB,{}),(0,n.jsx)(eg.lp,{children:"Bulk actions"}),(0,n.jsxs)(eg._2,{className:"flex justify-between",onClick:()=>L(eS),children:[(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)(k.a4x,{className:"text-lg"})," Download some files"]})," ",(0,n.jsx)(h.OZ6,{})]}),(0,n.jsxs)(eg._2,{className:"text-orange-500 dark:text-orange-200 flex justify-between",onClick:()=>F(!0),children:[(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)(ey.eXw,{className:"text-lg"})," Unmatch some files"]}),(0,n.jsx)(h.OZ6,{})]}),(0,n.jsxs)(eg._2,{className:"text-red-500 dark:text-red-200 flex justify-between",onClick:()=>P(!0),children:[(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)(k.Q_v,{className:"text-lg"})," Delete some files"]})," ",(0,n.jsx)(h.OZ6,{})]})]}),C[12]=D,C[13]=F,C[14]=P,C[15]=L,C[16]=b):b=C[16],C[17]!==I.media?(y=(0,n.jsx)(G.MF,{media:I.media}),C[17]=I.media,C[18]=y):y=C[18],C[19]!==p||C[20]!==g||C[21]!==b||C[22]!==y?(j=(0,n.jsxs)(eg.rI,{"data-anime-entry-dropdown-menu":!0,trigger:u,children:[p,g,b,y]}),C[19]=p,C[20]=g,C[21]=b,C[22]=y,C[23]=j):j=C[23],C[24]!==I?(E=(0,n.jsx)(ei,{entry:I}),N=(0,n.jsx)(em,{entry:I}),S=(0,n.jsx)(Z,{entry:I}),w=(0,n.jsx)(ex,{entry:I}),C[24]=I,C[25]=N,C[26]=S,C[27]=w,C[28]=E):(N=C[25],S=C[26],w=C[27],E=C[28]),C[29]!==N||C[30]!==S||C[31]!==w||C[32]!==j||C[33]!==E?(A=(0,n.jsxs)(n.Fragment,{children:[j,E,N,S,w]}),C[29]=N,C[30]=S,C[31]=w,C[32]=j,C[33]=E,C[34]=A):A=C[34],A)}function eS(e){return!e}function ew(e){return!e}var eE=l(97400);function eA(e){let t,l,i,r,s,o,d,c=(0,a.c)(19);c[0]!==e?({mediaId:t,size:i,...l}=e,c[0]=e,c[1]=t,c[2]=l,c[3]=i):(t=c[1],l=c[2],i=c[3]);let u=void 0===i?"lg":i,{isSilenced:p,isLoading:x}=(0,B.bt)(t),{mutate:v,isPending:f}=(0,B.xQ)();c[4]!==t||c[5]!==v?(r=function(){v({mediaId:t})},c[4]=t,c[5]=v,c[6]=r):r=c[6];let h=r;c[7]!==p?(s=p?(0,n.jsx)(eb.yw6,{}):(0,n.jsx)(eb.ZKY,{}),c[7]=p,c[8]=s):s=c[8];let g=x||f,b=p?"warning-subtle":"gray-subtle";c[9]!==h||c[10]!==l||c[11]!==u||c[12]!==s||c[13]!==g||c[14]!==b?(o=(0,n.jsx)(m.K0,{icon:s,onClick:h,loading:g,intent:b,size:u,...l}),c[9]=h,c[10]=l,c[11]=u,c[12]=s,c[13]=g,c[14]=b,c[15]=o):o=c[15];let y=p?"Un-silence notifications":"Silence notifications";return c[16]!==o||c[17]!==y?(d=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(eE.m_,{trigger:o,children:y})}),c[16]=o,c[17]=y,c[18]=d):d=c[18],d}var eC=l(71780);function ek(e){var t,l;let i,r,s,d=(0,a.c)(9),{entry:c}=e,u=(0,o.v1)(),{isLibraryView:m,isTorrentStreamingView:p,toggleTorrentStreamingView:x}=(0,A.K9)();if(!c||(null==(t=c.media)?void 0:t.status)==="NOT_YET_RELEASED"||!(null==u||null==(l=u.torrentstreamSettings)?void 0:l.enabled)||!m&&!p)return null;let v=p?"gray-subtle":"white-subtle";d[0]!==p?(i=p?(0,n.jsx)(C.nXt,{className:"text-xl"}):(0,n.jsx)(ej.kcS,{className:"text-2xl"}),d[0]=p,d[1]=i):i=d[1],d[2]!==x?(r=()=>x(),d[2]=x,d[3]=r):r=d[3];let f=p?"Close torrent streaming":"Torrent streaming";return d[4]!==v||d[5]!==i||d[6]!==r||d[7]!==f?(s=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(eD,{"data-torrent-stream-button":!0,intent:v,size:"md",leftIcon:i,onClick:r,children:f})}),d[4]=v,d[5]=i,d[6]=r,d[7]=f,d[8]=s):s=d[8],s}var eI=l(5249),e_=l(24151),eT=l(67187);function eD(e){let t,l,i,r,s=(0,a.c)(9);s[0]!==e?({className:t,...l}=e,s[0]=e,s[1]=t,s[2]=l):(t=s[1],l=s[2]);let o=(0,T.Ky)().mediaPageBannerInfoBoxSize===T.Pw.Fluid&&"lg:w-full lg:max-w-[280px]";return s[3]!==t||s[4]!==o?(i=(0,_.cn)("w-full",o,t),s[3]=t,s[4]=o,s[5]=i):i=s[5],s[6]!==l||s[7]!==i?(r=(0,n.jsx)(m.$n,{className:i,...l}),s[6]=l,s[7]=i,s[8]=r):r=s[8],r}function eM(e){var t,l,a,r,s,d,c,u,p,x,v,f,h,g,y,C,k,D,M,R,F,B,z;let K=(0,o.v1)(),{entry:O,details:Y}=e,V=(0,T.Ky)();if(!O.media)return null;let{hasTorrentProvider:q}=(0,o.lJ)(),{hasDebridService:U}=(0,o.bV)(),{currentView:H,isTorrentStreamingView:Q,isDebridStreamingView:$,isOnlineStreamingView:W}=(0,A.K9)(),X=()=>{var e,t,l,a;return(0,n.jsxs)("div",{"data-anime-meta-section-action-buttons":!0,className:(0,_.cn)("w-full flex flex-wrap gap-4 items-center",V.mediaPageBannerInfoBoxSize===T.Pw.Fluid&&"w-auto flex-nowrap"),children:[(0,n.jsxs)("div",{className:"flex items-center gap-4 justify-center w-full lg:w-fit","data-anime-meta-section-action-buttons-inner-container":!0,children:[(0,n.jsx)(eI.i,{href:"https://anilist.co/anime/".concat(O.mediaId),target:"_blank",children:(0,n.jsx)(m.K0,{intent:"gray-link",className:"px-0",icon:(0,n.jsx)(eT.vFL,{className:"text-lg"})})}),!!(null==O||null==(t=O.media)||null==(e=t.trailer)?void 0:e.id)&&(0,n.jsx)(i.f,{trailerId:null==O||null==(a=O.media)||null==(l=a.trailer)?void 0:l.id,trigger:(0,n.jsx)(m.$n,{intent:"gray-link",className:"px-0",children:"Trailer"})})]}),V.mediaPageBannerInfoBoxSize!==T.Pw.Fluid&&(0,n.jsx)("div",{className:"flex-1 hidden lg:flex","data-anime-meta-section-action-buttons-spacer":!0}),(0,n.jsxs)("div",{className:"flex items-center gap-4 justify-center w-full lg:w-fit","data-anime-meta-section-action-buttons-inner-container":!0,children:[(0,n.jsx)(b,{entry:O,size:"md"}),!!O.libraryData&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.p,{mediaId:O.mediaId,type:"anime",size:"md"}),(0,n.jsx)(eA,{mediaId:O.mediaId,size:"md"}),(0,n.jsx)(j.f,{allFilesLocked:O.libraryData.allFilesLocked,mediaId:O.mediaId,size:"md"})]}),(0,n.jsx)(eN,{entry:O})]}),(0,n.jsx)(G.EW,{media:O.media})]})},Z=()=>(0,n.jsxs)("div",{"data-anime-meta-section-details":!0,className:(0,_.cn)("flex gap-3 flex-wrap items-center",V.mediaPageBannerInfoBoxSize===T.Pw.Fluid&&"justify-center lg:justify-start lg:max-w-[65vw]"),children:[(0,n.jsx)(S.H2,{meanScore:null==Y?void 0:Y.meanScore,badgeClass:"bg-transparent"}),(0,n.jsx)(N.v,{studios:null==Y?void 0:Y.studios}),(0,n.jsx)(S.vZ,{genres:null==Y?void 0:Y.genres}),(0,n.jsx)("div",{"data-anime-meta-section-rankings-container":!0,className:(0,_.cn)(V.mediaPageBannerInfoBoxSize===T.Pw.Fluid?"w-full":"contents"),children:(0,n.jsx)(S.Kt,{rankings:null==Y?void 0:Y.rankings})})]});return(0,n.jsx)(w.ZM,{backgroundImage:null==(t=O.media)?void 0:t.bannerImage,coverImage:null==(a=O.media)||null==(l=a.coverImage)?void 0:l.extraLarge,children:(0,n.jsxs)(w.In,{children:[(0,n.jsx)(w.xN,{coverImage:(null==(s=O.media)||null==(r=s.coverImage)?void 0:r.extraLarge)||(null==(c=O.media)||null==(d=c.coverImage)?void 0:d.large),title:null==(p=O.media)||null==(u=p.title)?void 0:u.userPreferred,color:null==(v=O.media)||null==(x=v.coverImage)?void 0:x.color,englishTitle:null==(h=O.media)||null==(f=h.title)?void 0:f.english,romajiTitle:null==(y=O.media)||null==(g=y.title)?void 0:g.romaji,startDate:null==(C=O.media)?void 0:C.startDate,season:null==(k=O.media)?void 0:k.season,progressTotal:null==(D=O.media)?void 0:D.episodes,status:null==(M=O.media)?void 0:M.status,description:null==(R=O.media)?void 0:R.description,listData:O.listData,media:O.media,type:"anime",children:V.mediaPageBannerInfoBoxSize===T.Pw.Fluid&&(0,n.jsx)(Z,{})}),V.mediaPageBannerInfoBoxSize!==T.Pw.Fluid&&(0,n.jsx)(Z,{}),(0,n.jsxs)("div",{"data-anime-meta-section-buttons-container":!0,className:(0,_.cn)("flex flex-col lg:flex-row w-full gap-3 items-center",V.mediaPageBannerInfoBoxSize===T.Pw.Fluid&&"flex-wrap"),children:[V.mediaPageBannerInfoBoxSize===T.Pw.Fluid&&(0,n.jsx)(X,{}),"NOT_YET_RELEASED"!==O.media.status&&"library"===H&&q&&((null==K||null==(B=K.settings)||null==(F=B.torrent)?void 0:F.defaultTorrentClient)!==e_.XH.NONE||U)&&(0,n.jsx)(eC.R,{entry:O}),(0,n.jsx)(ek,{entry:O}),(0,n.jsx)(L,{entry:O}),(0,n.jsx)(I,{entry:O})]}),(0,n.jsx)(P,{media:O.media}),(null==(z=O.downloadInfo)?void 0:z.hasInaccurateSchedule)&&(0,n.jsxs)("p",{className:(0,_.cn)("text-[--muted] text-sm text-center mb-3",V.mediaPageBannerInfoBoxSize===T.Pw.Fluid&&"text-left"),"data-anime-meta-section-inaccurate-schedule-message":!0,children:[(0,n.jsx)("span",{className:"block",children:"Could not retrieve accurate scheduling information for this show."}),(0,n.jsx)("span",{className:"block text-[--muted]",children:"Please check the schedule online for more information."})]}),V.mediaPageBannerInfoBoxSize!==T.Pw.Fluid&&(0,n.jsx)(X,{}),(!O.anidbId||0===O.anidbId)&&(0,n.jsx)("p",{className:(0,_.cn)("text-center text-red-300 opacity-50",V.mediaPageBannerInfoBoxSize===T.Pw.Fluid&&"text-left"),"data-anime-meta-section-no-metadata-message":!0,children:"No metadata found on AniDB"})]})})}},86628:(e,t,l)=>{l.d(t,{V:()=>R,Z:()=>I});var n=l(95155),a=l(19749),i=l(98802),r=l(61816),s=l(66792),o=l(37817),d=l(24685),c=l(68648),u=l(22148),m=l(84127),p=l(91360),x=l(76049),v=l(60695),f=l(97400),h=l(43756),g=l(12556),b=l(24151),y=l(42500),j=l(29724),N=l(6066),S=l(12115),w=l(78453),E=l(70376),A=l(28718),C=l(43994);let k=(0,y.eU)(!1);function I(e){var t,l,y,C,I,R,P,F,L,B,z,K,O,G,Y,V,q,U,H,Q,$,W,X,Z,J,ee,et,el,en,ea,ei,er,es,eo,ed;let ec,eu,em,ep,ex,ev,ef,eh,eg,eb,ey,ej,eN,eS,ew,eE,eA,eC=(0,a.c)(80),{onToggleTorrent:ek,media:eI,entry:e_}=e,eT=(0,N.useRouter)(),eD=(0,o.v1)(),eM=null==eD||null==(l=eD.settings)||null==(t=l.library)?void 0:t.libraryPath;if(null==(y=eI.title)||y.romaji,eC[0]!==e_.localFiles||eC[1]!==eM||eC[2]!==(null==(C=eI.title)?void 0:C.romaji)){let e,t=null==(H=e_.localFiles)||null==(U=H.findLast(M))?void 0:U.path;eC[4]!==eM||eC[5]!==(null==(Q=eI.title)?void 0:Q.romaji)?(e=eM?g.V.join(eM,((null==(W=eI.title)?void 0:W.romaji)||"").replace(/[<>:"/\\|?*\x00-\x1F]/g," ").trim().replace(/^\.+|\.+$/g,"").replace(/\s+/g," ")||"Untitled"):"",eC[4]=eM,eC[5]=null==(X=eI.title)?void 0:X.romaji,eC[6]=e):e=eC[6];let l=e;eu=t?g.V.normalize(g.V.dirname(t)):l,eC[0]=e_.localFiles,eC[1]=eM,eC[2]=null==($=eI.title)?void 0:$.romaji,eC[3]=eu}else eu=eC[3];ec=eu;let[eR,eP]=(0,S.useState)(ec),[eF,eL]=(0,j.fp)(k),eB=(0,j.Xr)(c.IF),ez=(0,j.md)(d.l);eC[7]!==(null==(I=e_.downloadInfo)?void 0:I.episodesToDownload)||eC[8]!==eI.episodes||eC[9]!==eI.format||eC[10]!==(null==(R=eI.nextAiringEpisode)?void 0:R.episode)||eC[11]!==eI.status||eC[12]!==ez[0]||eC[13]!==ez.length?(em=()=>{var e,t,l,n;return 1===ez.length&&ez[0].isBatch&&"MOVIE"!==eI.format&&"FINISHED"===eI.status&&!!eI.episodes&&eI.episodes>1&&!!(null==(e=e_.downloadInfo)?void 0:e.episodesToDownload)&&(null==(t=e_.downloadInfo)?void 0:t.episodesToDownload.length)>0&&(null==(l=e_.downloadInfo)?void 0:l.episodesToDownload.length)!==(eI.episodes||(null==(n=eI.nextAiringEpisode)?void 0:n.episode)-1)},eC[7]=null==(Z=e_.downloadInfo)?void 0:Z.episodesToDownload,eC[8]=eI.episodes,eC[9]=eI.format,eC[10]=null==(J=eI.nextAiringEpisode)?void 0:J.episode,eC[11]=eI.status,eC[12]=ez[0],eC[13]=ez.length,eC[14]=em):em=eC[14],null==(P=e_.downloadInfo)||P.episodesToDownload,null==(F=eI.nextAiringEpisode)||F.episode,null==eD||null==(B=eD.settings)||null==(L=B.torrent)||L.defaultTorrentClient,eC[15]!==em?(ep=em(),eC[15]=em,eC[16]=ep):ep=eC[16];let eK=ep;eC[17]!==eT||eC[18]!==eL||eC[19]!==eB?(ex=()=>{eL(!1),eB(void 0),eT.push("/torrent-list")},eC[17]=eT,eC[18]=eL,eC[19]=eB,eC[20]=ex):ex=eC[20];let{mutate:eO,isPending:eG}=(0,s.Dp)(ex);eC[21]!==eL||eC[22]!==eB?(ev=()=>{eL(!1),eB(void 0)},eC[21]=eL,eC[22]=eB,eC[23]=ev):ev=eC[23];let{mutate:eY,isPending:eV}=(0,r.e)(ev);eC[24]!==eT||eC[25]!==eL||eC[26]!==eB?(ef=()=>{eL(!1),eB(void 0),eT.push("/debrid")},eC[24]=eT,eC[25]=eL,eC[26]=eB,eC[27]=ef):ef=eC[27];let{mutate:eq,isPending:eU}=(0,i.AG)(ef),eH=eG||eV||eU;eC[28]!==eR||eC[29]!==(null==(z=e_.downloadInfo)?void 0:z.episodesToDownload)||eC[30]!==eI||eC[31]!==eO||eC[32]!==ez?(eh=function(e){if(e){var t,l;eO({torrents:ez,destination:eR,smartSelect:{enabled:!0,missingEpisodeNumbers:(null==(l=e_.downloadInfo)||null==(t=l.episodesToDownload)?void 0:t.map(D))||[]},media:eI})}else eO({torrents:ez,destination:eR,smartSelect:{enabled:!1,missingEpisodeNumbers:[]},media:eI})},eC[28]=eR,eC[29]=null==(ee=e_.downloadInfo)?void 0:ee.episodesToDownload,eC[30]=eI,eC[31]=eO,eC[32]=ez,eC[33]=eh):eh=eC[33];let eQ=eh;eC[34]!==eR||eC[35]!==eY||eC[36]!==eI||eC[37]!==ez?(eg=function(){eY({download_urls:ez.map(T),destination:eR,media:eI})},eC[34]=eR,eC[35]=eY,eC[36]=eI,eC[37]=ez,eC[38]=eg):eg=eC[38];let e$=eg;eC[39]!==eq||eC[40]!==eR||eC[41]!==eI||eC[42]!==ez?(eb=function(){eq({torrents:ez,destination:eR,media:eI})},eC[39]=eq,eC[40]=eR,eC[41]=eI,eC[42]=ez,eC[43]=eb):eb=eC[43];let eW=eb,eX=(null==eD||null==(K=eD.debridSettings)?void 0:K.enabled)&&!!(null==eD||null==(O=eD.debridSettings)?void 0:O.provider),[eZ,eJ]=(0,S.useState)(eX);if(0===ez.length)return null;if(eC[44]!==eL?(ey=()=>eL(!1),eC[44]=eL,eC[45]=ey):ey=eC[45],eC[46]!==eX||eC[47]!==eZ?(ej=eX&&(0,n.jsx)(v.d,{label:"Download with Debrid service",value:eZ,onValueChange:e=>eJ(e)}),eC[46]=eX,eC[47]=eZ,eC[48]=ej):ej=eC[48],eC[49]===Symbol.for("react.memo_cache_sentinel")?(eN=(0,n.jsx)(A.WNP,{}),eC[49]=eN):eN=eC[49],eC[50]!==eR?(eS=(0,n.jsx)(u.j,{name:"destination",label:"Destination",leftIcon:eN,value:eR,defaultValue:eR,onSelect:eP,shouldExist:!1}),eC[50]=eR,eC[51]=eS):eS=eC[51],eC[52]!==eI.format||eC[53]!==ek||eC[54]!==ez){let e;eC[56]!==eI.format||eC[57]!==ek?(e=e=>(0,n.jsx)(f.m_,{"data-torrent-confirmation-modal-tooltip":!0,trigger:(0,n.jsxs)("div",{className:(0,p.cn)("ml-12 gap-2 p-2 border rounded-[--radius-md] hover:bg-gray-800 relative"),"data-torrent-confirmation-modal-torrent-item":!0,children:[(0,n.jsxs)("div",{"data-torrent-confirmation-modal-torrent-item-content":!0,className:"flex flex-none items-center gap-2 w-[90%] cursor-pointer",onClick:()=>(0,h.A)(e.link),children:[(0,n.jsxs)("span",{className:"text-lg","data-torrent-confirmation-modal-torrent-item-icon":!0,children:[e.isBatch&&"MOVIE"!==eI.format?(0,n.jsx)(A.WNP,{className:"text-2xl"}):(0,n.jsx)(A.oxM,{})," "]}),(0,n.jsx)("p",{className:"line-clamp-1","data-torrent-confirmation-modal-torrent-item-name":!0,children:e.name})]}),(0,n.jsx)(m.K0,{icon:(0,n.jsx)(E.Gsv,{}),className:"absolute right-2 top-2 rounded-full",size:"xs",intent:"gray-outline",onClick:()=>{ek(e)},"data-torrent-confirmation-modal-torrent-item-close-button":!0})]},e.name),children:"Open in browser"},"".concat(e.link)),eC[56]=eI.format,eC[57]=ek,eC[58]=e):e=eC[58],ew=ez.map(e),eC[52]=eI.format,eC[53]=ek,eC[54]=ez,eC[55]=ew}else ew=eC[55];return eC[59]!==eK||eC[60]!==eW||eC[61]!==e$||eC[62]!==eQ||eC[63]!==eZ||eC[64]!==eH||eC[65]!==eU||eC[66]!==eV||eC[67]!==eG||eC[68]!==ez||eC[69]!==(null==eD||null==(G=eD.debridSettings)?void 0:G.enabled)||eC[70]!==(null==eD||null==(Y=eD.debridSettings)?void 0:Y.provider)||eC[71]!==(null==eD||null==(q=eD.settings)||null==(V=q.torrent)?void 0:V.defaultTorrentClient)?(eE=eZ?(0,n.jsx)(n.Fragment,{children:(null==eD||null==(et=eD.debridSettings)?void 0:et.enabled)&&!!(null==eD||null==(el=eD.debridSettings)?void 0:el.provider)&&(0,n.jsx)(m.$n,{"data-torrent-confirmation-modal-debrid-button":!0,leftIcon:(0,n.jsx)(w.Z9S,{className:"text-2xl"}),intent:"white",onClick:()=>eW(),disabled:eH,loading:eU,className:"w-full",children:"Download with Debrid service"})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"space-y-2","data-torrent-confirmation-modal-download-buttons":!0,children:[(0,n.jsxs)("div",{className:"flex w-full gap-2","data-torrent-confirmation-modal-download-buttons-left":!0,children:[!!(null==ez?void 0:ez.every(_))&&(0,n.jsx)(m.$n,{"data-torrent-confirmation-modal-download-files-button":!0,leftIcon:(0,n.jsx)(E.Ah9,{}),intent:"gray-outline",onClick:()=>e$(),disabled:eH,loading:eV,className:"w-full",children:"Download '.torrent' files"}),ez.length>0&&(0,n.jsx)(m.$n,{"data-torrent-confirmation-modal-download-button":!0,leftIcon:(0,n.jsx)(E.Ah9,{}),intent:"white",onClick:()=>eQ(!1),disabled:eH||(null==eD||null==(ea=eD.settings)||null==(en=ea.torrent)?void 0:en.defaultTorrentClient)===b.XH.NONE,loading:eG,className:"w-full",children:(null==eD||null==(ei=eD.debridSettings)?void 0:ei.enabled)?"Download with torrent client":eK?"Download all":"Download"})]}),ez.length>0&&eK&&(0,n.jsx)(m.$n,{"data-torrent-confirmation-modal-download-missing-episodes-button":!0,leftIcon:(0,n.jsx)(E.S6K,{}),intent:"gray-outline",onClick:()=>eQ(!0),disabled:eH,loading:eG,className:"w-full",children:"Download missing episodes"})]})}),eC[59]=eK,eC[60]=eW,eC[61]=e$,eC[62]=eQ,eC[63]=eZ,eC[64]=eH,eC[65]=eU,eC[66]=eV,eC[67]=eG,eC[68]=ez,eC[69]=null==eD||null==(er=eD.debridSettings)?void 0:er.enabled,eC[70]=null==eD||null==(es=eD.debridSettings)?void 0:es.provider,eC[71]=null==eD||null==(ed=eD.settings)||null==(eo=ed.torrent)?void 0:eo.defaultTorrentClient,eC[72]=eE):eE=eC[72],eC[73]!==eF||eC[74]!==ey||eC[75]!==ej||eC[76]!==eS||eC[77]!==ew||eC[78]!==eE?(eA=(0,n.jsxs)(x.a,{open:eF,onOpenChange:ey,contentClass:"max-w-3xl",title:"Choose the destination","data-torrent-confirmation-modal":!0,children:[ej,eS,ew,eE]}),eC[73]=eF,eC[74]=ey,eC[75]=ej,eC[76]=eS,eC[77]=ew,eC[78]=eE,eC[79]=eA):eA=eC[79],eA}function _(e){return e.downloadUrl}function T(e){return e.downloadUrl}function D(e){return e.episodeNumber}function M(e){return e}function R(e){let t,l,i,r=(0,a.c)(11),{type:s,onTorrentValidated:o}=e,c=(0,j.md)(d.l),u=(0,j.Xr)(k);if(0===c.length)return null;r[0]!==o||r[1]!==u||r[2]!==s?(t=()=>{"download"===s?u(!0):o()},r[0]=o,r[1]=u,r[2]=s,r[3]=t):t=r[3],r[4]!==s?(l="download"===s?(0,n.jsx)(C.Oz0,{}):(0,n.jsx)(C.AJ$,{}),r[4]=s,r[5]=l):l=r[5];let p="download"===s?"Download":"Stream",x="download"===s?" (".concat(c.length,")"):"";return r[6]!==t||r[7]!==l||r[8]!==p||r[9]!==x?(i=(0,n.jsxs)(m.$n,{"data-torrent-search-confirmation-continue-button":!0,intent:"primary",className:"Sea-TorrentSearchConfirmationContinueButton fixed z-[9999] left-0 right-0 bottom-4 rounded-full max-w-lg mx-auto halo",size:"lg",onClick:t,leftIcon:l,children:[p,x]}),r[6]=t,r[7]=l,r[8]=p,r[9]=x,r[10]=i):i=r[10],i}},87403:(e,t,l)=>{l.d(t,{H8:()=>f,IE:()=>d,Wd:()=>u,ZM:()=>c,b$:()=>o,i_:()=>h,jM:()=>p,tZ:()=>x,zQ:()=>v});var n=l(19749),a=l(7675),i=l(74889),r=l(46278),s=l(69554);function o(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:i.S.SYNC.SyncGetTrackedMediaItems.endpoint,method:i.S.SYNC.SyncGetTrackedMediaItems.methods[0],queryKey:[i.S.SYNC.SyncGetTrackedMediaItems.key],enabled:!0,gcTime:0},t[0]=e):e=t[0],(0,a.fl)(e)}function d(){let e,t,l=(0,n.c)(3),o=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[i.S.SYNC.SyncAddMedia.key],l[0]=e):e=l[0],l[1]!==o?(t={endpoint:i.S.SYNC.SyncAddMedia.endpoint,method:i.S.SYNC.SyncAddMedia.methods[0],mutationKey:e,onSuccess:async()=>{await o.invalidateQueries({queryKey:[i.S.SYNC.SyncGetTrackedMediaItems.key]}),await o.invalidateQueries({queryKey:[i.S.SYNC.SyncGetQueueState.key]}),await o.invalidateQueries({queryKey:[i.S.SYNC.SyncGetIsMediaTracked.key]}),await o.invalidateQueries({queryKey:[i.S.SYNC.SyncGetLocalStorageSize]}),s.oR.success("Added media for offline syncing")}},l[1]=o,l[2]=t):t=l[2],(0,a.qk)(t)}function c(){let e,t,l=(0,n.c)(3),o=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[i.S.SYNC.SyncRemoveMedia.key],l[0]=e):e=l[0],l[1]!==o?(t={endpoint:i.S.SYNC.SyncRemoveMedia.endpoint,method:i.S.SYNC.SyncRemoveMedia.methods[0],mutationKey:e,onSuccess:async()=>{await o.invalidateQueries({queryKey:[i.S.SYNC.SyncGetTrackedMediaItems.key]}),await o.invalidateQueries({queryKey:[i.S.SYNC.SyncGetQueueState.key]}),await o.invalidateQueries({queryKey:[i.S.SYNC.SyncGetIsMediaTracked.key]}),await o.invalidateQueries({queryKey:[i.S.SYNC.SyncGetLocalStorageSize]}),s.oR.success("Removed offline data")}},l[1]=o,l[2]=t):t=l[2],(0,a.qk)(t)}function u(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:i.S.SYNC.SyncLocalData.endpoint,method:i.S.SYNC.SyncLocalData.methods[0],mutationKey:[i.S.SYNC.SyncLocalData.key],onSuccess:m},t[0]=e):e=t[0],(0,a.qk)(e)}async function m(){s.oR.info("Syncing local data...")}function p(e,t){let l,r,s,o=(0,n.c)(9);return o[0]!==e||o[1]!==t?(l=i.S.SYNC.SyncGetIsMediaTracked.endpoint.replace("{id}",String(e)).replace("{type}",String(t)),o[0]=e,o[1]=t,o[2]=l):l=o[2],o[3]!==e||o[4]!==t?(r=[i.S.SYNC.SyncGetIsMediaTracked.key,e,t],o[3]=e,o[4]=t,o[5]=r):r=o[5],o[6]!==l||o[7]!==r?(s={endpoint:l,method:i.S.SYNC.SyncGetIsMediaTracked.methods[0],queryKey:r,enabled:!0},o[6]=l,o[7]=r,o[8]=s):s=o[8],(0,a.fl)(s)}function x(){let e,t,l=(0,n.c)(3),o=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[i.S.SYNC.SyncAnilistData.key],l[0]=e):e=l[0],l[1]!==o?(t={endpoint:i.S.SYNC.SyncAnilistData.endpoint,method:i.S.SYNC.SyncAnilistData.methods[0],mutationKey:e,onSuccess:async()=>{await o.invalidateQueries({queryKey:[i.S.SYNC.SyncGetTrackedMediaItems.key]}),await o.invalidateQueries({queryKey:[i.S.ANILIST.GetAnimeCollection.key]}),await o.invalidateQueries({queryKey:[i.S.ANILIST.GetRawAnimeCollection.key]}),await o.invalidateQueries({queryKey:[i.S.MANGA.GetAnilistMangaCollection.key]}),await o.invalidateQueries({queryKey:[i.S.MANGA.GetRawAnilistMangaCollection.key]}),await o.invalidateQueries({queryKey:[i.S.MANGA.GetMangaCollection.key]}),await o.invalidateQueries({queryKey:[i.S.ANIME_COLLECTION.GetLibraryCollection.key]}),await o.invalidateQueries({queryKey:[i.S.ANIME_ENTRIES.GetAnimeEntry.key]}),await o.invalidateQueries({queryKey:[i.S.MANGA.GetMangaEntry.key]}),await o.invalidateQueries({queryKey:[i.S.ANIME_ENTRIES.GetMissingEpisodes]}),await o.invalidateQueries({queryKey:[i.S.SYNC.SyncGetLocalStorageSize]}),s.oR.success("Updated Anilist data")}},l[1]=o,l[2]=t):t=l[2],(0,a.qk)(t)}function v(){let e,t,l=(0,n.c)(3),s=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[i.S.SYNC.SyncSetHasLocalChanges.key],l[0]=e):e=l[0],l[1]!==s?(t={endpoint:i.S.SYNC.SyncSetHasLocalChanges.endpoint,method:i.S.SYNC.SyncSetHasLocalChanges.methods[0],mutationKey:e,onSuccess:async()=>{await s.invalidateQueries({queryKey:[i.S.SYNC.SyncGetHasLocalChanges.key]})}},l[1]=s,l[2]=t):t=l[2],(0,a.qk)(t)}function f(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:i.S.SYNC.SyncGetHasLocalChanges.endpoint,method:i.S.SYNC.SyncGetHasLocalChanges.methods[0],queryKey:[i.S.SYNC.SyncGetHasLocalChanges.key],enabled:!0},t[0]=e):e=t[0],(0,a.fl)(e)}function h(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:i.S.SYNC.SyncGetLocalStorageSize.endpoint,method:i.S.SYNC.SyncGetLocalStorageSize.methods[0],queryKey:[i.S.SYNC.SyncGetLocalStorageSize.key],enabled:!0},t[0]=e):e=t[0],(0,a.fl)(e)}},92547:(e,t,l)=>{l.d(t,{B:()=>en});var n=l(95155),a=l(19749),i=l(83394),r=l(13029),s=l(83563),o=l(37817),d=l(65539),c=l(42793),u=l(45886),m=l(9478),p=l(78216),x=l(26589),v=l(10653),f=l(84127),h=l(17934),g=l(35354),b=l(76049),y=l(98836),j=l(90711),N=l(42500),S=l(28470),w=l(35089),E=l(12115),A=l(78453),C=l(70376),k=l(41452),I=l(40568),_=l(64685),T=l(13391),D=l(69554),M=l(96267).hp;let R=(0,S.l)(),P=(0,N.eU)(!1),F=(0,E.memo)(e=>{var t,l,i,r,s,o,d,c,g,b,y,j,N;let S,w,E,A,I,P,F,L,O,G,Y,V,q,U,H,Q,$,W,X,Z=(0,a.c)(63),{episode:J,media:ee,isWatched:et,onPlay:el,percentageComplete:en,minutesRemaining:ea}=e,{updateLocalFile:ei,isPending:er}=(0,m.sS)(ee.id),[,es]=(0,T.A)(),{encodePath:eo}=(0,p._V)();Z[0]!==eo?(S=function(e){return eo?M.from(e).toString("base64"):encodeURIComponent(e)},Z[0]=eo,Z[1]=S):S=Z[1];let ed=S,ec=null==(t=J.episodeMetadata)?void 0:t.image;Z[2]!==(null==(l=J.localFile)?void 0:l.path)||Z[3]!==ee.id||Z[4]!==el?(w=()=>{var e,t;return null==el?void 0:el({path:null!=(t=null==(e=J.localFile)?void 0:e.path)?t:"",mediaId:ee.id})},Z[2]=null==(b=J.localFile)?void 0:b.path,Z[3]=ee.id,Z[4]=el,Z[5]=w):w=Z[5];let eu=null==(i=J.localFile)?void 0:i.name,em=J.progressNumber>0&&et,ep=null==(r=J.episodeMetadata)?void 0:r.isFiller,ex=null==(s=J.episodeMetadata)?void 0:s.length,ev=(null==(o=J.episodeMetadata)?void 0:o.summary)||(null==(d=J.episodeMetadata)?void 0:d.overview);Z[6]!==(null==(c=J.localFile)?void 0:c.locked)?(E=(null==(y=J.localFile)?void 0:y.locked)?(0,n.jsx)(_.zu7,{}):(0,n.jsx)(C.iXN,{}),Z[6]=null==(j=J.localFile)?void 0:j.locked,Z[7]=E):E=Z[7];let ef=(null==(g=J.localFile)?void 0:g.locked)?"success-basic":"warning-basic";return Z[8]!==J.localFile||Z[9]!==ei?(A=()=>{if(J.localFile){var e;ei(J.localFile,{locked:!(null==(e=J.localFile)?void 0:e.locked)})}},Z[8]=J.localFile,Z[9]=ei,Z[10]=A):A=Z[10],Z[11]!==er||Z[12]!==ef||Z[13]!==A||Z[14]!==E?(I=(0,n.jsx)(f.K0,{icon:E,intent:ef,size:"md",className:"hover:opacity-60",loading:er,onClick:A}),Z[11]=er,Z[12]=ef,Z[13]=A,Z[14]=E,Z[15]=I):I=Z[15],Z[16]===Symbol.for("react.memo_cache_sentinel")?(P=(0,n.jsx)(f.K0,{icon:(0,n.jsx)(C.sjm,{}),intent:"gray-basic",size:"xs"}),F=(0,n.jsx)(z,{}),Z[16]=P,Z[17]=F):(P=Z[16],F=Z[17]),Z[18]!==es||Z[19]!==ed||Z[20]!==J.localFile?(L=J.localFile&&(0,n.jsxs)(h._2,{onClick:()=>{es((0,u.M)()+"/api/v1/mediastream/file/"+ed(J.localFile.path)),D.oR.info("Stream URL copied")},children:[(0,n.jsx)(k.Ftv,{}),"Copy stream URL"]}),Z[18]=es,Z[19]=ed,Z[20]=J.localFile,Z[21]=L):L=Z[21],Z[22]!==J?(O=(0,n.jsx)(v.bv,{isDropdownMenu:!1,type:"library",episode:J}),Z[22]=J,Z[23]=O):O=Z[23],Z[24]===Symbol.for("react.memo_cache_sentinel")?(G=(0,n.jsx)(h.mB,{}),Z[24]=G):G=Z[24],Z[25]!==J.localFile||Z[26]!==ei?(Y=()=>{J.localFile&&ei(J.localFile,{mediaId:0,locked:!1,ignored:!1})},Z[25]=J.localFile,Z[26]=ei,Z[27]=Y):Y=Z[27],Z[28]===Symbol.for("react.memo_cache_sentinel")?(V=(0,n.jsx)(k.eXw,{}),Z[28]=V):V=Z[28],Z[29]!==Y?(q=(0,n.jsxs)(h._2,{className:"text-[--orange]",onClick:Y,children:[V," Unmatch"]}),Z[29]=Y,Z[30]=q):q=Z[30],Z[31]!==L||Z[32]!==O||Z[33]!==q?(U=(0,n.jsxs)(h.rI,{trigger:P,children:[F,L,O,G,q]}),Z[31]=L,Z[32]=O,Z[33]=q,Z[34]=U):U=Z[34],Z[35]!==J?(H=!!J.episodeMetadata&&("main"===J.type||"special"===J.type)&&!!(null==(N=J.episodeMetadata)?void 0:N.anidbId)&&(0,n.jsx)(K,{episode:J}),Z[35]=J,Z[36]=H):H=Z[36],Z[37]!==I||Z[38]!==U||Z[39]!==H?(Q=(0,n.jsxs)(n.Fragment,{children:[I,U,H]}),Z[37]=I,Z[38]=U,Z[39]=H,Z[40]=Q):Q=Z[40],Z[41]!==J.displayTitle||Z[42]!==J.episodeNumber||Z[43]!==J.episodeTitle||Z[44]!==J.isInvalid||Z[45]!==J.progressNumber||Z[46]!==ee||Z[47]!==ea||Z[48]!==en||Z[49]!==ec||Z[50]!==Q||Z[51]!==w||Z[52]!==eu||Z[53]!==em||Z[54]!==ep||Z[55]!==ex||Z[56]!==ev?($=(0,n.jsx)(x.X,{media:ee,image:ec,onClick:w,isInvalid:J.isInvalid,title:J.displayTitle,episodeTitle:J.episodeTitle,fileName:eu,isWatched:em,isFiller:ep,length:ex,percentageComplete:en,minutesRemaining:ea,episodeNumber:J.episodeNumber,progressNumber:J.progressNumber,description:ev,action:Q}),Z[41]=J.displayTitle,Z[42]=J.episodeNumber,Z[43]=J.episodeTitle,Z[44]=J.isInvalid,Z[45]=J.progressNumber,Z[46]=ee,Z[47]=ea,Z[48]=en,Z[49]=ec,Z[50]=Q,Z[51]=w,Z[52]=eu,Z[53]=em,Z[54]=ep,Z[55]=ex,Z[56]=ev,Z[57]=$):$=Z[57],Z[58]!==J?(W=(0,n.jsx)(B,{episode:J}),Z[58]=J,Z[59]=W):W=Z[59],Z[60]!==$||Z[61]!==W?(X=(0,n.jsxs)(R.Provider,{children:[$,W]}),Z[60]=$,Z[61]=W,Z[62]=X):X=Z[62],X}),L=(0,g.Jo)(e=>{let{z:t}=e;return t.object({episode:t.number().min(0),aniDBEpisode:t.string().transform(e=>e.toUpperCase()),type:t.string().min(0)})});function B(e){var t,l;let i,r,s,o,d,c,u,p,x,v,f=(0,a.c)(25),{episode:h}=e,[y,j]=R.useAtom(P),{updateLocalFile:N,isPending:S}=(0,m.sS)(null==(t=h.baseAnime)?void 0:t.id);f[0]!==j?(i=()=>j(!1),f[0]=j,f[1]=i):i=f[1];let w=null==(l=h.localFile)?void 0:l.name;return f[2]!==w?(r=(0,n.jsx)("p",{className:"w-full line-clamp-2 text-sm px-4 text-center py-2 flex-none",children:w}),f[2]=w,f[3]=r):r=f[3],f[4]!==h.localFile||f[5]!==j||f[6]!==N?(s=e=>{if(h.localFile){var t;N(h.localFile,{metadata:{...null==(t=h.localFile)?void 0:t.metadata,type:e.type,episode:e.episode,aniDBEpisode:e.aniDBEpisode}},()=>{j(!1),D.oR.success("Metadata saved")})}},f[4]=h.localFile,f[5]=j,f[6]=N,f[7]=s):s=f[7],f[8]!==h.fileMetadata?(o={...h.fileMetadata},f[8]=h.fileMetadata,f[9]=o):o=f[9],f[10]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)(g.D0.Number,{label:"Episode number",name:"episode",help:"Relative episode number. If movie, episode number = 1",required:!0}),c=(0,n.jsx)(g.D0.Text,{label:"AniDB episode",name:"aniDBEpisode",help:"Specials typically contain the letter S"}),f[10]=d,f[11]=c):(d=f[10],c=f[11]),f[12]===Symbol.for("react.memo_cache_sentinel")?(u=(0,n.jsx)(g.D0.Select,{label:"Type",name:"type",options:[{label:"Main",value:"main"},{label:"Special",value:"special"},{label:"NC/Other",value:"nc"}]}),f[12]=u):u=f[12],f[13]!==S?(p=(0,n.jsx)("div",{className:"w-full flex justify-end",children:(0,n.jsx)(g.D0.Submit,{role:"save",intent:"success",loading:S,children:"Save"})}),f[13]=S,f[14]=p):p=f[14],f[15]!==s||f[16]!==o||f[17]!==p?(x=(0,n.jsxs)(g.lV,{schema:L,onSubmit:s,onError:console.log,defaultValues:o,children:[d,c,u,p]}),f[15]=s,f[16]=o,f[17]=p,f[18]=x):x=f[18],f[19]!==h.displayTitle||f[20]!==y||f[21]!==i||f[22]!==x||f[23]!==r?(v=(0,n.jsxs)(b.a,{open:y,onOpenChange:i,title:h.displayTitle,titleClass:"text-center",contentClass:"max-w-xl",children:[r,x]}),f[19]=h.displayTitle,f[20]=y,f[21]=i,f[22]=x,f[23]=r,f[24]=v):v=f[24],v}function z(){let e,t,l,i=(0,a.c)(5),[,r]=R.useAtom(P);return i[0]!==r?(e=()=>r(!0),i[0]=r,i[1]=e):e=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(I.aoq,{}),i[2]=t):t=i[2],i[3]!==e?(l=(0,n.jsxs)(h._2,{onClick:e,children:[t,"Update metadata"]}),i[3]=e,i[4]=l):l=i[4],l}function K(e){var t,l,i,r,s,o,d,c,u,m,p,x,v,h,g,N,S,E,C,I,_,T,D,M;let R,P,F,L,B,z,K,O,G,Y,V,q,U,H=(0,a.c)(34),{episode:Q}=e;H[0]===Symbol.for("react.memo_cache_sentinel")?(R=(0,n.jsx)(f.K0,{icon:(0,n.jsx)(k.MJW,{}),className:"opacity-30 hover:opacity-100 transform-opacity",intent:"gray-basic",size:"xs"}),H[0]=R):R=H[0],H[1]!==(null==(t=Q.episodeMetadata)?void 0:t.image)?(P=(null==(m=Q.episodeMetadata)?void 0:m.image)&&(0,n.jsxs)("div",{className:"h-[8rem] w-full flex-none object-cover object-center overflow-hidden absolute left-0 top-0 z-[-1]",children:[(0,n.jsx)(w.default,{src:(0,j.VG)(null==(p=Q.episodeMetadata)?void 0:p.image),alt:"banner",fill:!0,quality:80,priority:!0,sizes:"20rem",className:"object-cover object-center opacity-30"}),(0,n.jsx)("div",{className:"z-[5] absolute bottom-0 w-full h-[80%] bg-gradient-to-t from-[--background] to-transparent"})]}),H[1]=null==(x=Q.episodeMetadata)?void 0:x.image,H[2]=P):P=H[2],H[3]!==Q.episodeTitle?(F=null==(v=Q.episodeTitle)?void 0:v.replaceAll("`","'"),H[3]=Q.episodeTitle,H[4]=F):F=H[4],H[5]!==Q.isInvalid?(L=Q.isInvalid&&(0,n.jsx)(A.mRc,{}),H[5]=Q.isInvalid,H[6]=L):L=H[6],H[7]!==F||H[8]!==L?(B=(0,n.jsxs)("p",{className:"text-lg line-clamp-2 font-semibold",children:[F,L]}),H[7]=F,H[8]=L,H[9]=B):B=H[9];let $=(null==(l=Q.episodeMetadata)?void 0:l.airDate)||"Unknown airing date",W=(null==(i=Q.episodeMetadata)?void 0:i.length)||"N/A";H[10]!==$||H[11]!==W?(z=(0,n.jsxs)("p",{className:"text-[--muted]",children:[$," - ",W," minutes"]}),H[10]=$,H[11]=W,H[12]=z):z=H[12],H[13]!==(null==(r=Q.episodeMetadata)?void 0:r.overview)||H[14]!==(null==(s=Q.episodeMetadata)?void 0:s.summary)?(K=(null==(g=(null==(N=Q.episodeMetadata)?void 0:N.summary)||(null==(S=Q.episodeMetadata)?void 0:S.overview))||null==(h=g.replaceAll("`","'"))?void 0:h.replace(/source:.*/gi,""))||"No summary",H[13]=null==(E=Q.episodeMetadata)?void 0:E.overview,H[14]=null==(C=Q.episodeMetadata)?void 0:C.summary,H[15]=K):K=H[15],H[16]!==K?(O=(0,n.jsx)("p",{className:"text-gray-300",children:K}),H[16]=K,H[17]=O):O=H[17],H[18]===Symbol.for("react.memo_cache_sentinel")?(G=(0,n.jsx)(y.w,{}),H[18]=G):G=H[18];let X=null==(d=Q.localFile)||null==(o=d.parsedInfo)?void 0:o.original;return H[19]!==X?(Y=(0,n.jsx)("p",{className:"text-[--muted] line-clamp-2",children:X}),H[19]=X,H[20]=Y):Y=H[20],H[21]!==(null==(c=Q.episodeMetadata)?void 0:c.anidbId)||H[22]!==(null==(u=Q.fileMetadata)?void 0:u.aniDBEpisode)?(V=!!(null==(I=Q.episodeMetadata)?void 0:I.anidbId)&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"w-full flex gap-2",children:[(0,n.jsxs)("p",{children:["AniDB Episode: ",null==(_=Q.fileMetadata)?void 0:_.aniDBEpisode]}),(0,n.jsx)("a",{href:"https://anidb.net/episode/"+(null==(T=Q.episodeMetadata)?void 0:T.anidbId)+"#layout-footer",target:"_blank",className:"hover:underline text-[--muted]",children:"Open on AniDB"})]})}),H[21]=null==(D=Q.episodeMetadata)?void 0:D.anidbId,H[22]=null==(M=Q.fileMetadata)?void 0:M.aniDBEpisode,H[23]=V):V=H[23],H[24]!==O||H[25]!==Y||H[26]!==V||H[27]!==B||H[28]!==z?(q=(0,n.jsxs)("div",{className:"space-y-4",children:[B,z,O,G,Y,V]}),H[24]=O,H[25]=Y,H[26]=V,H[27]=B,H[28]=z,H[29]=q):q=H[29],H[30]!==Q.displayTitle||H[31]!==q||H[32]!==P?(U=(0,n.jsxs)(b.a,{title:Q.displayTitle,contentClass:"max-w-2xl overflow-hidden",titleClass:"text-xl",trigger:R,children:[P,q]}),H[30]=Q.displayTitle,H[31]=q,H[32]=P,H[33]=U):U=H[33],U}var O=l(68648),G=l(29724);function Y(e){let t,l,i,r,s,c=(0,a.c)(16),{downloadInfo:u,media:m}=e,p=null==u?void 0:u.episodesToDownload,f=(0,G.Xr)(O.IF),h=(0,G.Xr)(O.f0),{hasTorrentProvider:g}=(0,o.lJ)(),b=g?(null==u?void 0:u.rewatch)?"You have not downloaded the following:":"You have not watched nor downloaded the following:":"The following episodes are not in your library:";return(null==p?void 0:p.length)?(c[0]!==b?(t=(0,n.jsx)("p",{className:"",children:b}),c[0]=b,c[1]=t):t=c[1],c[2]!==p||c[3]!==g||c[4]!==m||c[5]!==h||c[6]!==f?(l=null==p?void 0:p.sort(V).slice(0,28).map((e,t)=>{var l,a,i,r,s,o;if(!e.episode)return null;let d=e.episode;return(0,n.jsx)(x.X,{media:m,image:null==(l=d.episodeMetadata)?void 0:l.image,isInvalid:d.isInvalid,title:d.displayTitle,episodeTitle:d.episodeTitle,episodeNumber:d.episodeNumber,progressNumber:d.progressNumber,description:(null==(a=d.episodeMetadata)?void 0:a.summary)||(null==(i=d.episodeMetadata)?void 0:i.overview),action:(0,n.jsxs)(n.Fragment,{children:[g&&(0,n.jsx)("div",{"data-undownloaded-episode-list-action-download-button":!0,onClick:()=>{h(d.episodeNumber),(0,E.startTransition)(()=>{f("download")})},className:"inline-block text-orange-200 text-2xl animate-pulse cursor-pointer py-2",children:(0,n.jsx)(C.Ah9,{})}),(0,n.jsx)(K,{episode:d}),(0,n.jsx)(v.bv,{isDropdownMenu:!0,type:"undownloaded",episode:d})]}),children:(0,n.jsx)("div",{"data-undownloaded-episode-list-episode-metadata-container":!0,className:"mt-1",children:(0,n.jsxs)("p",{"data-undownloaded-episode-list-episode-metadata-text":!0,className:"flex gap-1 items-center text-sm text-[--muted]",children:[(0,n.jsx)(C.zBL,{})," ",(null==(r=d.episodeMetadata)?void 0:r.airDate)?"Aired on ".concat(new Date(null==(s=d.episodeMetadata)?void 0:s.airDate).toLocaleDateString()):"Aired"]})})},(null==(o=e.episode.localFile)?void 0:o.path)||t)}),c[2]=p,c[3]=g,c[4]=m,c[5]=h,c[6]=f,c[7]=l):l=c[7],c[8]!==l?(i=(0,n.jsx)(d.i,{children:l}),c[8]=l,c[9]=i):i=c[9],c[10]!==p.length?(r=p.length>28&&(0,n.jsx)("h3",{children:"And more..."}),c[10]=p.length,c[11]=r):r=c[11],c[12]!==t||c[13]!==i||c[14]!==r?(s=(0,n.jsxs)("div",{className:"space-y-4","data-undownloaded-episode-list":!0,children:[t,i,r]}),c[12]=t,c[13]=i,c[14]=r,c[15]=s):s=c[15],s):null}function V(e,t){return e.episodeNumber-t.episodeNumber}var q=l(10109),U=l(82449),H=l(71689),Q=l(93715),$=l(6066),W=l(67236),X=l(59271),Z=l(50558),J=l(36808),ee=l(80677),et=l(91332),el=l(38628);function en(e){let t,l,u,m,x,v,f,h,g,b,y,j,N=(0,a.c)(74),{entry:S,bottomSection:w}=e,A=(0,et.Ky)(),C=(0,o.v1)(),{currentView:k}=(0,c.K9)();N[0]!==S?(t={entry:S},N[0]=S,N[1]=t):t=N[1];let{media:I,hasInvalidEpisodes:_,episodesToWatch:T,mainEpisodes:M,specialEpisodes:R,ncEpisodes:P,playMediaFile:L}=function(e){var t;let{entry:l}=e,n=l.media,{playMediaFile:i}=function(){var e,t;let l,n,i=(0,a.c)(11),r=(0,$.useRouter)(),s=(0,o.v1)(),{activeOnDevice:d}=(0,H.NY)(),{setFilePath:c}=(0,H.ju)(),{downloadedMediaPlayback:u}=(0,p.zw)(),{externalPlayerLink:m}=(0,p._V)(),{mutate:x}=(0,q.gA)(),{setTorrentstreamAutoplayInfo:v}=(0,U.j)();i[0]!==u||i[1]!==m||i[2]!==d||i[3]!==x||i[4]!==r||i[5]!==(null==s||null==(e=s.mediastreamSettings)?void 0:e.transcodeEnabled)||i[6]!==c||i[7]!==v?(l=function(e){var t;let{path:l,mediaId:n}=e;if(v(null),(0,Q.v)("PLAY_MEDIA").info("Playing media file",l),u===p.Dc.ExternalPlayerLink)return m?((0,Q.v)("PLAY_MEDIA").info("Opening media file in external player",m,l),c(l),void E.startTransition(()=>{r.push("/medialinks?id=".concat(n))})):void D.oR.error("External player link is not set.");if((null==s||null==(t=s.mediastreamSettings)?void 0:t.transcodeEnabled)&&d){c(l),E.startTransition(()=>{r.push("/mediastream?id=".concat(n))});return}return x({path:l})},i[0]=u,i[1]=m,i[2]=d,i[3]=x,i[4]=r,i[5]=null==s||null==(t=s.mediastreamSettings)?void 0:t.transcodeEnabled,i[6]=c,i[7]=v,i[8]=l):l=i[8];let f=l;return i[9]!==f?(n={playMediaFile:f},i[9]=f,i[10]=n):n=i[10],n}();(0,W.k)({onPlay:()=>{if(l.nextEpisode){var e,t;i({path:null!=(t=null==(e=l.nextEpisode.localFile)?void 0:e.path)?t:"",mediaId:l.mediaId})}}},!!l.nextEpisode);let r=E.useMemo(()=>{var e,t;return null!=(t=null==(e=l.episodes)?void 0:e.filter(e=>"main"===e.type))?t:[]},[l.episodes]),s=E.useMemo(()=>{var e,t;return(null!=(t=null==(e=l.episodes)?void 0:e.filter(e=>"special"===e.type))?t:[]).sort((e,t)=>e.displayTitle.localeCompare(t.displayTitle,void 0,{numeric:!0}))},[l.episodes]),d=E.useMemo(()=>{var e,t;return(null!=(t=null==(e=l.episodes)?void 0:e.filter(e=>{var t;return"nc"===e.type&&!!(null==(t=e.localFile)?void 0:t.path)}))?t:[]).sort((e,t)=>e.localFile.path.localeCompare(t.localFile.path,void 0,{numeric:!0}))},[l.episodes]),c=E.useMemo(()=>{var e,t;return null!=(t=null==(e=l.episodes)?void 0:e.some(e=>e.isInvalid))&&t},[l.episodes]),u=E.useMemo(()=>{var e;let t=r.filter(e=>{var t,n;return!l.nextEpisode||e.progressNumber>(null!=(n=null==(t=l.listData)?void 0:t.progress)?n:0)});return(null==(e=l.listData)?void 0:e.progress)&&!l.nextEpisode?t.reverse():t},[r,l.nextEpisode,null==(t=l.listData)?void 0:t.progress]);return{media:n,playMediaFile:i,mainEpisodes:r,specialEpisodes:s,ncEpisodes:d,hasInvalidEpisodes:c,episodesToWatch:u}}(t),{data:B}=(0,i.H_)(),{inject:z,remove:K}=(0,s.H)();if(N[2]!==k||N[3]!==S||N[4]!==(null==T?void 0:T[0])||N[5]!==z||N[6]!==M||N[7]!==I||N[8]!==P||N[9]!==L||N[10]!==K||N[11]!==R?(l=()=>{if(I)return z("library-episodes",{items:[{...null==T?void 0:T[0],type:"next"},...M.map(eo),...R.map(es),...P.map(er)].filter(ei).map(e=>{var t;return{data:e,id:"".concat(e.type,"-").concat((null==(t=e.localFile)?void 0:t.path)||"","-").concat(e.episodeNumber),value:"".concat(e.episodeNumber),heading:"next"===e.type?"Next Episode":"special"===e.type?"Specials":"other"===e.type?"Others":"Episodes",priority:"next"===e.type?2:+("main"===e.type),render:()=>(0,n.jsxs)("div",{className:"flex gap-1 items-center w-full",children:[(0,n.jsx)("p",{className:"max-w-[70%] truncate",children:e.displayTitle}),!!e.episodeTitle&&(0,n.jsxs)("p",{className:"text-[--muted] flex-1 truncate",children:["- ",e.episodeTitle]})]}),onSelect:()=>{var t,l;return L({path:null!=(l=null==(t=e.localFile)?void 0:t.path)?l:"",mediaId:S.mediaId})}}}),filter:ea,shouldShow:()=>"library"===k,priority:1}),()=>K("library-episodes")},N[2]=k,N[3]=S,N[4]=null==T?void 0:T[0],N[5]=z,N[6]=M,N[7]=I,N[8]=P,N[9]=L,N[10]=K,N[11]=R,N[12]=l):l=N[12],N[13]!==k||N[14]!==T||N[15]!==M||N[16]!==I||N[17]!==P||N[18]!==R?(u=[I,T,M,R,P,k],N[13]=k,N[14]=T,N[15]=M,N[16]=I,N[17]=P,N[18]=R,N[19]=u):u=N[19],E.useEffect(l,u),!I)return null;if(I&&(!S.listData||!S.libraryData)&&!(null==C?void 0:C.isOffline)){let e,t,l,a;return N[20]!==(null==I?void 0:I.status)?(e=(null==I?void 0:I.status)!=="NOT_YET_RELEASED"?(0,n.jsxs)("h4",{className:"text-yellow-50 flex items-center gap-2",children:[(0,n.jsx)(el.Q9o,{})," Not in your library"]}):(0,n.jsx)("h5",{className:"text-yellow-50",children:"Not yet released"}),N[20]=null==I?void 0:I.status,N[21]=e):e=N[21],N[22]!==S.downloadInfo||N[23]!==I?(t=(0,n.jsx)(Y,{downloadInfo:S.downloadInfo,media:I}),N[22]=S.downloadInfo,N[23]=I,N[24]=t):t=N[24],N[25]!==w||N[26]!==t?(l=(0,n.jsxs)("div",{className:"overflow-y-auto pt-4 lg:pt-0 space-y-10",children:[t,w]}),N[25]=w,N[26]=t,N[27]=l):l=N[27],N[28]!==e||N[29]!==l?(a=(0,n.jsxs)("div",{className:"space-y-10",children:[e,l]}),N[28]=e,N[29]=l,N[30]=a):a=N[30],a}if(N[31]!==_?(m=_&&(0,n.jsx)(Z.F,{intent:"alert",description:"Some episodes are invalid. Update the metadata to fix this."}),N[31]=_,N[32]=m):m=N[32],N[33]!==S||N[34]!==T||N[35]!==L||N[36]!==A||N[37]!==B?(x=T.length>0&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(ee.FN,{className:"w-full max-w-full",gap:"md",opts:{align:"start"},"data-episode-carousel":!0,children:[(0,n.jsx)(ee.h1,{}),(0,n.jsx)(ee.Wk,{children:T.map((e,t)=>{var l,a,s,o,d,c,u,m,p,x,v,f,h,g;return(0,n.jsx)(ee.A7,{className:(0,X.pF)(A.smallerEpisodeCarouselSize),children:(0,n.jsx)(r.U,{episode:e,image:(null==(l=e.episodeMetadata)?void 0:l.image)||(null==(a=e.baseAnime)?void 0:a.bannerImage)||(null==(o=e.baseAnime)||null==(s=o.coverImage)?void 0:s.extraLarge),topTitle:e.episodeTitle||(null==e||null==(c=e.baseAnime)||null==(d=c.title)?void 0:d.userPreferred),title:e.displayTitle,isInvalid:e.isInvalid,progressTotal:null==(u=e.baseAnime)?void 0:u.episodes,progressNumber:e.progressNumber,episodeNumber:e.episodeNumber,length:null==(m=e.episodeMetadata)?void 0:m.length,percentageComplete:(0,i.hH)(B,S.mediaId,e.episodeNumber),minutesRemaining:(0,i.pj)(B,S.mediaId,e.episodeNumber),onClick:()=>{var t,l;return L({path:null!=(l=null==(t=e.localFile)?void 0:t.path)?l:"",mediaId:S.mediaId})},anime:{id:S.mediaId,image:null==(x=e.baseAnime)||null==(p=x.coverImage)?void 0:p.medium,title:null==e||null==(f=e.baseAnime)||null==(v=f.title)?void 0:v.userPreferred}},(null==(h=e.localFile)?void 0:h.path)||"")},(null==e||null==(g=e.localFile)?void 0:g.path)||t)})})]})}),N[33]=S,N[34]=T,N[35]=L,N[36]=A,N[37]=B,N[38]=x):x=N[38],N[39]!==S||N[40]!==M||N[41]!==I||N[42]!==L||N[43]!==B){let e;N[45]!==S||N[46]!==I||N[47]!==L||N[48]!==B?(e=e=>{var t,l;return(0,n.jsx)(F,{episode:e,media:I,isWatched:!!(null==(t=S.listData)?void 0:t.progress)&&S.listData.progress>=e.progressNumber,onPlay:L,percentageComplete:(0,i.hH)(B,S.mediaId,e.episodeNumber),minutesRemaining:(0,i.pj)(B,S.mediaId,e.episodeNumber)},(null==(l=e.localFile)?void 0:l.path)||"")},N[45]=S,N[46]=I,N[47]=L,N[48]=B,N[49]=e):e=N[49],v=M.map(e),N[39]=S,N[40]=M,N[41]=I,N[42]=L,N[43]=B,N[44]=v}else v=N[44];return N[50]!==v?(f=(0,n.jsx)(d.i,{"data-episode-list-main":!0,children:v}),N[50]=v,N[51]=f):f=N[51],N[52]!==S||N[53]!==I||N[54]!==(null==C?void 0:C.isOffline)?(h=!(null==C?void 0:C.isOffline)&&(0,n.jsx)(Y,{downloadInfo:S.downloadInfo,media:I}),N[52]=S,N[53]=I,N[54]=null==C?void 0:C.isOffline,N[55]=h):h=N[55],N[56]!==I||N[57]!==L||N[58]!==R?(g=R.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:"Specials"}),(0,n.jsx)(d.i,{"data-episode-list-specials":!0,children:R.map(e=>{var t;return(0,n.jsx)(F,{episode:e,media:I,onPlay:L},(null==(t=e.localFile)?void 0:t.path)||"")})})]}),N[56]=I,N[57]=L,N[58]=R,N[59]=g):g=N[59],N[60]!==I||N[61]!==P||N[62]!==L?(b=P.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:"Others"}),(0,n.jsx)(d.i,{"data-episode-list-others":!0,children:P.map(e=>{var t;return(0,n.jsx)(F,{episode:e,media:I,onPlay:L},(null==(t=e.localFile)?void 0:t.path)||"")})})]}),N[60]=I,N[61]=P,N[62]=L,N[63]=b):b=N[63],N[64]!==w||N[65]!==b||N[66]!==f||N[67]!==h||N[68]!==g?(y=(0,n.jsxs)("div",{className:"space-y-10","data-episode-list-stack":!0,children:[f,h,g,b,w]}),N[64]=w,N[65]=b,N[66]=f,N[67]=h,N[68]=g,N[69]=y):y=N[69],N[70]!==y||N[71]!==m||N[72]!==x?(j=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(J.KZ,{spacing:"lg","data-episode-section-stack":!0,children:[m,x,y]})}),N[70]=y,N[71]=m,N[72]=x,N[73]=j):j=N[73],j}function ea(e){let{item:t,input:l}=e;return!l||t.value.toLowerCase().includes(l.toLowerCase())}function ei(e){return!!e.episodeTitle}function er(e){return{...e,type:"other"}}function es(e){return{...e,type:"special"}}function eo(e){return{...e,type:"main"}}},95094:(e,t,l)=>{l.d(t,{O:()=>s});var n=l(19749),a=l(42500),i=l(29724);let r=(0,a.eU)(null);function s(){let e,t=(0,n.c)(3),[l,a]=(0,i.fp)(r);return t[0]!==a||t[1]!==l?(e={torrentStreamingSelectedEpisode:l,setTorrentStreamingSelectedEpisode:a},t[0]=a,t[1]=l,t[2]=e):e=t[2],e}}}]);