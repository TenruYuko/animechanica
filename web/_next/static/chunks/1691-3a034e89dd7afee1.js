"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1691],{6134:(e,t,l)=>{l.d(t,{U:()=>m});var n=l(95155),o=l(69665),r=l(84127),i=l(91360),a=l(76049),s=l(73832),d=l(12115),c=l(70376),u=l(19022);function m(e){var t,l;let{rule:m,userMedia:p,...y}=e,h=(0,s.C)(!1),f=d.useMemo(()=>null==p?void 0:p.find(e=>e.id===m.mediaId),[(null==p?void 0:p.length)||0,m]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"rounded-[--radius] bg-gray-900 hover:bg-gray-800 transition-colors",children:(0,n.jsxs)("div",{className:"flex justify-between p-3 gap-2 items-center cursor-pointer",onClick:()=>h.on(),children:[(0,n.jsxs)("div",{className:"space-y-1 w-full",children:[(0,n.jsxs)("p",{className:(0,i.cn)("font-medium text-base tracking-wide line-clamp-1"),children:[(0,n.jsx)("span",{className:"text-gray-400 italic font-normal pr-1",children:"Rule for"}),' "',m.comparisonTitle,'"']}),(0,n.jsxs)("p",{className:"text-sm text-gray-400 line-clamp-1 flex space-x-2 items-center divide-x divide-[--border] [&>span]:pl-2",children:[(0,n.jsx)(u.DlO,{className:(0,i.cn)("text-xl",m.enabled?"text-green-500":"text-gray-500",((null==f?void 0:f.status)==="FINISHED"||!f)&&"text-red-300")}),!!(null==(t=m.releaseGroups)?void 0:t.length)&&(0,n.jsx)("span",{children:m.releaseGroups.join(", ")}),!!(null==(l=m.resolutions)?void 0:l.length)&&(0,n.jsx)("span",{children:m.resolutions.join(", ")}),!!m.episodeType&&(0,n.jsx)("span",{children:function(e){switch(e){case"recent":return"Recent releases";case"selected":return"Select episodes"}}(m.episodeType)}),f?(0,n.jsx)(n.Fragment,{children:"FINISHED"===f.status&&(0,n.jsx)("span",{className:"text-red-300",children:"This anime is no longer airing"})}):(0,n.jsx)("span",{className:"text-red-300",children:"This anime is not in your library"})]})]}),(0,n.jsx)("div",{children:(0,n.jsx)(r.K0,{intent:"white-basic",icon:(0,n.jsx)(c.XWt,{}),size:"sm"})})]})}),(0,n.jsx)(a.a,{open:h.active,onOpenChange:h.off,title:"Edit rule",contentClass:"max-w-4xl",children:(0,n.jsx)(o.xC,{type:"edit",rule:m})})]})}},37723:(e,t,l)=>{l.d(t,{C9:()=>c,HX:()=>s,WI:()=>y,aT:()=>h,br:()=>m,dJ:()=>d,s3:()=>p,zM:()=>u});var n=l(19749),o=l(7675),r=l(74889),i=l(46278),a=l(69554);function s(){let e,t,l=(0,n.c)(3),s=(0,i.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[r.S.AUTO_DOWNLOADER.RunAutoDownloader.key],l[0]=e):e=l[0],l[1]!==s?(t={endpoint:r.S.AUTO_DOWNLOADER.RunAutoDownloader.endpoint,method:r.S.AUTO_DOWNLOADER.RunAutoDownloader.methods[0],mutationKey:e,onSuccess:async()=>{a.oR.success("Auto downloader started"),setTimeout(()=>{s.invalidateQueries({queryKey:[r.S.AUTO_DOWNLOADER.GetAutoDownloaderRules.key]})},1e3)}},l[1]=s,l[2]=t):t=l[2],(0,o.qk)(t)}function d(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:r.S.AUTO_DOWNLOADER.GetAutoDownloaderRules.endpoint,method:r.S.AUTO_DOWNLOADER.GetAutoDownloaderRules.methods[0],queryKey:[r.S.AUTO_DOWNLOADER.GetAutoDownloaderRules.key],enabled:!0},t[0]=e):e=t[0],(0,o.fl)(e)}function c(){let e,t,l=(0,n.c)(3),s=(0,i.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[r.S.AUTO_DOWNLOADER.CreateAutoDownloaderRule.key],l[0]=e):e=l[0],l[1]!==s?(t={endpoint:r.S.AUTO_DOWNLOADER.CreateAutoDownloaderRule.endpoint,method:r.S.AUTO_DOWNLOADER.CreateAutoDownloaderRule.methods[0],mutationKey:e,onSuccess:async()=>{await s.invalidateQueries({queryKey:[r.S.AUTO_DOWNLOADER.GetAutoDownloaderRules.key]}),await s.invalidateQueries({queryKey:[r.S.AUTO_DOWNLOADER.GetAutoDownloaderRulesByAnime.key]}),a.oR.success("Rule created")}},l[1]=s,l[2]=t):t=l[2],(0,o.qk)(t)}function u(){let e,t,l=(0,n.c)(3),s=(0,i.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[r.S.AUTO_DOWNLOADER.UpdateAutoDownloaderRule.key],l[0]=e):e=l[0],l[1]!==s?(t={endpoint:r.S.AUTO_DOWNLOADER.UpdateAutoDownloaderRule.endpoint,method:r.S.AUTO_DOWNLOADER.UpdateAutoDownloaderRule.methods[0],mutationKey:e,onSuccess:async()=>{await s.invalidateQueries({queryKey:[r.S.AUTO_DOWNLOADER.GetAutoDownloaderRules.key]}),await s.invalidateQueries({queryKey:[r.S.AUTO_DOWNLOADER.GetAutoDownloaderRulesByAnime.key]}),a.oR.success("Rule updated")}},l[1]=s,l[2]=t):t=l[2],(0,o.qk)(t)}function m(e){let t,l,s,d,c=(0,n.c)(10),u=(0,i.jE)();c[0]!==e?(t=r.S.AUTO_DOWNLOADER.DeleteAutoDownloaderRule.endpoint.replace("{id}",String(e)),c[0]=e,c[1]=t):t=c[1];let m=String(e);return c[2]!==m?(l=[r.S.AUTO_DOWNLOADER.DeleteAutoDownloaderRule.key,m],c[2]=m,c[3]=l):l=c[3],c[4]!==u?(s=async()=>{await u.invalidateQueries({queryKey:[r.S.AUTO_DOWNLOADER.GetAutoDownloaderRules.key]}),await u.invalidateQueries({queryKey:[r.S.AUTO_DOWNLOADER.GetAutoDownloaderRulesByAnime.key]}),a.oR.success("Rule deleted")},c[4]=u,c[5]=s):s=c[5],c[6]!==t||c[7]!==l||c[8]!==s?(d={endpoint:t,method:r.S.AUTO_DOWNLOADER.DeleteAutoDownloaderRule.methods[0],mutationKey:l,onSuccess:s},c[6]=t,c[7]=l,c[8]=s,c[9]=d):d=c[9],(0,o.qk)(d)}function p(e){let t,l,i=(0,n.c)(3),a=void 0===e||e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=[r.S.AUTO_DOWNLOADER.GetAutoDownloaderItems.key],i[0]=t):t=i[0],i[1]!==a?(l={endpoint:r.S.AUTO_DOWNLOADER.GetAutoDownloaderItems.endpoint,method:r.S.AUTO_DOWNLOADER.GetAutoDownloaderItems.methods[0],queryKey:t,enabled:a},i[1]=a,i[2]=l):l=i[2],(0,o.fl)(l)}function y(){let e,t,l=(0,n.c)(3),s=(0,i.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[r.S.AUTO_DOWNLOADER.DeleteAutoDownloaderItem.key],l[0]=e):e=l[0],l[1]!==s?(t={endpoint:r.S.AUTO_DOWNLOADER.DeleteAutoDownloaderItem.endpoint,method:r.S.AUTO_DOWNLOADER.DeleteAutoDownloaderItem.methods[0],mutationKey:e,onSuccess:async()=>{a.oR.success("Item deleted"),await s.invalidateQueries({queryKey:[r.S.AUTO_DOWNLOADER.GetAutoDownloaderItems.key]}),await s.invalidateQueries({queryKey:[r.S.AUTO_DOWNLOADER.GetAutoDownloaderRulesByAnime.key]})}},l[1]=s,l[2]=t):t=l[2],(0,o.qk)(t)}function h(e,t){let l,i,a,s=(0,n.c)(8);s[0]!==e?(l=r.S.AUTO_DOWNLOADER.GetAutoDownloaderRulesByAnime.endpoint.replace("{id}",String(e)),s[0]=e,s[1]=l):l=s[1];let d=String(e);return s[2]!==d?(i=[r.S.AUTO_DOWNLOADER.GetAutoDownloaderRulesByAnime.key,d],s[2]=d,s[3]=i):i=s[3],s[4]!==t||s[5]!==l||s[6]!==i?(a={endpoint:l,method:r.S.AUTO_DOWNLOADER.GetAutoDownloaderRulesByAnime.methods[0],queryKey:i,enabled:t},s[4]=t,s[5]=l,s[6]=i,s[7]=a):a=s[7],(0,o.fl)(a)}},48555:(e,t,l)=>{l.d(t,{Ib:()=>r,Qy:()=>o});var n=l(42500);let o=(0,n.eU)(void 0),r=(0,n.eU)({});(0,n.eU)({})},66792:(e,t,l)=>{l.d(t,{Dp:()=>c,Ex:()=>u,Ix:()=>s,Nl:()=>d});var n=l(19749),o=l(7675),r=l(74889),i=l(46278),a=l(69554);function s(e){let t,l,i=(0,n.c)(3);return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=[r.S.TORRENT_CLIENT.GetActiveTorrentList.key],i[0]=t):t=i[0],i[1]!==e?(l={endpoint:r.S.TORRENT_CLIENT.GetActiveTorrentList.endpoint,method:r.S.TORRENT_CLIENT.GetActiveTorrentList.methods[0],queryKey:t,refetchInterval:1500,gcTime:0,enabled:e},i[1]=e,i[2]=l):l=i[2],(0,o.fl)(l)}function d(e){let t,l,s=(0,n.c)(4),d=(0,i.jE)();return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=[r.S.TORRENT_CLIENT.TorrentClientAction.key],s[0]=t):t=s[0],s[1]!==e||s[2]!==d?(l={endpoint:r.S.TORRENT_CLIENT.TorrentClientAction.endpoint,method:r.S.TORRENT_CLIENT.TorrentClientAction.methods[0],mutationKey:t,onSuccess:async()=>{await d.invalidateQueries({queryKey:[r.S.TORRENT_CLIENT.GetActiveTorrentList.key]}),a.oR.success("Action performed"),null==e||e()}},s[1]=e,s[2]=d,s[3]=l):l=s[3],(0,o.qk)(l)}function c(e){let t,l,i=(0,n.c)(3);return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=[r.S.TORRENT_CLIENT.TorrentClientDownload.key],i[0]=t):t=i[0],i[1]!==e?(l={endpoint:r.S.TORRENT_CLIENT.TorrentClientDownload.endpoint,method:r.S.TORRENT_CLIENT.TorrentClientDownload.methods[0],mutationKey:t,onSuccess:async()=>{a.oR.success("Download started"),null==e||e()}},i[1]=e,i[2]=l):l=i[2],(0,o.qk)(l)}function u(){let e,t,l=(0,n.c)(3),s=(0,i.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[r.S.TORRENT_CLIENT.TorrentClientAddMagnetFromRule.key],l[0]=e):e=l[0],l[1]!==s?(t={endpoint:r.S.TORRENT_CLIENT.TorrentClientAddMagnetFromRule.endpoint,method:r.S.TORRENT_CLIENT.TorrentClientAddMagnetFromRule.methods[0],mutationKey:e,onSuccess:async()=>{a.oR.success("Download started"),await s.invalidateQueries({queryKey:[r.S.AUTO_DOWNLOADER.GetAutoDownloaderItems.key]})}},l[1]=s,l[2]=t):t=l[2],(0,o.qk)(t)}},68205:(e,t,l)=>{l.d(t,{l:()=>s,v:()=>d});var n=l(19749),o=l(7675),r=l(74889),i=l(46278),a=l(69554);function s(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:r.S.ANIME_COLLECTION.GetLibraryCollection.endpoint,method:r.S.ANIME_COLLECTION.GetLibraryCollection.methods[0],queryKey:[r.S.ANIME_COLLECTION.GetLibraryCollection.key],enabled:!0},t[0]=e):e=t[0],(0,o.fl)(e)}function d(){let e,t,l=(0,n.c)(3),s=(0,i.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[r.S.ANIME_COLLECTION.AddUnknownMedia.key],l[0]=e):e=l[0],l[1]!==s?(t={endpoint:r.S.ANIME_COLLECTION.AddUnknownMedia.endpoint,method:r.S.ANIME_COLLECTION.AddUnknownMedia.methods[0],mutationKey:e,onSuccess:async()=>{a.oR.success("Media added successfully"),await s.invalidateQueries({queryKey:[r.S.ANIME_COLLECTION.GetLibraryCollection.key]}),await s.invalidateQueries({queryKey:[r.S.ANIME_ENTRIES.GetAnimeEntry.key]}),await s.invalidateQueries({queryKey:[r.S.ANIME_ENTRIES.GetMissingEpisodes.key]})}},l[1]=s,l[2]=t):t=l[2],(0,o.qk)(t)}},69665:(e,t,l)=>{l.d(t,{H$:()=>k,xC:()=>R});var n=l(95155),o=l(19749),r=l(37723),i=l(96876),a=l(91180),s=l(37817),d=l(15155),c=l(84127),u=l(91360),m=l(35354),p=l(30033),y=l(98836),h=l(53712),f=l(12556),x=l(62477),b=l.n(x),v=l(35089),N=l(12115),T=l(21410),A=l(70376),O=l(28718),D=l(43994),S=l(41452),_=l(69554);let g=(0,m.Jo)(e=>{let{z:t}=e;return t.object({enabled:t.boolean(),mediaId:t.number().min(1),releaseGroups:t.array(t.string()).transform(e=>b()(e.filter(Boolean))),resolutions:t.array(t.string()).transform(e=>b()(e.filter(Boolean))),episodeNumbers:t.array(t.number()).transform(e=>b()(e.filter(Boolean))),additionalTerms:t.array(t.string()).transform(e=>b()(e.filter(Boolean))),comparisonTitle:t.string().min(1),titleComparisonType:t.string(),episodeType:t.string(),destination:t.string().min(1)})});function R(e){var t,l,s,d,c,u,p,y,h,f,x;let b,v,N,T,A,O,D,S,R,I,C,L,k,U,G=(0,o.c)(49),{type:W,rule:M,onRuleCreatedOrDeleted:K,mediaId:q}=e,F=(0,i.Ps)(),Q=(0,a.$)();G[0]!==F?(v=null!=F?F:[],G[0]=F,G[1]=v):v=G[1],b=v,G[2]!==b?(T=b.filter(E),G[2]=b,G[3]=T):T=G[3],N=T;let{mutate:H,isPending:B}=(0,r.C9)(),{mutate:P,isPending:V}=(0,r.zM)(),{mutate:z,isPending:X}=(0,r.br)(null==M?void 0:M.dbId),$=B||V||X;G[4]!==H||G[5]!==K||G[6]!==M||G[7]!==W||G[8]!==P?(A=function(e){if("selected"===e.episodeType&&0===e.episodeNumbers.length)return _.oR.error("You must specify at least one episode number");"create"===W&&H({...e,titleComparisonType:e.titleComparisonType,episodeType:e.episodeType},{onSuccess:()=>null==K?void 0:K()}),"edit"===W&&(null==M?void 0:M.dbId)&&P({rule:{...e,dbId:M.dbId||0,titleComparisonType:e.titleComparisonType,episodeType:e.episodeType}},{onSuccess:()=>null==K?void 0:K()})},G[4]=H,G[5]=K,G[6]=M,G[7]=W,G[8]=P,G[9]=A):A=G[9];let J=A;if("create"===W&&0===b.length){let e;return G[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"p-4 text-[--muted] text-center",children:"No media found in your library"}),G[10]=e):e=G[10],e}let Z=null==(l=null==M?void 0:M.enabled)||l,Y=null!=(s=null!=q?q:null==M?void 0:M.mediaId)?s:null==(t=N[0])?void 0:t.id;G[11]!==(null==M?void 0:M.releaseGroups)?(O=null!=(d=null==M?void 0:M.releaseGroups)?d:[],G[11]=null==M?void 0:M.releaseGroups,G[12]=O):O=G[12],G[13]!==(null==M?void 0:M.resolutions)?(D=null!=(c=null==M?void 0:M.resolutions)?c:[],G[13]=null==M?void 0:M.resolutions,G[14]=D):D=G[14];let ee=null!=(u=null==M?void 0:M.comparisonTitle)?u:"",et=null!=(p=null==M?void 0:M.titleComparisonType)?p:"likely",el=null!=(y=null==M?void 0:M.episodeType)?y:"recent";G[15]!==(null==M?void 0:M.episodeNumbers)?(S=null!=(h=null==M?void 0:M.episodeNumbers)?h:[],G[15]=null==M?void 0:M.episodeNumbers,G[16]=S):S=G[16];let en=null!=(f=null==M?void 0:M.destination)?f:"";return G[17]!==(null==M?void 0:M.additionalTerms)?(R=null!=(x=null==M?void 0:M.additionalTerms)?x:[],G[17]=null==M?void 0:M.additionalTerms,G[18]=R):R=G[18],G[19]!==et||G[20]!==el||G[21]!==S||G[22]!==en||G[23]!==R||G[24]!==Z||G[25]!==Y||G[26]!==O||G[27]!==D||G[28]!==ee?(I={enabled:Z,mediaId:Y,releaseGroups:O,resolutions:D,comparisonTitle:ee,titleComparisonType:et,episodeType:el,episodeNumbers:S,destination:en,additionalTerms:R},G[19]=et,G[20]=el,G[21]=S,G[22]=en,G[23]=R,G[24]=Z,G[25]=Y,G[26]=O,G[27]=D,G[28]=ee,G[29]=I):I=G[29],G[30]!==b||G[31]!==$||G[32]!==Q||G[33]!==q||G[34]!==N||G[35]!==M||G[36]!==W?(C=e=>(0,n.jsx)(w,{form:e,allMedia:b,mediaId:q,type:W,isPending:$,notFinishedMedia:N,libraryCollection:Q,rule:M}),G[30]=b,G[31]=$,G[32]=Q,G[33]=q,G[34]=N,G[35]=M,G[36]=W,G[37]=C):C=G[37],G[38]!==J||G[39]!==I||G[40]!==C?(L=(0,n.jsx)(m.lV,{schema:g,onSubmit:J,defaultValues:I,onError:j,children:C}),G[38]=J,G[39]=I,G[40]=C,G[41]=L):L=G[41],G[42]!==z||G[43]!==(null==M?void 0:M.dbId)||G[44]!==W?(k="edit"===W&&(0,n.jsx)(m.mw,{actionText:"Delete this rule",onDelete:()=>{(null==M?void 0:M.dbId)&&z()}}),G[42]=z,G[43]=null==M?void 0:M.dbId,G[44]=W,G[45]=k):k=G[45],G[46]!==L||G[47]!==k?(U=(0,n.jsxs)("div",{className:"space-y-4 mt-2",children:[L,k]}),G[46]=L,G[47]=k,G[48]=U):U=G[48],U}function j(){_.oR.error("An error occurred, verify the fields.")}function E(e){return"FINISHED"!==e.status}function w(e){var t,l,r,i,a,c,h,x,b,A;let _,g,R,j,E,w,U,G,W,M,K,q,F,Q,H,B,P,V,z,X,$,J,Z,Y,ee,et,el,en,eo,er,ei,ea,es,ed,ec,eu,em,ep,ey=(0,o.c)(86),{form:eh,allMedia:ef,mediaId:ex,type:eb,isPending:ev,notFinishedMedia:eN,libraryCollection:eT,rule:eA}=e,eO=(0,s.v1)();ey[0]===Symbol.for("react.memo_cache_sentinel")?(_={name:"mediaId"},ey[0]=_):_=ey[0];let eD=(0,T.FH)(_);ey[1]===Symbol.for("react.memo_cache_sentinel")?(g={name:"episodeType"},ey[1]=g):g=ey[1];let eS=(0,T.FH)(g);if(ey[2]!==ef||ey[3]!==eD){let e;ey[5]!==eD?(e=e=>e.id===Number(eD),ey[5]=eD,ey[6]=e):e=ey[6],R=ef.find(e),ey[2]=ef,ey[3]=eD,ey[4]=R}else R=ey[4];let e_=R;if(ey[7]!==ef||ey[8]!==eh||ey[9]!==eD||ey[10]!==(null==eT?void 0:eT.lists)||ey[11]!==eA||ey[12]!==(null==e_||null==(t=e_.title)?void 0:t.english)||ey[13]!==(null==e_||null==(l=e_.title)?void 0:l.romaji)||ey[14]!==(null==eO||null==(i=eO.settings)||null==(r=i.library)?void 0:r.libraryPath)||ey[15]!==eb?(j=()=>{var e,t,l,n,o,r,i,a,s;let d=Number(eD),c=null==eT||null==(n=eT.lists)||null==(l=n.flatMap(L))||null==(t=l.find(e=>{var t;return(null==e||null==(t=e.media)?void 0:t.id)===d}))||null==(e=t.libraryData)?void 0:e.sharedPath;if(!isNaN(d)&&!(null==eA?void 0:eA.comparisonTitle)){let e=ef.find(e=>e.id===d);e&&eh.setValue("comparisonTitle",(null==(o=e.title)?void 0:o.romaji)||"")}if(!eA){if(c)eh.setValue("destination",c);else if("create"===eb){let e=f.V.join(f.V.normalizeSafe((null==eO||null==(i=eO.settings)||null==(r=i.library)?void 0:r.libraryPath)||""),((null==e_||null==(a=e_.title)?void 0:a.romaji)||(null==e_||null==(s=e_.title)?void 0:s.english)||"").replace(/[<>:"/\\|?*\x00-\x1F.!`]/g," ").trim().replace(/^\.+|\.+$/g,"").replace(/\s+/g," ")||"Untitled");eh.setValue("destination",e)}}},ey[7]=ef,ey[8]=eh,ey[9]=eD,ey[10]=null==eT?void 0:eT.lists,ey[11]=eA,ey[12]=null==e_||null==(c=e_.title)?void 0:c.english,ey[13]=null==e_||null==(h=e_.title)?void 0:h.romaji,ey[14]=null==eO||null==(b=eO.settings)||null==(x=b.library)?void 0:x.libraryPath,ey[15]=eb,ey[16]=j):j=ey[16],ey[17]!==eD||ey[18]!==eT||ey[19]!==eA||ey[20]!==e_?(E=[eD,e_,eT,eA],ey[17]=eD,ey[18]=eT,ey[19]=eA,ey[20]=e_,ey[21]=E):E=ey[21],N.useEffect(j,E),!e_){let e;return ey[22]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"p-4 text-[--muted] text-center",children:"Media is not in your library"}),ey[22]=e):e=ey[22],e}ey[23]===Symbol.for("react.memo_cache_sentinel")?(w=(0,n.jsx)(m.D0.Switch,{name:"enabled",label:"Enabled"}),U=(0,n.jsx)(y.w,{}),G=(0,u.cn)("space-y-3"),ey[23]=w,ey[24]=U,ey[25]=G):(w=ey[23],U=ey[24],G=ey[25]),ey[26]!==eh||ey[27]!==eD||ey[28]!==ex||ey[29]!==eN||ey[30]!==e_||ey[31]!==eb?(W=!ex&&(0,n.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,n.jsx)("div",{className:"w-[6rem] h-[6rem] rounded-[--radius] flex-none object-cover object-center overflow-hidden relative bg-gray-800",children:!!(null==e_||null==(A=e_.coverImage)?void 0:A.large)&&(0,n.jsx)(v.default,{src:e_.coverImage.large,alt:"banner",fill:!0,quality:80,priority:!0,sizes:"20rem",className:"object-cover object-center"})}),(0,n.jsx)(p.l,{name:"mediaId",label:"Library Entry",options:eN.map(C).toSorted(I),value:String(eD),onValueChange:e=>eh.setValue("mediaId",parseInt(e)),help:ex?void 0:"The anime must be airing or upcoming",disabled:"edit"===eb||!!ex})]}),ey[26]=eh,ey[27]=eD,ey[28]=ex,ey[29]=eN,ey[30]=e_,ey[31]=eb,ey[32]=W):W=ey[32],ey[33]!==(null==e_?void 0:e_.status)?(M=(null==e_?void 0:e_.status)==="FINISHED"&&(0,n.jsx)("div",{className:"py-2 text-red-300 text-center",children:"This anime is no longer airing"}),ey[33]=null==e_?void 0:e_.status,ey[34]=M):M=ey[34],ey[35]===Symbol.for("react.memo_cache_sentinel")?(K=(0,n.jsx)(m.D0.DirectorySelector,{name:"destination",label:"Destination",help:"Folder in your local library where the files will be saved",leftIcon:(0,n.jsx)(O.WNP,{}),shouldExist:!1}),ey[35]=K):K=ey[35],ey[36]===Symbol.for("react.memo_cache_sentinel")?(q=(0,n.jsx)("div",{className:"absolute -top-2.5 tracking-wide font-semibold uppercase text-sm left-4 bg-gray-950 px-2",children:"Title"}),F=(0,n.jsx)(m.D0.Text,{name:"comparisonTitle",label:"Comparison title",help:"Used for comparison purposes. When using 'Exact match', use a title most likely to be used in a torrent name."}),ey[36]=q,ey[37]=F):(q=ey[36],F=ey[37]),ey[38]===Symbol.for("react.memo_cache_sentinel")?(Q={label:(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("p",{className:"mb-1 flex items-center",children:[(0,n.jsx)(S._IM,{className:"text-lg inline-block mr-2"}),"Most likely"]}),(0,n.jsx)("p",{className:"font-normal text-sm text-[--muted]",children:"The torrent name will be parsed and analyzed using a comparison algorithm"})]}),value:"likely"},ey[38]=Q):Q=ey[38],ey[39]===Symbol.for("react.memo_cache_sentinel")?(H=(0,n.jsxs)("div",{className:"border rounded-[--radius] p-4 relative !mt-8 space-y-3",children:[q,F,(0,n.jsx)(m.D0.RadioCards,{label:"Type of search",name:"titleComparisonType",options:[Q,{label:(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("p",{className:"mb-1 flex items-center",children:[(0,n.jsx)(D.Jeo,{className:"text-lg inline-block mr-2"}),"Exact match"]}),(0,n.jsx)("p",{className:"font-normal text-sm text-[--muted]",children:"The torrent name must contain the comparison title you set (case insensitive)"})]}),value:"contains"}]})]}),ey[39]=H):H=ey[39];let eg=((null==e_?void 0:e_.format)==="MOVIE"||!!e_.episodes&&1===e_.episodes)&&"opacity-50 pointer-events-none";ey[40]!==eg?(B=(0,u.cn)("border  rounded-[--radius] p-4 relative !mt-8 space-y-3",eg),ey[40]=eg,ey[41]=B):B=ey[41],ey[42]===Symbol.for("react.memo_cache_sentinel")?(P=(0,n.jsx)("div",{className:"absolute -top-2.5 tracking-wide font-semibold uppercase text-sm left-4 bg-gray-950 px-2",children:"Episodes"}),ey[42]=P):P=ey[42],ey[43]===Symbol.for("react.memo_cache_sentinel")?(V={label:(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("p",{children:"Recent releases"}),(0,n.jsx)("p",{className:"font-normal text-sm text-[--muted]",children:"New episodes you have not yet watched"})]}),value:"recent"},ey[43]=V):V=ey[43],ey[44]===Symbol.for("react.memo_cache_sentinel")?(z=(0,n.jsx)(m.D0.RadioCards,{name:"episodeType",label:"Episodes to look for",options:[V,{label:(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("p",{children:"Select"}),(0,n.jsx)("p",{className:"font-normal text-sm text-[--muted]",children:"Only the specified episodes that aren't in your library"})]}),value:"selected"}]}),ey[44]=z):z=ey[44],ey[45]!==eh.control||ey[46]!==eS?(X="selected"===eS&&(0,n.jsx)(k,{label:"Episode numbers",name:"episodeNumbers",control:eh.control,type:"number"}),ey[45]=eh.control,ey[46]=eS,ey[47]=X):X=ey[47],ey[48]!==B||ey[49]!==X?($=(0,n.jsxs)("div",{className:B,children:[P,z,X]}),ey[48]=B,ey[49]=X,ey[50]=$):$=ey[50],ey[51]===Symbol.for("react.memo_cache_sentinel")?(J=(0,n.jsx)("div",{className:"absolute -top-2.5 tracking-wide font-semibold uppercase text-sm left-4 bg-gray-950 px-2",children:"Release Groups"}),Z=(0,n.jsx)("p",{className:"text-sm",children:"List of release groups to look for. If empty, any release group will be accepted."}),ey[51]=J,ey[52]=Z):(J=ey[51],Z=ey[52]),ey[53]!==eh.control?(Y=(0,n.jsxs)("div",{className:"border rounded-[--radius] p-4 relative !mt-8 space-y-3",children:[J,Z,(0,n.jsx)(k,{name:"releaseGroups",control:eh.control,type:"text",placeholder:"e.g. SubsPlease",separatorText:"OR"})]}),ey[53]=eh.control,ey[54]=Y):Y=ey[54],ey[55]===Symbol.for("react.memo_cache_sentinel")?(ee=(0,n.jsx)("div",{className:"absolute -top-2.5 tracking-wide font-semibold uppercase text-sm left-4 bg-gray-950 px-2",children:"Resolutions"}),et=(0,n.jsx)("p",{className:"text-sm",children:"List of resolutions to look for. If empty, the highest resolution will be accepted."}),ey[55]=ee,ey[56]=et):(ee=ey[55],et=ey[56]),ey[57]!==eh.control?(el=(0,n.jsxs)("div",{className:"border rounded-[--radius] p-4 relative !mt-8 space-y-3",children:[ee,et,(0,n.jsx)(k,{name:"resolutions",control:eh.control,type:"text",placeholder:"e.g. 1080p",separatorText:"OR"})]}),ey[57]=eh.control,ey[58]=el):el=ey[58];let eR=(null==eA||null==(a=eA.additionalTerms)?void 0:a.length)?"more":void 0;return ey[59]===Symbol.for("react.memo_cache_sentinel")?(en=(0,n.jsx)(d.$m,{className:"border rounded-[--radius] bg-gray-900",children:"More filters"}),ey[59]=en):en=ey[59],ey[60]===Symbol.for("react.memo_cache_sentinel")?(eo=(0,n.jsx)("div",{className:"absolute -top-2.5 tracking-wide font-semibold uppercase text-sm left-4 bg-gray-950 px-2",children:"Additional terms"}),ey[60]=eo):eo=ey[60],ey[61]===Symbol.for("react.memo_cache_sentinel")?(er=(0,n.jsx)("span",{className:"text-red-100",children:"All options must be included for the torrent to be accepted."}),ey[61]=er):er=ey[61],ey[62]===Symbol.for("react.memo_cache_sentinel")?(ei=(0,n.jsx)("code",{className:"text-gray-400",children:" [Group] Torrent name [HEVC 10bit x265]"}),ey[62]=ei):ei=ey[62],ey[63]===Symbol.for("react.memo_cache_sentinel")?(ea=(0,n.jsx)("div",{children:(0,n.jsxs)("p",{className:"text-sm -top-2 relative",children:[er,' Within each option, you can include variations separated by commas. For example, adding "H265,H.265, H 265,x265" and "10bit,10-bit,10 bit" will match',ei," but not ",(0,n.jsx)("code",{className:"text-gray-400",children:"[Group] Torrent name [H265]"}),". Case insensitive."]})}),ey[63]=ea):ea=ey[63],ey[64]!==eh.control?(es=(0,n.jsxs)(d.As,{value:"more",children:[en,(0,n.jsx)(d.ub,{className:"pt-0",children:(0,n.jsxs)("div",{className:"border rounded-[--radius] p-4 relative !mt-8 space-y-3",children:[eo,ea,(0,n.jsx)(k,{name:"additionalTerms",control:eh.control,type:"text",placeholder:"e.g. H265,H.265,H 265,x265",separatorText:"AND"})]})})]}),ey[64]=eh.control,ey[65]=es):es=ey[65],ey[66]!==eR||ey[67]!==es?(ed=(0,n.jsx)(d.nD,{type:"single",collapsible:!0,className:"!my-4",defaultValue:eR,children:es}),ey[66]=eR,ey[67]=es,ey[68]=ed):ed=ey[68],ey[69]!==$||ey[70]!==Y||ey[71]!==el||ey[72]!==ed||ey[73]!==W||ey[74]!==M?(ec=(0,n.jsxs)("div",{className:G,children:[W,M,K,H,$,Y,el,ed]}),ey[69]=$,ey[70]=Y,ey[71]=el,ey[72]=ed,ey[73]=W,ey[74]=M,ey[75]=ec):ec=ey[75],ey[76]!==ev||ey[77]!==eb?(eu="create"===eb&&(0,n.jsx)(m.D0.Submit,{role:"create",loading:ev,disableOnSuccess:!1,showLoadingOverlayOnSuccess:!0,children:"Create"}),ey[76]=ev,ey[77]=eb,ey[78]=eu):eu=ey[78],ey[79]!==ev||ey[80]!==eb?(em="edit"===eb&&(0,n.jsx)(m.D0.Submit,{role:"update",loading:ev,children:"Update"}),ey[79]=ev,ey[80]=eb,ey[81]=em):em=ey[81],ey[82]!==ec||ey[83]!==eu||ey[84]!==em?(ep=(0,n.jsxs)(n.Fragment,{children:[w,U,ec,eu,em]}),ey[82]=ec,ey[83]=eu,ey[84]=em,ey[85]=ep):ep=ey[85],ep}function I(e,t){return e.label.localeCompare(t.label)}function C(e){var t;return{label:(null==(t=e.title)?void 0:t.userPreferred)||"N/A",value:String(e.id)}}function L(e){return e.entries}function k(e){let t,l,r,i,a,s,d,u=(0,o.c)(31);u[0]!==e.control||u[1]!==e.name?(t={control:e.control,name:e.name},u[0]=e.control,u[1]=e.name,u[2]=t):t=u[2];let{fields:m,append:p,remove:y}=(0,T.jz)(t);if(u[3]!==e.label?(l=e.label&&(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)("div",{className:"text-base font-semibold",children:e.label})}),u[3]=e.label,u[4]=l):l=u[4],u[5]!==m||u[6]!==e.control||u[7]!==e.name||u[8]!==e.placeholder||u[9]!==e.separatorText||u[10]!==e.type||u[11]!==y){let t;u[13]!==m.length||u[14]!==e.control||u[15]!==e.name||u[16]!==e.placeholder||u[17]!==e.separatorText||u[18]!==e.type||u[19]!==y?(t=(t,l)=>(0,n.jsxs)(N.Fragment,{children:[(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:["text"===e.type&&(0,n.jsx)(h.k,{...e.control.register("".concat(e.name,".").concat(l)),placeholder:e.placeholder}),"number"===e.type&&(0,n.jsx)(h.k,{type:"number",...e.control.register("".concat(e.name,".").concat(l),{valueAsNumber:!0,min:1,validate:U})}),(0,n.jsx)(c.Jn,{size:"sm",intent:"alert-subtle",onClick:()=>y(l)})]}),!!e.separatorText&&l<m.length-1&&(0,n.jsx)("p",{className:"text-center text-[--muted]",children:e.separatorText})]},t.id),u[13]=m.length,u[14]=e.control,u[15]=e.name,u[16]=e.placeholder,u[17]=e.separatorText,u[18]=e.type,u[19]=y,u[20]=t):t=u[20],r=m.map(t),u[5]=m,u[6]=e.control,u[7]=e.name,u[8]=e.placeholder,u[9]=e.separatorText,u[10]=e.type,u[11]=y,u[12]=r}else r=u[12];return u[21]!==p||u[22]!==e.type?(i=()=>p("number"===e.type?1:""),u[21]=p,u[22]=e.type,u[23]=i):i=u[23],u[24]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)(A.Ca6,{}),u[24]=a):a=u[24],u[25]!==i?(s=(0,n.jsx)(c.K0,{intent:"success",className:"rounded-full",onClick:i,icon:a}),u[25]=i,u[26]=s):s=u[26],u[27]!==l||u[28]!==r||u[29]!==s?(d=(0,n.jsxs)("div",{className:"space-y-2",children:[l,r,s]}),u[27]=l,u[28]=r,u[29]=s,u[30]=d):d=u[30],d}function U(e){return!isNaN(e)}},75006:(e,t,l)=>{l.d(t,{Z:()=>o,c:()=>r});var n=l(42500);let o=(0,n.eU)(void 0),r=(0,n.eU)(e=>{var t,l;return null==(l=e(o))||null==(t=l.lists)?void 0:t.length},(e,t,l)=>{var n,r;let i=null==(n=e(o))?void 0:n.lists;if(i)return null==(r=i.flatMap(e=>e.entries))?void 0:r.filter(Boolean).find(e=>e.mediaId===l)})},91180:(e,t,l)=>{l.d(t,{$:()=>d,m:()=>s});var n=l(19749),o=l(68205),r=l(75006),i=l(29724),a=l(12115);function s(){let e,t,l=(0,n.c)(7),s=(0,i.Xr)(r.Z),{data:d,status:c}=(0,o.l)();return l[0]!==d||l[1]!==s||l[2]!==c?(e=()=>{"success"===c&&s(d)},l[0]=d,l[1]=s,l[2]=c,l[3]=e):e=l[3],l[4]!==d||l[5]!==c?(t=[d,c],l[4]=d,l[5]=c,l[6]=t):t=l[6],a.useEffect(e,t),null}function d(){return(0,i.md)(r.Z)}},96876:(e,t,l)=>{l.d(t,{NZ:()=>s,Ps:()=>p,X_:()=>y});var n=l(19749),o=l(42094),r=l(48555),i=l(29724),a=l(12115);function s(){let e,t,l=(0,n.c)(6),s=(0,i.Xr)(r.Qy),p=(0,i.Xr)(r.Ib),{data:y}=(0,o.u)();return l[0]!==y||l[1]!==s||l[2]!==p?(e=()=>{if(y){var e,t,l,n,o,r,i,a,h,f;s(null!=(f=null==(o=y.MediaListCollection)||null==(n=o.lists)||null==(l=n.flatMap(m))||null==(t=l.filter(Boolean))||null==(e=t.map(u))?void 0:e.filter(Boolean))?f:[]),p((null==(h=y.MediaListCollection)||null==(a=h.lists)||null==(i=a.flatMap(c))||null==(r=i.filter(Boolean))?void 0:r.reduce(d,{}))||{})}},l[0]=y,l[1]=s,l[2]=p,l[3]=e):e=l[3],l[4]!==y?(t=[y],l[4]=y,l[5]=t):t=l[5],a.useEffect(e,t),null}function d(e,t){var l;return e[String(null==(l=t.media)?void 0:l.id)]={status:t.status,progress:t.progress||0,score:t.score||0,startedAt:t.startedAt?new Date(t.startedAt.year||0,(t.startedAt.month||1)-1,t.startedAt.day||1).toISOString():void 0,completedAt:t.completedAt?new Date(t.completedAt.year||0,(t.completedAt.month||1)-1,t.completedAt.day||1).toISOString():void 0},e}function c(e){return null==e?void 0:e.entries}function u(e){return e.media}function m(e){return null==e?void 0:e.entries}function p(){return(0,i.md)(r.Qy)}function y(e){return(0,i.md)(r.Ib)[String(e)]}}}]);