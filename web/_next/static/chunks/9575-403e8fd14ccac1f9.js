"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9575],{11983:(e,t,a)=>{a.d(t,{D0:()=>x,I:()=>b,Oj:()=>m,PF:()=>w,f1:()=>f,sC:()=>v,x8:()=>N});var n=a(19749),r=a(39076),l=a(50548),i=a(12459),s=a(93715),o=a(42500),d=a(29724),c=a(21842),u=a(4573),h=a.n(u),p=a(12115);let g=(0,o.eU)([]);function m(e){var t;let a=b(),[n,r]=(0,d.fp)(g);p.useEffect(()=>{r([])},[a]);let l=p.useCallback(e=>{r(t=>[...t,e])},[]);return{allPagesLoaded:n.length>0&&n.length===(null==e||null==(t=e.pages)?void 0:t.length),loadedPages:n,handlePageLoad:l}}let f=(0,c.tG)("sea-manga-chapter",void 0,void 0,{getOnInit:!0});function v(){return(0,d.Xr)(f)}function b(){return(0,d.md)(f)}function x(e,t){let a=b(),n=v(),i=(0,r.$0)(),o=p.useMemo(()=>{let n;if(!e||!a)return;let r=i.filter(e=>e.chapterId!==a.chapterId).sort((e,t)=>(0,l.Zf)(t.chapterNumber)-(0,l.Zf)(e.chapterNumber)).find(e=>(0,l.HH)(e.chapterNumber,a.chapterNumber)),s=r?{chapterId:r.chapterId,chapterNumber:r.chapterNumber,provider:r.provider,mediaId:Number(e)}:void 0;if(!(null==t?void 0:t.chapters))return s;let o=t.chapters.findIndex(e=>e.id===(null==a?void 0:a.chapterId));-1!==o&&t.chapters[o-1]&&(n={chapterId:t.chapters[o-1].id,chapterNumber:t.chapters[o-1].chapter,provider:t.chapters[o-1].provider,mediaId:t.mediaId});let d=t.chapters.filter(e=>e.id!==a.chapterId).sort((e,t)=>(0,l.Zf)(t.chapter)-(0,l.Zf)(e.chapter)).find(e=>(0,l.HH)(e.chapter,a.chapterNumber)),c=[s,n,d?{chapterId:d.id,chapterNumber:d.chapter,provider:d.provider,mediaId:t.mediaId}:void 0].filter(Boolean);if(0===c.length)return;if(1===c.length)return c[0];let u=c.reduce((e,t)=>e?t?Math.abs((0,l.Zf)(e.chapterNumber)-(0,l.Zf)(a.chapterNumber))<Math.abs((0,l.Zf)(t.chapterNumber)-(0,l.Zf)(a.chapterNumber))?e:t:e:t,c[0]);return s&&(0,l.Zf)(s.chapterNumber)===(0,l.Zf)(u.chapterNumber)?s:u},[e,a,i,null==t?void 0:t.chapters]),d=p.useMemo(()=>{let n;if(!e||!a)return;let r=i.filter(e=>e.chapterId!==a.chapterId).sort((e,t)=>(0,l.Zf)(e.chapterNumber)-(0,l.Zf)(t.chapterNumber)).find(e=>(0,l.Ge)(e.chapterNumber,a.chapterNumber)),s=r?{chapterId:r.chapterId,chapterNumber:r.chapterNumber,provider:r.provider,mediaId:Number(e)}:void 0;if(!(null==t?void 0:t.chapters))return s;let o=t.chapters.findIndex(e=>e.id===(null==a?void 0:a.chapterId));-1!==o&&t.chapters[o+1]&&(n={chapterId:t.chapters[o+1].id,chapterNumber:t.chapters[o+1].chapter,provider:t.chapters[o+1].provider,mediaId:t.mediaId});let d=t.chapters.filter(e=>e.id!==a.chapterId).sort((e,t)=>(0,l.Zf)(e.chapter)-(0,l.Zf)(t.chapter)).find(e=>(0,l.Ge)(e.chapter,a.chapterNumber)),c=[s,n,d?{chapterId:d.id,chapterNumber:d.chapter,provider:d.provider,mediaId:t.mediaId}:void 0].filter(Boolean);if(0===c.length)return;if(1===c.length)return c[0];let u=c.reduce((e,t)=>e?t?Math.abs((0,l.Zf)(e.chapterNumber)-(0,l.Zf)(a.chapterNumber))<Math.abs((0,l.Zf)(t.chapterNumber)-(0,l.Zf)(a.chapterNumber))?e:t:e:t,c[0]);return s&&(0,l.Zf)(s.chapterNumber)===(0,l.Zf)(u.chapterNumber)?s:u},[e,a,i,null==t?void 0:t.chapters]);return{goToChapter:p.useCallback(e=>{"previous"===e&&o?((0,s.v)("handle-chapter-reader").info("Going to previous chapter",o),n(o)):"next"===e&&d&&((0,s.v)("handle-chapter-reader").info("Going to next chapter",d),n(d))},[n,o,d]),previousChapter:o,nextChapter:d}}function N(e){let t,a,r=(0,n.c)(12),l=(0,d.md)(f),s=(0,d.md)(i.W6),o=(0,d.md)(i.h2),[c]=(0,d.fp)(i.a5),u=(0,d.Xr)(i.xY),h=(0,d.Xr)(i.uO);r[0]!==o||r[1]!==c||r[2]!==e||r[3]!==s||r[4]!==h||r[5]!==u?(t=()=>{var t,a,n,r,l,d,p,g;if(!(null==e||null==(t=e.pages)?void 0:t.length))return;let m={};if(s!==i.Oh.PAGED&&s!==i.Oh.LONG_STRIP&&e.pageDimensions&&0!==Object.keys(e.pageDimensions).length){let t=2e3,a=function(e){let t,a=new Map;e.forEach(e=>{a.set(e,(a.get(e)||0)+1)});let n=0;return a.forEach((e,a)=>{e>n&&(n=e,t=a)}),t}(Object.values(e.pageDimensions).map(O));a&&a>0&&(t=a+50);let i=new Map,s=0,o=0;for(;s<e.pages.length;){if(c>0&&s+1<=c){i.set(o,[e.pages[s].index]),s++,o++;continue}((null==(r=e.pageDimensions)||null==(n=r[s])?void 0:n.width)||0)>t?(i.set(o,[e.pages[s].index]),s++):e.pages[s+1]&&!((null==(d=e.pageDimensions)||null==(l=d[s+1])?void 0:l.width)&&(null==(g=e.pageDimensions)||null==(p=g[s+1])?void 0:p.width)>t)?(i.set(o,[e.pages[s].index,e.pages[s+1].index]),s+=2):(i.set(o,[e.pages[s].index]),s++),o++}i.forEach((e,t)=>{m[t]=e}),u(m),i.clear()}else{let t=0;for(;t<(null==e||null==(a=e.pages)?void 0:a.length);)m[t]=[t],t++;u(m)}let f=0;for(let[e,t]of Object.entries(m))if(t.includes(o)){f=Number(e);break}h(f)},r[0]=o,r[1]=c,r[2]=e,r[3]=s,r[4]=h,r[5]=u,r[6]=t):t=r[6];let g=null==e?void 0:e.pages;r[7]!==c||r[8]!==s||r[9]!==l||r[10]!==g?(a=[g,s,l,c],r[7]=c,r[8]=s,r[9]=l,r[10]=g,r[11]=a):a=r[11],p.useEffect(t,a)}function O(e){return e.width}function w(){let e,t,a=(0,n.c)(14),[r,l]=(0,d.fp)(i.W6),[s,o]=(0,d.fp)(i.E6),[c,u]=(0,d.fp)(i.DZ),[g,m]=(0,d.fp)(i.ll),f=E;a[0]!==c||a[1]!==g||a[2]!==s||a[3]!==r||a[4]!==u||a[5]!==m||a[6]!==o||a[7]!==l?(e=()=>(h().bind("m",()=>f(r,Object.values(i.Oh),l)),h().bind("d",()=>f(s,Object.values(i.uP),o)),h().bind("f",()=>f(c,Object.values(i.t$),u)),h().bind("s",()=>f(g,Object.values(i.x4),m)),A),a[0]=c,a[1]=g,a[2]=s,a[3]=r,a[4]=u,a[5]=m,a[6]=o,a[7]=l,a[8]=e):e=a[8],a[9]!==c||a[10]!==g||a[11]!==s||a[12]!==r?(t=[r,s,c,g],a[9]=c,a[10]=g,a[11]=s,a[12]=r,a[13]=t):t=a[13],p.useEffect(e,t)}function A(){h().unbind("m"),h().unbind("d"),h().unbind("f"),h().unbind("s")}function E(e,t,a){let n=(t.indexOf(e)+1)%t.length;a(t[n])}},12459:(e,t,a)=>{a.d(t,{Ai:()=>o,Ap:()=>h,DZ:()=>w,E6:()=>b,EX:()=>f,IZ:()=>d,LI:()=>c,Oh:()=>x,RN:()=>A,Vl:()=>m,W6:()=>N,a5:()=>y,gI:()=>g,h2:()=>l,ll:()=>D,od:()=>u,qF:()=>I,sP:()=>C,t$:()=>O,uO:()=>i,uP:()=>v,ud:()=>j,wQ:()=>L,x4:()=>E,xM:()=>p,xY:()=>s});var n=a(42500),r=a(21842);let l=(0,n.eU)(0),i=(0,n.eU)(0),s=(0,n.eU)({}),o=(0,n.eU)(!1),d=(0,r.tG)("sea-manga-entry-reader-settings",{}),c={kbsChapterLeft:"sea-manga-chapter-left",kbsChapterRight:"sea-manga-chapter-right",kbsPageLeft:"sea-manga-page-left",kbsPageRight:"sea-manga-page-right"},u={[c.kbsChapterLeft]:"[",[c.kbsChapterRight]:"]",[c.kbsPageLeft]:"left",[c.kbsPageRight]:"right"},h=(0,r.tG)(c.kbsChapterLeft,u[c.kbsChapterLeft]),p=(0,r.tG)(c.kbsChapterRight,u[c.kbsChapterRight]),g=(0,r.tG)(c.kbsPageLeft,u[c.kbsPageLeft]),m=(0,r.tG)(c.kbsPageRight,u[c.kbsPageRight]),f={readingMode:"sea-manga-reading-mode",readingDirection:"sea-manga-reading-direction",pageFit:"sea-manga-page-fit",pageStretch:"sea-manga-page-stretch",pageGap:"sea-manga-page-gap",pageGapShadow:"sea-manga-page-gap-shadow",doublePageOffset:"sea-manga-double-page-offset",overflowPageContainerWidth:"sea-manga-overflow-page-container-width"},v={LTR:"ltr",RTL:"rtl"},b=(0,r.tG)(f.readingDirection,v.LTR),x={LONG_STRIP:"long-strip",PAGED:"paged",DOUBLE_PAGE:"double-page"},N=(0,r.tG)(f.readingMode,x.LONG_STRIP),O={CONTAIN:"contain",LARGER:"larger",COVER:"cover",TRUE_SIZE:"true-size"},w=(0,r.tG)(f.pageFit,O.CONTAIN),A=(0,r.tG)(f.overflowPageContainerWidth,50),E={NONE:"none",STRETCH:"stretch"},D=(0,r.tG)(f.pageStretch,E.NONE),j=(0,r.tG)("sea-manga-reader-progress-bar",!1),I=(0,r.tG)(f.pageGap,!0),L=(0,r.tG)(f.pageGapShadow,!0),y=(0,r.tG)(f.doublePageOffset,0),C=(0,n.eU)(!1)},17205:(e,t,a)=>{a.d(t,{DO:()=>u,ID:()=>d,Iu:()=>g,UT:()=>p,Xu:()=>h,Ym:()=>m,ke:()=>o,nC:()=>c,pK:()=>f});var n=a(19749),r=a(7675),l=a(74889),i=a(46278),s=a(69554);function o(e,t){let a,s,o,d=(0,n.c)(8),c=(0,i.jE)(),u=String(e);return d[0]!==t||d[1]!==u?(a=[l.S.MANGA_DOWNLOAD.DownloadMangaChapters.key,u,t],d[0]=t,d[1]=u,d[2]=a):a=d[2],d[3]!==c?(s=async()=>{await c.invalidateQueries({queryKey:[l.S.MANGA_DOWNLOAD.GetMangaDownloadData.key]})},d[3]=c,d[4]=s):s=d[4],d[5]!==a||d[6]!==s?(o={endpoint:l.S.MANGA_DOWNLOAD.DownloadMangaChapters.endpoint,method:l.S.MANGA_DOWNLOAD.DownloadMangaChapters.methods[0],mutationKey:a,onSuccess:s},d[5]=a,d[6]=s,d[7]=o):o=d[7],(0,r.qk)(o)}function d(e){let t,a,i=(0,n.c)(7),s=String(e.mediaId),o=String(e.cached);i[0]!==s||i[1]!==o?(t=[l.S.MANGA_DOWNLOAD.GetMangaDownloadData.key,s,o],i[0]=s,i[1]=o,i[2]=t):t=i[2];let d=!!e.mediaId;return i[3]!==t||i[4]!==e||i[5]!==d?(a={endpoint:l.S.MANGA_DOWNLOAD.GetMangaDownloadData.endpoint,method:l.S.MANGA_DOWNLOAD.GetMangaDownloadData.methods[0],queryKey:t,data:e,enabled:d},i[3]=t,i[4]=e,i[5]=d,i[6]=a):a=i[6],(0,r.fl)(a)}function c(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:l.S.MANGA_DOWNLOAD.GetMangaDownloadQueue.endpoint,method:l.S.MANGA_DOWNLOAD.GetMangaDownloadQueue.methods[0],queryKey:[l.S.MANGA_DOWNLOAD.GetMangaDownloadQueue.key],enabled:!0},t[0]=e):e=t[0],(0,r.fl)(e)}function u(){let e,t,a=(0,n.c)(3),o=(0,i.jE)();return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=[l.S.MANGA_DOWNLOAD.StartMangaDownloadQueue.key],a[0]=e):e=a[0],a[1]!==o?(t={endpoint:l.S.MANGA_DOWNLOAD.StartMangaDownloadQueue.endpoint,method:l.S.MANGA_DOWNLOAD.StartMangaDownloadQueue.methods[0],mutationKey:e,onSuccess:async()=>{await o.invalidateQueries({queryKey:[l.S.MANGA_DOWNLOAD.GetMangaDownloadQueue.key]}),s.oR.info("Downloading chapters")}},a[1]=o,a[2]=t):t=a[2],(0,r.qk)(t)}function h(){let e,t,a=(0,n.c)(3),o=(0,i.jE)();return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=[l.S.MANGA_DOWNLOAD.StopMangaDownloadQueue.key],a[0]=e):e=a[0],a[1]!==o?(t={endpoint:l.S.MANGA_DOWNLOAD.StopMangaDownloadQueue.endpoint,method:l.S.MANGA_DOWNLOAD.StopMangaDownloadQueue.methods[0],mutationKey:e,onSuccess:async()=>{await o.invalidateQueries({queryKey:[l.S.MANGA_DOWNLOAD.GetMangaDownloadQueue.key]}),s.oR.success("Download queue stopped")}},a[1]=o,a[2]=t):t=a[2],(0,r.qk)(t)}function p(){let e,t,a=(0,n.c)(3),o=(0,i.jE)();return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=[l.S.MANGA_DOWNLOAD.ClearAllChapterDownloadQueue.key],a[0]=e):e=a[0],a[1]!==o?(t={endpoint:l.S.MANGA_DOWNLOAD.ClearAllChapterDownloadQueue.endpoint,method:l.S.MANGA_DOWNLOAD.ClearAllChapterDownloadQueue.methods[0],mutationKey:e,onSuccess:async()=>{await o.invalidateQueries({queryKey:[l.S.MANGA_DOWNLOAD.GetMangaDownloadQueue.key]}),s.oR.success("Download queue cleared")}},a[1]=o,a[2]=t):t=a[2],(0,r.qk)(t)}function g(){let e,t,a=(0,n.c)(3),o=(0,i.jE)();return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=[l.S.MANGA_DOWNLOAD.ResetErroredChapterDownloadQueue.key],a[0]=e):e=a[0],a[1]!==o?(t={endpoint:l.S.MANGA_DOWNLOAD.ResetErroredChapterDownloadQueue.endpoint,method:l.S.MANGA_DOWNLOAD.ResetErroredChapterDownloadQueue.methods[0],mutationKey:e,onSuccess:async()=>{await o.invalidateQueries({queryKey:[l.S.MANGA_DOWNLOAD.GetMangaDownloadQueue.key]}),s.oR.success("Reset errored chapters")}},a[1]=o,a[2]=t):t=a[2],(0,r.qk)(t)}function m(e,t){let a,o,d,c=(0,n.c)(8),u=(0,i.jE)(),h=String(e);return c[0]!==t||c[1]!==h?(a=[l.S.MANGA_DOWNLOAD.DeleteMangaDownloadedChapters.key,h,t],c[0]=t,c[1]=h,c[2]=a):a=c[2],c[3]!==u?(o=async()=>{await u.invalidateQueries({queryKey:[l.S.MANGA_DOWNLOAD.GetMangaDownloadData.key]}),s.oR.success("Chapters deleted")},c[3]=u,c[4]=o):o=c[4],c[5]!==a||c[6]!==o?(d={endpoint:l.S.MANGA_DOWNLOAD.DeleteMangaDownloadedChapters.endpoint,method:l.S.MANGA_DOWNLOAD.DeleteMangaDownloadedChapters.methods[0],mutationKey:a,onSuccess:o},c[5]=a,c[6]=o,c[7]=d):d=c[7],(0,r.qk)(d)}function f(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:l.S.MANGA_DOWNLOAD.GetMangaDownloadsList.endpoint,method:l.S.MANGA_DOWNLOAD.GetMangaDownloadsList.methods[0],queryKey:[l.S.MANGA_DOWNLOAD.GetMangaDownloadsList.key],enabled:!0},t[0]=e):e=t[0],(0,r.fl)(e)}},39076:(e,t,a)=>{a.d(t,{$0:()=>h,I2:()=>v,Sv:()=>p,Vb:()=>g});var n=a(19749),r=a(17205),l=a(24780),i=a(42500),s=a(29724),o=a(12115),d=a(69554);let c=(0,i.eU)(void 0),u=(0,i.eU)(e=>{let t=[],a=e(c);if(a){for(let e in a.downloaded)t=t.concat(a.downloaded[e].map(t=>({provider:e,chapterId:t.chapterId,chapterNumber:t.chapterNumber,queued:!1,downloaded:!0})));for(let e in a.queued)t=t.concat(a.queued[e].map(t=>({provider:e,chapterId:t.chapterId,chapterNumber:t.chapterNumber,queued:!0,downloaded:!1})))}return t});function h(){return(0,s.md)(u)}function p(e){let t,a,l,i,d=(0,n.c)(11),u=e?Number(e):void 0;d[0]!==u?(t={mediaId:u},d[0]=u,d[1]=t):t=d[1];let{data:h,isLoading:p,isError:g}=(0,r.ID)(t),m=(0,s.Xr)(c);return d[2]!==h||d[3]!==m?(a=()=>{m(h)},d[2]=h,d[3]=m,d[4]=a):a=d[4],d[5]!==h?(l=[h],d[5]=h,d[6]=l):l=d[6],o.useEffect(a,l),d[7]!==h||d[8]!==g||d[9]!==p?(i={downloadData:h,downloadDataLoading:p,downloadDataError:g},d[7]=h,d[8]=g,d[9]=p,d[10]=i):i=d[10],i}function g(e){let t,a,i=(0,n.c)(7),{selectedProvider:s}=(0,l.c2)(e),{mutate:o,isPending:d}=(0,r.ke)(e,s);return i[0]!==e||i[1]!==o||i[2]!==s?(t=t=>{s&&o({mediaId:Number(e),provider:s,chapterIds:t.map(f),startNow:!1},{onSuccess:m})},i[0]=e,i[1]=o,i[2]=s,i[3]=t):t=i[3],i[4]!==d||i[5]!==t?(a={downloadChapters:t,isSendingDownloadRequest:d},i[4]=d,i[5]=t,i[6]=a):a=i[6],a}function m(){d.oR.success("Chapters added to download queue")}function f(e){return e.id}function v(){let e,t=(0,n.c)(12),{data:a,isLoading:l,isError:i}=(0,r.nC)(),{mutate:s,isPending:o}=(0,r.DO)(),{mutate:d,isPending:c}=(0,r.Xu)(),{mutate:u,isPending:h}=(0,r.Iu)(),{mutate:p,isPending:g}=(0,r.UT)();return t[0]!==p||t[1]!==a||t[2]!==g||t[3]!==i||t[4]!==l||t[5]!==h||t[6]!==o||t[7]!==c||t[8]!==u||t[9]!==s||t[10]!==d?(e={downloadQueue:a,downloadQueueLoading:l,downloadQueueError:i,startDownloadQueue:s,isStartingDownloadQueue:o,stopDownloadQueue:d,isStoppingDownloadQueue:c,resetErroredChapters:u,isResettingErroredChapters:h,clearDownloadQueue:p,isClearingDownloadQueue:g},t[0]=p,t[1]=a,t[2]=g,t[3]=i,t[4]=l,t[5]=h,t[6]=o,t[7]=c,t[8]=u,t[9]=s,t[10]=d,t[11]=e):e=t[11],e}},39575:(e,t,a)=>{a.d(t,{A:()=>es});var n=a(95155),r=a(19749),l=a(38900),i=a(83563),s=a(37817),o=a(50548),d=a(84127),c=a(2091),u=a(93715),h=a(12115),p=a(3692),g=a(85530);function m(e){let t,a,l,i,s,u,m,f,b,x=(0,r.c)(33),{index:N,pageContainer:O,page:w,containerClass:A,imageClass:E,onFinishedLoading:D,imageWidth:j,imageMaxWidth:I,containerMaxWidth:L}=e,y=h.useRef(null),{isLoaded:C,isLoading:R,hasError:G,retry:k}=v(y);x[0]!==C||x[1]!==D?(t=()=>{C&&D&&D()},x[0]=C,x[1]=D,x[2]=t):t=x[2],x[3]!==C?(a=[C],x[3]=C,x[4]=a):a=x[4],(0,g.A)(t,a);let{getChapterPageUrl:_}=(0,o.WG)();if(!w)return null;x[5]!==L?(l={maxWidth:L},x[5]=L,x[6]=l):l=x[6];let P="page-".concat(N);x[7]!==R?(i=R&&(0,n.jsx)(c.kt,{"data-chapter-page-loading-spinner":!0,containerClass:"h-full absolute inset-0 z-[1] w-full mx-auto",tabIndex:-1}),x[7]=R,x[8]=i):i=x[8],x[9]!==G||x[10]!==k?(s=G&&(0,n.jsx)("div",{"data-chapter-page-retry-container":!0,className:"h-full w-full flex justify-center items-center absolute inset-0 z-[10]",id:"retry-container",tabIndex:-1,children:(0,n.jsx)(d.K0,{intent:"white",icon:(0,n.jsx)(p.Swo,{id:"retry-icon"}),onClick:k,id:"retry-button",tabIndex:-1})}),x[9]=G,x[10]=k,x[11]=s):s=x[11];let S=null==O?void 0:O.isDownloaded;x[12]!==_||x[13]!==w.headers||x[14]!==w.url||x[15]!==S?(u=_(w.url,S,w.headers),x[12]=_,x[13]=w.headers,x[14]=w.url,x[15]=S,x[16]=u):u=x[16];let M="Page ".concat(N);return x[17]!==I||x[18]!==j?(m={width:j,maxWidth:I},x[17]=I,x[18]=j,x[19]=m):m=x[19],x[20]!==E||x[21]!==N||x[22]!==u||x[23]!==M||x[24]!==m?(f=(0,n.jsx)("img",{"data-chapter-page-image":!0,"data-page-index":N,src:u,alt:M,className:E,style:m,ref:y,tabIndex:-1}),x[20]=E,x[21]=N,x[22]=u,x[23]=M,x[24]=m,x[25]=f):f=x[25],x[26]!==A||x[27]!==f||x[28]!==l||x[29]!==P||x[30]!==i||x[31]!==s?(b=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{"data-chapter-page-container":!0,className:A,style:l,id:P,tabIndex:-1,children:[i,s,f]})}),x[26]=A,x[27]=f,x[28]=l,x[29]=P,x[30]=i,x[31]=s,x[32]=b):b=x[32],b}let f={LOADING:"loading",RETRYING:"retrying",LOADED:"loaded",ERROR:"error"},v=e=>{let[t,a]=h.useState(f.LOADING),n=h.useRef(0),r=t===f.RETRYING,l=t===f.LOADED,i=t===f.LOADING||t===f.RETRYING,s=t===f.ERROR,o=h.useCallback(()=>{var t;n.current=0,a(f.LOADING);let r=null==(t=e.current)?void 0:t.src;r&&(e.current.src=r)},[]);return h.useEffect(()=>{if(!e.current)return;let t=e.current;if(!t)return;let r=[];if(t&&t.complete&&t.naturalWidth>0&&0===r.length)return void a(f.LOADED);let l=e=>{if((0,u.v)("chapter-page").info("retrying"),n.current>=3)return void a(f.ERROR);a(f.RETRYING),n.current=n.current+1;let t=setTimeout(()=>{let a=e.target;if(!a)return;let n=a.src;a.src=n,r.splice(r.indexOf(t),1)},1e3);r.push(t)},i=()=>{a(f.LOADED)};return t.addEventListener("error",l),t.addEventListener("load",i,{once:!0}),()=>{for(let e of(t.removeEventListener("error",l),t.removeEventListener("load",i),r.splice(0)))clearTimeout(e)}},[e,n]),{isLoaded:l,isLoading:i,isRetrying:r,hasError:s,retry:o}};var b=a(11983),x=a(12459),N=a(91360),O=a(55226),w=a(29724),A=a(4573),E=a.n(A);function D(e){var t,a;let{pageContainer:r}=e,l=h.useRef(null),i=h.useRef(null),s=(0,w.md)(x.W6),o=(0,w.Xr)(x.sP),d=(0,w.md)(x.E6),c=(0,w.md)(x.DZ),u=(0,w.md)(x.qF),p=(0,w.md)(x.wQ),f=(0,w.md)(x.RN),[v,A]=(0,w.fp)(x.Ai),D=(0,w.md)(x.gI),j=(0,w.md)(x.Vl),I=(0,w.Xr)(x.h2),L=(0,w.md)(x.xY),[y,C]=(0,w.fp)(x.uO);(0,b.x8)(r);let{handlePageLoad:R}=(0,b.Oj)(r);(0,g.A)(()=>{var e;null==(e=l.current)||e.scrollTo({top:0})},[y]),h.useEffect(()=>{o(Object.keys(L).length>0&&y===Object.keys(L).length-1)},[y,L]);let G=h.useCallback(e=>{let t="left"===e&&d===x.uP.LTR||"right"===e&&d===x.uP.RTL;C(e=>{let a=t?e-1:e+1;return L.hasOwnProperty(a)?a:e})},[L,d]);h.useEffect(()=>(E().bind(D,()=>G("left")),E().bind(j,()=>G("right")),E().bind("up",()=>{var e;null==(e=l.current)||e.scrollBy(0,-100)}),E().bind("down",()=>{var e;null==(e=l.current)||e.scrollBy(0,100)}),()=>{E().unbind(D),E().unbind(j),E().unbind("up"),E().unbind("down")}),[D,j,L,d]);let k=h.useCallback(e=>{if(!i.current||"retry-button"===e.target.id||"retry-icon"===e.target.id)return;let{clientX:t}=e.nativeEvent,a=i.current.offsetWidth,n=(t-i.current.getBoundingClientRect().left)/a*100;n<=40?G("left"):n>=60?G("right"):(0,O.Fr)()||A(e=>!e)},[G,i.current]);h.useEffect(()=>{var e;if(!(null==r||null==(e=r.pages)?void 0:e.length))return;let t=L[y];t&&I(t[0])},[y]);let _=h.useMemo(()=>L[y],[y,L]),P=s===x.Oh.DOUBLE_PAGE&&(null==_?void 0:_.length)===2,S=P&&u&&c!==x.t$.COVER&&c!==x.t$.TRUE_SIZE&&p;return(0,n.jsx)("div",{"data-chapter-horizontal-reader-container":!0,className:(0,N.cn)("h-[calc(100dvh-3rem)] overflow-y-hidden overflow-x-hidden w-full px-4 select-none relative",v&&"h-dvh max-h-full","focus-visible:outline-none",c===x.t$.COVER&&"overflow-y-auto",c===x.t$.TRUE_SIZE&&"overflow-y-auto",c===x.t$.LARGER&&"overflow-y-auto",c===x.t$.LARGER&&s===x.Oh.DOUBLE_PAGE&&"w-full px-40 mx-auto"),ref:l,tabIndex:-1,children:(0,n.jsx)("div",{"data-chapter-horizontal-reader-page-wrapper":!0,className:(0,N.cn)("focus-visible:outline-none",P&&s===x.Oh.DOUBLE_PAGE&&"flex transition-transform duration-300",P&&s===x.Oh.DOUBLE_PAGE&&u&&"gap-2",P&&s===x.Oh.DOUBLE_PAGE&&"flex-row-reverse"),ref:i,onClick:k,children:null==r||null==(a=r.pages)||null==(t=a.toSorted((e,t)=>e.index-t.index))?void 0:t.map((e,t)=>(0,n.jsx)(m,{page:e,index:t,readingMode:s,pageContainer:r,onFinishedLoading:()=>{R(t)},containerClass:(0,N.cn)("w-full h-[calc(100dvh-3rem)] scroll-div min-h-[200px] relative page",v&&"h-dvh max-h-full","focus-visible:outline-none",(null==_?void 0:_.includes(t))?"displayed":"hidden",S&&s===x.Oh.DOUBLE_PAGE&&(null==_?void 0:_[0])===t&&"before:content-[''] before:absolute before:w-[3%] before:z-[5] before:h-full before:[background:_linear-gradient(-90deg,_rgba(17,_17,_17,_0)_0,_rgba(17,_17,_17,_.3)_100%)]",S&&s===x.Oh.DOUBLE_PAGE&&(null==_?void 0:_[1])===t&&"before:content-[''] before:absolute before:right-0 before:w-[3%] before:z-[5] before:h-full before:[background:_linear-gradient(90deg,_rgba(17,_17,_17,_0)_0,_rgba(17,_17,_17,_.3)_100%)]",c===x.t$.LARGER&&"h-full"),imageClass:(0,N.cn)("focus-visible:outline-none","h-full inset-0 object-center select-none z-[4] relative",s===x.Oh.PAGED&&c===x.t$.CONTAIN&&"object-contain w-full h-full",s===x.Oh.PAGED&&c===x.t$.LARGER&&"h-auto object-cover mx-auto",s===x.Oh.PAGED&&c===x.t$.COVER&&"w-full h-auto",s===x.Oh.PAGED&&c===x.t$.TRUE_SIZE&&"object-none h-auto w-auto mx-auto",s===x.Oh.DOUBLE_PAGE&&c===x.t$.CONTAIN&&"object-contain w-full h-full",s===x.Oh.DOUBLE_PAGE&&c===x.t$.LARGER&&"w-[1400px] h-auto object-cover mx-auto",s===x.Oh.DOUBLE_PAGE&&c===x.t$.COVER&&"w-full h-auto",s===x.Oh.DOUBLE_PAGE&&c===x.t$.TRUE_SIZE&&(0,N.cn)("object-none h-auto w-auto",P&&(null==_?void 0:_[0])===t?"mr-auto":P&&(null==_?void 0:_[1])===t?"ml-auto":"mx-auto"),P&&(null==_?void 0:_[0])===t&&"[object-position:0%_50%] before:content-['']",P&&(null==_?void 0:_[1])===t&&"[object-position:100%_50%]"),imageWidth:c===x.t$.LARGER&&s===x.Oh.PAGED?f+"%":void 0},e.url))})})}var j=a(70274),I=a(42500),L=a(42463);let y=(0,I.eU)(0);function C(e){var t;let{pageContainer:a}=e,r=h.useRef(null),l=(0,w.Xr)(x.sP),i=(0,w.md)(x.DZ),s=(0,w.md)(x.ll),o=(0,w.md)(x.qF),d=(0,w.md)(x.RN),[c,u]=(0,w.fp)(x.h2),p=(0,w.fp)(x.xY),[g,f]=(0,w.fp)(x.Ai),v=(0,w.md)(x.gI),A=(0,w.md)(x.Vl);(0,b.x8)(a);let{handlePageLoad:D}=(0,b.Oj)(a);(0,L.A)(()=>{if(0!==c){var e;let t=null==(e=r.current)?void 0:e.querySelector("#page-".concat(c));null==t||t.scrollIntoView()}});let I=(0,w.md)(y);(0,j.w5)(()=>{var e;let t=null==(e=r.current)?void 0:e.querySelector("#page-".concat(c));null==t||t.scrollIntoView()},[I]);let C=()=>{if(r.current){var e,t,n;let i=r.current.scrollTop,s=r.current.scrollHeight,o=r.current.clientHeight;i>1e3&&(null==a||null==(e=a.pages)?void 0:e.length)&&i+o>=s-1500?l(!0):l(!1),null==(n=r.current)||null==(t=n.querySelectorAll(".scroll-div"))||t.forEach(e=>{var t;R(e)&&(null==a||null==(t=a.pages)?void 0:t.length)&&u(Number(e.id.split("-")[1]))})}};return h.useEffect(()=>{l(!1)},[null==a?void 0:a.pages]),h.useEffect(()=>{var e;return null==(e=r.current)||e.addEventListener("scroll",C),()=>{var e;return null==(e=r.current)?void 0:e.removeEventListener("scroll",C)}},[r.current]),h.useEffect(()=>(E().bind("up",()=>{var e;null==(e=r.current)||e.scrollBy(0,-100)}),E().bind("down",()=>{var e;null==(e=r.current)||e.scrollBy(0,100)}),()=>{E().unbind("up"),E().unbind("down")}),[p]),h.useEffect(()=>(E().bind(v,()=>{if(c>0){var e;let t=null==(e=r.current)?void 0:e.querySelector("#page-".concat(c-1));null==t||t.scrollIntoView()}}),E().bind(A,()=>{var e,t,n;if((null==a||null==(e=a.pages)?void 0:e.length)&&c<(null==a||null==(t=a.pages)?void 0:t.length)-1){let e=null==(n=r.current)?void 0:n.querySelector("#page-".concat(c+1));null==e||e.scrollIntoView()}}),()=>{E().unbind(v),E().unbind(A)}),[v,A,p]),(0,n.jsx)("div",{"data-chapter-vertical-reader-container":!0,className:(0,N.cn)("max-h-[calc(100dvh-3rem)] overflow-hidden relative focus-visible:outline-none",g&&"h-full max-h-full"),tabIndex:-1,onClick:()=>{(0,O.Fr)()||f(e=>!e)},children:(0,n.jsxs)("div",{"data-chapter-vertical-reader-inner-container":!0,className:(0,N.cn)("w-full h-[calc(100dvh-3rem)] overflow-y-auto overflow-x-hidden px-4 select-none relative focus-visible:outline-none",g&&"h-dvh",o&&"space-y-4",(0,O.Fr)()&&"hide-scrollbar"),ref:r,tabIndex:-1,children:[(0,n.jsx)("div",{"data-chapter-vertical-reader-inner-container-spacer":!0,className:"absolute w-full h-full z-[5] focus-visible:outline-none",tabIndex:-1}),null==a||null==(t=a.pages)?void 0:t.map((e,t)=>(0,n.jsx)(m,{page:e,index:t,readingMode:"paged",pageContainer:a,onFinishedLoading:()=>{0===t&&u(0),D(t)},containerClass:(0,N.cn)("mx-auto scroll-div min-h-[200px] relative focus-visible:outline-none",i===x.t$.CONTAIN&&"max-w-full h-[calc(100dvh-60px)]",i===x.t$.TRUE_SIZE&&"max-w-full",i===x.t$.COVER&&"max-w-full"),containerMaxWidth:i===x.t$.LARGER?d+"%":void 0,imageClass:(0,N.cn)("max-w-full h-auto mx-auto select-none z-[4] relative focus-visible:outline-none",i===x.t$.CONTAIN?s===x.x4.NONE?"w-auto h-full object-center":"object-fill w-full max-w-[1400px] h-full":void 0,i===x.t$.LARGER?s===x.x4.NONE?"w-auto h-full object-center":"w-full h-auto object-cover mx-auto":void 0,i===x.t$.COVER&&"w-full h-auto",i===x.t$.TRUE_SIZE&&"object-none h-auto w-auto mx-auto")},e.url))]})})}let R=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight;return!(Math.floor(100- -(100*((a.top>=0?0:a.top)/a.height)))<t||Math.floor(100-(a.bottom-n)/a.height*100)<t)};var G=a(15388),k=a(17934),_=a(76136),P=a(52885),S=a(98836),M=a(60695),T=a(78453),U=a(70376),W=a(27647),$=a(41452),F=a(28002),B=a(80893),q=a(68090),z=a(69554);let Q={itemClass:(0,N.cn)("border-transparent absolute top-2 right-2 bg-transparent dark:bg-transparent dark:data-[state=unchecked]:bg-transparent","data-[state=unchecked]:bg-transparent data-[state=unchecked]:hover:bg-transparent dark:data-[state=unchecked]:hover:bg-transparent","focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:ring-offset-transparent"),stackClass:"space-y-0 flex flex-wrap gap-2",itemIndicatorClass:"hidden",itemLabelClass:"font-normal tracking-wide line-clamp-1 truncate flex flex-col items-center data-[state=checked]:text-[--gray] cursor-pointer",itemContainerClass:(0,N.cn)("items-start cursor-pointer transition border-transparent rounded-[--radius] py-1.5 px-3 w-full","hover:bg-[--subtle] dark:bg-gray-900","data-[state=checked]:bg-white dark:data-[state=checked]:bg-gray-950","focus:ring-2 ring-transparent dark:ring-transparent outline-none ring-offset-1 ring-offset-[--background] focus-within:ring-2 transition","border border-transparent data-[state=checked]:border-[--gray] data-[state=checked]:ring-offset-0","w-fit")},Z=[{value:x.Oh.LONG_STRIP,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)(F.zN_,{className:"text-xl"})," ",(0,n.jsx)("span",{children:"Long Strip"})]})},{value:x.Oh.PAGED,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)(F.yIv,{className:"text-xl"})," ",(0,n.jsx)("span",{children:"Single Page"})]})},{value:x.Oh.DOUBLE_PAGE,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)($.sGl,{className:"text-xl"})," ",(0,n.jsx)("span",{children:"Double Page"})]})}],K=[{value:x.uP.LTR,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)("span",{children:"Left to Right"})," ",(0,n.jsx)(F.HNO,{className:"text-2xl"})]})},{value:x.uP.RTL,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)(F._R2,{className:"text-2xl"})," ",(0,n.jsx)("span",{children:"Right to Left"})]})}],X=[{value:x.t$.CONTAIN,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)(T._DL,{className:"text-xl"})," ",(0,n.jsx)("span",{children:"Contain"})]})},{value:x.t$.LARGER,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)(B.l6L,{className:"text-xl"})," ",(0,n.jsx)("span",{children:"Overflow"})]})},{value:x.t$.COVER,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)(T.byK,{className:"text-xl"})," ",(0,n.jsx)("span",{children:"Cover"})]})},{value:x.t$.TRUE_SIZE,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)(p.vqJ,{className:"text-xl"})," ",(0,n.jsx)("span",{children:"True size"})]})}],V=[{value:x.x4.NONE,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)($.sKx,{className:"text-xl"})," ",(0,n.jsx)("span",{children:"None"})]})},{value:x.x4.STRETCH,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)(W.vrE,{className:"text-xl"})," ",(0,n.jsx)("span",{children:"Stretch"})]})}],H=(0,I.eU)(!1);function Y(e){var t;let{mediaId:a,...r}=e,[l,i]=(0,w.fp)(x.E6),[s,o]=(0,w.fp)(x.W6),[c,u]=(0,w.fp)(x.DZ),[g,m]=(0,w.fp)(x.ll),[f,v]=(0,w.fp)(x.qF),[b,O]=(0,w.fp)(x.wQ),[A,E]=(0,w.fp)(x.a5),[D,j]=(0,w.fp)(x.RN),[I,L]=(0,w.fp)(x.ud),[y,C]=(0,w.fp)(x.Ai),{width:R}=(0,q.A)(),T=R<950,W=h.useMemo(()=>T?{[x.Oh.LONG_STRIP]:{pageFit:x.t$.COVER,pageStretch:x.x4.NONE},[x.Oh.PAGED]:{pageFit:x.t$.CONTAIN,pageStretch:x.x4.NONE},[x.Oh.DOUBLE_PAGE]:{pageFit:x.t$.CONTAIN,pageStretch:x.x4.NONE}}:{[x.Oh.LONG_STRIP]:{pageFit:x.t$.LARGER,pageStretch:x.x4.NONE},[x.Oh.PAGED]:{pageFit:x.t$.CONTAIN,pageStretch:x.x4.NONE},[x.Oh.DOUBLE_PAGE]:{pageFit:x.t$.CONTAIN,pageStretch:x.x4.NONE}},[T]),[$,F]=(0,w.fp)(x.IZ),B=h.useRef(!1);h.useEffect(()=>{if(!B.current&&$[a]){let e=$[a];i(e[x.EX.readingDirection]),o(e[x.EX.readingMode]),u(e[x.EX.pageFit]),m(e[x.EX.pageStretch]),v(e[x.EX.pageGap]),O(e[x.EX.pageGapShadow]),E(e[x.EX.doublePageOffset]),j(e[x.EX.overflowPageContainerWidth])}B.current=!0},[$[a]]),h.useEffect(()=>{F(e=>({...e,[a]:{[x.EX.readingDirection]:l,[x.EX.readingMode]:s,[x.EX.pageFit]:c,[x.EX.pageStretch]:g,[x.EX.pageGap]:f,[x.EX.pageGapShadow]:b,[x.EX.doublePageOffset]:A,[x.EX.overflowPageContainerWidth]:D}}))},[l,s,c,g,f,b,A,D]);let[Y,J]=(0,w.fp)(x.Ap),[ee,et]=(0,w.fp)(x.xM),[ea,en]=(0,w.fp)(x.gI),[er,el]=(0,w.fp)(x.Vl),ei=c===W[s].pageFit&&g===W[s].pageStretch,es=h.useCallback(e=>{switch(e){case x.LI.kbsChapterLeft:J(x.od[e]);break;case x.LI.kbsChapterRight:et(x.od[e]);break;case x.LI.kbsPageLeft:en(x.od[e]);break;case x.LI.kbsPageRight:el(x.od[e])}},[]),eo=(e,t)=>{for(let a of Object.values(x.LI))a!==e&&({[x.LI.kbsChapterLeft]:Y,[x.LI.kbsChapterRight]:ee,[x.LI.kbsPageLeft]:ea,[x.LI.kbsPageRight]:er})[a]===t&&es(a)},ed=(e,t)=>{if(e.preventDefault(),e.stopPropagation(),!["Control","Shift","Meta","Command","Alt","Option"].includes(e.key)){var a;let n="".concat(e.metaKey?"meta+":"").concat(e.ctrlKey?"ctrl+":"").concat(e.altKey?"alt+":"").concat(e.shiftKey?"shift+":"").concat(e.key.toLowerCase().replace("arrow","").replace("insert","ins").replace("delete","del").replace(" ","space").replace("+","plus")),r={[x.LI.kbsChapterLeft]:J,[x.LI.kbsChapterRight]:et,[x.LI.kbsPageLeft]:en,[x.LI.kbsPageRight]:el};null==(a=r[t])||a.call(r,n),eo(t,n)}};h.useEffect(()=>{s===x.Oh.DOUBLE_PAGE&&R<950&&o(e=>(z.oR.error("Double page mode is not supported on small screens."),x.Oh.LONG_STRIP))},[R,s]);let[ec,eu]=(0,w.fp)(H),[eh,ep]=(0,h.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(k.rI,{trigger:(0,n.jsx)(d.K0,{"data-chapter-reader-settings-dropdown-menu-trigger":!0,icon:(0,n.jsx)(U.nMM,{}),intent:"gray-basic",className:"flex lg:hidden"}),className:"block lg:hidden","data-chapter-reader-settings-dropdown-menu":!0,children:[(0,n.jsx)(k._2,{onClick:()=>eu(!0),children:"Open settings"}),(0,n.jsx)(k._2,{onClick:function(){let e=document.documentElement;eh&&document.exitFullscreen?(document.exitFullscreen(),ep(!1)):eh||(e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),ep(!0))},children:"Toggle fullscreen"}),(0,n.jsxs)(k._2,{onClick:()=>C(e=>!e),children:[y?"Show":"Hide"," bar"]})]}),(0,n.jsx)(G._s,{trigger:(0,n.jsx)(d.K0,{icon:(0,n.jsx)(U.nMM,{}),intent:"gray-basic",className:"hidden lg:flex"}),title:"Settings",allowOutsideInteraction:!1,open:ec,onOpenChange:eu,size:"lg",contentClass:"z-[51]","data-chapter-reader-settings-drawer":!0,children:(0,n.jsxs)("div",{className:"space-y-4 py-4","data-chapter-reader-settings-drawer-content":!0,children:[(0,n.jsx)(P.z,{...Q,label:"Reading Mode",options:Z,value:s,onValueChange:e=>(function(e){if(e===x.Oh.DOUBLE_PAGE&&R<950)return void z.oR.error("Double page mode is not supported on small screens.");o(e)})(e)}),(0,n.jsx)("div",{className:(0,N.cn)(s!==x.Oh.DOUBLE_PAGE&&"hidden"),children:(0,n.jsx)(_.Q,{label:"Offset",value:A,onValueChange:e=>E(e)})}),(0,n.jsx)("div",{className:(0,N.cn)(s===x.Oh.LONG_STRIP&&"opacity-50 pointer-events-none"),children:(0,n.jsx)(P.z,{...Q,label:"Reading Direction",options:K,value:l,onValueChange:e=>i(e)})}),(0,n.jsx)(P.z,{...Q,label:"Page Fit",options:X,value:c,onValueChange:e=>u(e)}),c===x.t$.LARGER&&(0,n.jsx)(_.Q,{label:"Page Container Width",max:100,min:0,rightAddon:"%",value:D,onValueChange:e=>j(e),disabled:s===x.Oh.DOUBLE_PAGE}),(0,n.jsx)("div",{className:(0,N.cn)((s!==x.Oh.LONG_STRIP||c!==x.t$.LARGER&&c!==x.t$.CONTAIN)&&"opacity-50 pointer-events-none"),children:(0,n.jsx)(P.z,{...Q,label:"Page Stretch",options:V,value:g,onValueChange:e=>m(e),help:"'Stretch' forces all pages to have the same width as the container in 'Long Strip' mode."})}),(0,n.jsxs)("div",{className:"flex gap-4 flex-wrap items-center",children:[(0,n.jsx)(M.d,{label:"Page Gap",value:f,onValueChange:v,fieldClass:"w-fit",size:"sm"}),(0,n.jsx)(M.d,{label:"Page Gap Shadow",value:b,onValueChange:O,fieldClass:"w-fit",disabled:!f,size:"sm"})]}),(0,n.jsx)(d.$n,{size:"sm",className:"rounded-full w-full",intent:"white-subtle",disabled:ei,onClick:()=>{u(W[s].pageFit),m(W[s].pageStretch)},children:(0,n.jsxs)("span",{className:"flex flex-none items-center",children:["Reset defaults for ",(0,n.jsx)("span",{className:"w-2"})," ",null==(t=Z.find(e=>e.value===s))?void 0:t.label]})}),(0,n.jsx)(S.w,{}),(0,n.jsx)("div",{className:"flex items-center gap-4",children:(0,n.jsx)(M.d,{label:"Progress Bar",value:I,onValueChange:L,fieldClass:"w-fit",size:"sm"})}),(0,n.jsx)(S.w,{}),!T&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{children:"Editable Keybindings"}),(0,n.jsx)("p",{className:"text-[--muted] text-xs",children:"Click to edit"})]}),[{key:x.LI.kbsChapterLeft,label:l===x.uP.LTR?"Previous chapter":"Next chapter",value:Y},{key:x.LI.kbsChapterRight,label:l===x.uP.LTR?"Next chapter":"Previous chapter",value:ee},{key:x.LI.kbsPageLeft,label:l===x.uP.LTR?"Previous page":"Next page",value:ea},{key:x.LI.kbsPageRight,label:l===x.uP.LTR?"Next page":"Previous page",value:er}].map(e=>(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)("div",{className:"",children:(0,n.jsx)(d.$n,{onKeyDownCapture:t=>ed(t,e.key),className:"focus:ring-2 focus:ring-[--brand] focus:ring-offset-1 focus-visible:ring-2 focus-visible:ring-[--brand] focus-visible:ring-offset-1",size:"sm",intent:"primary-subtle",id:"chapter-reader-settings-kbs-".concat(e.key),onClick:()=>{let t=document.getElementById("chapter-reader-settings-kbs-".concat(e.key));t&&t.focus()},children:e.value})}),(0,n.jsx)("label",{className:"text-[--gray]",children:(0,n.jsx)("span",{className:"font-semibold",children:e.label})}),e.value!==x.od[e.key]&&(0,n.jsx)(d.$n,{onClick:()=>{es(e.key)},className:"rounded-full",size:"sm",intent:"warning-subtle",leftIcon:(0,n.jsx)(p.Swo,{}),children:"Reset"})]},e.key)),(0,n.jsx)(S.w,{}),(0,n.jsx)("h4",{children:"Keyboard Shortcuts"}),[{key:"u",label:"Update progress and go to next chapter"},{key:"b",label:"Toggle bottom bar visibility"}].map(e=>(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)("div",{children:(0,n.jsx)(d.$n,{size:"sm",intent:"white-subtle",className:"pointer-events-none",children:e.key})}),(0,n.jsx)("p",{children:e.label})]},e.key))]})]})})]})}var J=a(63717),ee=a(75435),et=a(30033),ea=a(43994);function en(e){var t,a,r,l,i,s,o,c,u,p;let{children:g,previousChapter:m,nextChapter:f,pageContainer:v,entry:O,goToChapter:A,...E}=e,[D,j]=(0,w.fp)(b.f1),[I,L]=(0,w.fp)(x.h2),C=(0,w.md)(x.xY),R=(0,w.md)(x.DZ),G=(0,w.md)(x.ll),k=(0,w.md)(x.W6),_=(0,w.md)(x.E6),P=(0,w.md)(x.ud),S=(0,w.md)(x.Ai),M=h.useCallback(e=>{let{dir:t}=e;if(_===x.uP.RTL&&(k===x.Oh.PAGED||k===x.Oh.DOUBLE_PAGE))if("left"===t)return(0,n.jsx)(d.K0,{icon:(0,n.jsx)(ea.i84,{}),rounded:!0,intent:"white-outline",size:"sm",onClick:()=>{f&&O&&A("next")},disabled:!f,className:"border-transparent"});else return(0,n.jsx)(d.K0,{icon:(0,n.jsx)(ea.xCi,{}),rounded:!0,intent:"gray-outline",size:"sm",onClick:()=>{m&&O&&A("previous")},disabled:!m,className:"border-transparent"});return"left"===t?(0,n.jsx)(d.K0,{icon:(0,n.jsx)(ea.i84,{}),rounded:!0,intent:"gray-outline",size:"sm",onClick:()=>{m&&O&&A("previous")},disabled:!m,className:"border-transparent"}):(0,n.jsx)(d.K0,{icon:(0,n.jsx)(ea.xCi,{}),rounded:!0,intent:"white-outline",size:"sm",onClick:()=>{f&&O&&A("next")},disabled:!f,className:"border-transparent"})},[D,f,m,_,k]),T=h.useMemo(()=>{let e=0;for(let[t,a]of Object.entries(C))C[Number(t)].includes(I)&&(e=a[1]);return isNaN(e)||0===e||e===I?"":"-"+(e+1)},[I,C]),[W,$]=(0,w.fp)(x.uO),F=(0,w.Xr)(y),B=h.useCallback(e=>{k===x.Oh.PAGED?(L(e),$(e)):k===x.Oh.DOUBLE_PAGE?($(t=>{let a=Object.keys(C).find(t=>C[Number(t)].includes(e));return void 0===a?t:Number(a)}),L(e)):(L(e),F(e=>e+1))},[k,C]),{allPagesLoaded:q}=(0,b.Oj)(v);return O?(0,n.jsxs)(n.Fragment,{children:[v&&P&&q&&(0,n.jsx)("div",{"data-manga-reader-bar-container":!0,className:(0,N.cn)("bottom-12 w-full fixed z-10 hidden lg:block group/bp",S&&"bottom-0"),children:(0,n.jsx)("div",{"data-manga-reader-bar-inner-container":!0,className:"flex max-w-full items-center",children:null==(t=v.pages)?void 0:t.map((e,t)=>(0,n.jsx)("div",{"data-manga-reader-bar-pagination":!0,className:(0,N.cn)("w-full h-6 cursor-pointer","transition-all duration-200 bg-gradient-to-t via-transparent from-transparent from-10% to-transparent hover:from-gray-800",t===I&&"from-gray-800",t<I&&"from-[--subtle] from-5%"),onClick:()=>B(t),children:(0,n.jsx)("p",{className:(0,N.cn)("w-full h-full flex items-center rounded-t-md justify-center text-transparent group-hover/bp:text-[--muted] transition","hover:text-white hover:bg-gray-800",t===I&&"text-white hover:text-white group-hover/bp:text-white"),children:t+1})},t))})}),(0,n.jsxs)("div",{"data-manga-reader-bar":!0,className:(0,N.cn)("fixed bottom-0 w-full h-12 gap-4 flex items-center px-4 z-[10] bg-[var(--background)] transition-transform",S&&"translate-y-60"),id:"manga-reader-bar",children:[(0,n.jsx)(d.K0,{icon:(0,n.jsx)(U.Gsv,{}),rounded:!0,intent:"gray-outline",size:"xs",onClick:()=>j(void 0)}),(0,n.jsx)("h4",{"data-manga-reader-bar-title":!0,className:"lg:flex gap-1 items-center hidden",children:(0,n.jsx)("span",{className:"max-w-[180px] text-ellipsis truncate block",children:null==O||null==(r=O.media)||null==(a=r.title)?void 0:a.userPreferred})}),!!D&&(0,n.jsxs)("div",{"data-manga-reader-bar-chapter-nav-container":!0,className:"flex gap-3 items-center flex-none whitespace-nowrap ",children:[(0,n.jsx)(M,{dir:"left"}),(0,n.jsx)("span",{className:"hidden md:inline-block",children:"Chapter "}),"".concat(null==D?void 0:D.chapterNumber),(0,n.jsx)(M,{dir:"right"})]}),(0,n.jsx)("div",{"data-manga-reader-bar-spacer":!0,className:"flex flex-1"}),(0,n.jsxs)("div",{"data-manga-reader-bar-page-container":!0,className:"flex items-center gap-2",children:[v&&(0,n.jsx)(ee.A,{trigger:(0,n.jsx)(J.E,{size:"lg",className:"w-fit cursor-pointer rounded-[--radius-md] z-[5] flex bg-gray-950 items-center bottom-2 focus-visible:outline-none",tabIndex:-1,"data-manga-reader-bar-page-container-badge":!0,children:!!(I+1)&&(0,n.jsxs)("p",{className:"",children:[I+1,T,(0,n.jsxs)("span",{className:"text-[--muted]",children:[" / ",null==v||null==(l=v.pages)?void 0:l.length]})]})}),children:(0,n.jsx)(et.l,{"data-manga-reader-bar-page-container-select":!0,options:null!=(p=null==(i=v.pages)?void 0:i.map((e,t)=>({label:String(t+1),value:String(t)})))?p:[],value:String(I),onValueChange:e=>{B(Number(e))}})}),(0,n.jsx)("div",{"data-manga-reader-bar-info-container":!0,className:"hidden lg:flex",children:(0,n.jsxs)(ee.A,{modal:!0,trigger:(0,n.jsx)(d.K0,{icon:(0,n.jsx)(ea.MO8,{}),intent:"gray-basic",className:"opacity-50 outline-0",tabIndex:-1}),className:"text-[--muted] space-y-1",children:[(0,n.jsx)("div",{"data-manga-reader-bar-info-container-provider":!0,className:"hidden lg:block",children:(0,n.jsx)("p",{className:"text-[--muted] text-sm",children:null==D?void 0:D.provider})}),(0,n.jsxs)("div",{"data-manga-reader-bar-info-container-mode":!0,className:"flex items-center gap-1",children:[(0,n.jsx)("span",{className:"text-white w-6",children:"m:"}),null==(s=Z.find(e=>e.value===k))?void 0:s.label]}),(0,n.jsxs)("div",{"data-manga-reader-bar-info-container-fit":!0,className:"flex items-center gap-1",children:[(0,n.jsx)("span",{className:"text-white w-6",children:"f:"}),null==(o=X.find(e=>e.value===R))?void 0:o.label]}),G!==x.x4.NONE&&(0,n.jsxs)("div",{"data-manga-reader-bar-info-container-stretch":!0,className:"flex items-center gap-1",children:[(0,n.jsx)("span",{className:"text-white w-6",children:"s:"}),null==(c=V.find(e=>e.value===G))?void 0:c.label]}),k!==x.Oh.LONG_STRIP&&(0,n.jsxs)("div",{"data-manga-reader-bar-info-container-direction":!0,className:"flex items-center gap-1",children:[(0,n.jsx)("span",{className:"text-white w-6",children:"d:"}),(0,n.jsx)("span",{children:null==(u=K.find(e=>e.value===_))?void 0:u.label})]})]})}),(0,n.jsx)(Y,{mediaId:O.mediaId})]})]})]}):null}var er=a(3196),el=a(78106),ei=a(38310);function es(e){var t,a,o,u,p,g,m,f,v,O,A,j,I;let L,y,R,k,_,P,S,M,T,U,W,$,F,q,Q,Z,K,X,V,H,Y,J,ee,et,ea,es,ep,eg,em,ef,ev,eb=(0,r.c)(130),{entry:ex,chapterContainer:eN,chapterIdToNumbersMap:eO}=e,ew=(0,s.v1)();!function(e){var t,a,n,l,i,o,d,c;let u,p,g=(0,r.c)(11),m=(0,s.v1)(),f=(0,w.md)(b.f1),{mutate:v}=(0,er.NM)(),{mutate:x}=(0,er.P6)(),N=h.useRef();g[0]!==x||g[1]!==f||g[2]!==e||g[3]!==v||g[4]!==(null==m?void 0:m.isOffline)||g[5]!==(null==m||null==(a=m.settings)||null==(t=a.discord)?void 0:t.enableMangaRichPresence)||g[6]!==(null==m||null==(l=m.settings)||null==(n=l.discord)?void 0:n.enableRichPresence)?(u=()=>{var t,a,n,r,l,i,s,o,d,c,u,h,p,g,b,O;null!=m&&m.isOffline||((null==m||null==(a=m.settings)||null==(t=a.discord)?void 0:t.enableRichPresence)&&(null==m||null==(r=m.settings)||null==(n=r.discord)?void 0:n.enableMangaRichPresence)&&(f&&e&&e.media&&v({mediaId:null!=(O=null==(l=e.media)?void 0:l.id)?O:0,title:(null==(s=e.media)||null==(i=s.title)?void 0:i.userPreferred)||(null==(d=e.media)||null==(o=d.title)?void 0:o.romaji)||(null==(u=e.media)||null==(c=u.title)?void 0:c.english)||"Reading",image:(null==(p=e.media)||null==(h=p.coverImage)?void 0:h.large)||(null==(b=e.media)||null==(g=b.coverImage)?void 0:g.medium)||"",chapter:f.chapterNumber}),f||x()),N.current=f)},g[0]=x,g[1]=f,g[2]=e,g[3]=v,g[4]=null==m?void 0:m.isOffline,g[5]=null==m||null==(o=m.settings)||null==(i=o.discord)?void 0:i.enableMangaRichPresence,g[6]=null==m||null==(c=m.settings)||null==(d=c.discord)?void 0:d.enableRichPresence,g[7]=u):u=g[7],g[8]!==f||g[9]!==e?(p=[f,e],g[8]=f,g[9]=e,g[10]=p):p=g[10],h.useEffect(u,p)}(ex);let eA=(0,b.I)(),eE=(0,b.sC)(),eD=(0,w.Xr)(x.h2),ej=(0,w.Xr)(x.uO),[eI,eL]=(0,w.fp)(x.W6),ey=(0,w.md)(x.sP),eC=(0,w.md)(x.Ap),eR=(0,w.md)(x.xM),eG=(0,w.md)(x.xY),ek=(0,w.md)(x.E6),[e_,eP]=(0,w.fp)(x.Ai);(0,b.PF)();let{inject:eS,remove:eM}=(0,i.H)(),eT=null==ex||null==(t=ex.media)?void 0:t.id,eU=null==eA?void 0:eA.chapterId,eW=null==eA?void 0:eA.provider,e$=eI===x.Oh.DOUBLE_PAGE;eb[0]!==eT||eb[1]!==eU||eb[2]!==eW||eb[3]!==e$?(L={mediaId:eT,chapterId:eU,provider:eW,doublePage:e$},eb[0]=eT,eb[1]=eU,eb[2]=eW,eb[3]=e$,eb[4]=L):L=eb[4];let{data:eF,isLoading:eB,isError:eq,refetch:ez}=(0,l.sJ)(L),{mutate:eQ,isPending:eZ}=(0,l.WA)(ex.mediaId);eb[5]!==eA||eb[6]!==eF||eb[7]!==eq||eb[8]!==eB||eb[9]!==eI||eb[10]!==eL?(y=()=>{!eA||eI!==x.Oh.DOUBLE_PAGE||eB||eq||(null==eF?void 0:eF.pageDimensions)&&0!==Object.keys(eF.pageDimensions).length||(z.oR.error("Could not get page dimensions from this provider. Switching to paged mode."),eL(x.Oh.PAGED))},eb[5]=eA,eb[6]=eF,eb[7]=eq,eb[8]=eB,eb[9]=eI,eb[10]=eL,eb[11]=y):y=eb[11],eb[12]!==eA||eb[13]!==eF||eb[14]!==eq||eb[15]!==eB||eb[16]!==eI?(R=[eA,eF,eB,eq,eI],eb[12]=eA,eb[13]=eF,eb[14]=eq,eb[15]=eB,eb[16]=eI,eb[17]=R):R=eb[17],h.useEffect(y,R);let{previousChapter:eK,nextChapter:eX,goToChapter:eV}=(0,b.D0)(ex.mediaId,eN);e:{let e=eO.get((null==eA?void 0:eA.chapterId)||"");if(!e){k=!1;break e}if(!(null==(v=ex.listData)?void 0:v.progress)){k=!0;break e}k=e>ex.listData.progress}let eH=k;eb[18]!==eO||eb[19]!==(null==eA?void 0:eA.chapterId)||eb[20]!==(null==(a=ex.media)?void 0:a.chapters)||eb[21]!==(null==(o=ex.media)?void 0:o.idMal)||eb[22]!==ex.mediaId||eb[23]!==eV||eb[24]!==eZ||eb[25]!==eH||eb[26]!==eQ?(_=e=>{let t=void 0===e||e;if(eH&&!eZ){var a,n;eQ({chapterNumber:eO.get((null==eA?void 0:eA.chapterId)||"")||0,mediaId:ex.mediaId,malId:(null==(a=ex.media)?void 0:a.idMal)||void 0,totalChapters:(null==(n=ex.media)?void 0:n.chapters)||0},{onSuccess:()=>{t&&eV("next")}})}},eb[18]=eO,eb[19]=null==eA?void 0:eA.chapterId,eb[20]=null==(O=ex.media)?void 0:O.chapters,eb[21]=null==(A=ex.media)?void 0:A.idMal,eb[22]=ex.mediaId,eb[23]=eV,eb[24]=eZ,eb[25]=eH,eb[26]=eQ,eb[27]=_):_=eb[27];let eY=_,eJ=h.useRef(null);eb[28]!==(null==eA?void 0:eA.chapterId)||eb[29]!==eY||eb[30]!==ey||eb[31]!==eq||eb[32]!==eB||eb[33]!==(null==ew||null==(p=ew.settings)||null==(u=p.manga)?void 0:u.mangaAutoUpdateProgress)||eb[34]!==eH?(P=()=>{var e,t;(null==ew||null==(t=ew.settings)||null==(e=t.manga)?void 0:e.mangaAutoUpdateProgress)&&(null==eA?void 0:eA.chapterId)&&eH&&!eB&&!eq&&ey&&eJ.current!==(null==eA?void 0:eA.chapterId)&&(eY(!1),eJ.current=null==eA?void 0:eA.chapterId)},eb[28]=null==eA?void 0:eA.chapterId,eb[29]=eY,eb[30]=ey,eb[31]=eq,eb[32]=eB,eb[33]=null==ew||null==(I=ew.settings)||null==(j=I.manga)?void 0:j.mangaAutoUpdateProgress,eb[34]=eH,eb[35]=P):P=eb[35];let e0=null==ew||null==(m=ew.settings)||null==(g=m.manga)?void 0:g.mangaAutoUpdateProgress;eb[36]!==eA||eb[37]!==ey||eb[38]!==eq||eb[39]!==eB||eb[40]!==eH||eb[41]!==e0?(S=[eA,e0,eH,ey,eq,eB],eb[36]=eA,eb[37]=ey,eb[38]=eq,eb[39]=eB,eb[40]=eH,eb[41]=e0,eb[42]=S):S=eb[42],h.useEffect(P,S);let e1=h.useRef(null==eA?void 0:eA.chapterId);eb[43]!==(null==eA?void 0:eA.chapterId)||eb[44]!==eD||eb[45]!==ej?(M=()=>{(null==eA?void 0:eA.chapterId)!==e1.current&&(eD(0),ej(0),e1.current=null==eA?void 0:eA.chapterId)},eb[43]=null==eA?void 0:eA.chapterId,eb[44]=eD,eb[45]=ej,eb[46]=M):M=eb[46];let e2=null==eF?void 0:eF.pages,e5=null==eN?void 0:eN.chapters;eb[47]!==e2||eb[48]!==e5?(T=[e2,e5],eb[47]=e2,eb[48]=e5,eb[49]=T):T=eb[49],h.useEffect(M,T),eb[50]!==eY?(U=()=>(E().bind("u",()=>{eY()}),eh),eb[50]=eY,eb[51]=U):U=eb[51];let e4=null==eF?void 0:eF.pages,e3=null==eN?void 0:eN.chapters;eb[52]!==ey||eb[53]!==eH||eb[54]!==e4||eb[55]!==e3?(W=[e4,e3,eH,ey],eb[52]=ey,eb[53]=eH,eb[54]=e4,eb[55]=e3,eb[56]=W):W=eb[56],h.useEffect(U,W),eb[57]!==eP?($=()=>(E().bind("b",()=>{eP(eu)}),ec),eb[57]=eP,eb[58]=$):$=eb[58],eb[59]===Symbol.for("react.memo_cache_sentinel")?(F=[],eb[59]=F):F=eb[59],h.useEffect($,F),eb[60]!==eV||eb[61]!==eC||eb[62]!==eR||eb[63]!==ek?(q=()=>(E().bind(eC,()=>{ek===x.uP.LTR?eV("previous"):eV("next")}),E().bind(eR,()=>{ek===x.uP.RTL?eV("previous"):eV("next")}),()=>{E().unbind(eC),E().unbind(eR)}),eb[60]=eV,eb[61]=eC,eb[62]=eR,eb[63]=ek,eb[64]=q):q=eb[64],eb[65]!==eN||eb[66]!==eC||eb[67]!==eR||eb[68]!==eX||eb[69]!==eG||eb[70]!==eK||eb[71]!==ek?(Q=[eC,eR,eG,ek,eN,eK,eX],eb[65]=eN,eb[66]=eC,eb[67]=eR,eb[68]=eX,eb[69]=eG,eb[70]=eK,eb[71]=ek,eb[72]=Q):Q=eb[72],h.useEffect(q,Q),eb[73]!==eA||eb[74]!==eS||eb[75]!==eM||eb[76]!==eE?(Z=()=>{if(eA)return eS("close-manga-reader",{items:[{id:"close-reader",value:"Close reader",heading:"Reader",priority:100,render:ed,onSelect:()=>eE(void 0)}],filter:eo,priority:105}),()=>eM("close-manga-reader")},eb[73]=eA,eb[74]=eS,eb[75]=eM,eb[76]=eE,eb[77]=Z):Z=eb[77],eb[78]!==eA?(K=[eA],eb[78]=eA,eb[79]=K):K=eb[79],h.useEffect(Z,K);let e6=!!eA;eb[80]!==eE?(X=()=>eE(void 0),eb[80]=eE,eb[81]=X):X=eb[81],eb[82]===Symbol.for("react.memo_cache_sentinel")?(V=(0,N.cn)("p-0 pt-0 !m-0 !rounded-none","w-full inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom"),eb[82]=V):V=eb[82],eb[83]!==e_||eb[84]!==ey||eb[85]!==eq||eb[86]!==eB||eb[87]!==eH?(H=(0,N.cn)("fixed left-0 w-full z-[6] opacity-0 transition-opacity hidden duration-500","desktop"!==ei.env.NEXT_PUBLIC_PLATFORM&&"top-0 justify-center","desktop"===ei.env.NEXT_PUBLIC_PLATFORM&&(0,N.cn)("bottom-12",e_&&"bottom-0 justify-left"),eH&&ey&&!eB&&!eq&&"flex opacity-100"),eb[83]=e_,eb[84]=ey,eb[85]=eq,eb[86]=eB,eb[87]=eH,eb[88]=H):H=eb[88],eb[89]!==eY?(Y=()=>eY(),eb[89]=eY,eb[90]=Y):Y=eb[90],eb[91]===Symbol.for("react.memo_cache_sentinel")?(J=(0,N.cn)("desktop"!==ei.env.NEXT_PUBLIC_PLATFORM&&"rounded-tl-none rounded-tr-none","desktop"===ei.env.NEXT_PUBLIC_PLATFORM&&"rounded-bl-none rounded-br-none rounded-tl-none"),eb[91]=J):J=eb[91],eb[92]!==eO||eb[93]!==(null==eA?void 0:eA.chapterId)?(ee=eO.get((null==eA?void 0:eA.chapterId)||""),eb[92]=eO,eb[93]=null==eA?void 0:eA.chapterId,eb[94]=ee):ee=eb[94];let e7=(null==ex||null==(f=ex.media)?void 0:f.chapters)||"-";eb[95]!==eZ||eb[96]!==Y||eb[97]!==ee||eb[98]!==e7?(et=(0,n.jsxs)(d.$n,{onClick:Y,className:J,size:"md",intent:"success",loading:eZ,disabled:eZ,children:["Update progress (",ee," / ",e7,")"]}),eb[95]=eZ,eb[96]=Y,eb[97]=ee,eb[98]=e7,eb[99]=et):et=eb[99],eb[100]!==H||eb[101]!==et?(ea=(0,n.jsx)("div",{"data-chapter-reader-drawer-progress-container":!0,className:H,tabIndex:-1,children:et}),eb[100]=H,eb[101]=et,eb[102]=ea):ea=eb[102],eb[103]!==e_||eb[104]!==eP?(es=e_&&(0,n.jsx)("div",{"data-chapter-reader-drawer-exit-fullscreen-button":!0,className:"fixed right-0 bottom-4 group/hiddenBarArea z-[10] px-4",children:(0,n.jsx)(d.K0,{rounded:!0,icon:(0,n.jsx)(B.n0S,{}),intent:"white-outline",size:"sm",onClick:()=>eP(!1),className:"lg:opacity-0 opacity-30 group-hover/hiddenBarArea:opacity-100 transition-opacity duration-200"})}),eb[103]=e_,eb[104]=eP,eb[105]=es):es=eb[105],eb[106]!==ex||eb[107]!==eV||eb[108]!==eX||eb[109]!==eF||eb[110]!==eK?(ep=(0,n.jsx)(en,{previousChapter:eK,nextChapter:eX,goToChapter:eV,pageContainer:eF,entry:ex}),eb[106]=ex,eb[107]=eV,eb[108]=eX,eb[109]=eF,eb[110]=eK,eb[111]=ep):ep=eb[111];let e9=e_&&"max-h-dvh";return eb[112]!==e9?(eg=(0,N.cn)("max-h-[calc(100dvh-3rem)] h-full",e9),eb[112]=e9,eb[113]=eg):eg=eb[113],eb[114]!==eF||eb[115]!==eq||eb[116]!==eB||eb[117]!==eI||eb[118]!==ez?(em=eq?(0,n.jsxs)(el.D,{title:"Failed to load pages",children:[(0,n.jsx)("p",{children:"An error occurred while trying to load pages for this chapter."}),(0,n.jsx)("p",{children:"Reload the page, reload sources or change the source."}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(d.$n,{intent:"white",onClick:()=>ez(),children:"Retry"})})]}):eB?(0,n.jsx)(c.kt,{containerClass:"h-full"}):eI===x.Oh.LONG_STRIP?(0,n.jsx)(C,{pageContainer:eF}):eI===x.Oh.PAGED||eI===x.Oh.DOUBLE_PAGE?(0,n.jsx)(D,{pageContainer:eF}):null,eb[114]=eF,eb[115]=eq,eb[116]=eB,eb[117]=eI,eb[118]=ez,eb[119]=em):em=eb[119],eb[120]!==eg||eb[121]!==em?(ef=(0,n.jsx)("div",{"data-chapter-reader-drawer-content":!0,className:eg,tabIndex:-1,children:em}),eb[120]=eg,eb[121]=em,eb[122]=ef):ef=eb[122],eb[123]!==e6||eb[124]!==X||eb[125]!==ea||eb[126]!==es||eb[127]!==ep||eb[128]!==ef?(ev=(0,n.jsxs)(G._s,{"data-chapter-reader-drawer":!0,open:e6,onOpenChange:X,size:"full",side:"bottom",headerClass:"absolute h-0",contentClass:V,hideCloseButton:!0,mangaReader:!0,children:[ea,es,ep,ef]}),eb[123]=e6,eb[124]=X,eb[125]=ea,eb[126]=es,eb[127]=ep,eb[128]=ef,eb[129]=ev):ev=eb[129],ev}function eo(e){let{item:t,input:a}=e;return!a||t.value.toLowerCase().includes(a.toLowerCase())}function ed(){return(0,n.jsx)("div",{className:"flex gap-1 items-center w-full",children:(0,n.jsx)("p",{children:"Close reader"})})}function ec(){E().unbind("b")}function eu(e){return!e}function eh(){E().unbind("u")}},50548:(e,t,a)=>{a.d(t,{Ge:()=>d,HH:()=>o,QO:()=>i,WG:()=>c,Zf:()=>s,hE:()=>h,v0:()=>p});var n=a(19749),r=a(45886),l=a(12115);function i(e){var t;let a=null==(t=e.match(/(\d+(\.\d+)?)/))?void 0:t[0];return a?Math.floor(parseFloat(a)):0}function s(e){var t;let a=null==(t=e.match(/(\d+(\.\d+)?)/))?void 0:t[0];return a?parseFloat(a):0}function o(e,t){return s(e)<s(t)}function d(e,t){return s(e)>s(t)}function c(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={getChapterPageUrl:u},t[0]=e):e=t[0],e}function u(e,t,a){return t?"".concat((0,r.M)(),"/manga-downloads/").concat(e):a&&Object.keys(a).length>0?"".concat((0,r.M)(),"/api/v1/image-proxy?url=").concat(encodeURIComponent(e),"&headers=").concat(encodeURIComponent(JSON.stringify(a))):e}function h(e,t){let a,r,l,i,s=(0,n.c)(11);s[0]!==e?(a=t=>{var a,n;return!!e&&!!t&&(null!=(n=null==e||null==(a=e.downloaded[t.provider])?void 0:a.findIndex(e=>e.chapterId===t.id))?n:-1)!==-1},s[0]=e,s[1]=a):a=s[1];let o=a;s[2]!==e?(r=t=>{var a,n;return!!e&&!!t&&(null!=(n=null==e||null==(a=e.queued[t.provider])?void 0:a.findIndex(e=>e.chapterId===t.id))?n:-1)!==-1},s[2]=e,s[3]=r):r=s[3];let d=r;s[4]!==e?(l=t=>e?Object.keys(e.downloaded[t]||{}).length:0,s[4]=e,s[5]=l):l=s[5];let c=l,u=!t;return s[6]!==c||s[7]!==o||s[8]!==d||s[9]!==u?(i={isChapterDownloaded:o,isChapterQueued:d,getProviderNumberOfDownloadedChapters:c,showActionButtons:u},s[6]=c,s[7]=o,s[8]=d,s[9]=u,s[10]=i):i=s[10],i}function p(){let e,t,a,r,i,s=(0,n.c)(7);s[0]===Symbol.for("react.memo_cache_sentinel")?(e={},s[0]=e):e=s[0];let[o,d]=l.useState(e);s[1]===Symbol.for("react.memo_cache_sentinel")?(t=[],s[1]=t):t=s[1];let[c,u]=l.useState(t);s[2]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{u(e.data)},s[2]=a):a=s[2];let h=a;return s[3]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{d({}),u([])},s[3]=r):r=s[3],s[4]!==o||s[5]!==c?(i={rowSelection:o,setRowSelection:d,rowSelectedChapters:c,onRowSelectionChange:h,resetRowSelection:r},s[4]=o,s[5]=c,s[6]=i):i=s[6],i}},55226:(e,t,a)=>{function n(e){return(navigator.userAgent||"").includes(e)}a.d(t,{Fr:()=>r});function r(){let e="";return navigator.userAgent&&(e=navigator.userAgent),!!/iPhone|iPad|iPod|Android/.test(e)||navigator.vendor.includes("Apple")&&!function(){return n("Tizen")}()&&navigator.maxTouchPoints>1}}}]);