(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{812:(e,n,t)=>{"use strict";t.d(n,{t:()=>f});var l=t(95155),i=t(2159),r=t(9693),o=t(5249),a=t(84127),s=t(91360),u=t(22960),d=t(29724),c=t(21842),m=t(12115),p=t(78453),v=t(80893),h=t(68090);let y=(0,c.tG)("sea-media-theater-mode",!1);function f(e){let{mediaId:n,title:t,hideBackButton:c,leftHeaderActions:f,rightHeaderActions:x,mediaPlayer:S,episodeList:g,episodes:b}=e,[N,E]=(0,d.fp)(y),{media:j,progress:T}=(0,r.od)(),[C,I]=(0,d.fp)(r.Jh),[O,R]=(0,d.fp)(r.tS),{mutate:w,isPending:k,isSuccess:M}=(0,i.iL)(null==j?void 0:j.id,C),{width:A}=(0,h.A)(),_=m.useRef(null),L=m.useRef();m.useEffect(()=>{if(_.current&&!(A<=1536)&&T.currentEpisodeNumber)return L.current&&clearTimeout(L.current),L.current=setTimeout(()=>{let e=document.getElementById("episode-".concat(T.currentEpisodeNumber));N&&(e=document.getElementById("sea-media-player-container")),e&&e.scrollIntoView({behavior:"smooth"})},100),()=>{L.current&&clearTimeout(L.current)}},[A,T.currentEpisodeNumber,N]);let P=m.useCallback(()=>{j&&O&&!k&&!M&&w({episodeNumber:O.episodeNumber,mediaId:j.id,totalEpisodes:j.episodes||0,malId:j.idMal||void 0},{onSuccess:()=>{R(null),I(O.episodeNumber)}})},[j,O,k,M]);return(0,l.jsxs)("div",{"data-sea-media-player-layout":!0,className:"space-y-4",children:[(0,l.jsxs)("div",{"data-sea-media-player-layout-header":!0,className:"flex flex-col lg:flex-row gap-2 w-full justify-between",children:[!c&&(0,l.jsxs)("div",{className:"flex w-full gap-4 items-center relative",children:[(0,l.jsx)(o.i,{href:"/entry?id=".concat(n),children:(0,l.jsx)(a.K0,{icon:(0,l.jsx)(p.nXt,{}),rounded:!0,intent:"gray-outline",size:"sm"})}),(0,l.jsx)("h3",{className:"max-w-full lg:max-w-[50%] text-ellipsis truncate",children:t})]}),(0,l.jsxs)("div",{"data-sea-media-player-layout-header-actions":!0,className:"flex gap-2 items-center justify-end w-full",children:[f,(0,l.jsx)("div",{className:"hidden lg:flex flex-1"}),!!O&&O.episodeNumber>C&&(0,l.jsx)(a.$n,{className:"animate-pulse",loading:k,disabled:M,onClick:P,children:"Update progress"}),x,(0,l.jsx)(a.K0,{onClick:()=>E(e=>!e),intent:"gray-basic",icon:N?(0,l.jsx)(v.$a0,{}):(0,l.jsx)(v.ykq,{})})]})]}),(0,l.jsxs)("div",{"data-sea-media-player-layout-content":!0,className:(0,s.cn)("flex gap-4 w-full flex-col 2xl:flex-row",N&&"block space-y-4"),children:[(0,l.jsx)("div",{id:"sea-media-player-container","data-sea-media-player-layout-content-player":!0,className:(0,s.cn)("aspect-video relative w-full self-start mx-auto",N&&"max-h-[90vh] !w-auto aspect-video mx-auto"),children:S}),(0,l.jsxs)(u.F,{ref:_,"data-sea-media-player-layout-content-episode-list":!0,className:(0,s.cn)("2xl:max-w-[450px] w-full relative 2xl:sticky h-[75dvh] overflow-y-auto pr-4 pt-0",N&&"2xl:max-w-full"),children:[(0,l.jsx)("div",{"data-sea-media-player-layout-content-episode-list-container":!0,className:"space-y-3",children:g}),(0,l.jsx)("div",{"data-sea-media-player-layout-content-episode-list-bottom-gradient":!0,className:"z-[5] absolute bottom-0 w-full h-[2rem] bg-gradient-to-t from-[--background] to-transparent"})]})]})]})}},3196:(e,n,t)=>{"use strict";t.d(n,{Bv:()=>d,NM:()=>o,P6:()=>m,sq:()=>s});var l=t(19749),i=t(7675),r=t(74889);function o(){let e,n=(0,l.c)(1);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:r.S.DISCORD.SetDiscordMangaActivity.endpoint,method:r.S.DISCORD.SetDiscordMangaActivity.methods[0],mutationKey:[r.S.DISCORD.SetDiscordMangaActivity.key],onSuccess:a},n[0]=e):e=n[0],(0,i.qk)(e)}async function a(){}function s(){let e,n=(0,l.c)(1);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:r.S.DISCORD.SetDiscordAnimeActivityWithProgress.endpoint,method:r.S.DISCORD.SetDiscordAnimeActivityWithProgress.methods[0],mutationKey:[r.S.DISCORD.SetDiscordAnimeActivityWithProgress.key],onSuccess:u},n[0]=e):e=n[0],(0,i.qk)(e)}async function u(){}function d(){let e,n=(0,l.c)(1);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:r.S.DISCORD.UpdateDiscordAnimeActivityWithProgress.endpoint,method:r.S.DISCORD.UpdateDiscordAnimeActivityWithProgress.methods[0],mutationKey:[r.S.DISCORD.UpdateDiscordAnimeActivityWithProgress.key],onSuccess:c},n[0]=e):e=n[0],(0,i.qk)(e)}async function c(){}function m(){let e,n=(0,l.c)(1);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:r.S.DISCORD.CancelDiscordActivity.endpoint,method:r.S.DISCORD.CancelDiscordActivity.methods[0],mutationKey:[r.S.DISCORD.CancelDiscordActivity.key],onSuccess:p},n[0]=e):e=n[0],(0,i.qk)(e)}async function p(){}},3820:(e,n,t)=>{"use strict";t.d(n,{F4:()=>O,Ik:()=>g,V1:()=>T,nO:()=>N,uN:()=>E,xF:()=>R});var l=t(95155),i=t(19749),r=t(61203),o=t(65151),a=t(92161),s=t(84127),u=t(76049),d=t(52885),c=t(30033),m=t(98836),p=t(97400),v=t(64757),h=t(11356),y=t(90814),f=t(29724);t(12115);var x=t(41452),S=t(80893);let g="hidden w-full flex-col items-start justify-center outline-none data-[keyboard]:mt-[3px] data-[open]:inline-block",b="px-2 py-1.5 rounded-[--radius-md] hover:bg-[--subtle]";function N(){let e,n,t,r,a=(0,i.c)(13),{customQualities:s,videoSource:u,changeQuality:d}=(0,o.n)(),c=(null==u?void 0:u.quality)||"";a[0]!==c?(e=(0,l.jsx)(O,{label:"Quality ",hint:c,disabled:!1,icon:x.Ryp}),a[0]=c,a[1]=e):e=a[1];let m=(null==u?void 0:u.quality)||"-";if(a[2]!==d||a[3]!==s){let e;a[5]!==d?(e=e=>(0,l.jsx)(I,{value:e,onSelect:n=>{n.target.checked&&d(e)},children:e},e),a[5]=d,a[6]=e):e=a[6],n=s.map(e),a[2]=d,a[3]=s,a[4]=n}else n=a[4];return a[7]!==m||a[8]!==n?(t=(0,l.jsx)(v.E.Content,{className:g,children:(0,l.jsx)(v.E.RadioGroup,{value:m,children:n})}),a[7]=m,a[8]=n,a[9]=t):t=a[9],a[10]!==e||a[11]!==t?(r=(0,l.jsxs)(v.E.Root,{children:[e,t]}),a[10]=e,a[11]=t,a[12]=r):r=a[12],r}function E(e){let n,t,d,p,v,h,y,S,g,b=(0,i.c)(23),{mediaId:N}=e,{servers:E,providerExtensionOptions:T,changeProvider:C,changeServer:I}=(0,o.n)(),[O]=(0,f.fp)(a.kL),[R]=(0,f.fp)(a.Wr),{mutate:w,isPending:k}=(0,r.Cz)();b[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsx)(s.K0,{intent:"gray-basic",icon:(0,l.jsx)(x.UC5,{})}),b[0]=n):n=b[0];let M=O||"";return b[1]!==C?(t=e=>{C(e)},b[1]=C,b[2]=t):t=b[2],b[3]!==T||b[4]!==M||b[5]!==t?(d=(0,l.jsx)(c.l,{label:"Provider",value:M,options:T,onValueChange:t}),b[3]=T,b[4]=M,b[5]=t,b[6]=d):d=b[6],b[7]!==I||b[8]!==R||b[9]!==E?(p=!!E.length&&(0,l.jsx)(c.l,{label:"Server",value:R,options:E.map(j),onValueChange:e=>{I(e)}}),b[7]=I,b[8]=R,b[9]=E,b[10]=p):p=b[10],b[11]===Symbol.for("react.memo_cache_sentinel")?(v=(0,l.jsx)(m.w,{}),h=(0,l.jsx)("p",{className:"text-sm text-[--muted]",children:"Empty the cache if you are experiencing issues with the stream."}),b[11]=v,b[12]=h):(v=b[11],h=b[12]),b[13]!==w||b[14]!==N?(y=()=>w({mediaId:N}),b[13]=w,b[14]=N,b[15]=y):y=b[15],b[16]!==k||b[17]!==y?(S=(0,l.jsx)(s.$n,{size:"sm",intent:"alert-subtle",onClick:y,loading:k,children:"Empty stream cache"}),b[16]=k,b[17]=y,b[18]=S):S=b[18],b[19]!==d||b[20]!==p||b[21]!==S?(g=(0,l.jsxs)(u.a,{title:"Stream",trigger:n,children:[d,p,v,h,S]}),b[19]=d,b[20]=p,b[21]=S,b[22]=g):g=b[22],g}function j(e){return{label:e,value:e}}function T(e){let n,t,r,s,u,c,p,y,x,g,N=(0,i.c)(21),{changeProvider:E,providerExtensionOptions:j,servers:T,changeServer:I}=(0,o.n)(),[O]=(0,f.fp)(a.kL),[R]=(0,f.fp)(a.Wr);if(!T.length||!R)return null;N[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsxs)(h.t.Root,{children:[(0,l.jsx)(h.t.Trigger,{asChild:!0,children:(0,l.jsx)(v.E.Button,{className:"ring-media-focus group relative mr-0.5 inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-[--radius-md] outline-none ring-inset hover:bg-white/20 data-[focus]:ring-4 aria-hidden:hidden",children:(0,l.jsx)(S.c$4,{className:"text-3xl"})})}),(0,l.jsx)(h.t.Content,{className:"animate-out fade-out slide-out-to-bottom-2 data-[visible]:animate-in data-[visible]:fade-in data-[visible]:slide-in-from-bottom-4 z-10 rounded-sm bg-black/90 px-2 py-0.5 text-sm font-medium text-white group-data-[open]/parent:hidden",placement:"top",children:"Provider"})]}),N[0]=n):n=N[0],N[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)("p",{className:"text-white px-2 py-1",children:"Provider"}),N[1]=t):t=N[1];let w=O||"";return N[2]!==E?(r=e=>{E(e)},N[2]=E,N[3]=r):r=N[3],N[4]!==j||N[5]!==w||N[6]!==r?(s=(0,l.jsx)(d.z,{value:w,options:j,onValueChange:r,itemContainerClass:b}),N[4]=j,N[5]=w,N[6]=r,N[7]=s):s=N[7],N[8]===Symbol.for("react.memo_cache_sentinel")?(u=(0,l.jsx)(m.w,{className:"my-1"}),c=(0,l.jsx)("p",{className:"text-white px-2 py-1",children:"Server"}),N[8]=u,N[9]=c):(u=N[8],c=N[9]),N[10]!==T?(p=T.map(C),N[10]=T,N[11]=p):p=N[11],N[12]!==I?(y=e=>{I(e)},N[12]=I,N[13]=y):y=N[13],N[14]!==R||N[15]!==p||N[16]!==y?(x=(0,l.jsx)(d.z,{value:R,options:p,onValueChange:y,itemContainerClass:b}),N[14]=R,N[15]=p,N[16]=y,N[17]=x):x=N[17],N[18]!==s||N[19]!==x?(g=(0,l.jsxs)(v.E.Root,{className:"parent",children:[n,(0,l.jsxs)(v.E.Content,{className:"animate-out fade-out slide-out-to-bottom-2 data-[open]:animate-in data-[open]:fade-in data-[open]:slide-in-from-bottom-4 flex h-[var(--menu-height)] max-h-[400px] min-w-[260px] flex-col overflow-y-auto overscroll-y-contain rounded-[--radius-md] border border-white/10 bg-black/95 p-2.5 font-sans text-[15px] font-medium outline-none backdrop-blur-sm transition-[height] duration-300 will-change-[height] data-[resizing]:overflow-hidden",placement:"top",children:[t,s,u,c,x]})]}),N[18]=s,N[19]=x,N[20]=g):g=N[20],g}function C(e){return{label:e,value:e}}function I(e){let n,t,r,o,a,s,u=(0,i.c)(10);return u[0]!==e?({children:n,...t}=e,u[0]=e,u[1]=n,u[2]=t):(n=u[1],t=u[2]),u[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)(y.Z,{className:"h-4 w-4 text-white group-data-[checked]:hidden"}),o=(0,l.jsx)(y.AB,{className:"text-media-brand hidden h-4 w-4 group-data-[checked]:block"}),u[3]=r,u[4]=o):(r=u[3],o=u[4]),u[5]!==n?(a=(0,l.jsx)("span",{className:"ml-2",children:n}),u[5]=n,u[6]=a):a=u[6],u[7]!==t||u[8]!==a?(s=(0,l.jsxs)(v.E.Radio,{className:"ring-media-focus group relative flex w-full cursor-pointer select-none items-center justify-start rounded-sm p-2.5 outline-none data-[hocus]:bg-white/10 data-[focus]:ring-[3px]",...t,children:[r,o,a]}),u[7]=t,u[8]=a,u[9]=s):s=u[9],s}function O(e){let n,t,r,o,a,s,u=(0,i.c)(13),{label:d,hint:c,icon:m,disabled:p}=e;return u[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsx)(y.YJ,{className:"vds-menu-button-close-icon"}),u[0]=n):n=u[0],u[1]!==m?(t=(0,l.jsx)(m,{className:"vds-menu-button-icon"}),u[1]=m,u[2]=t):t=u[2],u[3]!==d?(r=(0,l.jsx)("span",{className:"vds-menu-button-label mr-2",children:d}),u[3]=d,u[4]=r):r=u[4],u[5]!==c?(o=(0,l.jsx)("span",{className:"vds-menu-button-hint",children:c}),u[5]=c,u[6]=o):o=u[6],u[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsx)(y.vK,{className:"vds-menu-button-open-icon"}),u[7]=a):a=u[7],u[8]!==p||u[9]!==t||u[10]!==r||u[11]!==o?(s=(0,l.jsxs)(v.E.Button,{className:"vds-menu-button",disabled:p,children:[n,t,r,o,a]}),u[8]=p,u[9]=t,u[10]=r,u[11]=o,u[12]=s):s=u[12],s}function R(){let e,n,t,r=(0,i.c)(8),[u]=(0,f.fp)(a.zw),{selectedExtension:d,toggleDubbed:c}=(0,o.n)();if(!d||!(null==d?void 0:d.supportsDub))return null;r[0]!==c?(e=()=>c(),r[0]=c,r[1]=e):e=r[1];let m=u?"Dubbed":"Subbed";r[2]!==e||r[3]!==m?(n=(0,l.jsx)(s.$n,{className:"",rounded:!0,intent:"gray-outline",size:"sm",onClick:e,children:m}),r[2]=e,r[3]=m,r[4]=n):n=r[4];let v=u?"Switch to subs":"Switch to dub";return r[5]!==n||r[6]!==v?(t=(0,l.jsx)(p.m_,{trigger:n,children:v}),r[5]=n,r[6]=v,r[7]=t):t=r[7],t}},9693:(e,n,t)=>{"use strict";t.d(n,{Jh:()=>u,Ky:()=>c,od:()=>m,tS:()=>s});var l=t(95155),i=t(19749),r=t(42500),o=t(14300),a=t(12115);let s=(0,r.eU)(null),u=(0,r.eU)(0),d=(0,a.createContext)({media:null,progress:{currentProgress:null,currentEpisodeNumber:null,currentEpisodeTitle:null}});function c(e){let n,t,r,a,c,m,p=(0,i.c)(11);return p[0]!==e?({children:n,...t}=e,p[0]=e,p[1]=n,p[2]=t):(n=p[1],t=p[2]),p[3]!==t?(r={...t},p[3]=t,p[4]=r):r=p[4],p[5]===Symbol.for("react.memo_cache_sentinel")?(a=[s,u],p[5]=a):a=p[5],p[6]!==n?(c=(0,l.jsx)(o.U,{atoms:a,children:n}),p[6]=n,p[7]=c):c=p[7],p[8]!==r||p[9]!==c?(m=(0,l.jsx)(d.Provider,{value:r,children:c}),p[8]=r,p[9]=c,p[10]=m):m=p[10],m}function m(){return(0,a.useContext)(d)}},38584:(e,n,t)=>{"use strict";t.d(n,{F:()=>z});var l=t(95155),i=t(2159),r=t(83394),o=t(3196),a=t(83563),s=t(19749),u=t(73773);function d(e){return"ed"===e.skipType}function c(e){return"op"===e.skipType}var m=t(12115),p=t(38310),v=t(3820),h=t(60695),y=t(64757),f=t(29724),x=t(78453),S=t(41452),g=t(46753),b=t(21842);let N=(0,b.tG)("sea-media-player-autoplay",!1),E=(0,b.tG)("sea-media-player-autonext",!1),j=(0,b.tG)("sea-media-player-autoskip-intro-outro",!1),T=(0,b.tG)("sea-media-player-discrete-controls",!1),C=(0,b.tG)("sea-media-player-volume",1),I=(0,b.tG)("sea-media-player-muted",!1);function O(){let e,n,t,i,r,o,a,u,d,c,m,p,b,C=(0,s.c)(37),[I,O]=(0,f.fp)(N),[R,w]=(0,f.fp)(E),[k,M]=(0,f.fp)(j),[A,_]=(0,f.fp)(T),L=I?"On":"Off";C[0]!==L?(e=(0,l.jsx)(v.F4,{label:"Auto Play",hint:L,disabled:!1,icon:x.G2B}),C[0]=L,C[1]=e):e=C[1],C[2]!==I||C[3]!==O?(n=(0,l.jsx)(y.E.Content,{className:v.Ik,children:(0,l.jsx)(h.d,{label:"Auto play",fieldClass:"py-2 px-2",value:I,onValueChange:O})}),C[2]=I,C[3]=O,C[4]=n):n=C[4],C[5]!==e||C[6]!==n?(t=(0,l.jsxs)(y.E.Root,{children:[e,n]}),C[5]=e,C[6]=n,C[7]=t):t=C[7];let P=R?"On":"Off";C[8]!==P?(i=(0,l.jsx)(v.F4,{label:"Auto Play Next Episode",hint:P,disabled:!1,icon:S.MPv}),C[8]=P,C[9]=i):i=C[9],C[10]!==R||C[11]!==w?(r=(0,l.jsx)(y.E.Content,{className:v.Ik,children:(0,l.jsx)(h.d,{label:"Auto play next episode",fieldClass:"py-2 px-2",value:R,onValueChange:w})}),C[10]=R,C[11]=w,C[12]=r):r=C[12],C[13]!==i||C[14]!==r?(o=(0,l.jsxs)(y.E.Root,{children:[i,r]}),C[13]=i,C[14]=r,C[15]=o):o=C[15];let D=k?"On":"Off";C[16]!==D?(a=(0,l.jsx)(v.F4,{label:"Skip Intro/Outro",hint:D,disabled:!1,icon:S.MPv}),C[16]=D,C[17]=a):a=C[17],C[18]!==k||C[19]!==M?(u=(0,l.jsx)(y.E.Content,{className:v.Ik,children:(0,l.jsx)(h.d,{label:"Skip intro/outro",fieldClass:"py-2 px-2",value:k,onValueChange:M})}),C[18]=k,C[19]=M,C[20]=u):u=C[20],C[21]!==u||C[22]!==a?(d=(0,l.jsxs)(y.E.Root,{children:[a,u]}),C[21]=u,C[22]=a,C[23]=d):d=C[23];let F=A?"On":"Off";return C[24]!==F?(c=(0,l.jsx)(v.F4,{label:"Discrete Controls",hint:F,disabled:!1,icon:g.ax0}),C[24]=F,C[25]=c):c=C[25],C[26]!==A||C[27]!==_?(m=(0,l.jsx)(y.E.Content,{className:v.Ik,children:(0,l.jsx)(h.d,{label:"Discrete controls",help:"Only show the controls when the mouse is over the bottom part. (Large screens only)",fieldClass:"py-2 px-2",value:A,onValueChange:_,fieldHelpTextClass:"max-w-xs"})}),C[26]=A,C[27]=_,C[28]=m):m=C[28],C[29]!==c||C[30]!==m?(p=(0,l.jsxs)(y.E.Root,{children:[c,m]}),C[29]=c,C[30]=m,C[31]=p):p=C[31],C[32]!==d||C[33]!==p||C[34]!==t||C[35]!==o?(b=(0,l.jsxs)(l.Fragment,{children:[t,o,d,p]}),C[32]=d,C[33]=p,C[34]=t,C[35]=o,C[36]=b):b=C[36],b}var R=t(9693),w=t(37817),k=t(78106),M=t(71149),A=t(43994),_=t(40568);let L={...M.g,PlayButton:{Play:_.djq,Pause:_.d5L,Replay:_.RhI},MuteButton:{Mute:A.sRF,VolumeLow:A.l$p,VolumeHigh:A.exc},GoogleCastButton:{Default:A.HhW},PIPButton:{Enter:_.FfK,Exit:_.Ff_},FullscreenButton:{Enter:_.xb0,Exit:_.xHI},Menu:{...M.g.Menu,Settings:_.ZkC},CaptionButton:{On:_.Dmb,Off:_.WuF}};var P=t(84127),D=t(91360),F=t(2091),W=t(77717),q=t(93715),G=t(83846),U=t(82617),K=t(4573),Y=t.n(K),H=t(35089);function z(e){var n,t;let{url:v,poster:h,isLoading:y,isPlaybackError:x,playerRef:S,tracks:g=[],chapters:b=[],videoLayoutSlots:M,loadingText:A,onCanPlay:_,onProviderChange:K,onProviderSetup:z,onEnded:B,onTimeUpdate:V,onDurationChange:Q,onGoToNextEpisode:$,onGoToPreviousEpisode:J,settingsItems:X,mediaInfoDuration:Z}=e,ee=(0,w.v1)(),[en,et]=m.useState(0),{media:el,progress:ei}=(0,R.od)(),[er,eo]=m.useState(0);m.useEffect(()=>{if(!Z)return;let e=Z||0;e&&eo(e)},[Z]);let[ea,es]=(0,f.fp)(R.tS),eu=(0,f.md)(N),ed=(0,f.md)(E),ec=(0,f.md)(T),em=(0,f.md)(j),[ep,ev]=(0,f.fp)(C),[eh,ey]=(0,f.fp)(I),[ef,ex]=(0,f.fp)(R.Jh);m.useEffect(()=>{var e;ex(null!=(e=ei.currentProgress)?e:0)},[ei.currentProgress]);let[eS,eg]=m.useState(!1),[eb,eN]=m.useState(!1),eE=m.useRef(0),ej=m.useRef(0),eT=m.useRef(!1),eC=m.useRef(void 0),eI=m.useRef(null),{data:eO}=function(e,n){let t,l,i,r,o=(0,s.c)(12);o[0]!==n||o[1]!==e?(t=["skip-data",e,n],l=async()=>{let t=await fetch("https://api.aniskip.com/v2/skip-times/".concat(e,"/").concat(n,"?types[]=ed&types[]=mixed-ed&types[]=mixed-op&types[]=op&types[]=recap&episodeLength=")),l=await t.json();if(l.results&&l.found){var i,r;return{op:(null==(i=l.results)?void 0:i.find(c))||null,ed:(null==(r=l.results)?void 0:r.find(d))||null}}return{op:null,ed:null}},o[0]=n,o[1]=e,o[2]=t,o[3]=l):(t=o[2],l=o[3]);let a=!!e&&-1!=n;o[4]!==t||o[5]!==l||o[6]!==a?(i={queryKey:t,queryFn:l,refetchOnWindowFocus:!1,enabled:a},o[4]=t,o[5]=l,o[6]=a,o[7]=i):i=o[7];let m=(0,u.I)(i),p=m.isLoading||m.isFetching;return o[8]!==m.data||o[9]!==m.isError||o[10]!==p?(r={data:m.data,isLoading:p,isError:m.isError},o[8]=m.data,o[9]=m.isError,o[10]=p,o[11]=r):r=o[11],r}(null==el?void 0:el.idMal,null!=(t=ei.currentEpisodeNumber)?t:-1),{mutate:eR,isPending:ew,isSuccess:ek}=(0,i.iL)(null==el?void 0:el.id,ef),eM=m.useCallback((e,n)=>{null==Q||Q(e,n),et(e)},[]),{handleUpdateWatchHistory:eA}=(0,r.FE)(S,ei.currentEpisodeNumber,null==el?void 0:el.id),{mutate:e_}=(0,o.sq)(),{mutate:eL}=(0,o.Bv)(),{mutate:eP}=(0,o.P6)();m.useEffect(()=>{let e=setInterval(()=>{var e,n,t,l,i,r,o,a,s,u;S.current&&eT.current&&(null==ee||null==(n=ee.settings)||null==(e=n.discord)?void 0:e.enableRichPresence)&&(null==ee||null==(l=ee.settings)||null==(t=l.discord)?void 0:t.enableAnimeRichPresence)&&eL({progress:Math.floor(null!=(a=null==(i=S.current)?void 0:i.currentTime)?a:0),duration:Math.floor(null!=(s=null==(r=S.current)?void 0:r.duration)?s:0),paused:null!=(u=null==(o=S.current)?void 0:o.paused)&&u})},6e3);return()=>clearInterval(e)},[null==ee||null==(n=ee.settings)?void 0:n.discord,v,eT.current]),m.useEffect(()=>{eC.current!==v&&(eC.current=v,eT.current=!1)},[v]);let{watchHistory:eD,waitForWatchHistory:eF,getEpisodeContinuitySeekTo:eW}=(0,r.vy)(null==el?void 0:el.id),eq=m.useRef(!1);function eG(e){var n;Object.assign(null!=(n=S.current)?n:{},{currentTime:e})}m.useMemo(()=>{var e,n,t,l,i,r,o,a,s,u,d,c;let m=null!=(s=null==eO||null==(n=eO.op)||null==(e=n.interval)?void 0:e.startTime)?s:0,p=null!=(u=null==eO||null==(l=eO.op)||null==(t=l.interval)?void 0:t.endTime)?u:0,v=null!=(d=null==eO||null==(r=eO.ed)||null==(i=r.interval)?void 0:i.startTime)?d:0,h=null!=(c=null==eO||null==(a=eO.ed)||null==(o=a.interval)?void 0:o.endTime)?c:0,y=[];return p>m&&y.push({startTime:m,endTime:p,text:"Intro"}),h>v&&y.push({startTime:v,endTime:h,text:"Outro"}),y},[]),m.useEffect(()=>(Y().bind("f",()=>{(0,q.v)("MEDIA PLAYER").info("Fullscreen key pressed");try{var e,n,t;null==(e=S.current)||e.enterFullscreen(),null==(t=S.current)||null==(n=t.el)||n.focus()}catch(e){}}),()=>{var e,n,t,l;Y().unbind("f"),(null==ee||null==(n=ee.settings)||null==(e=n.discord)?void 0:e.enableRichPresence)&&(null==ee||null==(l=ee.settings)||null==(t=l.discord)?void 0:t.enableAnimeRichPresence)&&eP()}),[]);let{inject:eU,remove:eK}=(0,a.H)();m.useEffect(()=>(eU("media-player-controls",{items:[{id:"toggle-play",value:"toggle-play",heading:"Controls",priority:100,render:()=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("p",{children:"Toggle Play"})}),onSelect:()=>{var e,n,t;(null==(e=S.current)?void 0:e.paused)?null==(n=S.current)||n.play():null==(t=S.current)||t.pause()}},{id:"fullscreen",value:"fullscreen",heading:"Controls",priority:99,render:()=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("p",{children:"Fullscreen"})}),onSelect:()=>{var e;null==(e=S.current)||e.enterFullscreen()}},{id:"next-episode",value:"next-episode",heading:"Controls",priority:98,render:()=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("p",{children:"Next Episode"})}),onSelect:()=>$()},{id:"previous-episode",value:"previous-episode",heading:"Controls",priority:97,render:()=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("p",{children:"Previous Episode"})}),onSelect:()=>null==J?void 0:J()}]}),()=>eK("media-player-controls")),[v]);let{onMediaEnterFullscreenRequest:eY}=(m.useEffect(()=>{var e,n,t,l,i;let r=null;if(null==(e=window)?void 0:e.__TAURI__){let e=null==(i=window)||null==(l=i.__TAURI__)||null==(t=l.window)||null==(n=t.getCurrentWindow)?void 0:n.call(t);e&&(async()=>{r=await e.listen("macos-activation-policy-accessory-done",()=>{console.log("macos policy accessory event done");try{var e;console.log("requesting fullscreen"),null==(e=S.current)||e.enterFullscreen()}catch(e){console.log("failed to enter fullscreen from 'macos-activation-policy-accessory-done'",e)}})})()}return()=>{null==r||r()}},[]),{onMediaEnterFullscreenRequest:function(e,n){if("desktop"===p.env.NEXT_PUBLIC_PLATFORM)try{var t,l,i,r,o,a,s,u,d;if(null==(t=window)?void 0:t.__TAURI__){let e=null==(o=window)||null==(r=o.__TAURI__)||null==(i=r.os)||null==(l=i.platform)?void 0:l.call(i),t=null==(d=window)||null==(u=d.__TAURI__)||null==(s=u.window)||null==(a=s.getCurrentWindow)?void 0:a.call(s);e&&"macos"===e&&(n.preventDefault(),console.log("native fullscreen event prevented, sending macos policy accessory event"),t.emit("macos-activation-policy-accessory").then(()=>{console.log("macos policy accessory event sent"),n.defaultPrevented}))}}catch(e){}}});return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{"data-sea-media-player-container":!0,className:"aspect-video relative w-full self-start mx-auto",children:x?(0,l.jsx)(k.D,{title:"Playback Error"}):v&&!y?(0,l.jsxs)(G.KJj,{"data-sea-media-player":!0,streamType:"on-demand",playsInline:!0,ref:S,autoPlay:eu,crossOrigin:!0,src:v,poster:h,aspectRatio:"16/9",controlsDelay:ec?500:void 0,className:(0,D.cn)(ec&&"discrete-controls"),onProviderChange:(e,n)=>{null==K||K(e,n)},onMediaEnterFullscreenRequest:eY,onFullscreenChange:(e,n)=>{e?eI.current=document.activeElement:setTimeout(()=>{var e;null==(e=eI.current)||e.focus()},100)},onProviderSetup:(e,n)=>{null==z||z(e,n)},volume:ep,onVolumeChange:e=>ev(e.volume),onTimeUpdate:(e,n)=>{var t,l,i,r,o,a,s,u,d;if(null==V||V(e,n),(null==eO||null==(t=eO.op)?void 0:t.interval)&&(null==e?void 0:e.currentTime)&&(null==e?void 0:e.currentTime)>=eO.op.interval.startTime&&(null==e?void 0:e.currentTime)<=eO.op.interval.endTime?(eg(!0),em&&eG((null==eO||null==(o=eO.op)||null==(r=o.interval)?void 0:r.endTime)||0)):eg(!1),(null==eO||null==(l=eO.ed)?void 0:l.interval)&&500>Math.abs(eO.ed.interval.startTime-(null==eO||null==(i=eO.ed)?void 0:i.episodeLength))&&(null==e?void 0:e.currentTime)&&(null==e?void 0:e.currentTime)>=eO.ed.interval.startTime&&(null==e?void 0:e.currentTime)<=eO.ed.interval.endTime?(eN(!0),em&&eG((null==eO||null==(s=eO.ed)||null==(a=s.interval)?void 0:a.endTime)||0)):eN(!1),eE.current>2e3&&(eE.current=0,eA()),eE.current++,ej.current<200)return void ej.current++;ej.current=0;let c=er||en;el&&null!=ei.currentEpisodeNumber&&ei.currentEpisodeNumber>0&&(!ea||ei.currentEpisodeNumber>ea.episodeNumber)&&c>0&&e.currentTime/c>=.8&&ei.currentEpisodeNumber>(null!=ef?ef:0)&&((null==ee||null==(d=ee.settings)||null==(u=d.library)?void 0:u.autoUpdateProgress)?ew||eR({episodeNumber:ei.currentEpisodeNumber,mediaId:null==el?void 0:el.id,totalEpisodes:(null==el?void 0:el.episodes)||0,malId:(null==el?void 0:el.idMal)||void 0},{onSuccess:()=>{ex(ei.currentEpisodeNumber)}}):es({episodeNumber:ei.currentEpisodeNumber}))},onDurationChange:eM,onCanPlay:(e,n)=>{var t,l,i,r,o,a,s,u,d,c,m,p,v,h,y,f,x,g,b,N,E;if(null==_||_(e,n),eT.current=!0,eq.current=!1,ei.currentEpisodeNumber&&(null==eD?void 0:eD.found)&&(null==(t=eD.item)?void 0:t.episodeNumber)===ei.currentEpisodeNumber){let e=eW(ei.currentEpisodeNumber,null==(a=S.current)?void 0:a.currentTime,null==(s=S.current)?void 0:s.duration);(0,q.v)("MEDIA PLAYER").info("Watch continuity: Seeking to last watched time",{lastWatchedTime:e}),e>0&&((0,q.v)("MEDIA PLAYER").info("Watch continuity: Seeking to",e),Object.assign(S.current||{},{currentTime:e}))}if((null==ee||null==(i=ee.settings)||null==(l=i.discord)?void 0:l.enableRichPresence)&&(null==ee||null==(o=ee.settings)||null==(r=o.discord)?void 0:r.enableAnimeRichPresence)&&(null==el?void 0:el.id)){let e=null!=(x=null==(u=S.current)?void 0:u.currentTime)?x:0,n=null!=(g=null==(d=S.current)?void 0:d.duration)?g:0;(0,q.v)("MEDIA PLAYER").info("Setting discord activity",{videoProgress:e,videoDuration:n}),e_({mediaId:null!=(b=null==el?void 0:el.id)?b:0,title:(null==el||null==(c=el.title)?void 0:c.userPreferred)||(null==el||null==(m=el.title)?void 0:m.romaji)||(null==el||null==(p=el.title)?void 0:p.english)||"Watching",image:(null==el||null==(v=el.coverImage)?void 0:v.large)||(null==el||null==(h=el.coverImage)?void 0:h.medium)||"",isMovie:(null==el?void 0:el.format)==="MOVIE",episodeNumber:null!=(N=ei.currentEpisodeNumber)?N:0,progress:Math.floor(e),duration:Math.floor(n),totalEpisodes:null==el?void 0:el.episodes,currentEpisodeCount:(null==el||null==(y=el.nextAiringEpisode)?void 0:y.episode)?(null==el||null==(f=el.nextAiringEpisode)?void 0:f.episode)-1:null==el?void 0:el.episodes,episodeTitle:(null==ei?void 0:ei.currentEpisodeTitle)||void 0})}eu&&(null==(E=S.current)||E.play())},onEnded:e=>{null==B||B(e),ed&&!eq.current&&($(),eq.current=!0)},muted:eh,onMediaMuteRequest:()=>ey(!0),onMediaUnmuteRequest:()=>ey(!1),children:[(0,l.jsx)(G.YE$,{children:g.map((e,n)=>(0,l.jsx)(G.CCl,{...e},"track-".concat(n)))}),(0,l.jsxs)("div",{"data-sea-media-player-skip-intro-outro-container":!0,className:"absolute bottom-24 px-4 w-full justify-between flex items-center",children:[(0,l.jsx)("div",{children:eS&&(0,l.jsx)(P.$n,{intent:"white",size:"sm",onClick:function(){var e,n,t,l;(null==eO||null==(n=eO.op)||null==(e=n.interval)?void 0:e.endTime)&&eG((null==eO||null==(l=eO.op)||null==(t=l.interval)?void 0:t.endTime)||0)},loading:em,children:"Skip opening"})}),(0,l.jsx)("div",{children:eb&&(0,l.jsx)(P.$n,{intent:"white",size:"sm",onClick:function(){var e,n,t,l;(null==eO||null==(n=eO.ed)||null==(e=n.interval)?void 0:e.endTime)&&eG((null==eO||null==(l=eO.ed)||null==(t=l.interval)?void 0:t.endTime)||0)},loading:em,children:"Skip ending"})})]}),(0,l.jsx)(U.d,{icons:L,slots:{...M,settingsMenuEndItems:(0,l.jsxs)(l.Fragment,{children:[X,(0,l.jsx)(O,{})]})}})]}):(0,l.jsxs)(W.E,{"data-sea-media-player-loading-container":!0,className:"w-full h-full absolute flex justify-center items-center flex-col space-y-4",children:[(0,l.jsx)(F.kt,{spinner:(0,l.jsx)("div",{className:"w-16 h-16 lg:w-[100px] lg:h-[100px] relative",children:(0,l.jsx)(H.default,{src:"/logo_2.png",alt:"Loading...",priority:!0,fill:!0,className:"animate-pulse"})})}),(0,l.jsx)("div",{className:"text-center text-xs lg:text-sm",children:null!=A?A:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("p",{children:"Loading..."})})})]})})})}},61203:(e,n,t)=>{"use strict";t.d(n,{Cz:()=>d,JF:()=>v,Ww:()=>s,Xj:()=>c,j3:()=>u,n6:()=>h,vf:()=>p});var l=t(19749),i=t(7675),r=t(74889),o=t(46278),a=t(69554);function s(e,n,t){let o,a,s,u=(0,l.c)(12),d=String(e);u[0]!==t||u[1]!==n||u[2]!==d?(o=[r.S.ONLINESTREAM.GetOnlineStreamEpisodeList.key,d,n,t],u[0]=t,u[1]=n,u[2]=d,u[3]=o):o=u[3];let c=Number(e);u[4]!==t||u[5]!==n||u[6]!==c?(a={mediaId:c,provider:n,dubbed:t},u[4]=t,u[5]=n,u[6]=c,u[7]=a):a=u[7];let m=!!e;return u[8]!==o||u[9]!==a||u[10]!==m?(s={endpoint:r.S.ONLINESTREAM.GetOnlineStreamEpisodeList.endpoint,method:r.S.ONLINESTREAM.GetOnlineStreamEpisodeList.methods[0],queryKey:o,data:a,enabled:m},u[8]=o,u[9]=a,u[10]=m,u[11]=s):s=u[11],(0,i.fl)(s)}function u(e,n,t,o,a){let s,u,d,c=(0,l.c)(14),m=String(e);c[0]!==o||c[1]!==t||c[2]!==n||c[3]!==m?(s=[r.S.ONLINESTREAM.GetOnlineStreamEpisodeSource.key,m,n,t,o],c[0]=o,c[1]=t,c[2]=n,c[3]=m,c[4]=s):s=c[4];let p=Number(e);c[5]!==o||c[6]!==t||c[7]!==n||c[8]!==p?(u={mediaId:p,episodeNumber:t,dubbed:o,provider:n},c[5]=o,c[6]=t,c[7]=n,c[8]=p,c[9]=u):u=c[9];let v=a&&!!n;return c[10]!==s||c[11]!==u||c[12]!==v?(d={endpoint:r.S.ONLINESTREAM.GetOnlineStreamEpisodeSource.endpoint,method:r.S.ONLINESTREAM.GetOnlineStreamEpisodeSource.methods[0],queryKey:s,data:u,enabled:v},c[10]=s,c[11]=u,c[12]=v,c[13]=d):d=c[13],(0,i.fl)(d)}function d(){let e,n,t=(0,l.c)(3),s=(0,o.jE)();return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=[r.S.ONLINESTREAM.OnlineStreamEmptyCache.key],t[0]=e):e=t[0],t[1]!==s?(n={endpoint:r.S.ONLINESTREAM.OnlineStreamEmptyCache.endpoint,method:r.S.ONLINESTREAM.OnlineStreamEmptyCache.methods[0],mutationKey:e,onSuccess:async()=>{await s.invalidateQueries({queryKey:[r.S.ONLINESTREAM.GetOnlineStreamEpisodeList.key]}),a.oR.info("Stream cache emptied")}},t[1]=s,t[2]=n):n=t[2],(0,i.qk)(n)}function c(e,n){let t,o=(0,l.c)(1);return o[0]===Symbol.for("react.memo_cache_sentinel")?(t={endpoint:r.S.ONLINESTREAM.OnlinestreamManualSearch.endpoint,method:r.S.ONLINESTREAM.OnlinestreamManualSearch.methods[0],mutationKey:[r.S.ONLINESTREAM.OnlinestreamManualSearch.key],onSuccess:m},o[0]=t):t=o[0],(0,i.qk)(t)}async function m(){}function p(){let e,n,t=(0,l.c)(3),s=(0,o.jE)();return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=[r.S.ONLINESTREAM.OnlinestreamManualMapping.key],t[0]=e):e=t[0],t[1]!==s?(n={endpoint:r.S.ONLINESTREAM.OnlinestreamManualMapping.endpoint,method:r.S.ONLINESTREAM.OnlinestreamManualMapping.methods[0],mutationKey:e,onSuccess:async()=>{a.oR.success("Mapping added"),await s.invalidateQueries({queryKey:[r.S.ONLINESTREAM.GetOnlinestreamMapping.key]}),await s.invalidateQueries({queryKey:[r.S.ONLINESTREAM.GetOnlineStreamEpisodeList.key]}),await s.invalidateQueries({queryKey:[r.S.ONLINESTREAM.GetOnlineStreamEpisodeSource.key]})}},t[1]=s,t[2]=n):n=t[2],(0,i.qk)(n)}function v(e){let n,t,o=(0,l.c)(7),a=String(e.mediaId);o[0]!==a||o[1]!==e.provider?(n=[r.S.ONLINESTREAM.GetOnlinestreamMapping.key,a,e.provider],o[0]=a,o[1]=e.provider,o[2]=n):n=o[2];let s=!!e.provider&&!!e.mediaId;return o[3]!==n||o[4]!==e||o[5]!==s?(t={endpoint:r.S.ONLINESTREAM.GetOnlinestreamMapping.endpoint,method:r.S.ONLINESTREAM.GetOnlinestreamMapping.methods[0],queryKey:n,data:e,enabled:s},o[3]=n,o[4]=e,o[5]=s,o[6]=t):t=o[6],(0,i.fl)(t)}function h(){let e,n,t=(0,l.c)(3),s=(0,o.jE)();return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=[r.S.ONLINESTREAM.RemoveOnlinestreamMapping.key],t[0]=e):e=t[0],t[1]!==s?(n={endpoint:r.S.ONLINESTREAM.RemoveOnlinestreamMapping.endpoint,method:r.S.ONLINESTREAM.RemoveOnlinestreamMapping.methods[0],mutationKey:e,onSuccess:async()=>{a.oR.info("Mapping removed"),await s.invalidateQueries({queryKey:[r.S.ONLINESTREAM.GetOnlinestreamMapping.key]}),await s.invalidateQueries({queryKey:[r.S.ONLINESTREAM.GetOnlineStreamEpisodeList.key]}),await s.invalidateQueries({queryKey:[r.S.ONLINESTREAM.GetOnlineStreamEpisodeSource.key]})}},t[1]=s,t[2]=n):n=t[2],(0,i.qk)(n)}},65151:(e,n,t)=>{"use strict";t.d(n,{M:()=>s,n:()=>a});var l=t(95155),i=t(19749),r=t(12115);let o=r.createContext({});function a(){return r.useContext(o)}function s(e){let n,t=(0,i.c)(3);return t[0]!==e.children||t[1]!==e.opts?(n=(0,l.jsx)(o.Provider,{value:e.opts,children:e.children}),t[0]=e.children,t[1]=e.opts,t[2]=n):n=t[2],n}},76182:()=>{},83394:(e,n,t)=>{"use strict";t.d(n,{FE:()=>p,H_:()=>d,hH:()=>c,pj:()=>m,vy:()=>v});var l=t(19749),i=t(7675),r=t(74889),o=t(37817),a=t(93715),s=t(46278),u=t(12115);function d(){let e,n=(0,l.c)(1);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:r.S.CONTINUITY.GetContinuityWatchHistory.endpoint,method:r.S.CONTINUITY.GetContinuityWatchHistory.methods[0],queryKey:[r.S.CONTINUITY.GetContinuityWatchHistory.key],enabled:!0},n[0]=e):e=n[0],(0,i.fl)(e)}function c(e,n,t){if(!e)return 0;let l=e[n];if(!l||!l.currentTime||!l.duration||l.episodeNumber!==t)return 0;let i=Math.round(l.currentTime/l.duration*100);return i>90||i<5?0:i}function m(e,n,t){if(!e)return 0;let l=e[n];return l&&l.currentTime&&l.duration&&l.episodeNumber===t?Math.round((l.duration-l.currentTime)/60):0}function p(e,n,t){var d,c,m,p;let v,h,y,f,x=(0,l.c)(12),S=(0,o.v1)(),g=(0,s.jE)();x[0]!==g?(v=()=>{(async()=>{await g.invalidateQueries({queryKey:[r.S.CONTINUITY.GetContinuityWatchHistoryItem.key]})})()},x[0]=g,x[1]=v):v=x[1];let b=null!=n?n:0;x[2]!==b?(h=[b],x[2]=b,x[3]=h):h=x[3],u.useEffect(v,h);let{mutate:N}=function(){let e,n,t=(0,l.c)(3),o=(0,s.jE)();return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=[r.S.CONTINUITY.UpdateContinuityWatchHistoryItem.key],t[0]=e):e=t[0],t[1]!==o?(n={endpoint:r.S.CONTINUITY.UpdateContinuityWatchHistoryItem.endpoint,method:r.S.CONTINUITY.UpdateContinuityWatchHistoryItem.methods[0],mutationKey:e,onSuccess:async()=>{await o.invalidateQueries({queryKey:[r.S.CONTINUITY.GetContinuityWatchHistory.key]})}},t[1]=o,t[2]=n):n=t[2],(0,i.qk)(n)}();x[4]!==n||x[5]!==t||x[6]!==e||x[7]!==(null==S||null==(c=S.settings)||null==(d=c.library)?void 0:d.enableWatchContinuity)||x[8]!==N?(y=function(){var l,i,r,o,s,u,d,c,m,p;(null==S||null==(i=S.settings)||null==(l=i.library)?void 0:l.enableWatchContinuity)&&(null==(r=e.current)?void 0:r.duration)&&(null==(o=e.current)?void 0:o.currentTime)&&((0,a.v)("CONTINUITY").info("Watch history updated",{currentTime:null==(s=e.current)?void 0:s.currentTime,duration:null==(u=e.current)?void 0:u.duration}),N({options:{currentTime:null!=(m=null==(d=e.current)?void 0:d.currentTime)?m:0,duration:null!=(p=null==(c=e.current)?void 0:c.duration)?p:0,mediaId:Number(t),episodeNumber:null!=n?n:0,kind:"onlinestream"}}))},x[4]=n,x[5]=t,x[6]=e,x[7]=null==S||null==(p=S.settings)||null==(m=p.library)?void 0:m.enableWatchContinuity,x[8]=N,x[9]=y):y=x[9];let E=y;return x[10]!==E?(f={handleUpdateWatchHistory:E},x[10]=E,x[11]=f):f=x[11],f}function v(e){var n,t,s,u,d,c;let m,p,v=(0,l.c)(8),h=(0,o.v1)(),{data:y,isLoading:f}=function(e){var n,t;let a,s,u,d=(0,l.c)(8),c=(0,o.v1)();d[0]!==e?(a=r.S.CONTINUITY.GetContinuityWatchHistoryItem.endpoint.replace("{id}",String(e)),d[0]=e,d[1]=a):a=d[1];let m=String(e);d[2]!==m?(s=[r.S.CONTINUITY.GetContinuityWatchHistoryItem.key,m],d[2]=m,d[3]=s):s=d[3];let p=(null==c||null==(t=c.settings)||null==(n=t.library)?void 0:n.enableWatchContinuity)&&!!e;return d[4]!==a||d[5]!==s||d[6]!==p?(u={endpoint:a,method:r.S.CONTINUITY.GetContinuityWatchHistoryItem.methods[0],queryKey:s,enabled:p},d[4]=a,d[5]=s,d[6]=p,d[7]=u):u=d[7],(0,i.fl)(u)}(e),x=f&&(null==h||null==(t=h.settings)||null==(n=t.library)?void 0:n.enableWatchContinuity);v[0]!==e||v[1]!==(null==h||null==(u=h.settings)||null==(s=u.library)?void 0:s.enableWatchContinuity)||v[2]!==y?(m=function(n,t,l){var i,r;if(!(null==h||null==(r=h.settings)||null==(i=r.library)?void 0:i.enableWatchContinuity)||!e||!y||!l||!n)return 0;let o=null==y?void 0:y.item;return o&&o.currentTime&&o.duration&&o.episodeNumber===n&&o.currentTime>0&&o.currentTime<l&&!(o.currentTime/o.duration>90)?((0,a.v)("CONTINUITY").info("Found last watched time",{currentTime:o.currentTime,duration:o.duration,episodeNumber:o.episodeNumber}),o.currentTime):0},v[0]=e,v[1]=null==h||null==(c=h.settings)||null==(d=c.library)?void 0:d.enableWatchContinuity,v[2]=y,v[3]=m):m=v[3];let S=m;return v[4]!==S||v[5]!==x||v[6]!==y?(p={watchHistory:y,waitForWatchHistory:x,getEpisodeContinuitySeekTo:S},v[4]=S,v[5]=x,v[6]=y,v[7]=p):p=v[7],p}},92161:(e,n,t)=>{"use strict";t.d(n,{F5:()=>u,Wr:()=>s,kL:()=>r,rz:()=>a,zw:()=>o});var l=t(42500),i=t(21842);let r=(0,i.tG)("sea-onlinestream-provider",null),o=(0,l.eU)(!1),a=(0,l.eU)(void 0),s=(0,i.tG)("sea-onlinestream-server",void 0),u=(0,i.tG)("sea-onlinestream-quality",void 0)}}]);