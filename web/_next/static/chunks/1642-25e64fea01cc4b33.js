"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1642],{31780:(e,t,n)=>{n.d(t,{Rg:()=>K,NL:()=>U,KY:()=>D,$w:()=>M});var s=n(95155),a=n(19749),r=n(76793),i=n(64742),o=n(45499),l=n(29724),c=n(12115);function d(){let e,t,n,d=(0,a.c)(13),{select:u,command:m,close:h}=M(),{command:f}=m,p=(0,l.Xr)(r.S1),g=(0,l.Xr)(r.LV),{handleCopyLatestLogs:x}=(0,i.h)();return d[0]!==f||d[1]!==x||d[2]!==u?(e="logs"===f&&(0,s.jsx)(o.L$,{heading:"Actions",children:(0,s.jsxs)(o.h_,{value:"Logs",onSelect:()=>{u(()=>{x()})},children:["Copy current server logs",(0,s.jsx)(o.Gg,{children:"Enter"})]})}),d[0]=f,d[1]=x,d[2]=u,d[3]=e):e=d[3],d[4]!==h||d[5]!==f||d[6]!==u||d[7]!==g||d[8]!==p?(t="issue"===f&&(0,s.jsx)(o.L$,{heading:"Actions",children:(0,s.jsxs)(o.h_,{value:"Issue",onSelect:()=>{u(()=>{h(),c.startTransition(()=>{p(!0),setTimeout(()=>{g(!0)},500)})})},children:["Record an issue",(0,s.jsx)(o.Gg,{children:"Enter"})]})}),d[4]=h,d[5]=f,d[6]=u,d[7]=g,d[8]=p,d[9]=t):t=d[9],d[10]!==e||d[11]!==t?(n=(0,s.jsxs)(s.Fragment,{children:[e,t]}),d[10]=e,d[11]=t,d[12]=n):n=d[12],n}var u=n(42094),m=n(38900),h=n(37817),f=n(2091),p=n(14370),g=n(35089),x=n(6066),j=n(53647);function S(){(0,h.v1)();let{input:e,select:t,scrollToTop:n,commandListRef:a,command:{isCommand:r,command:i,args:l}}=M(),d=(0,x.useRouter)(),S=l.join(" "),y=l.slice(1).join(" "),w="manga"!==l[0]?"anime":"manga",v=(0,p.d)("anime"===w?S:y,500),{data:b,isLoading:L,isFetching:N}=(0,u.qN)({search:v,page:1,perPage:10,status:["FINISHED","CANCELLED","NOT_YET_RELEASED","RELEASING"],sort:["SEARCH_MATCH"]},v.length>0&&"anime"===w),{data:_,isLoading:T,isFetching:E}=(0,m.cE)({search:v,page:1,perPage:10,status:["FINISHED","CANCELLED","NOT_YET_RELEASED","RELEASING"],sort:["SEARCH_MATCH"]},v.length>0&&"manga"===w),C="anime"===w?L:T,O="anime"===w?N:E,R=c.useMemo(()=>{var e,t,n,s;return"anime"===w?null==b||null==(t=b.Page)||null==(e=t.media)?void 0:e.filter(Boolean):null==_||null==(s=_.Page)||null==(n=s.media)?void 0:n.filter(Boolean)},[b,_,w]);return c.useEffect(()=>{let e=n();return()=>e()},[e,C,O]),(0,s.jsx)(s.Fragment,{children:""===S&&""===y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.vF,{command:"/search [title]",description:"Search anime",show:!0}),(0,s.jsx)(j.vF,{command:"/search manga [title]",description:"Search manga",show:!0})]}):(0,s.jsxs)(o.L$,{heading:"".concat("anime"===w?"Anime":"Manga"," results"),children:[""!==v&&(!R||0===R.length)&&(C||O)&&(0,s.jsx)(f.kt,{}),""!==v&&!C&&!O&&(!R||0===R.length)&&(0,s.jsxs)("div",{className:"py-14 px-6 text-center text-sm sm:px-14",children:[(0,s.jsx)("div",{className:"h-[10rem] w-[10rem] mx-auto flex-none rounded-[--radius-md] object-cover object-center relative overflow-hidden",children:(0,s.jsx)(g.default,{src:"/luffy-01.png",alt:"",fill:!0,quality:100,priority:!0,sizes:"10rem",className:"object-contain object-top"})}),(0,s.jsx)("h5",{className:"mt-4 font-semibold text-[--foreground]",children:"Nothing found"}),(0,s.jsx)("p",{className:"mt-2 text-[--muted]",children:"We couldn't find anything with that name. Please try again."})]}),null==R?void 0:R.map(e=>(0,s.jsx)(o.h_,{onSelect:()=>{t(()=>{"anime"===w?d.push("/entry?id=".concat(e.id)):d.push("/manga/entry?id=".concat(e.id))})},children:(0,s.jsx)(j.pz,{media:e})},(null==e?void 0:e.id)||""))]})})}var y=n(66873),w=n(42500),v=n(21842),b=n(4573),L=n.n(b);function N(e){let t,n=(0,a.c)(3),{shouldShow:s,render:r}=e,i=M();return s(i)?(n[0]!==i||n[1]!==r?(t=r(i),n[0]=i,n[1]=r,n[2]=t):t=n[2],t):null}var _=n(83563);function T(){let e=M(),{input:t,select:n,scrollToTop:a}=e,{injectables:r}=(0,_.H)(),i=c.useMemo(()=>{let n={};return Object.values(r).forEach(s=>{var a;(null==(a=s.shouldShow)?void 0:a.call(s,{ctx:e}))===!1||!s.isCommand&&t.startsWith("/")||s.items.filter(t=>{var n,s;return null==(s=null==(n=t.shouldShow)?void 0:n.call(t,{ctx:e}))||s}).filter(e=>{var n,a;return null==(a=null==(n=s.filter)?void 0:n.call(s,{item:e,input:t}))||a}).filter(e=>"includes"===e.showBasedOnInput?e.value.toLowerCase().includes(t.toLowerCase()):"startsWith"!==e.showBasedOnInput||e.value.toLowerCase().startsWith(t.toLowerCase())).filter(e=>"includes"===s.showBasedOnInput?e.value.toLowerCase().includes(t.toLowerCase()):"startsWith"!==e.showBasedOnInput||e.value.toLowerCase().startsWith(t.toLowerCase())).forEach(e=>{let t=e.heading||"Custom";n[t]||(n[t]=[]),n[t].push(e)})}),Object.keys(n).forEach(e=>{n[e].sort((e,t)=>(t.priority||0)-(e.priority||0))}),a(),n},[r,t]);return 0===Object.keys(i).length?null:(0,s.jsx)(s.Fragment,{children:Object.entries(i).map(t=>{let[a,r]=t;return(0,s.jsx)(o.L$,{heading:a,children:r.map(t=>(0,s.jsx)(o.h_,{value:t.id,onSelect:()=>{n(()=>t.onSelect({ctx:e}))},className:"gap-3",children:t.render()},t.id))},a)})})}function E(){let e,t,n=(0,a.c)(5),{setInput:r,command:i}=M(),{command:l}=i;n[0]!==l?(e=[{command:"anime",description:"Find in your collection",show:!0},{command:"manga",description:"Find in your collection",show:!0},{command:"search",description:"Search on AniList",show:!0},{command:"logs",description:"Copy the current logs",show:!0},{command:"issue",description:"Record an issue",show:!0}].filter(e=>e.show&&e.command.startsWith(l)&&e.command!=l),n[0]=l,n[1]=e):e=n[1];let c=e;return(null==c?void 0:c.length)?(n[2]!==c||n[3]!==r?(t=(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(o.L$,{heading:"Autocomplete",children:c.map(e=>(0,s.jsxs)(o.h_,{onSelect:()=>{r("/".concat(e.command))},children:[(0,s.jsxs)("span",{className:"tracking-widest text-sm",children:["/",e.command]}),(0,s.jsx)(o.Gg,{className:"text-[--muted]",children:e.description})]},e.command))})}),n[2]=c,n[3]=r,n[4]=t):t=n[4],t):null}var C=n(70376);function O(){var e,t,n,r,i,l,c,d,h,f,p;let g,S=(0,a.c)(4),{select:w,command:v}=M(),{command:b,args:L}=v,{data:N}=(0,u.u)(),{data:_}=(0,m.QJ)(),T=null!=(f=null==N||null==(i=N.MediaListCollection)||null==(r=i.lists)||null==(n=r.flatMap(F))||null==(t=n.filter(Boolean))||null==(e=t.map(k))?void 0:e.filter(Boolean))?f:[],E=null!=(p=null==_||null==(h=_.lists)||null==(d=h.flatMap(A))||null==(c=d.filter(Boolean))||null==(l=c.map(R))?void 0:l.filter(Boolean))?p:[],C=(0,x.useRouter)(),O=L.join(" "),I="anime"===b&&O.length>0?T.filter(e=>(0,y.q)(e.title,O)):[],q="manga"===b&&O.length>0?E.filter(e=>(0,y.q)(e.title,O)):[],U=0===O.length&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.vF,{command:"/anime [title]",description:"Find anime in your collection",show:"anime"===b}),(0,s.jsx)(j.vF,{command:"/manga [title]",description:"Find manga in your collection",show:"manga"===b}),(0,s.jsx)(j.vF,{command:"/library [title]",description:"Find anime in your library",show:"library"===b})]}),G="anime"===b&&I.length>0&&(0,s.jsx)(o.L$,{heading:"My anime",children:I.map(e=>(0,s.jsx)(o.h_,{onSelect:()=>{w(()=>{C.push("/entry?id=".concat(e.id))})},children:(0,s.jsx)(j.pz,{media:e})},e.id))}),P="manga"===b&&q.length>0&&(0,s.jsx)(o.L$,{heading:"My manga",children:q.map(e=>(0,s.jsx)(o.h_,{onSelect:()=>{w(()=>{C.push("/manga/entry?id=".concat(e.id))})},children:(0,s.jsx)(j.pz,{media:e})},e.id))});return S[0]!==U||S[1]!==G||S[2]!==P?(g=(0,s.jsxs)(s.Fragment,{children:[U,G,P]}),S[0]=U,S[1]=G,S[2]=P,S[3]=g):g=S[3],g}function R(e){return e.media}function A(e){return null==e?void 0:e.entries}function k(e){return e.media}function F(e){return null==e?void 0:e.entries}function I(){let e,t,n,r,i,l,c=(0,a.c)(28),d=(0,h.v1)(),{select:u,command:m}=M(),{isCommand:f,command:p,args:g}=m,j=(0,x.useRouter)(),S=!(null==d?void 0:d.isOffline);c[0]!==p||c[1]!==(null==d?void 0:d.isOffline)||c[2]!==S?(e=[{name:"My library",href:"/",flag:"library",show:S},{name:"Schedule",href:"/schedule",flag:"schedule",show:!(null==d?void 0:d.isOffline)},{name:"Settings",href:"/settings",flag:"settings",show:!(null==d?void 0:d.isOffline)},{name:"Manga",href:"/manga",flag:"manga",show:!(null==d?void 0:d.isOffline)},{name:"Discover",href:"/discover",flag:"discover",show:!(null==d?void 0:d.isOffline)},{name:"AniList",href:"/anilist",flag:"anilist",show:!(null==d?void 0:d.isOffline)},{name:"Auto Downloader",href:"/auto-downloader",flag:"auto-downloader",show:!(null==d?void 0:d.isOffline)},{name:"Torrent list",href:"/torrent-list",flag:"torrent-list",show:!(null==d?void 0:d.isOffline)},{name:"Scan summaries",href:"/scan-summaries",flag:"scan-summaries",show:!(null==d?void 0:d.isOffline)},{name:"Extensions",href:"/extensions",flag:"extensions",show:!(null==d?void 0:d.isOffline)},{name:"Advanced search",href:"/search",flag:"search",show:!(null==d?void 0:d.isOffline)}].filter(e=>e.flag.startsWith(p)),c[0]=p,c[1]=null==d?void 0:d.isOffline,c[2]=S,c[3]=e):e=c[3];let y=e;return c[4]!==p||c[5]!==j||c[6]!==u?(t=p.startsWith("ba")&&(0,s.jsx)(o.L$,{heading:"Navigation",children:(0,s.jsxs)(o.h_,{onSelect:()=>{u(()=>{j.back()})},children:[(0,s.jsx)(C.OLK,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Go back"})]})}),c[4]=p,c[5]=j,c[6]=u,c[7]=t):t=c[7],c[8]!==p||c[9]!==j||c[10]!==u?(n=p.startsWith("fo")&&(0,s.jsx)(o.L$,{heading:"Navigation",children:(0,s.jsxs)(o.h_,{onSelect:()=>{u(()=>{j.forward()})},children:[(0,s.jsx)(C.OLK,{className:"mr-2 h-4 w-4 rotate-180"}),(0,s.jsx)("span",{children:"Go forward"})]})}),c[8]=p,c[9]=j,c[10]=u,c[11]=n):n=c[11],c[12]!==g||c[13]!==p||c[14]!==y||c[15]!==f||c[16]!==j||c[17]!==u?(r=f&&y.length>0&&0===g.length&&(0,s.jsx)(o.L$,{heading:"Screens",children:(0,s.jsx)(s.Fragment,{children:y.filter(q).map(e=>(0,s.jsxs)(o.h_,{onSelect:()=>{u(()=>{j.push(e.href)})},children:[(0,s.jsx)("span",{className:"text-sm tracking-wide font-bold text-[--muted]",children:"Go to:\xa0"})," ",e.name,p===e.flag?(0,s.jsx)(o.Gg,{children:"Enter"}):(0,s.jsxs)(o.Gg,{children:["/",e.flag]})]},e.flag))})}),c[12]=g,c[13]=p,c[14]=y,c[15]=f,c[16]=j,c[17]=u,c[18]=r):r=c[18],c[19]!==p||c[20]!==j||c[21]!==u?(i="back"!==p&&"forward"!==p&&(0,s.jsx)(o.L$,{heading:"Navigation",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.h_,{onSelect:()=>{u(()=>{j.back()})},children:[(0,s.jsx)(C.OLK,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Go back"})]}),(0,s.jsxs)(o.h_,{onSelect:()=>{u(()=>{j.forward()})},children:[(0,s.jsx)(C.OLK,{className:"mr-2 h-4 w-4 rotate-180"}),(0,s.jsx)("span",{children:"Go forward"})]})]})}),c[19]=p,c[20]=j,c[21]=u,c[22]=i):i=c[22],c[23]!==t||c[24]!==n||c[25]!==r||c[26]!==i?(l=(0,s.jsxs)(s.Fragment,{children:[t,n,r,i]}),c[23]=t,c[24]=n,c[25]=r,c[26]=i,c[27]=l):l=c[27],l}function q(e){return e.show}let U=(0,v.tG)("sea-command-shortcuts",["meta+j","q"],void 0,{getOnInit:!0}),G=c.createContext({input:"",setInput:()=>{},resetInput:()=>{},close:()=>{},select:()=>{},command:{command:"",isCommand:!1,args:[]},scrollToTop:()=>()=>{},commandListRef:c.createRef(),router:{pathname:""}});function M(){return c.useContext(G)}let P=(0,w.eU)(!1);function D(){let e,t=(0,a.c)(2),n=(0,l.Xr)(P);return t[0]!==n?(e={setSeaCommandOpen:n},t[0]=n,t[1]=e):e=t[1],e}function K(){let e,t,n,r,i,d,u,m,h,f,p,g,j,S,w,v,b,_,T,E=(0,a.c)(40);(0,x.useRouter)();let C=(0,x.usePathname)(),[O,R]=(0,l.fp)(P),[A,k]=c.useState(""),[F,I]=c.useState(""),[q]=(0,l.fp)(U),M=(0,y.P)(A);E[0]!==R||E[1]!==q?(e=()=>(L().bind(q,()=>{k(""),c.startTransition(()=>{R(!0)})}),()=>{L().unbind(q)}),E[0]=R,E[1]=q,E[2]=e):e=E[2],E[3]!==q?(t=[q],E[3]=q,E[4]=t):t=E[4],c.useEffect(e,t),E[5]!==O?(n=()=>{O||k("")},r=[O],E[5]=O,E[6]=n,E[7]=r):(n=E[6],r=E[7]),c.useEffect(n,r),E[8]!==R?(i=()=>(L().bind(["s"],()=>{R(!0),c.startTransition(()=>{setTimeout(()=>{k("/search ")},100)})}),en),E[8]=R,E[9]=i):i=E[9],E[10]===Symbol.for("react.memo_cache_sentinel")?(d=[],E[10]=d):d=E[10],c.useEffect(i,d);let D=c.useRef(null);E[11]===Symbol.for("react.memo_cache_sentinel")?(u=function(){let e=D.current;if(!e)return et;let t=setTimeout(()=>{e.scrollTop=0;let t=e.querySelector("[cmdk-item]");if(t){let e=t.getAttribute("data-value");e&&I(e)}},100);return()=>clearTimeout(t)},E[11]=u):u=E[11];let K=u;return E[12]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{let e=K();return()=>e()},E[12]=m):m=E[12],E[13]!==A||E[14]!==C?(h=[A,C],E[13]=A,E[14]=C,E[15]=h):h=E[15],c.useEffect(m,h),E[16]===Symbol.for("react.memo_cache_sentinel")?(f=()=>k(""),E[16]=f):f=E[16],E[17]!==R?(p=()=>{c.startTransition(()=>{R(!1)})},E[17]=R,E[18]=p):p=E[18],E[19]===Symbol.for("react.memo_cache_sentinel")?(g=e=>{null==e||e(),k("")},E[19]=g):g=E[19],E[20]!==C?(j={pathname:C},E[20]=C,E[21]=j):j=E[21],E[22]!==A||E[23]!==M||E[24]!==p||E[25]!==j?(S={input:A,setInput:k,resetInput:f,close:p,select:g,scrollToTop:K,command:M,commandListRef:D,router:j},E[22]=A,E[23]=M,E[24]=p,E[25]=j,E[26]=S):S=E[26],E[27]!==F?(w={value:F,onValueChange:I},E[27]=F,E[28]=w):w=E[28],E[29]!==A?(v=(0,s.jsx)(o.G7,{placeholder:"Type a command or input...",value:A,onValueChange:k}),E[29]=A,E[30]=v):v=E[30],E[31]===Symbol.for("react.memo_cache_sentinel")?(b=(0,s.jsxs)(o.oI,{className:"mb-2",ref:D,children:[(0,s.jsx)(N,{shouldShow:ee,render:Z}),(0,s.jsx)(N,{shouldShow:Y,render:Q}),(0,s.jsx)(N,{shouldShow:V,render:J}),(0,s.jsx)(N,{shouldShow:X,render:z}),(0,s.jsx)(N,{shouldShow:B,render:$}),(0,s.jsx)(N,{shouldShow:W,render:H})]}),E[31]=b):b=E[31],E[32]!==O||E[33]!==R||E[34]!==w||E[35]!==v?(_=(0,s.jsxs)(o.Gj,{open:O,onOpenChange:R,commandProps:w,overlayClass:"bg-black/30",contentClass:"max-w-2xl",commandClass:"h-[300px]",children:[v,b]}),E[32]=O,E[33]=R,E[34]=w,E[35]=v,E[36]=_):_=E[36],E[37]!==S||E[38]!==_?(T=(0,s.jsx)(G.Provider,{value:S,children:_}),E[37]=S,E[38]=_,E[39]=T):T=E[39],T}function H(){return(0,s.jsx)(I,{})}function W(){return!0}function $(){return(0,s.jsx)(E,{})}function B(e){return e.input.startsWith("/")}function z(){return(0,s.jsx)(T,{})}function X(){return!0}function J(){return(0,s.jsx)(d,{})}function V(e){return"logs"===e.command.command||"issue"===e.command.command}function Q(){return(0,s.jsx)(O,{})}function Y(e){return"anime"===e.command.command||"manga"===e.command.command}function Z(){return(0,s.jsx)(S,{})}function ee(e){return"search"===e.command.command}function et(){}function en(){L().unbind(["s"])}},53647:(e,t,n)=>{n.d(t,{pz:()=>o,vF:()=>l});var s=n(95155),a=n(19749),r=n(35656);n(45499);var i=n(35089);function o(e){var t,n;let o,l,c,d,u=(0,a.c)(8),{media:m}=e,h=(null==(t=m.coverImage)?void 0:t.medium)||"";u[0]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.r)(700,475),u[0]=o):o=u[0],u[1]!==h?(l=(0,s.jsx)("div",{className:"size-12 flex-none rounded-[--radius-md] relative overflow-hidden",children:(0,s.jsx)(i.default,{src:h,alt:"episode image",fill:!0,className:"object-center object-cover",placeholder:o})}),u[1]=h,u[2]=l):l=u[2];let f=(null==m||null==(n=m.title)?void 0:n.userPreferred)||"";return u[3]!==f?(c=(0,s.jsx)("div",{className:"flex gap-1 items-center w-full",children:(0,s.jsx)("p",{className:"w-full line-clamp-1",children:f})}),u[3]=f,u[4]=c):c=u[4],u[5]!==l||u[6]!==c?(d=(0,s.jsxs)("div",{className:"flex gap-3 items-center",children:[l,c]}),u[5]=l,u[6]=c,u[7]=d):d=u[7],d}function l(e){let t,n,r,i=(0,a.c)(7),{command:o,description:l,show:c}=e;return c?(i[0]!==o?(t=(0,s.jsx)("span",{className:"text-[--foreground]",children:o}),i[0]=o,i[1]=t):t=i[1],i[2]!==l?(n=(0,s.jsx)("span",{className:"tracking-wide",children:l}),i[2]=l,i[3]=n):n=i[3],i[4]!==t||i[5]!==n?(r=(0,s.jsxs)("p",{className:"py-1 px-6 text-center text-sm sm:px-14 tracking-widest text-[--muted]",children:[t," ",n]}),i[4]=t,i[5]=n,i[6]=r):r=i[6],r):null}n(31780)},64742:(e,t,n)=>{n.d(t,{h:()=>r});var s=n(19749),a=n(86726);function r(){let e,t,n=(0,s.c)(4),{mutate:r}=(0,a.Oc)();n[0]!==r?(e=function(){r()},n[0]=r,n[1]=e):e=n[1];let i=e;return n[2]!==i?(t={handleCopyLatestLogs:i},n[2]=i,n[3]=t):t=n[3],t}},66873:(e,t,n)=>{function s(e){let[t,...n]=e.split(/\s+/);return{isCommand:e.startsWith("/"),command:t.slice(1),args:n}}function a(e,t){return!!e&&(!!e.english&&r(e.english).includes(r(t))||!!e.romaji&&r(e.romaji).includes(r(t)))}function r(e){return e.replace(/[^a-zA-Z0-9 ]/g,"").toLowerCase()}n.d(t,{P:()=>s,q:()=>a})},76793:(e,t,n)=>{n.d(t,{m7:()=>C,S1:()=>b,LV:()=>L});var s=n(95155),a=n(45886),r=n(19749),i=n(7675),o=n(74889);async function l(){}var c=n(84127),d=n(63352),u=n(91360),m=n(97400),h=n(43756),f=n(46278),p=n(42500),g=n(29724),x=n(6066),j=n(12115),S=n(70376),y=n(28002),w=n(64685),v=n(69554);let b=(0,p.eU)(!1),L=(0,p.eU)(!1);(0,p.eU)();let N=(0,p.eU)([]),_=(0,p.eU)([]),T=(0,p.eU)([]),E=(0,p.eU)([]);function C(){(0,x.useRouter)(),(0,x.usePathname)();let e=(0,f.jE)(),[t,n]=(0,g.fp)(b),[p,C]=(0,g.fp)(L),[O,R]=(0,g.fp)(_),[A,k]=(0,g.fp)(N),[F,I]=(0,g.fp)(T),[q,U]=(0,g.fp)(E),[G,M]=j.useState(!1),{mutate:P,isPending:D}=function(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:o.S.REPORT.SaveIssueReport.endpoint,method:o.S.REPORT.SaveIssueReport.methods[0],mutationKey:[o.S.REPORT.SaveIssueReport.key],onSuccess:l},t[0]=e):e=t[0],(0,i.qk)(e)}();return j.useEffect(()=>{t||C(!1)},[t]),j.useEffect(()=>{p||(R([]),k([]),I([]),U([]))},[p]),j.useEffect(()=>{if(!p)return;let e=e=>{let t=e.target;k(e=>{var n;return[...e,{pageUrl:window.location.href.replace(window.location.host,"{client}"),timestamp:new Date().toISOString(),element:t.tagName,className:JSON.stringify((null==(n=t.className)?void 0:n.length)&&t.className.length>50?t.className.slice(0,100)+"...":t.className),text:t.innerText}]})};return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}},[p]),j.useEffect(()=>{if(!p)return;let e={log:console.log,error:console.error,warn:console.warn},t=t=>function(){for(var n=arguments.length,s=Array(n),a=0;a<n;a++)s[a]=arguments[a];e[t](...s);try{R(e=>[...e,{type:t,pageUrl:window.location.href.replace(window.location.host,"{client}"),content:s.map(e=>"object"==typeof e?JSON.stringify(e):String(e)).join(" "),timestamp:new Date().toISOString()}])}catch(e){}};return console.log=t("log"),console.error=t("error"),console.warn=t("warn"),()=>{Object.assign(console,e)}},[p]),j.useEffect(()=>{if(p)return e.getQueryCache().subscribe(e=>{"pending"!==e.query.state.status&&U(t=>[...t,{type:"query",pageUrl:window.location.href.replace(window.location.host,"{client}"),status:e.query.state.status,hash:e.query.queryHash,error:e.query.state.error,timestamp:new Date().toISOString(),dataPreview:"object"==typeof e.query.state.data?JSON.stringify(e.query.state.data).slice(0,200):"",dataType:typeof e.query.state.data}])}),()=>{e.getMutationCache().subscribe(e=>{e.mutation&&"pending"!==e.mutation.state.status&&"idle"!==e.mutation.state.status&&U(t=>[...t,{type:"mutation",pageUrl:window.location.href.replace(window.location.host,"{client}"),status:e.mutation.state.status,hash:JSON.stringify(e.mutation.options.mutationKey),error:e.mutation.state.error,timestamp:new Date().toISOString(),dataPreview:"object"==typeof e.mutation.state.data?JSON.stringify(e.mutation.state.data).slice(0,200):"",dataType:typeof e.mutation.state.data}])})}},[p]),j.useEffect(()=>{if(!p)return;let e=XMLHttpRequest.prototype.open,t=XMLHttpRequest.prototype.send;return XMLHttpRequest.prototype.open=function(t,n){this._url=n,this._method=t,e.apply(this,arguments)},XMLHttpRequest.prototype.send=function(e){let n=Date.now(),s=this._url,a=this._method,r=new URL(s);r.host="{server}",r.port="",this.addEventListener("load",()=>{let t=Date.now()-n;I(n=>[...n,{type:"xhr",method:a,url:r.href,pageUrl:window.location.href.replace(window.location.host,"{client}"),status:this.status,duration:t,dataPreview:this.responseText.slice(0,200),timestamp:new Date().toISOString(),body:JSON.stringify(e)}])}),t.apply(this,arguments)},()=>{XMLHttpRequest.prototype.open=e,XMLHttpRequest.prototype.send=t}},[p]),(0,s.jsx)(s.Fragment,{children:t&&(0,s.jsx)("div",{className:(0,u.cn)("issue-reporter-ui","fixed z-[100] bottom-8 w-fit left-20 h-fit flex","transition-all duration-300 select-none",!p&&"hover:translate-y-[-2px]",p&&"justify-end"),children:(0,s.jsx)("div",{className:(0,u.cn)("p-4 bg-gray-900 border text-white rounded-xl","transition-colors duration-300",p&&"p-0 border-transparent bg-transparent"),children:p?(0,s.jsxs)("div",{className:"flex items-center justify-center gap-0",children:[(0,s.jsx)(m.m_,{trigger:(0,s.jsx)(c.K0,{intent:"alert",icon:(0,s.jsx)(y.Jh$,{className:"text-white animate-pulse"}),onClick:function(){C(!1),P({clickLogs:A,consoleLogs:O,networkLogs:F,reactQueryLogs:q,isAnimeLibraryIssue:G},{onSuccess:()=>{k([]),R([]),I([]),U([]),v.oR.success("Issue report saved successfully"),setTimeout(()=>{(0,h.A)((0,a.M)()+"/api/v1/report/issue/download")},1e3)}})}}),children:"Stop recording"}),(0,s.jsx)(m.m_,{trigger:(0,s.jsx)(c.K0,{intent:"white",size:"xs",icon:(0,s.jsx)(S.Gsv,{}),onClick:()=>C(!1)}),children:"Cancel"})]}):(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,s.jsx)(w.NWf,{className:"text-2xl text-[--brand]"}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("p",{children:"Issue recorder"}),(0,s.jsx)("p",{className:"text-[--muted] text-sm text-center",children:"Record your issue and generate a report"}),(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsx)(d.Sc,{label:"Anime library issue",value:G,onValueChange:e=>"boolean"==typeof e&&M(e),size:"sm"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-0",children:[(0,s.jsx)(m.m_,{trigger:(0,s.jsx)(c.K0,{intent:"gray-basic",icon:(0,s.jsx)(y.FLc,{className:"text-red-500"}),onClick:function(){C(!0)}}),children:"Start recording"}),(0,s.jsx)(m.m_,{trigger:(0,s.jsx)(c.K0,{intent:"gray-basic",icon:(0,s.jsx)(S.Gsv,{}),onClick:()=>n(!1)}),children:"Close"})]})]})})})})})}},86726:(e,t,n)=>{n.d(t,{Oc:()=>h,g5:()=>u,sh:()=>m,wy:()=>d});var s=n(19749),a=n(7675),r=n(74889),i=n(43756),o=n(46278),l=n(69554),c=n(38310);function d(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:r.S.STATUS.GetStatus.endpoint,method:r.S.STATUS.GetStatus.methods[0],queryKey:[r.S.STATUS.GetStatus.key],enabled:!0,retryDelay:1e3,retry:6,muteError:"desktop"===c.env.NEXT_PUBLIC_PLATFORM},t[0]=e):e=t[0],(0,a.fl)(e)}function u(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:r.S.STATUS.GetLogFilenames.endpoint,method:r.S.STATUS.GetLogFilenames.methods[0],queryKey:[r.S.STATUS.GetLogFilenames.key],enabled:!0},t[0]=e):e=t[0],(0,a.fl)(e)}function m(){let e,t,n=(0,s.c)(3),i=(0,o.jE)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[r.S.STATUS.DeleteLogs.key],n[0]=e):e=n[0],n[1]!==i?(t={endpoint:r.S.STATUS.DeleteLogs.endpoint,method:r.S.STATUS.DeleteLogs.methods[0],mutationKey:e,onSuccess:async()=>{await i.invalidateQueries({queryKey:[r.S.STATUS.GetLogFilenames.key]}),l.oR.success("Logs deleted")}},n[1]=i,n[2]=t):t=n[2],(0,a.qk)(t)}function h(){let e,t=(0,s.c)(1);return(0,o.jE)(),t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:r.S.STATUS.GetLatestLogContent.endpoint,method:r.S.STATUS.GetLatestLogContent.methods[0],mutationKey:[r.S.STATUS.GetLatestLogContent.key],onSuccess:f},t[0]=e):e=t[0],(0,a.qk)(e)}async function f(e){if(!e)return l.oR.error("Couldn't fetch logs");try{await (0,i.l)(e),l.oR.success("Copied to clipboard")}catch(e){console.error("Clipboard write error:",e),l.oR.error("Failed to copy logs: "+e.message)}}}}]);